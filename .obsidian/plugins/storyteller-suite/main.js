/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var LM=Object.create;var Mc=Object.defineProperty;var RM=Object.getOwnPropertyDescriptor;var BM=Object.getOwnPropertyNames;var GM=Object.getPrototypeOf,HM=Object.prototype.hasOwnProperty;var X=(t,n)=>()=>(t&&(n=t(t=0)),n);var wb=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports),Cn=(t,n)=>{for(var e in n)Mc(t,e,{get:n[e],enumerable:!0})},Sb=(t,n,e,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let s of BM(n))!HM.call(t,s)&&s!==e&&Mc(t,s,{get:()=>n[s],enumerable:!(r=RM(n,s))||r.enumerable});return t};var En=(t,n,e)=>(e=t!=null?LM(GM(t)):{},Sb(n||!t||!t.__esModule?Mc(e,"default",{value:t,enumerable:!0}):e,t)),_b=t=>Sb(Mc({},"__esModule",{value:!0}),t);var qi,Fc,$c,Nc,ai,oa,_t,oi,kn=X(()=>{qi=class extends Error{},Fc=class extends qi{constructor(n){super(`Invalid DateTime: ${n.toMessage()}`)}},$c=class extends qi{constructor(n){super(`Invalid Interval: ${n.toMessage()}`)}},Nc=class extends qi{constructor(n){super(`Invalid Duration: ${n.toMessage()}`)}},ai=class extends qi{},oa=class extends qi{constructor(n){super(`Invalid unit ${n}`)}},_t=class extends qi{},oi=class extends qi{constructor(){super("Zone is an abstract class")}}});var Z,li,Ir,Dn,Uo,Nf,jo,qo,Xo,Ko,Zo,Qo,Jo,el,tl,rl,il,nl,sl,al,Af,ol,ll,ul,cl,dl=X(()=>{Z="numeric",li="short",Ir="long",Dn={year:Z,month:Z,day:Z},Uo={year:Z,month:li,day:Z},Nf={year:Z,month:li,day:Z,weekday:li},jo={year:Z,month:Ir,day:Z},qo={year:Z,month:Ir,day:Z,weekday:Ir},Xo={hour:Z,minute:Z},Ko={hour:Z,minute:Z,second:Z},Zo={hour:Z,minute:Z,second:Z,timeZoneName:li},Qo={hour:Z,minute:Z,second:Z,timeZoneName:Ir},Jo={hour:Z,minute:Z,hourCycle:"h23"},el={hour:Z,minute:Z,second:Z,hourCycle:"h23"},tl={hour:Z,minute:Z,second:Z,hourCycle:"h23",timeZoneName:li},rl={hour:Z,minute:Z,second:Z,hourCycle:"h23",timeZoneName:Ir},il={year:Z,month:Z,day:Z,hour:Z,minute:Z},nl={year:Z,month:Z,day:Z,hour:Z,minute:Z,second:Z},sl={year:Z,month:li,day:Z,hour:Z,minute:Z},al={year:Z,month:li,day:Z,hour:Z,minute:Z,second:Z},Af={year:Z,month:li,day:Z,weekday:li,hour:Z,minute:Z},ol={year:Z,month:Ir,day:Z,hour:Z,minute:Z,timeZoneName:li},ll={year:Z,month:Ir,day:Z,hour:Z,minute:Z,second:Z,timeZoneName:li},ul={year:Z,month:Ir,day:Z,weekday:Ir,hour:Z,minute:Z,timeZoneName:Ir},cl={year:Z,month:Ir,day:Z,weekday:Ir,hour:Z,minute:Z,second:Z,timeZoneName:Ir}});var mr,vs=X(()=>{kn();mr=class{get type(){throw new oi}get name(){throw new oi}get ianaName(){return this.name}get isUniversal(){throw new oi}offsetName(n,e){throw new oi}formatOffset(n,e){throw new oi}offset(n){throw new oi}equals(n){throw new oi}get isValid(){throw new oi}}});var Lf,xi,Lc=X(()=>{or();vs();Lf=null,xi=class extends mr{static get instance(){return Lf===null&&(Lf=new xi),Lf}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(n,{format:e,locale:r}){return Rc(n,e,r)}formatOffset(n,e){return Pn(this.offset(n),e)}offset(n){return-new Date(n).getTimezoneOffset()}equals(n){return n.type==="system"}get isValid(){return!0}}});function WM(t){return Gc[t]||(Gc[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Gc[t]}function zM(t,n){let e=t.format(n).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(e),[,s,a,o,l,u,c,d]=r;return[o,s,a,l,u,c,d]}function VM(t,n){let e=t.formatToParts(n),r=[];for(let s=0;s<e.length;s++){let{type:a,value:o}=e[s],l=YM[a];a==="era"?r[l]=o:le(l)||(r[l]=parseInt(o,10))}return r}var Gc,YM,Bc,It,In=X(()=>{or();vs();Gc={};YM={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};Bc={},It=class extends mr{static create(n){return Bc[n]||(Bc[n]=new It(n)),Bc[n]}static resetCache(){Bc={},Gc={}}static isValidSpecifier(n){return this.isValidZone(n)}static isValidZone(n){if(!n)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:n}).format(),!0}catch(e){return!1}}constructor(n){super(),this.zoneName=n,this.valid=It.isValidZone(n)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(n,{format:e,locale:r}){return Rc(n,e,r,this.name)}formatOffset(n,e){return Pn(this.offset(n),e)}offset(n){let e=new Date(n);if(isNaN(e))return NaN;let r=WM(this.name),[s,a,o,l,u,c,d]=r.formatToParts?VM(r,e):zM(r,e);l==="BC"&&(s=-Math.abs(s)+1);let p=la({year:s,month:a,day:o,hour:u===24?0:u,minute:c,second:d,millisecond:0}),v=+e,y=v%1e3;return v-=y>=0?y:1e3+y,(p-v)/(60*1e3)}equals(n){return n.type==="iana"&&n.name===this.name}get isValid(){return this.valid}}});function UM(t,n={}){let e=JSON.stringify([t,n]),r=Tb[e];return r||(r=new Intl.ListFormat(t,n),Tb[e]=r),r}function Bf(t,n={}){let e=JSON.stringify([t,n]),r=Rf[e];return r||(r=new Intl.DateTimeFormat(t,n),Rf[e]=r),r}function jM(t,n={}){let e=JSON.stringify([t,n]),r=Gf[e];return r||(r=new Intl.NumberFormat(t,n),Gf[e]=r),r}function qM(t,n={}){let{base:e,...r}=n,s=JSON.stringify([t,r]),a=Hf[s];return a||(a=new Intl.RelativeTimeFormat(t,n),Hf[s]=a),a}function XM(){return hl||(hl=new Intl.DateTimeFormat().resolvedOptions().locale,hl)}function KM(t){let n=xb[t];if(!n){let e=new Intl.Locale(t);n="getWeekInfo"in e?e.getWeekInfo():e.weekInfo,xb[t]=n}return n}function ZM(t){let n=t.indexOf("-x-");n!==-1&&(t=t.substring(0,n));let e=t.indexOf("-u-");if(e===-1)return[t];{let r,s;try{r=Bf(t).resolvedOptions(),s=t}catch(l){let u=t.substring(0,e);r=Bf(u).resolvedOptions(),s=u}let{numberingSystem:a,calendar:o}=r;return[s,a,o]}}function QM(t,n,e){return(e||n)&&(t.includes("-u-")||(t+="-u"),e&&(t+=`-ca-${e}`),n&&(t+=`-nu-${n}`)),t}function JM(t){let n=[];for(let e=1;e<=12;e++){let r=J.utc(2009,e,1);n.push(t(r))}return n}function eF(t){let n=[];for(let e=1;e<=7;e++){let r=J.utc(2016,11,13+e);n.push(t(r))}return n}function Hc(t,n,e,r){let s=t.listingMode();return s==="error"?null:s==="en"?e(n):r(n)}function tF(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}var Tb,Rf,Gf,Hf,hl,xb,Wf,Yf,zf,rF,Ee,pl=X(()=>{or();zc();On();gs();In();Tb={};Rf={};Gf={};Hf={};hl=null;xb={};Wf=class{constructor(n,e,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;let{padTo:s,floor:a,...o}=r;if(!e||Object.keys(o).length>0){let l={useGrouping:!1,...r};r.padTo>0&&(l.minimumIntegerDigits=r.padTo),this.inf=jM(n,l)}}format(n){if(this.inf){let e=this.floor?Math.floor(n):n;return this.inf.format(e)}else{let e=this.floor?Math.floor(n):ua(n,3);return dt(e,this.padTo)}}},Yf=class{constructor(n,e,r){this.opts=r,this.originalZone=void 0;let s;if(this.opts.timeZone)this.dt=n;else if(n.zone.type==="fixed"){let o=-1*(n.offset/60),l=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;n.offset!==0&&It.create(l).valid?(s=l,this.dt=n):(s="UTC",this.dt=n.offset===0?n:n.setZone("UTC").plus({minutes:n.offset}),this.originalZone=n.zone)}else n.zone.type==="system"?this.dt=n:n.zone.type==="iana"?(this.dt=n,s=n.zone.name):(s="UTC",this.dt=n.setZone("UTC").plus({minutes:n.offset}),this.originalZone=n.zone);let a={...this.opts};a.timeZone=a.timeZone||s,this.dtf=Bf(e,a)}format(){return this.originalZone?this.formatToParts().map(({value:n})=>n).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){let n=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?n.map(e=>{if(e.type==="timeZoneName"){let r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...e,value:r}}else return e}):n}resolvedOptions(){return this.dtf.resolvedOptions()}},zf=class{constructor(n,e,r){this.opts={style:"long",...r},!e&&Wc()&&(this.rtf=qM(n,r))}format(n,e){return this.rtf?this.rtf.format(n,e):Cb(e,n,this.opts.numeric,this.opts.style!=="long")}formatToParts(n,e){return this.rtf?this.rtf.formatToParts(n,e):[]}},rF={firstDay:1,minimalDays:4,weekend:[6,7]},Ee=class{static fromOpts(n){return Ee.create(n.locale,n.numberingSystem,n.outputCalendar,n.weekSettings,n.defaultToEN)}static create(n,e,r,s,a=!1){let o=n||Ae.defaultLocale,l=o||(a?"en-US":XM()),u=e||Ae.defaultNumberingSystem,c=r||Ae.defaultOutputCalendar,d=fl(s)||Ae.defaultWeekSettings;return new Ee(l,u,c,d,o)}static resetCache(){hl=null,Rf={},Gf={},Hf={}}static fromObject({locale:n,numberingSystem:e,outputCalendar:r,weekSettings:s}={}){return Ee.create(n,e,r,s)}constructor(n,e,r,s,a){let[o,l,u]=ZM(n);this.locale=o,this.numberingSystem=e||l||null,this.outputCalendar=r||u||null,this.weekSettings=s,this.intl=QM(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=a,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=tF(this)),this.fastNumbersCached}listingMode(){let n=this.isEnglish(),e=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return n&&e?"en":"intl"}clone(n){return!n||Object.getOwnPropertyNames(n).length===0?this:Ee.create(n.locale||this.specifiedLocale,n.numberingSystem||this.numberingSystem,n.outputCalendar||this.outputCalendar,fl(n.weekSettings)||this.weekSettings,n.defaultToEN||!1)}redefaultToEN(n={}){return this.clone({...n,defaultToEN:!0})}redefaultToSystem(n={}){return this.clone({...n,defaultToEN:!1})}months(n,e=!1){return Hc(this,n,Vf,()=>{let r=e?{month:n,day:"numeric"}:{month:n},s=e?"format":"standalone";return this.monthsCache[s][n]||(this.monthsCache[s][n]=JM(a=>this.extract(a,r,"month"))),this.monthsCache[s][n]})}weekdays(n,e=!1){return Hc(this,n,Uf,()=>{let r=e?{weekday:n,year:"numeric",month:"long",day:"numeric"}:{weekday:n},s=e?"format":"standalone";return this.weekdaysCache[s][n]||(this.weekdaysCache[s][n]=eF(a=>this.extract(a,r,"weekday"))),this.weekdaysCache[s][n]})}meridiems(){return Hc(this,void 0,()=>jf,()=>{if(!this.meridiemCache){let n={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[J.utc(2016,11,13,9),J.utc(2016,11,13,19)].map(e=>this.extract(e,n,"dayperiod"))}return this.meridiemCache})}eras(n){return Hc(this,n,qf,()=>{let e={era:n};return this.eraCache[n]||(this.eraCache[n]=[J.utc(-40,1,1),J.utc(2017,1,1)].map(r=>this.extract(r,e,"era"))),this.eraCache[n]})}extract(n,e,r){let s=this.dtFormatter(n,e),a=s.formatToParts(),o=a.find(l=>l.type.toLowerCase()===r);return o?o.value:null}numberFormatter(n={}){return new Wf(this.intl,n.forceSimple||this.fastNumbers,n)}dtFormatter(n,e={}){return new Yf(n,this.intl,e)}relFormatter(n={}){return new zf(this.intl,this.isEnglish(),n)}listFormatter(n={}){return UM(this.intl,n)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Yc()?KM(this.locale):rF}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(n){return this.locale===n.locale&&this.numberingSystem===n.numberingSystem&&this.outputCalendar===n.outputCalendar}}});var Kf,ht,ca=X(()=>{or();vs();Kf=null,ht=class extends mr{static get utcInstance(){return Kf===null&&(Kf=new ht(0)),Kf}static instance(n){return n===0?ht.utcInstance:new ht(n)}static parseSpecifier(n){if(n){let e=n.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(e)return new ht(ys(e[1],e[2]))}return null}constructor(n){super(),this.fixed=n}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Pn(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Pn(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(n,e){return Pn(this.fixed,e)}get isUniversal(){return!0}offset(){return this.fixed}equals(n){return n.type==="fixed"&&n.fixed===this.fixed}get isValid(){return!0}}});var da,Zf=X(()=>{vs();da=class extends mr{constructor(n){super(),this.zoneName=n}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}});function ui(t,n){let e;if(le(t)||t===null)return n;if(t instanceof mr)return t;if(Eb(t)){let r=t.toLowerCase();return r==="default"?n:r==="local"||r==="system"?xi.instance:r==="utc"||r==="gmt"?ht.utcInstance:ht.parseSpecifier(r)||It.create(t)}else return Ci(t)?ht.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new da(t)}var Vc=X(()=>{vs();In();ca();Zf();or();Lc()});var kb,Db,Pb,Ib,Ob,Mb,Fb,$b,Ae,On=X(()=>{Lc();In();pl();Vc();or();kb=()=>Date.now(),Db="system",Pb=null,Ib=null,Ob=null,Mb=60,$b=null,Ae=class{static get now(){return kb}static set now(n){kb=n}static set defaultZone(n){Db=n}static get defaultZone(){return ui(Db,xi.instance)}static get defaultLocale(){return Pb}static set defaultLocale(n){Pb=n}static get defaultNumberingSystem(){return Ib}static set defaultNumberingSystem(n){Ib=n}static get defaultOutputCalendar(){return Ob}static set defaultOutputCalendar(n){Ob=n}static get defaultWeekSettings(){return $b}static set defaultWeekSettings(n){$b=fl(n)}static get twoDigitCutoffYear(){return Mb}static set twoDigitCutoffYear(n){Mb=n%100}static get throwOnInvalid(){return Fb}static set throwOnInvalid(n){Fb=n}static resetCaches(){Ee.resetCache(),It.resetCache()}}});var Lt,ml=X(()=>{Lt=class{constructor(n,e){this.reason=n,this.explanation=e}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}});function Ur(t,n){return new Lt("unit out of range",`you specified ${n} (of type ${typeof n}) as a ${t}, which is invalid`)}function Uc(t,n,e){let r=new Date(Date.UTC(t,n-1,e));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);let s=r.getUTCDay();return s===0?7:s}function Lb(t,n,e){return e+(ws(t)?Ab:Nb)[n-1]}function Rb(t,n){let e=ws(t)?Ab:Nb,r=e.findIndex(a=>a<n),s=n-e[r];return{month:r+1,day:s}}function jc(t,n){return(t-n+7)%7+1}function vl(t,n=4,e=1){let{year:r,month:s,day:a}=t,o=Lb(r,s,a),l=jc(Uc(r,s,a),e),u=Math.floor((o-l+14-n)/7),c;return u<1?(c=r-1,u=bs(c,n,e)):u>bs(r,n,e)?(c=r+1,u=1):c=r,{weekYear:c,weekNumber:u,weekday:l,...yl(t)}}function Qf(t,n=4,e=1){let{weekYear:r,weekNumber:s,weekday:a}=t,o=jc(Uc(r,1,n),e),l=Mn(r),u=s*7+a-o-7+n,c;u<1?(c=r-1,u+=Mn(c)):u>l?(c=r+1,u-=Mn(r)):c=r;let{month:d,day:f}=Rb(c,u);return{year:c,month:d,day:f,...yl(t)}}function qc(t){let{year:n,month:e,day:r}=t,s=Lb(n,e,r);return{year:n,ordinal:s,...yl(t)}}function Jf(t){let{year:n,ordinal:e}=t,{month:r,day:s}=Rb(n,e);return{year:n,month:r,day:s,...yl(t)}}function ep(t,n){if(!le(t.localWeekday)||!le(t.localWeekNumber)||!le(t.localWeekYear)){if(!le(t.weekday)||!le(t.weekNumber)||!le(t.weekYear))throw new ai("Cannot mix locale-based week fields with ISO-based week fields");return le(t.localWeekday)||(t.weekday=t.localWeekday),le(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),le(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:n.getMinDaysInFirstWeek(),startOfWeek:n.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function Bb(t,n=4,e=1){let r=gl(t.weekYear),s=Or(t.weekNumber,1,bs(t.weekYear,n,e)),a=Or(t.weekday,1,7);return r?s?a?!1:Ur("weekday",t.weekday):Ur("week",t.weekNumber):Ur("weekYear",t.weekYear)}function Gb(t){let n=gl(t.year),e=Or(t.ordinal,1,Mn(t.year));return n?e?!1:Ur("ordinal",t.ordinal):Ur("year",t.year)}function tp(t){let n=gl(t.year),e=Or(t.month,1,12),r=Or(t.day,1,ha(t.year,t.month));return n?e?r?!1:Ur("day",t.day):Ur("month",t.month):Ur("year",t.year)}function rp(t){let{hour:n,minute:e,second:r,millisecond:s}=t,a=Or(n,0,23)||n===24&&e===0&&r===0&&s===0,o=Or(e,0,59),l=Or(r,0,59),u=Or(s,0,999);return a?o?l?u?!1:Ur("millisecond",s):Ur("second",r):Ur("minute",e):Ur("hour",n)}var Nb,Ab,ip=X(()=>{or();ml();kn();Nb=[0,31,59,90,120,151,181,212,243,273,304,334],Ab=[0,31,60,91,121,152,182,213,244,274,305,335]});function le(t){return typeof t=="undefined"}function Ci(t){return typeof t=="number"}function gl(t){return typeof t=="number"&&t%1===0}function Eb(t){return typeof t=="string"}function Wb(t){return Object.prototype.toString.call(t)==="[object Date]"}function Wc(){try{return typeof Intl!="undefined"&&!!Intl.RelativeTimeFormat}catch(t){return!1}}function Yc(){try{return typeof Intl!="undefined"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch(t){return!1}}function Yb(t){return Array.isArray(t)?t:[t]}function np(t,n,e){if(t.length!==0)return t.reduce((r,s)=>{let a=[n(s),s];return r&&e(r[0],a[0])===r[0]?r:a},null)[1]}function zb(t,n){return n.reduce((e,r)=>(e[r]=t[r],e),{})}function Fn(t,n){return Object.prototype.hasOwnProperty.call(t,n)}function fl(t){if(t==null)return null;if(typeof t!="object")throw new _t("Week settings must be an object");if(!Or(t.firstDay,1,7)||!Or(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(n=>!Or(n,1,7)))throw new _t("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function Or(t,n,e){return gl(t)&&t>=n&&t<=e}function iF(t,n){return t-n*Math.floor(t/n)}function dt(t,n=2){let e=t<0,r;return e?r="-"+(""+-t).padStart(n,"0"):r=(""+t).padStart(n,"0"),r}function Xi(t){if(!(le(t)||t===null||t===""))return parseInt(t,10)}function $n(t){if(!(le(t)||t===null||t===""))return parseFloat(t)}function bl(t){if(!(le(t)||t===null||t==="")){let n=parseFloat("0."+t)*1e3;return Math.floor(n)}}function ua(t,n,e=!1){let r=10**n;return(e?Math.trunc:Math.round)(t*r)/r}function ws(t){return t%4===0&&(t%100!==0||t%400===0)}function Mn(t){return ws(t)?366:365}function ha(t,n){let e=iF(n-1,12)+1,r=t+(n-e)/12;return e===2?ws(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][e-1]}function la(t){let n=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(n=new Date(n),n.setUTCFullYear(t.year,t.month-1,t.day)),+n}function Hb(t,n,e){return-jc(Uc(t,1,n),e)+n-1}function bs(t,n=4,e=1){let r=Hb(t,n,e),s=Hb(t+1,n,e);return(Mn(t)-r+s)/7}function wl(t){return t>99?t:t>Ae.twoDigitCutoffYear?1900+t:2e3+t}function Rc(t,n,e,r=null){let s=new Date(t),a={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(a.timeZone=r);let o={timeZoneName:n,...a},l=new Intl.DateTimeFormat(e,o).formatToParts(s).find(u=>u.type.toLowerCase()==="timezonename");return l?l.value:null}function ys(t,n){let e=parseInt(t,10);Number.isNaN(e)&&(e=0);let r=parseInt(n,10)||0,s=e<0||Object.is(e,-0)?-r:r;return e*60+s}function sp(t){let n=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(n))throw new _t(`Invalid unit value ${t}`);return n}function fa(t,n){let e={};for(let r in t)if(Fn(t,r)){let s=t[r];if(s==null)continue;e[n(r)]=sp(s)}return e}function Pn(t,n){let e=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),s=t>=0?"+":"-";switch(n){case"short":return`${s}${dt(e,2)}:${dt(r,2)}`;case"narrow":return`${s}${e}${r>0?`:${r}`:""}`;case"techie":return`${s}${dt(e,2)}${dt(r,2)}`;default:throw new RangeError(`Value format ${n} is out of range for property format`)}}function yl(t){return zb(t,["hour","minute","second","millisecond"])}var or=X(()=>{kn();On();ip()});function Vf(t){switch(t){case"narrow":return[...sF];case"short":return[...ap];case"long":return[...nF];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}function Uf(t){switch(t){case"narrow":return[...aF];case"short":return[...lp];case"long":return[...op];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}function qf(t){switch(t){case"narrow":return[...uF];case"short":return[...lF];case"long":return[...oF];default:return null}}function Vb(t){return jf[t.hour<12?0:1]}function Ub(t,n){return Uf(n)[t.weekday-1]}function jb(t,n){return Vf(n)[t.month-1]}function qb(t,n){return qf(n)[t.year<0?0:1]}function Cb(t,n,e="always",r=!1){let s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},a=["hours","minutes","seconds"].indexOf(t)===-1;if(e==="auto"&&a){let f=t==="days";switch(n){case 1:return f?"tomorrow":`next ${s[t][0]}`;case-1:return f?"yesterday":`last ${s[t][0]}`;case 0:return f?"today":`this ${s[t][0]}`;default:}}let o=Object.is(n,-0)||n<0,l=Math.abs(n),u=l===1,c=s[t],d=r?u?c[1]:c[2]||c[1]:u?s[t][0]:t;return o?`${l} ${d} ago`:`in ${l} ${d}`}var nF,ap,sF,op,lp,aF,jf,oF,lF,uF,zc=X(()=>{dl();or();nF=["January","February","March","April","May","June","July","August","September","October","November","December"],ap=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],sF=["J","F","M","A","M","J","J","A","S","O","N","D"];op=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],lp=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],aF=["M","T","W","T","F","S","S"];jf=["AM","PM"],oF=["Before Christ","Anno Domini"],lF=["BC","AD"],uF=["B","A"]});function Xb(t,n){let e="";for(let r of t)r.literal?e+=r.val:e+=n(r.val);return e}var cF,ft,Sl=X(()=>{zc();dl();or();cF={D:Dn,DD:Uo,DDD:jo,DDDD:qo,t:Xo,tt:Ko,ttt:Zo,tttt:Qo,T:Jo,TT:el,TTT:tl,TTTT:rl,f:il,ff:sl,fff:ol,ffff:ul,F:nl,FF:al,FFF:ll,FFFF:cl},ft=class{static create(n,e={}){return new ft(n,e)}static parseFormat(n){let e=null,r="",s=!1,a=[];for(let o=0;o<n.length;o++){let l=n.charAt(o);l==="'"?(r.length>0&&a.push({literal:s||/^\s+$/.test(r),val:r}),e=null,r="",s=!s):s||l===e?r+=l:(r.length>0&&a.push({literal:/^\s+$/.test(r),val:r}),r=l,e=l)}return r.length>0&&a.push({literal:s||/^\s+$/.test(r),val:r}),a}static macroTokenToFormatOpts(n){return cF[n]}constructor(n,e){this.opts=e,this.loc=n,this.systemLoc=null}formatWithSystemDefault(n,e){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(n,{...this.opts,...e}).format()}dtFormatter(n,e={}){return this.loc.dtFormatter(n,{...this.opts,...e})}formatDateTime(n,e){return this.dtFormatter(n,e).format()}formatDateTimeParts(n,e){return this.dtFormatter(n,e).formatToParts()}formatInterval(n,e){return this.dtFormatter(n.start,e).dtf.formatRange(n.start.toJSDate(),n.end.toJSDate())}resolvedOptions(n,e){return this.dtFormatter(n,e).resolvedOptions()}num(n,e=0){if(this.opts.forceSimple)return dt(n,e);let r={...this.opts};return e>0&&(r.padTo=e),this.loc.numberFormatter(r).format(n)}formatDateTimeFromString(n,e){let r=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",a=(v,y)=>this.loc.extract(n,v,y),o=v=>n.isOffsetFixed&&n.offset===0&&v.allowZ?"Z":n.isValid?n.zone.formatOffset(n.ts,v.format):"",l=()=>r?Vb(n):a({hour:"numeric",hourCycle:"h12"},"dayperiod"),u=(v,y)=>r?jb(n,v):a(y?{month:v}:{month:v,day:"numeric"},"month"),c=(v,y)=>r?Ub(n,v):a(y?{weekday:v}:{weekday:v,month:"long",day:"numeric"},"weekday"),d=v=>{let y=ft.macroTokenToFormatOpts(v);return y?this.formatWithSystemDefault(n,y):v},f=v=>r?qb(n,v):a({era:v},"era"),p=v=>{switch(v){case"S":return this.num(n.millisecond);case"u":case"SSS":return this.num(n.millisecond,3);case"s":return this.num(n.second);case"ss":return this.num(n.second,2);case"uu":return this.num(Math.floor(n.millisecond/10),2);case"uuu":return this.num(Math.floor(n.millisecond/100));case"m":return this.num(n.minute);case"mm":return this.num(n.minute,2);case"h":return this.num(n.hour%12===0?12:n.hour%12);case"hh":return this.num(n.hour%12===0?12:n.hour%12,2);case"H":return this.num(n.hour);case"HH":return this.num(n.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return n.zone.offsetName(n.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return n.zone.offsetName(n.ts,{format:"long",locale:this.loc.locale});case"z":return n.zoneName;case"a":return l();case"d":return s?a({day:"numeric"},"day"):this.num(n.day);case"dd":return s?a({day:"2-digit"},"day"):this.num(n.day,2);case"c":return this.num(n.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(n.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return s?a({month:"numeric",day:"numeric"},"month"):this.num(n.month);case"LL":return s?a({month:"2-digit",day:"numeric"},"month"):this.num(n.month,2);case"LLL":return u("short",!0);case"LLLL":return u("long",!0);case"LLLLL":return u("narrow",!0);case"M":return s?a({month:"numeric"},"month"):this.num(n.month);case"MM":return s?a({month:"2-digit"},"month"):this.num(n.month,2);case"MMM":return u("short",!1);case"MMMM":return u("long",!1);case"MMMMM":return u("narrow",!1);case"y":return s?a({year:"numeric"},"year"):this.num(n.year);case"yy":return s?a({year:"2-digit"},"year"):this.num(n.year.toString().slice(-2),2);case"yyyy":return s?a({year:"numeric"},"year"):this.num(n.year,4);case"yyyyyy":return s?a({year:"numeric"},"year"):this.num(n.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(n.weekYear.toString().slice(-2),2);case"kkkk":return this.num(n.weekYear,4);case"W":return this.num(n.weekNumber);case"WW":return this.num(n.weekNumber,2);case"n":return this.num(n.localWeekNumber);case"nn":return this.num(n.localWeekNumber,2);case"ii":return this.num(n.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(n.localWeekYear,4);case"o":return this.num(n.ordinal);case"ooo":return this.num(n.ordinal,3);case"q":return this.num(n.quarter);case"qq":return this.num(n.quarter,2);case"X":return this.num(Math.floor(n.ts/1e3));case"x":return this.num(n.ts);default:return d(v)}};return Xb(ft.parseFormat(e),p)}formatDurationFromString(n,e){let r=u=>{switch(u[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=u=>c=>{let d=r(c);return d?this.num(u.get(d),c.length):c},a=ft.parseFormat(e),o=a.reduce((u,{literal:c,val:d})=>c?u:u.concat(d),[]),l=n.shiftTo(...o.map(r).filter(u=>u));return Xb(a,s(l))}}});function ma(...t){let n=t.reduce((e,r)=>e+r.source,"");return RegExp(`^${n}$`)}function va(...t){return n=>t.reduce(([e,r,s],a)=>{let[o,l,u]=a(n,s);return[{...e,...o},l||r,u]},[{},null,1]).slice(0,2)}function ga(t,...n){if(t==null)return[null,null];for(let[e,r]of n){let s=e.exec(t);if(s)return r(s)}return[null,null]}function Qb(...t){return(n,e)=>{let r={},s;for(s=0;s<t.length;s++)r[t[s]]=Xi(n[e+s]);return[r,null,e+s]}}function pa(t,n,e){let r=t[n];return le(r)?e:Xi(r)}function bF(t,n){return[{year:pa(t,n),month:pa(t,n+1,1),day:pa(t,n+2,1)},null,n+3]}function ya(t,n){return[{hours:pa(t,n,0),minutes:pa(t,n+1,0),seconds:pa(t,n+2,0),milliseconds:bl(t[n+3])},null,n+4]}function _l(t,n){let e=!t[n]&&!t[n+1],r=ys(t[n+1],t[n+2]),s=e?null:ht.instance(r);return[{},s,n+3]}function Tl(t,n){let e=t[n]?It.create(t[n]):null;return[{},e,n+1]}function _F(t){let[n,e,r,s,a,o,l,u,c]=t,d=n[0]==="-",f=u&&u[0]==="-",p=(v,y=!1)=>v!==void 0&&(y||v&&d)?-v:v;return[{years:p($n(e)),months:p($n(r)),weeks:p($n(s)),days:p($n(a)),hours:p($n(o)),minutes:p($n(l)),seconds:p($n(u),u==="-0"),milliseconds:p(bl(c),f)}]}function dp(t,n,e,r,s,a,o){let l={year:n.length===2?wl(Xi(n)):Xi(n),month:ap.indexOf(e)+1,day:Xi(r),hour:Xi(s),minute:Xi(a)};return o&&(l.second=Xi(o)),t&&(l.weekday=t.length>3?op.indexOf(t)+1:lp.indexOf(t)+1),l}function CF(t){let[,n,e,r,s,a,o,l,u,c,d,f]=t,p=dp(n,s,r,e,a,o,l),v;return u?v=TF[u]:c?v=0:v=ys(d,f),[p,new ht(v)]}function EF(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}function Kb(t){let[,n,e,r,s,a,o,l]=t;return[dp(n,s,r,e,a,o,l),ht.utcInstance]}function IF(t){let[,n,e,r,s,a,o,l]=t;return[dp(n,l,e,r,s,a,o),ht.utcInstance]}function iw(t){return ga(t,[OF,rw],[MF,NF],[FF,AF],[$F,LF])}function nw(t){return ga(EF(t),[xF,CF])}function sw(t){return ga(t,[kF,Kb],[DF,Kb],[PF,IF])}function aw(t){return ga(t,[SF,_F])}function ow(t){return ga(t,[wF,RF])}function lw(t){return ga(t,[BF,rw],[GF,HF])}var Zb,Jb,dF,up,ew,cp,hF,fF,pF,mF,vF,gF,tw,yF,wF,SF,TF,xF,kF,DF,PF,OF,MF,FF,$F,rw,NF,AF,LF,RF,BF,GF,HF,hp=X(()=>{or();zc();ca();In();Zb=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;Jb=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,dF=`(?:${Jb.source}?(?:\\[(${Zb.source})\\])?)?`,up=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,ew=RegExp(`${up.source}${dF}`),cp=RegExp(`(?:T${ew.source})?`),hF=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,fF=/(\d{4})-?W(\d\d)(?:-?(\d))?/,pF=/(\d{4})-?(\d{3})/,mF=Qb("weekYear","weekNumber","weekDay"),vF=Qb("year","ordinal"),gF=/(\d{4})-(\d\d)-(\d\d)/,tw=RegExp(`${up.source} ?(?:${Jb.source}|(${Zb.source}))?`),yF=RegExp(`(?: ${tw.source})?`);wF=RegExp(`^T?${up.source}$`),SF=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;TF={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};xF=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;kF=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,DF=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,PF=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;OF=ma(hF,cp),MF=ma(fF,cp),FF=ma(pF,cp),$F=ma(ew),rw=va(bF,ya,_l,Tl),NF=va(mF,ya,_l,Tl),AF=va(vF,ya,_l,Tl),LF=va(ya,_l,Tl);RF=va(ya);BF=ma(gF,yF),GF=ma(tw),HF=va(ya,_l,Tl)});function Nn(t,n,e=!1){let r={values:e?n.values:{...t.values,...n.values||{}},loc:t.loc.clone(n.loc),conversionAccuracy:n.conversionAccuracy||t.conversionAccuracy,matrix:n.matrix||t.matrix};return new _e(r)}function hw(t,n){var r;let e=(r=n.milliseconds)!=null?r:0;for(let s of zF.slice(1))n[s]&&(e+=n[s]*t[s].milliseconds);return e}function cw(t,n){let e=hw(t,n)<0?-1:1;Ss.reduceRight((r,s)=>{if(le(n[s]))return r;if(r){let a=n[r]*e,o=t[s][r],l=Math.floor(a/o);n[s]+=l*e,n[r]-=l*o*e}return s},null),Ss.reduce((r,s)=>{if(le(n[s]))return r;if(r){let a=n[r]%1;n[r]-=a,n[s]+=a*t[r][s]}return s},null)}function VF(t){let n={};for(let[e,r]of Object.entries(t))r!==0&&(n[e]=r);return n}var uw,dw,WF,jr,ba,YF,Ss,zF,_e,xl=X(()=>{kn();Sl();ml();pl();hp();or();On();gs();uw="Invalid Duration",dw={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},WF={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...dw},jr=146097/400,ba=146097/4800,YF={years:{quarters:4,months:12,weeks:jr/7,days:jr,hours:jr*24,minutes:jr*24*60,seconds:jr*24*60*60,milliseconds:jr*24*60*60*1e3},quarters:{months:3,weeks:jr/28,days:jr/4,hours:jr*24/4,minutes:jr*24*60/4,seconds:jr*24*60*60/4,milliseconds:jr*24*60*60*1e3/4},months:{weeks:ba/7,days:ba,hours:ba*24,minutes:ba*24*60,seconds:ba*24*60*60,milliseconds:ba*24*60*60*1e3},...dw},Ss=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],zF=Ss.slice(0).reverse();_e=class{constructor(n){let e=n.conversionAccuracy==="longterm"||!1,r=e?YF:WF;n.matrix&&(r=n.matrix),this.values=n.values,this.loc=n.loc||Ee.create(),this.conversionAccuracy=e?"longterm":"casual",this.invalid=n.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(n,e){return _e.fromObject({milliseconds:n},e)}static fromObject(n,e={}){if(n==null||typeof n!="object")throw new _t(`Duration.fromObject: argument expected to be an object, got ${n===null?"null":typeof n}`);return new _e({values:fa(n,_e.normalizeUnit),loc:Ee.fromObject(e),conversionAccuracy:e.conversionAccuracy,matrix:e.matrix})}static fromDurationLike(n){if(Ci(n))return _e.fromMillis(n);if(_e.isDuration(n))return n;if(typeof n=="object")return _e.fromObject(n);throw new _t(`Unknown duration argument ${n} of type ${typeof n}`)}static fromISO(n,e){let[r]=aw(n);return r?_e.fromObject(r,e):_e.invalid("unparsable",`the input "${n}" can't be parsed as ISO 8601`)}static fromISOTime(n,e){let[r]=ow(n);return r?_e.fromObject(r,e):_e.invalid("unparsable",`the input "${n}" can't be parsed as ISO 8601`)}static invalid(n,e=null){if(!n)throw new _t("need to specify a reason the Duration is invalid");let r=n instanceof Lt?n:new Lt(n,e);if(Ae.throwOnInvalid)throw new Nc(r);return new _e({invalid:r})}static normalizeUnit(n){let e={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[n&&n.toLowerCase()];if(!e)throw new oa(n);return e}static isDuration(n){return n&&n.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(n,e={}){let r={...e,floor:e.round!==!1&&e.floor!==!1};return this.isValid?ft.create(this.loc,r).formatDurationFromString(this,n):uw}toHuman(n={}){if(!this.isValid)return uw;let e=Ss.map(r=>{let s=this.values[r];return le(s)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...n,unit:r.slice(0,-1)}).format(s)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:n.listStyle||"narrow",...n}).format(e)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let n="P";return this.years!==0&&(n+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(n+=this.months+this.quarters*3+"M"),this.weeks!==0&&(n+=this.weeks+"W"),this.days!==0&&(n+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(n+="T"),this.hours!==0&&(n+=this.hours+"H"),this.minutes!==0&&(n+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(n+=ua(this.seconds+this.milliseconds/1e3,3)+"S"),n==="P"&&(n+="T0S"),n}toISOTime(n={}){if(!this.isValid)return null;let e=this.toMillis();return e<0||e>=864e5?null:(n={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...n,includeOffset:!1},J.fromMillis(e,{zone:"UTC"}).toISOTime(n))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?hw(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(n){if(!this.isValid)return this;let e=_e.fromDurationLike(n),r={};for(let s of Ss)(Fn(e.values,s)||Fn(this.values,s))&&(r[s]=e.get(s)+this.get(s));return Nn(this,{values:r},!0)}minus(n){if(!this.isValid)return this;let e=_e.fromDurationLike(n);return this.plus(e.negate())}mapUnits(n){if(!this.isValid)return this;let e={};for(let r of Object.keys(this.values))e[r]=sp(n(this.values[r],r));return Nn(this,{values:e},!0)}get(n){return this[_e.normalizeUnit(n)]}set(n){if(!this.isValid)return this;let e={...this.values,...fa(n,_e.normalizeUnit)};return Nn(this,{values:e})}reconfigure({locale:n,numberingSystem:e,conversionAccuracy:r,matrix:s}={}){let o={loc:this.loc.clone({locale:n,numberingSystem:e}),matrix:s,conversionAccuracy:r};return Nn(this,o)}as(n){return this.isValid?this.shiftTo(n).get(n):NaN}normalize(){if(!this.isValid)return this;let n=this.toObject();return cw(this.matrix,n),Nn(this,{values:n},!0)}rescale(){if(!this.isValid)return this;let n=VF(this.normalize().shiftToAll().toObject());return Nn(this,{values:n},!0)}shiftTo(...n){if(!this.isValid)return this;if(n.length===0)return this;n=n.map(o=>_e.normalizeUnit(o));let e={},r={},s=this.toObject(),a;for(let o of Ss)if(n.indexOf(o)>=0){a=o;let l=0;for(let c in r)l+=this.matrix[c][o]*r[c],r[c]=0;Ci(s[o])&&(l+=s[o]);let u=Math.trunc(l);e[o]=u,r[o]=(l*1e3-u*1e3)/1e3}else Ci(s[o])&&(r[o]=s[o]);for(let o in r)r[o]!==0&&(e[a]+=o===a?r[o]:r[o]/this.matrix[a][o]);return cw(this.matrix,e),Nn(this,{values:e},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;let n={};for(let e of Object.keys(this.values))n[e]=this.values[e]===0?0:-this.values[e];return Nn(this,{values:n},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(n){if(!this.isValid||!n.isValid||!this.loc.equals(n.loc))return!1;function e(r,s){return r===void 0||r===0?s===void 0||s===0:r===s}for(let r of Ss)if(!e(this.values[r],n.values[r]))return!1;return!0}}});function UF(t,n){return!t||!t.isValid?Je.invalid("missing or invalid start"):!n||!n.isValid?Je.invalid("missing or invalid end"):n<t?Je.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${n.toISO()}`):null}var wa,Je,fp=X(()=>{gs();xl();On();kn();ml();Sl();dl();wa="Invalid Interval";Je=class{constructor(n){this.s=n.start,this.e=n.end,this.invalid=n.invalid||null,this.isLuxonInterval=!0}static invalid(n,e=null){if(!n)throw new _t("need to specify a reason the Interval is invalid");let r=n instanceof Lt?n:new Lt(n,e);if(Ae.throwOnInvalid)throw new $c(r);return new Je({invalid:r})}static fromDateTimes(n,e){let r=Sa(n),s=Sa(e),a=UF(r,s);return a==null?new Je({start:r,end:s}):a}static after(n,e){let r=_e.fromDurationLike(e),s=Sa(n);return Je.fromDateTimes(s,s.plus(r))}static before(n,e){let r=_e.fromDurationLike(e),s=Sa(n);return Je.fromDateTimes(s.minus(r),s)}static fromISO(n,e){let[r,s]=(n||"").split("/",2);if(r&&s){let a,o;try{a=J.fromISO(r,e),o=a.isValid}catch(c){o=!1}let l,u;try{l=J.fromISO(s,e),u=l.isValid}catch(c){u=!1}if(o&&u)return Je.fromDateTimes(a,l);if(o){let c=_e.fromISO(s,e);if(c.isValid)return Je.after(a,c)}else if(u){let c=_e.fromISO(r,e);if(c.isValid)return Je.before(l,c)}}return Je.invalid("unparsable",`the input "${n}" can't be parsed as ISO 8601`)}static isInterval(n){return n&&n.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(n="milliseconds"){return this.isValid?this.toDuration(n).get(n):NaN}count(n="milliseconds",e){if(!this.isValid)return NaN;let r=this.start.startOf(n,e),s;return e!=null&&e.useLocaleWeeks?s=this.end.reconfigure({locale:r.locale}):s=this.end,s=s.startOf(n,e),Math.floor(s.diff(r,n).get(n))+(s.valueOf()!==this.end.valueOf())}hasSame(n){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,n):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(n){return this.isValid?this.s>n:!1}isBefore(n){return this.isValid?this.e<=n:!1}contains(n){return this.isValid?this.s<=n&&this.e>n:!1}set({start:n,end:e}={}){return this.isValid?Je.fromDateTimes(n||this.s,e||this.e):this}splitAt(...n){if(!this.isValid)return[];let e=n.map(Sa).filter(o=>this.contains(o)).sort((o,l)=>o.toMillis()-l.toMillis()),r=[],{s}=this,a=0;for(;s<this.e;){let o=e[a]||this.e,l=+o>+this.e?this.e:o;r.push(Je.fromDateTimes(s,l)),s=l,a+=1}return r}splitBy(n){let e=_e.fromDurationLike(n);if(!this.isValid||!e.isValid||e.as("milliseconds")===0)return[];let{s:r}=this,s=1,a,o=[];for(;r<this.e;){let l=this.start.plus(e.mapUnits(u=>u*s));a=+l>+this.e?this.e:l,o.push(Je.fromDateTimes(r,a)),r=a,s+=1}return o}divideEqually(n){return this.isValid?this.splitBy(this.length()/n).slice(0,n):[]}overlaps(n){return this.e>n.s&&this.s<n.e}abutsStart(n){return this.isValid?+this.e==+n.s:!1}abutsEnd(n){return this.isValid?+n.e==+this.s:!1}engulfs(n){return this.isValid?this.s<=n.s&&this.e>=n.e:!1}equals(n){return!this.isValid||!n.isValid?!1:this.s.equals(n.s)&&this.e.equals(n.e)}intersection(n){if(!this.isValid)return this;let e=this.s>n.s?this.s:n.s,r=this.e<n.e?this.e:n.e;return e>=r?null:Je.fromDateTimes(e,r)}union(n){if(!this.isValid)return this;let e=this.s<n.s?this.s:n.s,r=this.e>n.e?this.e:n.e;return Je.fromDateTimes(e,r)}static merge(n){let[e,r]=n.sort((s,a)=>s.s-a.s).reduce(([s,a],o)=>a?a.overlaps(o)||a.abutsStart(o)?[s,a.union(o)]:[s.concat([a]),o]:[s,o],[[],null]);return r&&e.push(r),e}static xor(n){let e=null,r=0,s=[],a=n.map(u=>[{time:u.s,type:"s"},{time:u.e,type:"e"}]),o=Array.prototype.concat(...a),l=o.sort((u,c)=>u.time-c.time);for(let u of l)r+=u.type==="s"?1:-1,r===1?e=u.time:(e&&+e!=+u.time&&s.push(Je.fromDateTimes(e,u.time)),e=null);return Je.merge(s)}difference(...n){return Je.xor([this].concat(n)).map(e=>this.intersection(e)).filter(e=>e&&!e.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:wa}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(n=Dn,e={}){return this.isValid?ft.create(this.s.loc.clone(e),n).formatInterval(this):wa}toISO(n){return this.isValid?`${this.s.toISO(n)}/${this.e.toISO(n)}`:wa}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:wa}toISOTime(n){return this.isValid?`${this.s.toISOTime(n)}/${this.e.toISOTime(n)}`:wa}toFormat(n,{separator:e=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(n)}${e}${this.e.toFormat(n)}`:wa}toDuration(n,e){return this.isValid?this.e.diff(this.s,n,e):_e.invalid(this.invalidReason)}mapEndpoints(n){return Je.fromDateTimes(n(this.s),n(this.e))}}});var Ki,pp=X(()=>{gs();On();pl();In();Vc();or();Ki=class{static hasDST(n=Ae.defaultZone){let e=J.now().setZone(n).set({month:12});return!n.isUniversal&&e.offset!==e.set({month:6}).offset}static isValidIANAZone(n){return It.isValidZone(n)}static normalizeZone(n){return ui(n,Ae.defaultZone)}static getStartOfWeek({locale:n=null,locObj:e=null}={}){return(e||Ee.create(n)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:n=null,locObj:e=null}={}){return(e||Ee.create(n)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:n=null,locObj:e=null}={}){return(e||Ee.create(n)).getWeekendDays().slice()}static months(n="long",{locale:e=null,numberingSystem:r=null,locObj:s=null,outputCalendar:a="gregory"}={}){return(s||Ee.create(e,r,a)).months(n)}static monthsFormat(n="long",{locale:e=null,numberingSystem:r=null,locObj:s=null,outputCalendar:a="gregory"}={}){return(s||Ee.create(e,r,a)).months(n,!0)}static weekdays(n="long",{locale:e=null,numberingSystem:r=null,locObj:s=null}={}){return(s||Ee.create(e,r,null)).weekdays(n)}static weekdaysFormat(n="long",{locale:e=null,numberingSystem:r=null,locObj:s=null}={}){return(s||Ee.create(e,r,null)).weekdays(n,!0)}static meridiems({locale:n=null}={}){return Ee.create(n).meridiems()}static eras(n="short",{locale:e=null}={}){return Ee.create(e,null,"gregory").eras(n)}static features(){return{relative:Wc(),localeWeek:Yc()}}}});function fw(t,n){let e=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=e(n)-e(t);return Math.floor(_e.fromMillis(r).as("days"))}function jF(t,n,e){let r=[["years",(u,c)=>c.year-u.year],["quarters",(u,c)=>c.quarter-u.quarter+(c.year-u.year)*4],["months",(u,c)=>c.month-u.month+(c.year-u.year)*12],["weeks",(u,c)=>{let d=fw(u,c);return(d-d%7)/7}],["days",fw]],s={},a=t,o,l;for(let[u,c]of r)e.indexOf(u)>=0&&(o=u,s[u]=c(t,n),l=a.plus(s),l>n?(s[u]--,t=a.plus(s),t>n&&(l=t,s[u]--,t=a.plus(s))):t=l);return[t,s,l,o]}function pw(t,n,e,r){let[s,a,o,l]=jF(t,n,e),u=n-s,c=e.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);c.length===0&&(o<n&&(o=s.plus({[l]:1})),o!==s&&(a[l]=(a[l]||0)+u/(o-s)));let d=_e.fromObject(a,r);return c.length>0?_e.fromMillis(u,r).shiftTo(...c).plus(d):d}var mw=X(()=>{xl()});function gw(t){let n=parseInt(t,10);if(isNaN(n)){n="";for(let e=0;e<t.length;e++){let r=t.charCodeAt(e);if(t[e].search(mp.hanidec)!==-1)n+=qF.indexOf(t[e]);else for(let s in vw){let[a,o]=vw[s];r>=a&&r<=o&&(n+=r-a)}}return parseInt(n,10)}else return n}function qr({numberingSystem:t},n=""){return new RegExp(`${mp[t||"latn"]}${n}`)}var mp,vw,qF,yw=X(()=>{mp={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},vw={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},qF=mp.hanidec.replace(/[\[|\]]/g,"").split("")});function Le(t,n=e=>e){return{regex:t,deser:([e])=>n(gw(e))}}function ZF(t){return t.replace(/\./g,"\\.?").replace(_w,Sw)}function bw(t){return t.replace(/\./g,"").replace(_w," ").toLowerCase()}function ci(t,n){return t===null?null:{regex:RegExp(t.map(ZF).join("|")),deser:([e])=>t.findIndex(r=>bw(e)===bw(r))+n}}function ww(t,n){return{regex:t,deser:([,e,r])=>ys(e,r),groups:n}}function Xc(t){return{regex:t,deser:([n])=>n}}function QF(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function JF(t,n){let e=qr(n),r=qr(n,"{2}"),s=qr(n,"{3}"),a=qr(n,"{4}"),o=qr(n,"{6}"),l=qr(n,"{1,2}"),u=qr(n,"{1,3}"),c=qr(n,"{1,6}"),d=qr(n,"{1,9}"),f=qr(n,"{2,4}"),p=qr(n,"{4,6}"),v=S=>({regex:RegExp(QF(S.val)),deser:([x])=>x,literal:!0}),_=(S=>{if(t.literal)return v(S);switch(S.val){case"G":return ci(n.eras("short"),0);case"GG":return ci(n.eras("long"),0);case"y":return Le(c);case"yy":return Le(f,wl);case"yyyy":return Le(a);case"yyyyy":return Le(p);case"yyyyyy":return Le(o);case"M":return Le(l);case"MM":return Le(r);case"MMM":return ci(n.months("short",!0),1);case"MMMM":return ci(n.months("long",!0),1);case"L":return Le(l);case"LL":return Le(r);case"LLL":return ci(n.months("short",!1),1);case"LLLL":return ci(n.months("long",!1),1);case"d":return Le(l);case"dd":return Le(r);case"o":return Le(u);case"ooo":return Le(s);case"HH":return Le(r);case"H":return Le(l);case"hh":return Le(r);case"h":return Le(l);case"mm":return Le(r);case"m":return Le(l);case"q":return Le(l);case"qq":return Le(r);case"s":return Le(l);case"ss":return Le(r);case"S":return Le(u);case"SSS":return Le(s);case"u":return Xc(d);case"uu":return Xc(l);case"uuu":return Le(e);case"a":return ci(n.meridiems(),0);case"kkkk":return Le(a);case"kk":return Le(f,wl);case"W":return Le(l);case"WW":return Le(r);case"E":case"c":return Le(e);case"EEE":return ci(n.weekdays("short",!1),1);case"EEEE":return ci(n.weekdays("long",!1),1);case"ccc":return ci(n.weekdays("short",!0),1);case"cccc":return ci(n.weekdays("long",!0),1);case"Z":case"ZZ":return ww(new RegExp(`([+-]${l.source})(?::(${r.source}))?`),2);case"ZZZ":return ww(new RegExp(`([+-]${l.source})(${r.source})?`),2);case"z":return Xc(/[a-z_+-/]{1,256}?/i);case" ":return Xc(/[^\S\n\r]/);default:return v(S)}})(t)||{invalidReason:XF};return _.token=t,_}function t$(t,n,e){let{type:r,value:s}=t;if(r==="literal"){let u=/^\s+$/.test(s);return{literal:!u,val:u?" ":s}}let a=n[r],o=r;r==="hour"&&(n.hour12!=null?o=n.hour12?"hour12":"hour24":n.hourCycle!=null?n.hourCycle==="h11"||n.hourCycle==="h12"?o="hour12":o="hour24":o=e.hour12?"hour12":"hour24");let l=e$[o];if(typeof l=="object"&&(l=l[a]),l)return{literal:!1,val:l}}function r$(t){return[`^${t.map(e=>e.regex).reduce((e,r)=>`${e}(${r.source})`,"")}$`,t]}function i$(t,n,e){let r=t.match(n);if(r){let s={},a=1;for(let o in e)if(Fn(e,o)){let l=e[o],u=l.groups?l.groups+1:1;!l.literal&&l.token&&(s[l.token.val[0]]=l.deser(r.slice(a,a+u))),a+=u}return[r,s]}else return[r,{}]}function n$(t){let n=a=>{switch(a){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}},e=null,r;return le(t.z)||(e=It.create(t.z)),le(t.Z)||(e||(e=new ht(t.Z)),r=t.Z),le(t.q)||(t.M=(t.q-1)*3+1),le(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),le(t.u)||(t.S=bl(t.u)),[Object.keys(t).reduce((a,o)=>{let l=n(o);return l&&(a[l]=t[o]),a},{}),e,r]}function s$(){return vp||(vp=J.fromMillis(1555555555555)),vp}function a$(t,n){if(t.literal)return t;let e=ft.macroTokenToFormatOpts(t.val),r=bp(e,n);return r==null||r.includes(void 0)?t:r}function gp(t,n){return Array.prototype.concat(...t.map(e=>a$(e,n)))}function yp(t,n,e){let r=gp(ft.parseFormat(e),t),s=r.map(o=>JF(o,t)),a=s.find(o=>o.invalidReason);if(a)return{input:n,tokens:r,invalidReason:a.invalidReason};{let[o,l]=r$(s),u=RegExp(o,"i"),[c,d]=i$(n,u,l),[f,p,v]=d?n$(d):[null,null,void 0];if(Fn(d,"a")&&Fn(d,"H"))throw new ai("Can't include meridiem when specifying 24-hour format");return{input:n,tokens:r,regex:u,rawMatches:c,matches:d,result:f,zone:p,specificOffset:v}}}function Tw(t,n,e){let{result:r,zone:s,specificOffset:a,invalidReason:o}=yp(t,n,e);return[r,s,a,o]}function bp(t,n){if(!t)return null;let r=ft.create(n,t).dtFormatter(s$()),s=r.formatToParts(),a=r.resolvedOptions();return s.map(o=>t$(o,t,a))}var XF,KF,Sw,_w,e$,vp,xw=X(()=>{or();Sl();ca();In();gs();yw();kn();XF="missing Intl.DateTimeFormat.formatToParts support";KF=String.fromCharCode(160),Sw=`[ ${KF}]`,_w=new RegExp(Sw,"g");e$={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};vp=null});function Kc(t){return new Lt("unsupported zone",`the zone "${t.name}" is not supported`)}function Sp(t){return t.weekData===null&&(t.weekData=vl(t.c)),t.weekData}function _p(t){return t.localWeekData===null&&(t.localWeekData=vl(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function _s(t,n){let e={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new J({...e,...n,old:e})}function Mw(t,n,e){let r=t-n*60*1e3,s=e.offset(r);if(n===s)return[r,n];r-=(s-n)*60*1e3;let a=e.offset(r);return s===a?[r,s]:[t-Math.min(s,a)*60*1e3,Math.max(s,a)]}function Zc(t,n){t+=n*60*1e3;let e=new Date(t);return{year:e.getUTCFullYear(),month:e.getUTCMonth()+1,day:e.getUTCDate(),hour:e.getUTCHours(),minute:e.getUTCMinutes(),second:e.getUTCSeconds(),millisecond:e.getUTCMilliseconds()}}function Jc(t,n,e){return Mw(la(t),n,e)}function Ew(t,n){let e=t.o,r=t.c.year+Math.trunc(n.years),s=t.c.month+Math.trunc(n.months)+Math.trunc(n.quarters)*3,a={...t.c,year:r,month:s,day:Math.min(t.c.day,ha(r,s))+Math.trunc(n.days)+Math.trunc(n.weeks)*7},o=_e.fromObject({years:n.years-Math.trunc(n.years),quarters:n.quarters-Math.trunc(n.quarters),months:n.months-Math.trunc(n.months),weeks:n.weeks-Math.trunc(n.weeks),days:n.days-Math.trunc(n.days),hours:n.hours,minutes:n.minutes,seconds:n.seconds,milliseconds:n.milliseconds}).as("milliseconds"),l=la(a),[u,c]=Mw(l,e,t.zone);return o!==0&&(u+=o,c=t.zone.offset(u)),{ts:u,o:c}}function Cl(t,n,e,r,s,a){let{setZone:o,zone:l}=e;if(t&&Object.keys(t).length!==0||n){let u=n||l,c=J.fromObject(t,{...e,zone:u,specificOffset:a});return o?c:c.setZone(l)}else return J.invalid(new Lt("unparsable",`the input "${s}" can't be parsed as ${r}`))}function Qc(t,n,e=!0){return t.isValid?ft.create(Ee.create("en-US"),{allowZ:e,forceSimple:!0}).formatDateTimeFromString(t,n):null}function Tp(t,n){let e=t.c.year>9999||t.c.year<0,r="";return e&&t.c.year>=0&&(r+="+"),r+=dt(t.c.year,e?6:4),n?(r+="-",r+=dt(t.c.month),r+="-",r+=dt(t.c.day)):(r+=dt(t.c.month),r+=dt(t.c.day)),r}function kw(t,n,e,r,s,a){let o=dt(t.c.hour);return n?(o+=":",o+=dt(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!e)&&(o+=":")):o+=dt(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!e)&&(o+=dt(t.c.second),(t.c.millisecond!==0||!r)&&(o+=".",o+=dt(t.c.millisecond,3))),s&&(t.isOffsetFixed&&t.offset===0&&!a?o+="Z":t.o<0?(o+="-",o+=dt(Math.trunc(-t.o/60)),o+=":",o+=dt(Math.trunc(-t.o%60))):(o+="+",o+=dt(Math.trunc(t.o/60)),o+=":",o+=dt(Math.trunc(t.o%60)))),a&&(o+="["+t.zone.ianaName+"]"),o}function d$(t){let n={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!n)throw new oa(t);return n}function Dw(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return d$(t)}}function Pw(t,n){let e=ui(n.zone,Ae.defaultZone),r=Ee.fromObject(n),s=Ae.now(),a,o;if(le(t.year))a=s;else{for(let c of $w)le(t[c])&&(t[c]=Fw[c]);let l=tp(t)||rp(t);if(l)return J.invalid(l);let u=e.offset(s);[a,o]=Jc(t,u,e)}return new J({ts:a,zone:e,loc:r,o})}function Iw(t,n,e){let r=le(e.round)?!0:e.round,s=(o,l)=>(o=ua(o,r||e.calendary?0:2,!0),n.loc.clone(e).relFormatter(e).format(o,l)),a=o=>e.calendary?n.hasSame(t,o)?0:n.startOf(o).diff(t.startOf(o),o).get(o):n.diff(t,o).get(o);if(e.unit)return s(a(e.unit),e.unit);for(let o of e.units){let l=a(o);if(Math.abs(l)>=1)return s(l,o)}return s(t>n?-0:0,e.units[e.units.length-1])}function Ow(t){let n={},e;return t.length>0&&typeof t[t.length-1]=="object"?(n=t[t.length-1],e=Array.from(t).slice(0,t.length-1)):e=Array.from(t),[n,e]}function Sa(t){if(J.isDateTime(t))return t;if(t&&t.valueOf&&Ci(t.valueOf()))return J.fromJSDate(t);if(t&&typeof t=="object")return J.fromObject(t);throw new _t(`Unknown datetime argument: ${t}, of type ${typeof t}`)}var wp,Cw,Fw,o$,l$,$w,u$,c$,J,gs=X(()=>{xl();fp();On();pp();Sl();ca();pl();or();Vc();mw();hp();xw();ip();dl();kn();ml();wp="Invalid DateTime",Cw=864e13;Fw={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},o$={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},l$={ordinal:1,hour:0,minute:0,second:0,millisecond:0},$w=["year","month","day","hour","minute","second","millisecond"],u$=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],c$=["year","ordinal","hour","minute","second","millisecond"];J=class{constructor(n){let e=n.zone||Ae.defaultZone,r=n.invalid||(Number.isNaN(n.ts)?new Lt("invalid input"):null)||(e.isValid?null:Kc(e));this.ts=le(n.ts)?Ae.now():n.ts;let s=null,a=null;if(!r)if(n.old&&n.old.ts===this.ts&&n.old.zone.equals(e))[s,a]=[n.old.c,n.old.o];else{let l=e.offset(this.ts);s=Zc(this.ts,l),r=Number.isNaN(s.year)?new Lt("invalid input"):null,s=r?null:s,a=r?null:l}this._zone=e,this.loc=n.loc||Ee.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=s,this.o=a,this.isLuxonDateTime=!0}static now(){return new J({})}static local(){let[n,e]=Ow(arguments),[r,s,a,o,l,u,c]=e;return Pw({year:r,month:s,day:a,hour:o,minute:l,second:u,millisecond:c},n)}static utc(){let[n,e]=Ow(arguments),[r,s,a,o,l,u,c]=e;return n.zone=ht.utcInstance,Pw({year:r,month:s,day:a,hour:o,minute:l,second:u,millisecond:c},n)}static fromJSDate(n,e={}){let r=Wb(n)?n.valueOf():NaN;if(Number.isNaN(r))return J.invalid("invalid input");let s=ui(e.zone,Ae.defaultZone);return s.isValid?new J({ts:r,zone:s,loc:Ee.fromObject(e)}):J.invalid(Kc(s))}static fromMillis(n,e={}){if(Ci(n))return n<-Cw||n>Cw?J.invalid("Timestamp out of range"):new J({ts:n,zone:ui(e.zone,Ae.defaultZone),loc:Ee.fromObject(e)});throw new _t(`fromMillis requires a numerical input, but received a ${typeof n} with value ${n}`)}static fromSeconds(n,e={}){if(Ci(n))return new J({ts:n*1e3,zone:ui(e.zone,Ae.defaultZone),loc:Ee.fromObject(e)});throw new _t("fromSeconds requires a numerical input")}static fromObject(n,e={}){n=n||{};let r=ui(e.zone,Ae.defaultZone);if(!r.isValid)return J.invalid(Kc(r));let s=Ee.fromObject(e),a=fa(n,Dw),{minDaysInFirstWeek:o,startOfWeek:l}=ep(a,s),u=Ae.now(),c=le(e.specificOffset)?r.offset(u):e.specificOffset,d=!le(a.ordinal),f=!le(a.year),p=!le(a.month)||!le(a.day),v=f||p,y=a.weekYear||a.weekNumber;if((v||d)&&y)throw new ai("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(p&&d)throw new ai("Can't mix ordinal dates with month/day");let _=y||a.weekday&&!v,S,x,D=Zc(u,c);_?(S=u$,x=o$,D=vl(D,o,l)):d?(S=c$,x=l$,D=qc(D)):(S=$w,x=Fw);let E=!1;for(let z of S){let U=a[z];le(U)?E?a[z]=x[z]:a[z]=D[z]:E=!0}let P=_?Bb(a,o,l):d?Gb(a):tp(a),O=P||rp(a);if(O)return J.invalid(O);let A=_?Qf(a,o,l):d?Jf(a):a,[M,I]=Jc(A,c,r),H=new J({ts:M,zone:r,o:I,loc:s});return a.weekday&&v&&n.weekday!==H.weekday?J.invalid("mismatched weekday",`you can't specify both a weekday of ${a.weekday} and a date of ${H.toISO()}`):H}static fromISO(n,e={}){let[r,s]=iw(n);return Cl(r,s,e,"ISO 8601",n)}static fromRFC2822(n,e={}){let[r,s]=nw(n);return Cl(r,s,e,"RFC 2822",n)}static fromHTTP(n,e={}){let[r,s]=sw(n);return Cl(r,s,e,"HTTP",e)}static fromFormat(n,e,r={}){if(le(n)||le(e))throw new _t("fromFormat requires an input string and a format");let{locale:s=null,numberingSystem:a=null}=r,o=Ee.fromOpts({locale:s,numberingSystem:a,defaultToEN:!0}),[l,u,c,d]=Tw(o,n,e);return d?J.invalid(d):Cl(l,u,r,`format ${e}`,n,c)}static fromString(n,e,r={}){return J.fromFormat(n,e,r)}static fromSQL(n,e={}){let[r,s]=lw(n);return Cl(r,s,e,"SQL",n)}static invalid(n,e=null){if(!n)throw new _t("need to specify a reason the DateTime is invalid");let r=n instanceof Lt?n:new Lt(n,e);if(Ae.throwOnInvalid)throw new Fc(r);return new J({invalid:r})}static isDateTime(n){return n&&n.isLuxonDateTime||!1}static parseFormatForOpts(n,e={}){let r=bp(n,Ee.fromObject(e));return r?r.map(s=>s?s.val:null).join(""):null}static expandFormat(n,e={}){return gp(ft.parseFormat(n),Ee.fromObject(e)).map(s=>s.val).join("")}get(n){return this[n]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Sp(this).weekYear:NaN}get weekNumber(){return this.isValid?Sp(this).weekNumber:NaN}get weekday(){return this.isValid?Sp(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?_p(this).weekday:NaN}get localWeekNumber(){return this.isValid?_p(this).weekNumber:NaN}get localWeekYear(){return this.isValid?_p(this).weekYear:NaN}get ordinal(){return this.isValid?qc(this.c).ordinal:NaN}get monthShort(){return this.isValid?Ki.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Ki.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Ki.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Ki.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];let n=864e5,e=6e4,r=la(this.c),s=this.zone.offset(r-n),a=this.zone.offset(r+n),o=this.zone.offset(r-s*e),l=this.zone.offset(r-a*e);if(o===l)return[this];let u=r-o*e,c=r-l*e,d=Zc(u,o),f=Zc(c,l);return d.hour===f.hour&&d.minute===f.minute&&d.second===f.second&&d.millisecond===f.millisecond?[_s(this,{ts:u}),_s(this,{ts:c})]:[this]}get isInLeapYear(){return ws(this.year)}get daysInMonth(){return ha(this.year,this.month)}get daysInYear(){return this.isValid?Mn(this.year):NaN}get weeksInWeekYear(){return this.isValid?bs(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?bs(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(n={}){let{locale:e,numberingSystem:r,calendar:s}=ft.create(this.loc.clone(n),n).resolvedOptions(this);return{locale:e,numberingSystem:r,outputCalendar:s}}toUTC(n=0,e={}){return this.setZone(ht.instance(n),e)}toLocal(){return this.setZone(Ae.defaultZone)}setZone(n,{keepLocalTime:e=!1,keepCalendarTime:r=!1}={}){if(n=ui(n,Ae.defaultZone),n.equals(this.zone))return this;if(n.isValid){let s=this.ts;if(e||r){let a=n.offset(this.ts),o=this.toObject();[s]=Jc(o,a,n)}return _s(this,{ts:s,zone:n})}else return J.invalid(Kc(n))}reconfigure({locale:n,numberingSystem:e,outputCalendar:r}={}){let s=this.loc.clone({locale:n,numberingSystem:e,outputCalendar:r});return _s(this,{loc:s})}setLocale(n){return this.reconfigure({locale:n})}set(n){if(!this.isValid)return this;let e=fa(n,Dw),{minDaysInFirstWeek:r,startOfWeek:s}=ep(e,this.loc),a=!le(e.weekYear)||!le(e.weekNumber)||!le(e.weekday),o=!le(e.ordinal),l=!le(e.year),u=!le(e.month)||!le(e.day),c=l||u,d=e.weekYear||e.weekNumber;if((c||o)&&d)throw new ai("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&o)throw new ai("Can't mix ordinal dates with month/day");let f;a?f=Qf({...vl(this.c,r,s),...e},r,s):le(e.ordinal)?(f={...this.toObject(),...e},le(e.day)&&(f.day=Math.min(ha(f.year,f.month),f.day))):f=Jf({...qc(this.c),...e});let[p,v]=Jc(f,this.o,this.zone);return _s(this,{ts:p,o:v})}plus(n){if(!this.isValid)return this;let e=_e.fromDurationLike(n);return _s(this,Ew(this,e))}minus(n){if(!this.isValid)return this;let e=_e.fromDurationLike(n).negate();return _s(this,Ew(this,e))}startOf(n,{useLocaleWeeks:e=!1}={}){if(!this.isValid)return this;let r={},s=_e.normalizeUnit(n);switch(s){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break;case"milliseconds":break}if(s==="weeks")if(e){let a=this.loc.getStartOfWeek(),{weekday:o}=this;o<a&&(r.weekNumber=this.weekNumber-1),r.weekday=a}else r.weekday=1;if(s==="quarters"){let a=Math.ceil(this.month/3);r.month=(a-1)*3+1}return this.set(r)}endOf(n,e){return this.isValid?this.plus({[n]:1}).startOf(n,e).minus(1):this}toFormat(n,e={}){return this.isValid?ft.create(this.loc.redefaultToEN(e)).formatDateTimeFromString(this,n):wp}toLocaleString(n=Dn,e={}){return this.isValid?ft.create(this.loc.clone(e),n).formatDateTime(this):wp}toLocaleParts(n={}){return this.isValid?ft.create(this.loc.clone(n),n).formatDateTimeParts(this):[]}toISO({format:n="extended",suppressSeconds:e=!1,suppressMilliseconds:r=!1,includeOffset:s=!0,extendedZone:a=!1}={}){if(!this.isValid)return null;let o=n==="extended",l=Tp(this,o);return l+="T",l+=kw(this,o,e,r,s,a),l}toISODate({format:n="extended"}={}){return this.isValid?Tp(this,n==="extended"):null}toISOWeekDate(){return Qc(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:n=!1,suppressSeconds:e=!1,includeOffset:r=!0,includePrefix:s=!1,extendedZone:a=!1,format:o="extended"}={}){return this.isValid?(s?"T":"")+kw(this,o==="extended",e,n,r,a):null}toRFC2822(){return Qc(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Qc(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Tp(this,!0):null}toSQLTime({includeOffset:n=!0,includeZone:e=!1,includeOffsetSpace:r=!0}={}){let s="HH:mm:ss.SSS";return(e||n)&&(r&&(s+=" "),e?s+="z":n&&(s+="ZZ")),Qc(this,s,!0)}toSQL(n={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(n)}`:null}toString(){return this.isValid?this.toISO():wp}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(n={}){if(!this.isValid)return{};let e={...this.c};return n.includeConfig&&(e.outputCalendar=this.outputCalendar,e.numberingSystem=this.loc.numberingSystem,e.locale=this.loc.locale),e}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(n,e="milliseconds",r={}){if(!this.isValid||!n.isValid)return _e.invalid("created by diffing an invalid DateTime");let s={locale:this.locale,numberingSystem:this.numberingSystem,...r},a=Yb(e).map(_e.normalizeUnit),o=n.valueOf()>this.valueOf(),l=o?this:n,u=o?n:this,c=pw(l,u,a,s);return o?c.negate():c}diffNow(n="milliseconds",e={}){return this.diff(J.now(),n,e)}until(n){return this.isValid?Je.fromDateTimes(this,n):this}hasSame(n,e,r){if(!this.isValid)return!1;let s=n.valueOf(),a=this.setZone(n.zone,{keepLocalTime:!0});return a.startOf(e,r)<=s&&s<=a.endOf(e,r)}equals(n){return this.isValid&&n.isValid&&this.valueOf()===n.valueOf()&&this.zone.equals(n.zone)&&this.loc.equals(n.loc)}toRelative(n={}){if(!this.isValid)return null;let e=n.base||J.fromObject({},{zone:this.zone}),r=n.padding?this<e?-n.padding:n.padding:0,s=["years","months","days","hours","minutes","seconds"],a=n.unit;return Array.isArray(n.unit)&&(s=n.unit,a=void 0),Iw(e,this.plus(r),{...n,numeric:"always",units:s,unit:a})}toRelativeCalendar(n={}){return this.isValid?Iw(n.base||J.fromObject({},{zone:this.zone}),this,{...n,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...n){if(!n.every(J.isDateTime))throw new _t("min requires all arguments be DateTimes");return np(n,e=>e.valueOf(),Math.min)}static max(...n){if(!n.every(J.isDateTime))throw new _t("max requires all arguments be DateTimes");return np(n,e=>e.valueOf(),Math.max)}static fromFormatExplain(n,e,r={}){let{locale:s=null,numberingSystem:a=null}=r,o=Ee.fromOpts({locale:s,numberingSystem:a,defaultToEN:!0});return yp(o,n,e)}static fromStringExplain(n,e,r={}){return J.fromFormatExplain(n,e,r)}static get DATE_SHORT(){return Dn}static get DATE_MED(){return Uo}static get DATE_MED_WITH_WEEKDAY(){return Nf}static get DATE_FULL(){return jo}static get DATE_HUGE(){return qo}static get TIME_SIMPLE(){return Xo}static get TIME_WITH_SECONDS(){return Ko}static get TIME_WITH_SHORT_OFFSET(){return Zo}static get TIME_WITH_LONG_OFFSET(){return Qo}static get TIME_24_SIMPLE(){return Jo}static get TIME_24_WITH_SECONDS(){return el}static get TIME_24_WITH_SHORT_OFFSET(){return tl}static get TIME_24_WITH_LONG_OFFSET(){return rl}static get DATETIME_SHORT(){return il}static get DATETIME_SHORT_WITH_SECONDS(){return nl}static get DATETIME_MED(){return sl}static get DATETIME_MED_WITH_SECONDS(){return al}static get DATETIME_MED_WITH_WEEKDAY(){return Af}static get DATETIME_FULL(){return ol}static get DATETIME_FULL_WITH_SECONDS(){return ll}static get DATETIME_HUGE(){return ul}static get DATETIME_HUGE_WITH_SECONDS(){return cl}}});var Nw=X(()=>{gs();xl();fp();pp();vs();ca();In();Zf();Lc();On()});var Aw=wb((xp,Cp)=>{(function(t,n){typeof xp=="object"&&typeof Cp!="undefined"?Cp.exports=n():typeof define=="function"&&define.amd?define(n):(t=typeof globalThis!="undefined"?globalThis:t||self).dayjs_plugin_quarterOfYear=n()})(xp,function(){"use strict";var t="month",n="quarter";return function(e,r){var s=r.prototype;s.quarter=function(l){return this.$utils().u(l)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(l-1))};var a=s.add;s.add=function(l,u){return l=Number(l),this.$utils().p(u)===n?this.add(3*l,t):a.bind(this)(l,u)};var o=s.startOf;s.startOf=function(l,u){var c=this.$utils(),d=!!c.u(u)||u;if(c.p(l)===n){var f=this.quarter()-1;return d?this.month(3*f).startOf(t).startOf("day"):this.month(3*f+2).endOf(t).endOf("day")}return o.bind(this)(l,u)}}})});var An=wb((Ep,kp)=>{(function(t,n){typeof Ep=="object"&&typeof kp!="undefined"?kp.exports=n():typeof define=="function"&&define.amd?define(n):(t=typeof globalThis!="undefined"?globalThis:t||self).dayjs=n()})(Ep,function(){"use strict";var t=1e3,n=6e4,e=36e5,r="millisecond",s="second",a="minute",o="hour",l="day",u="week",c="month",d="quarter",f="year",p="date",v="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,_=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,S={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(N){var $=["th","st","nd","rd"],B=N%100;return"["+N+($[(B-20)%10]||$[B]||$[0])+"]"}},x=function(N,$,B){var Y=String(N);return!Y||Y.length>=$?N:""+Array($+1-Y.length).join(B)+N},D={s:x,z:function(N){var $=-N.utcOffset(),B=Math.abs($),Y=Math.floor(B/60),V=B%60;return($<=0?"+":"-")+x(Y,2,"0")+":"+x(V,2,"0")},m:function N($,B){if($.date()<B.date())return-N(B,$);var Y=12*(B.year()-$.year())+(B.month()-$.month()),V=$.clone().add(Y,c),te=B-V<0,ie=$.clone().add(Y+(te?-1:1),c);return+(-(Y+(B-V)/(te?V-ie:ie-V))||0)},a:function(N){return N<0?Math.ceil(N)||0:Math.floor(N)},p:function(N){return{M:c,y:f,w:u,d:l,D:p,h:o,m:a,s,ms:r,Q:d}[N]||String(N||"").toLowerCase().replace(/s$/,"")},u:function(N){return N===void 0}},E="en",P={};P[E]=S;var O="$isDayjsObject",A=function(N){return N instanceof z||!(!N||!N[O])},M=function N($,B,Y){var V;if(!$)return E;if(typeof $=="string"){var te=$.toLowerCase();P[te]&&(V=te),B&&(P[te]=B,V=te);var ie=$.split("-");if(!V&&ie.length>1)return N(ie[0])}else{var Ce=$.name;P[Ce]=$,V=Ce}return!Y&&V&&(E=V),V||!Y&&E},I=function(N,$){if(A(N))return N.clone();var B=typeof $=="object"?$:{};return B.date=N,B.args=arguments,new z(B)},H=D;H.l=M,H.i=A,H.w=function(N,$){return I(N,{locale:$.$L,utc:$.$u,x:$.$x,$offset:$.$offset})};var z=function(){function N(B){this.$L=M(B.locale,null,!0),this.parse(B),this.$x=this.$x||B.x||{},this[O]=!0}var $=N.prototype;return $.parse=function(B){this.$d=function(Y){var V=Y.date,te=Y.utc;if(V===null)return new Date(NaN);if(H.u(V))return new Date;if(V instanceof Date)return new Date(V);if(typeof V=="string"&&!/Z$/i.test(V)){var ie=V.match(y);if(ie){var Ce=ie[2]-1||0,be=(ie[7]||"0").substring(0,3);return te?new Date(Date.UTC(ie[1],Ce,ie[3]||1,ie[4]||0,ie[5]||0,ie[6]||0,be)):new Date(ie[1],Ce,ie[3]||1,ie[4]||0,ie[5]||0,ie[6]||0,be)}}return new Date(V)}(B),this.init()},$.init=function(){var B=this.$d;this.$y=B.getFullYear(),this.$M=B.getMonth(),this.$D=B.getDate(),this.$W=B.getDay(),this.$H=B.getHours(),this.$m=B.getMinutes(),this.$s=B.getSeconds(),this.$ms=B.getMilliseconds()},$.$utils=function(){return H},$.isValid=function(){return this.$d.toString()!==v},$.isSame=function(B,Y){var V=I(B);return this.startOf(Y)<=V&&V<=this.endOf(Y)},$.isAfter=function(B,Y){return I(B)<this.startOf(Y)},$.isBefore=function(B,Y){return this.endOf(Y)<I(B)},$.$g=function(B,Y,V){return H.u(B)?this[Y]:this.set(V,B)},$.unix=function(){return Math.floor(this.valueOf()/1e3)},$.valueOf=function(){return this.$d.getTime()},$.startOf=function(B,Y){var V=this,te=!!H.u(Y)||Y,ie=H.p(B),Ce=function(me,we){var ct=H.w(V.$u?Date.UTC(V.$y,we,me):new Date(V.$y,we,me),V);return te?ct:ct.endOf(l)},be=function(me,we){return H.w(V.toDate()[me].apply(V.toDate("s"),(te?[0,0,0,0]:[23,59,59,999]).slice(we)),V)},Ye=this.$W,q=this.$M,W=this.$D,ee="set"+(this.$u?"UTC":"");switch(ie){case f:return te?Ce(1,0):Ce(31,11);case c:return te?Ce(1,q):Ce(0,q+1);case u:var G=this.$locale().weekStart||0,he=(Ye<G?Ye+7:Ye)-G;return Ce(te?W-he:W+(6-he),q);case l:case p:return be(ee+"Hours",0);case o:return be(ee+"Minutes",1);case a:return be(ee+"Seconds",2);case s:return be(ee+"Milliseconds",3);default:return this.clone()}},$.endOf=function(B){return this.startOf(B,!1)},$.$set=function(B,Y){var V,te=H.p(B),ie="set"+(this.$u?"UTC":""),Ce=(V={},V[l]=ie+"Date",V[p]=ie+"Date",V[c]=ie+"Month",V[f]=ie+"FullYear",V[o]=ie+"Hours",V[a]=ie+"Minutes",V[s]=ie+"Seconds",V[r]=ie+"Milliseconds",V)[te],be=te===l?this.$D+(Y-this.$W):Y;if(te===c||te===f){var Ye=this.clone().set(p,1);Ye.$d[Ce](be),Ye.init(),this.$d=Ye.set(p,Math.min(this.$D,Ye.daysInMonth())).$d}else Ce&&this.$d[Ce](be);return this.init(),this},$.set=function(B,Y){return this.clone().$set(B,Y)},$.get=function(B){return this[H.p(B)]()},$.add=function(B,Y){var V,te=this;B=Number(B);var ie=H.p(Y),Ce=function(q){var W=I(te);return H.w(W.date(W.date()+Math.round(q*B)),te)};if(ie===c)return this.set(c,this.$M+B);if(ie===f)return this.set(f,this.$y+B);if(ie===l)return Ce(1);if(ie===u)return Ce(7);var be=(V={},V[a]=n,V[o]=e,V[s]=t,V)[ie]||1,Ye=this.$d.getTime()+B*be;return H.w(Ye,this)},$.subtract=function(B,Y){return this.add(-1*B,Y)},$.format=function(B){var Y=this,V=this.$locale();if(!this.isValid())return V.invalidDate||v;var te=B||"YYYY-MM-DDTHH:mm:ssZ",ie=H.z(this),Ce=this.$H,be=this.$m,Ye=this.$M,q=V.weekdays,W=V.months,ee=V.meridiem,G=function(we,ct,Nt,Fe){return we&&(we[ct]||we(Y,te))||Nt[ct].slice(0,Fe)},he=function(we){return H.s(Ce%12||12,we,"0")},me=ee||function(we,ct,Nt){var Fe=we<12?"AM":"PM";return Nt?Fe.toLowerCase():Fe};return te.replace(_,function(we,ct){return ct||function(Nt){switch(Nt){case"YY":return String(Y.$y).slice(-2);case"YYYY":return H.s(Y.$y,4,"0");case"M":return Ye+1;case"MM":return H.s(Ye+1,2,"0");case"MMM":return G(V.monthsShort,Ye,W,3);case"MMMM":return G(W,Ye);case"D":return Y.$D;case"DD":return H.s(Y.$D,2,"0");case"d":return String(Y.$W);case"dd":return G(V.weekdaysMin,Y.$W,q,2);case"ddd":return G(V.weekdaysShort,Y.$W,q,3);case"dddd":return q[Y.$W];case"H":return String(Ce);case"HH":return H.s(Ce,2,"0");case"h":return he(1);case"hh":return he(2);case"a":return me(Ce,be,!0);case"A":return me(Ce,be,!1);case"m":return String(be);case"mm":return H.s(be,2,"0");case"s":return String(Y.$s);case"ss":return H.s(Y.$s,2,"0");case"SSS":return H.s(Y.$ms,3,"0");case"Z":return ie}return null}(we)||ie.replace(":","")})},$.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},$.diff=function(B,Y,V){var te,ie=this,Ce=H.p(Y),be=I(B),Ye=(be.utcOffset()-this.utcOffset())*n,q=this-be,W=function(){return H.m(ie,be)};switch(Ce){case f:te=W()/12;break;case c:te=W();break;case d:te=W()/3;break;case u:te=(q-Ye)/6048e5;break;case l:te=(q-Ye)/864e5;break;case o:te=q/e;break;case a:te=q/n;break;case s:te=q/t;break;default:te=q}return V?te:H.a(te)},$.daysInMonth=function(){return this.endOf(c).$D},$.$locale=function(){return P[this.$L]},$.locale=function(B,Y){if(!B)return this.$L;var V=this.clone(),te=M(B,Y,!0);return te&&(V.$L=te),V},$.clone=function(){return H.w(this.$d,this)},$.toDate=function(){return new Date(this.valueOf())},$.toJSON=function(){return this.isValid()?this.toISOString():null},$.toISOString=function(){return this.$d.toISOString()},$.toString=function(){return this.$d.toUTCString()},N}(),U=z.prototype;return I.prototype=U,[["$ms",r],["$s",s],["$m",a],["$H",o],["$W",l],["$M",c],["$y",f],["$D",p]].forEach(function(N){U[N[1]]=function($){return this.$g($,N[0],N[1])}}),I.extend=function(N,$){return N.$i||(N($,z,I),N.$i=!0),I},I.locale=M,I.isDayjs=A,I.unix=function(N){return I(1e3*N)},I.en=P[E],I.Ls=P,I.p={},I})});var Me,Tt,Mr,Ln=X(()=>{(function(t){t[t.AM=0]="AM",t[t.PM=1]="PM"})(Me||(Me={}));(function(t){t[t.SUNDAY=0]="SUNDAY",t[t.MONDAY=1]="MONDAY",t[t.TUESDAY=2]="TUESDAY",t[t.WEDNESDAY=3]="WEDNESDAY",t[t.THURSDAY=4]="THURSDAY",t[t.FRIDAY=5]="FRIDAY",t[t.SATURDAY=6]="SATURDAY"})(Tt||(Tt={}));(function(t){t[t.JANUARY=1]="JANUARY",t[t.FEBRUARY=2]="FEBRUARY",t[t.MARCH=3]="MARCH",t[t.APRIL=4]="APRIL",t[t.MAY=5]="MAY",t[t.JUNE=6]="JUNE",t[t.JULY=7]="JULY",t[t.AUGUST=8]="AUGUST",t[t.SEPTEMBER=9]="SEPTEMBER",t[t.OCTOBER=10]="OCTOBER",t[t.NOVEMBER=11]="NOVEMBER",t[t.DECEMBER=12]="DECEMBER"})(Mr||(Mr={}))});function Lw(t,n){n=n.add(1,"day"),Ts(t,n),_a(t,n)}function di(t,n){t.assign("day",n.date()),t.assign("month",n.month()+1),t.assign("year",n.year())}function ed(t,n){t.assign("hour",n.hour()),t.assign("minute",n.minute()),t.assign("second",n.second()),t.assign("millisecond",n.millisecond()),t.get("hour")<12?t.assign("meridiem",Me.AM):t.assign("meridiem",Me.PM)}function Ts(t,n){t.imply("day",n.date()),t.imply("month",n.month()+1),t.imply("year",n.year())}function _a(t,n){t.imply("hour",n.hour()),t.imply("minute",n.minute()),t.imply("second",n.second()),t.imply("millisecond",n.millisecond())}var Ta=X(()=>{Ln()});function Rn(t,n,e,r,s=0){let a=0,o=0;for(;o<r;)a++,new Date(t,n-1,a).getDay()===e&&o++;return new Date(t,n-1,a,s)}function Rw(t,n,e,r=0){let s=e===0?7:e,a=new Date(t,n-1+1,1,12),o=a.getDay()===0?7:a.getDay(),l;return o===s?l=7:o<s?l=7+o-s:l=o-s,a.setDate(a.getDate()-l),new Date(t,n-1,a.getDate(),r)}function td(t,n,e={}){var s;if(t==null)return null;if(typeof t=="number")return t;let r=(s=e[t])!=null?s:h$[t];return r==null?null:typeof r=="number"?r:n==null?null:(0,Dp.default)(n).isAfter(r.dstStart(n.getFullYear()))&&!(0,Dp.default)(n).isAfter(r.dstEnd(n.getFullYear()))?r.timezoneOffsetDuringDst:r.timezoneOffsetNonDst}var Dp,h$,Pp=X(()=>{Dp=En(An(),1);Ln();h$={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:{timezoneOffsetDuringDst:2*60,timezoneOffsetNonDst:60,dstStart:t=>Rw(t,Mr.MARCH,Tt.SUNDAY,2),dstEnd:t=>Rw(t,Mr.OCTOBER,Tt.SUNDAY,3)},CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CT:{timezoneOffsetDuringDst:-5*60,timezoneOffsetNonDst:-6*60,dstStart:t=>Rn(t,Mr.MARCH,Tt.SUNDAY,2,2),dstEnd:t=>Rn(t,Mr.NOVEMBER,Tt.SUNDAY,1,2)},CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:{timezoneOffsetDuringDst:-4*60,timezoneOffsetNonDst:-5*60,dstStart:t=>Rn(t,Mr.MARCH,Tt.SUNDAY,2,2),dstEnd:t=>Rn(t,Mr.NOVEMBER,Tt.SUNDAY,1,2)},FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MT:{timezoneOffsetDuringDst:-6*60,timezoneOffsetNonDst:-7*60,dstStart:t=>Rn(t,Mr.MARCH,Tt.SUNDAY,2,2),dstEnd:t=>Rn(t,Mr.NOVEMBER,Tt.SUNDAY,1,2)},MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:{timezoneOffsetDuringDst:-7*60,timezoneOffsetNonDst:-8*60,dstStart:t=>Rn(t,Mr.MARCH,Tt.SUNDAY,2,2),dstEnd:t=>Rn(t,Mr.NOVEMBER,Tt.SUNDAY,1,2)},PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360}});var Bw,El,xa,ke,Zi,Ei=X(()=>{Bw=En(Aw(),1),El=En(An(),1);Ta();Pp();El.default.extend(Bw.default);xa=class{constructor(n){var e;n=n!=null?n:new Date,n instanceof Date?this.instant=n:(this.instant=(e=n.instant)!=null?e:new Date,this.timezoneOffset=td(n.timezone,this.instant))}getDateWithAdjustedTimezone(){return new Date(this.instant.getTime()+this.getSystemTimezoneAdjustmentMinute(this.instant)*6e4)}getSystemTimezoneAdjustmentMinute(n,e){var a;(!n||n.getTime()<0)&&(n=new Date);let r=-n.getTimezoneOffset(),s=(a=e!=null?e:this.timezoneOffset)!=null?a:r;return r-s}},ke=class{constructor(n,e){if(this.reference=n,this.knownValues={},this.impliedValues={},e)for(let s in e)this.knownValues[s]=e[s];let r=(0,El.default)(n.instant);this.imply("day",r.date()),this.imply("month",r.month()+1),this.imply("year",r.year()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}get(n){return n in this.knownValues?this.knownValues[n]:n in this.impliedValues?this.impliedValues[n]:null}isCertain(n){return n in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(n,e){return n in this.knownValues?this:(this.impliedValues[n]=e,this)}assign(n,e){return this.knownValues[n]=e,delete this.impliedValues[n],this}delete(n){delete this.knownValues[n],delete this.impliedValues[n]}clone(){let n=new ke(this.reference);n.knownValues={},n.impliedValues={};for(let e in this.knownValues)n.knownValues[e]=this.knownValues[e];for(let e in this.impliedValues)n.impliedValues[e]=this.impliedValues[e];return n}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isDateWithUnknownYear(){return this.isCertain("month")&&!this.isCertain("year")}isValidDate(){let n=this.dateWithoutTimezoneAdjustment();return!(n.getFullYear()!==this.get("year")||n.getMonth()!==this.get("month")-1||n.getDate()!==this.get("day")||this.get("hour")!=null&&n.getHours()!=this.get("hour")||this.get("minute")!=null&&n.getMinutes()!=this.get("minute"))}toString(){return`[ParsingComponents {knownValues: ${JSON.stringify(this.knownValues)}, impliedValues: ${JSON.stringify(this.impliedValues)}}, reference: ${JSON.stringify(this.reference)}]`}dayjs(){return(0,El.default)(this.date())}date(){let n=this.dateWithoutTimezoneAdjustment(),e=this.reference.getSystemTimezoneAdjustmentMinute(n,this.get("timezoneOffset"));return new Date(n.getTime()+e*6e4)}dateWithoutTimezoneAdjustment(){let n=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return n.setFullYear(this.get("year")),n}static createRelativeFromReference(n,e){let r=(0,El.default)(n.instant);for(let a in e)r=r.add(e[a],a);let s=new ke(n);return e.hour||e.minute||e.second?(ed(s,r),di(s,r),n.timezoneOffset!==null&&s.assign("timezoneOffset",-n.instant.getTimezoneOffset())):(_a(s,r),n.timezoneOffset!==null&&s.imply("timezoneOffset",-n.instant.getTimezoneOffset()),e.d?(s.assign("day",r.date()),s.assign("month",r.month()+1),s.assign("year",r.year())):(e.week&&s.imply("weekday",r.day()),s.imply("day",r.date()),e.month?(s.assign("month",r.month()+1),s.assign("year",r.year())):(s.imply("month",r.month()+1),e.year?s.assign("year",r.year()):s.imply("year",r.year())))),s}},Zi=class{constructor(n,e,r,s,a){this.reference=n,this.refDate=n.instant,this.index=e,this.text=r,this.start=s||new ke(n),this.end=a}clone(){let n=new Zi(this.reference,this.index,this.text);return n.start=this.start?this.start.clone():null,n.end=this.end?this.end.clone():null,n}date(){return this.start.date()}toString(){return`[ParsingResult {index: ${this.index}, text: '${this.text}', ...}]`}}});function Ip(t,n){let e=n.replace(/\((?!\?)/g,"(?:");return`${t}${e}\\s{0,5}(?:,?\\s{0,5}${e}){0,10}`}function f$(t){let n;return t instanceof Array?n=[...t]:t instanceof Map?n=Array.from(t.keys()):n=Object.keys(t),n}function zt(t){return`(?:${f$(t).sort((e,r)=>r.length-e.length).join("|").replace(/\./g,"\\.")})`}var Bn=X(()=>{});function rd(t){return t<100&&(t>50?t=t+1900:t=t+2e3),t}function Gn(t,n,e){let r=(0,Gw.default)(t),s=r;s=s.month(e-1),s=s.date(n),s=s.year(r.year());let a=s.add(1,"y"),o=s.add(-1,"y");return Math.abs(a.diff(r))<Math.abs(s.diff(r))?s=a:Math.abs(o.diff(r))<Math.abs(s.diff(r))&&(s=o),s.year()}var Gw,Ca=X(()=>{Gw=En(An(),1)});function p$(t){let n=t.toLowerCase();return Op[n]!==void 0?Op[n]:n==="a"||n==="an"||n=="the"?1:n.match(/few/)?3:n.match(/half/)?.5:n.match(/couple/)?2:n.match(/several/)?7:parseFloat(n)}function ka(t){let n=t.toLowerCase();return Mp[n]!==void 0?Mp[n]:(n=n.replace(/(?:st|nd|rd|th)$/i,""),parseInt(n))}function Pa(t){if(/BE/i.test(t))return t=t.replace(/BE/i,""),parseInt(t)-543;if(/BCE?/i.test(t))return t=t.replace(/BCE?/i,""),-parseInt(t);if(/(AD|CE)/i.test(t))return t=t.replace(/(AD|CE)/i,""),parseInt(t);let n=parseInt(t);return rd(n)}function ki(t){let n={},e=t,r=Hw.exec(e);for(;r;)v$(n,r),e=e.substring(r[0].length).trim(),r=Hw.exec(e);return n}function v$(t,n){let e=p$(n[1]),r=kl[n[2].toLowerCase()];t[r]=e}var Fp,$p,Xr,Op,Mp,Ww,kl,Yw,Ea,Da,zw,Hw,m$,Qi,Hn,Vt=X(()=>{Bn();Ca();Fp={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6},$p={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12},Xr={...$p,jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12},Op={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12},Mp={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31},Ww={second:"second",seconds:"second",minute:"minute",minutes:"minute",hour:"hour",hours:"hour",day:"d",days:"d",week:"week",weeks:"week",month:"month",months:"month",quarter:"quarter",quarters:"quarter",year:"year",years:"year"},kl={s:"second",sec:"second",second:"second",seconds:"second",m:"minute",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",d:"d",day:"d",days:"d",w:"w",week:"week",weeks:"week",mo:"month",mon:"month",mos:"month",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year",...Ww},Yw=`(?:${zt(Op)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|the|a?\\s{0,2}couple\\s{0,2}(?:of)?)`;Ea=`(?:${zt(Mp)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;Da="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9])";zw=`(${Yw})\\s{0,3}(${zt(kl)})`,Hw=new RegExp(zw,"i"),m$=`(${Yw})\\s{0,3}(${zt(Ww)})`,Qi=Ip("(?:(?:about|around)\\s{0,3})?",zw),Hn=Ip("(?:(?:about|around)\\s{0,3})?",m$)});var Ge,lr=X(()=>{Ge=class{constructor(){this.cachedInnerPattern=null,this.cachedPattern=null}patternLeftBoundary(){return"(\\W|^)"}pattern(n){let e=this.innerPattern(n);return e==this.cachedInnerPattern?this.cachedPattern:(this.cachedPattern=new RegExp(`${this.patternLeftBoundary()}${e.source}`,e.flags),this.cachedInnerPattern=e,this.cachedPattern)}extract(n,e){var s;let r=(s=e[1])!=null?s:"";e.index=e.index+r.length,e[0]=e[0].substring(r.length);for(let a=2;a<e.length;a++)e[a-1]=e[a];return this.innerExtract(n,e)}}});var g$,y$,b$,Dl,Vw=X(()=>{Vt();Ei();lr();g$=new RegExp(`(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Qi})(?=\\W|$)`,"i"),y$=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Qi})(?=\\W|$)`,"i"),b$=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Hn})(?=\\W|$)`,"i"),Dl=class extends Ge{constructor(n){super(),this.strictMode=n}innerPattern(n){return this.strictMode?b$:n.option.forwardDate?g$:y$}innerExtract(n,e){let r=ki(e[1]);return ke.createRelativeFromReference(n.reference,r)}}});var w$,Uw,jw,S$,qw,Pl,Xw=X(()=>{Ca();Vt();Vt();Vt();Bn();lr();w$=new RegExp(`(?:on\\s{0,3})?(${Ea})(?:\\s{0,3}(?:to|\\-|\\\u2013|until|through|till)?\\s{0,3}(${Ea}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${zt(Xr)})(?:(?:-|/|,?\\s{0,3})(${Da}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Uw=1,jw=2,S$=3,qw=4,Pl=class extends Ge{innerPattern(){return w$}innerExtract(n,e){let r=n.createParsingResult(e.index,e[0]),s=Xr[e[S$].toLowerCase()],a=ka(e[Uw]);if(a>31)return e.index=e.index+e[Uw].length,null;if(r.start.assign("month",s),r.start.assign("day",a),e[qw]){let o=Pa(e[qw]);r.start.assign("year",o)}else{let o=Gn(n.refDate,a,s);r.start.imply("year",o)}if(e[jw]){let o=ka(e[jw]);r.end=r.start.clone(),r.end.assign("day",o)}return r}}});var _$,T$,x$,Kw,Zw,Il,Qw=X(()=>{Ca();Vt();Vt();Vt();Bn();lr();_$=new RegExp(`(${zt(Xr)})(?:-|/|\\s*,?\\s*)(${Ea})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${Ea})\\s*)?(?:(?:-|/|\\s*,?\\s*)(${Da}))?(?=\\W|$)(?!\\:\\d)`,"i"),T$=1,x$=2,Kw=3,Zw=4,Il=class extends Ge{innerPattern(){return _$}innerExtract(n,e){let r=Xr[e[T$].toLowerCase()],s=ka(e[x$]);if(s>31)return null;let a=n.createParsingComponents({day:s,month:r});if(e[Zw]){let u=Pa(e[Zw]);a.assign("year",u)}else{let u=Gn(n.refDate,s,r);a.imply("year",u)}if(!e[Kw])return a;let o=ka(e[Kw]),l=n.createParsingResult(e.index,e[0]);return l.start=a,l.end=a.clone(),l.end.assign("day",o),l}}});var C$,E$,k$,Jw,Ol,e0=X(()=>{Vt();Ca();Bn();Vt();lr();C$=new RegExp(`((?:in)\\s*)?(${zt(Xr)})\\s*(?:[,-]?\\s*(${Da})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),E$=1,k$=2,Jw=3,Ol=class extends Ge{innerPattern(){return C$}innerExtract(n,e){let r=e[k$].toLowerCase();if(e[0].length<=3&&!$p[r])return null;let s=n.createParsingResult(e.index+(e[E$]||"").length,e.index+e[0].length);s.start.imply("day",1);let a=Xr[r];if(s.start.assign("month",a),e[Jw]){let o=Pa(e[Jw]);s.start.assign("year",o)}else{let o=Gn(n.refDate,1,a);s.start.imply("year",o)}return s}}});var D$,P$,I$,t0,O$,Ml,r0=X(()=>{Vt();Bn();lr();D$=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${zt(Xr)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),P$=1,I$=2,t0=3,O$=4,Ml=class extends Ge{innerPattern(){return D$}innerExtract(n,e){let r=e[t0]?parseInt(e[t0]):Xr[e[I$].toLowerCase()];if(r<1||r>12)return null;let s=parseInt(e[P$]);return{day:parseInt(e[O$]),month:r,year:s}}}});var M$,F$,$$,Fl,i0=X(()=>{lr();M$=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),F$=1,$$=2,Fl=class extends Ge{innerPattern(){return M$}innerExtract(n,e){let r=parseInt(e[$$]),s=parseInt(e[F$]);return n.createParsingComponents().imply("day",1).assign("month",s).assign("year",r)}}});function N$(t,n,e,r){return new RegExp(`${t}${n}(\\d{1,4})(?:(?:\\.|:|\uFF1A)(\\d{1,2})(?:(?::|\uFF1A)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${e}`,r)}function A$(t,n){return new RegExp(`^(${t})(\\d{1,4})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${n}`,"i")}var n0,Ia,id,nd,$l,sd,s0=X(()=>{Ln();n0=2,Ia=3,id=4,nd=5,$l=6,sd=class{constructor(n=!1){this.cachedPrimaryPrefix=null,this.cachedPrimarySuffix=null,this.cachedPrimaryTimePattern=null,this.cachedFollowingPhase=null,this.cachedFollowingSuffix=null,this.cachedFollowingTimePatten=null,this.strictMode=n}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?=\\W|$)"}followingSuffix(){return"(?=\\W|$)"}pattern(n){return this.getPrimaryTimePatternThroughCache()}extract(n,e){let r=this.extractPrimaryTimeComponents(n,e);if(!r)return e.index+=e[0].length,null;let s=e.index+e[1].length,a=e[0].substring(e[1].length),o=n.createParsingResult(s,a,r);e.index+=e[0].length;let l=n.text.substring(e.index),c=this.getFollowingTimePatternThroughCache().exec(l);return a.match(/^\d{3,4}/)&&c&&c[0].match(/^\s*([+-])\s*\d{2,4}$/)?null:!c||c[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(o):(o.end=this.extractFollowingTimeComponents(n,c,o),o.end&&(o.text+=c[0]),this.checkAndReturnWithFollowingPattern(o))}extractPrimaryTimeComponents(n,e,r=!1){let s=n.createParsingComponents(),a=0,o=null,l=parseInt(e[n0]);if(l>100){if(this.strictMode||e[Ia]!=null)return null;a=l%100,l=Math.floor(l/100)}if(l>24)return null;if(e[Ia]!=null){if(e[Ia].length==1&&!e[$l])return null;a=parseInt(e[Ia])}if(a>=60)return null;if(l>12&&(o=Me.PM),e[$l]!=null){if(l>12)return null;let u=e[$l][0].toLowerCase();u=="a"&&(o=Me.AM,l==12&&(l=0)),u=="p"&&(o=Me.PM,l!=12&&(l+=12))}if(s.assign("hour",l),s.assign("minute",a),o!==null?s.assign("meridiem",o):l<12?s.imply("meridiem",Me.AM):s.imply("meridiem",Me.PM),e[nd]!=null){let u=parseInt(e[nd].substring(0,3));if(u>=1e3)return null;s.assign("millisecond",u)}if(e[id]!=null){let u=parseInt(e[id]);if(u>=60)return null;s.assign("second",u)}return s}extractFollowingTimeComponents(n,e,r){let s=n.createParsingComponents();if(e[nd]!=null){let u=parseInt(e[nd].substring(0,3));if(u>=1e3)return null;s.assign("millisecond",u)}if(e[id]!=null){let u=parseInt(e[id]);if(u>=60)return null;s.assign("second",u)}let a=parseInt(e[n0]),o=0,l=-1;if(e[Ia]!=null?o=parseInt(e[Ia]):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(l=Me.PM),e[$l]!=null){if(a>12)return null;let u=e[$l][0].toLowerCase();u=="a"&&(l=Me.AM,a==12&&(a=0,s.isCertain("day")||s.imply("day",s.get("day")+1))),u=="p"&&(l=Me.PM,a!=12&&(a+=12)),r.start.isCertain("meridiem")||(l==Me.AM?(r.start.imply("meridiem",Me.AM),r.start.get("hour")==12&&r.start.assign("hour",0)):(r.start.imply("meridiem",Me.PM),r.start.get("hour")!=12&&r.start.assign("hour",r.start.get("hour")+12)))}return s.assign("hour",a),s.assign("minute",o),l>=0?s.assign("meridiem",l):r.start.isCertain("meridiem")&&r.start.get("hour")>12?r.start.get("hour")-12>a?s.imply("meridiem",Me.AM):a<=12&&(s.assign("hour",a+12),s.assign("meridiem",Me.PM)):a>12?s.imply("meridiem",Me.PM):a<=12&&s.imply("meridiem",Me.AM),s.date().getTime()<r.start.date().getTime()&&s.imply("day",s.get("day")+1),s}checkAndReturnWithoutFollowingPattern(n){if(n.text.match(/^\d$/)||n.text.match(/^\d\d\d+$/)||n.text.match(/\d[apAP]$/))return null;let e=n.text.match(/[^\d:.](\d[\d.]+)$/);if(e){let r=e[1];if(this.strictMode||r.includes(".")&&!r.match(/\d(\.\d{2})+$/)||parseInt(r)>24)return null}return n}checkAndReturnWithFollowingPattern(n){if(n.text.match(/^\d+-\d+$/))return null;let e=n.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(e){if(this.strictMode)return null;let r=e[1],s=e[2];if(s.includes(".")&&!s.match(/\d(\.\d{2})+$/))return null;let a=parseInt(s),o=parseInt(r);if(a>24||o>24)return null}return n}getPrimaryTimePatternThroughCache(){let n=this.primaryPrefix(),e=this.primarySuffix();return this.cachedPrimaryPrefix===n&&this.cachedPrimarySuffix===e?this.cachedPrimaryTimePattern:(this.cachedPrimaryTimePattern=N$(this.primaryPatternLeftBoundary(),n,e,this.patternFlags()),this.cachedPrimaryPrefix=n,this.cachedPrimarySuffix=e,this.cachedPrimaryTimePattern)}getFollowingTimePatternThroughCache(){let n=this.followingPhase(),e=this.followingSuffix();return this.cachedFollowingPhase===n&&this.cachedFollowingSuffix===e?this.cachedFollowingTimePatten:(this.cachedFollowingTimePatten=A$(n,e),this.cachedFollowingPhase=n,this.cachedFollowingSuffix=e,this.cachedFollowingTimePatten)}}});var Nl,a0=X(()=>{Ln();s0();Nl=class extends sd{constructor(n){super(n)}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|to|until|through|till|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(n,e){let r=super.extractPrimaryTimeComponents(n,e);if(r){if(e[0].endsWith("night")){let s=r.get("hour");s>=6&&s<12?(r.assign("hour",r.get("hour")+12),r.assign("meridiem",Me.PM)):s<6&&r.assign("meridiem",Me.AM)}if(e[0].endsWith("afternoon")){r.assign("meridiem",Me.PM);let s=r.get("hour");s>=0&&s<=6&&r.assign("hour",r.get("hour")+12)}e[0].endsWith("morning")&&(r.assign("meridiem",Me.AM),r.get("hour")<12&&r.assign("hour",r.get("hour")))}return r}}});function Oa(t){let n={};for(let e in t)n[e]=-t[e];return n}function o0(t,n){let e=t.clone(),r=t.dayjs();for(let s in n)r=r.add(n[s],s);return("day"in n||"d"in n||"week"in n||"month"in n||"year"in n)&&(e.imply("day",r.date()),e.imply("month",r.month()+1),e.imply("year",r.year())),("second"in n||"minute"in n||"hour"in n)&&(e.imply("second",r.second()),e.imply("minute",r.minute()),e.imply("hour",r.hour())),e}var Al=X(()=>{});var L$,R$,Ll,l0=X(()=>{Vt();Ei();lr();Al();L$=new RegExp(`(${Qi})\\s{0,5}(?:ago|before|earlier)(?=\\W|$)`,"i"),R$=new RegExp(`(${Hn})\\s{0,5}(?:ago|before|earlier)(?=\\W|$)`,"i"),Ll=class extends Ge{constructor(n){super(),this.strictMode=n}innerPattern(){return this.strictMode?R$:L$}innerExtract(n,e){let r=ki(e[1]),s=Oa(r);return ke.createRelativeFromReference(n.reference,s)}}});var B$,G$,H$,Rl,u0=X(()=>{Vt();Ei();lr();B$=new RegExp(`(${Qi})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),G$=new RegExp("("+Hn+")(later|from now)(?=(?:\\W|$))","i"),H$=1,Rl=class extends Ge{constructor(n){super(),this.strictMode=n}innerPattern(){return this.strictMode?G$:B$}innerExtract(n,e){let r=ki(e[H$]);return ke.createRelativeFromReference(n.reference,r)}}});var ad,Di,Ma=X(()=>{ad=class{refine(n,e){return e.filter(r=>this.isValid(n,r))}},Di=class{refine(n,e){if(e.length<2)return e;let r=[],s=e[0],a=null;for(let o=1;o<e.length;o++){a=e[o];let l=n.text.substring(s.index+s.text.length,a.index);if(!this.shouldMergeResults(l,s,a,n))r.push(s),s=a;else{let u=s,c=a,d=this.mergeResults(l,u,c,n);n.debug(()=>{console.log(`${this.constructor.name} merged ${u} and ${c} into ${d}`)}),s=d}}return s!=null&&r.push(s),r}}});var Bl,c0=X(()=>{Ma();Bl=class extends Di{shouldMergeResults(n,e,r){return!e.end&&!r.end&&n.match(this.patternBetween())!=null}mergeResults(n,e,r){if(!e.start.isOnlyWeekdayComponent()&&!r.start.isOnlyWeekdayComponent()&&(r.start.getCertainComponents().forEach(a=>{e.start.isCertain(a)||e.start.imply(a,r.start.get(a))}),e.start.getCertainComponents().forEach(a=>{r.start.isCertain(a)||r.start.imply(a,e.start.get(a))})),e.start.date().getTime()>r.start.date().getTime()){let a=e.start.dayjs(),o=r.start.dayjs();r.start.isOnlyWeekdayComponent()&&o.add(7,"days").isAfter(a)?(o=o.add(7,"days"),r.start.imply("day",o.date()),r.start.imply("month",o.month()+1),r.start.imply("year",o.year())):e.start.isOnlyWeekdayComponent()&&a.add(-7,"days").isBefore(o)?(a=a.add(-7,"days"),e.start.imply("day",a.date()),e.start.imply("month",a.month()+1),e.start.imply("year",a.year())):r.start.isDateWithUnknownYear()&&o.add(1,"years").isAfter(a)?(o=o.add(1,"years"),r.start.imply("year",o.year())):e.start.isDateWithUnknownYear()&&a.add(-1,"years").isBefore(o)?(a=a.add(-1,"years"),e.start.imply("year",a.year())):[r,e]=[e,r]}let s=e.clone();return s.start=e.start,s.end=r.start,s.index=Math.min(e.index,r.index),e.index<r.index?s.text=e.text+n+r.text:s.text=r.text+n+e.text,s}}});var Gl,d0=X(()=>{c0();Gl=class extends Bl{patternBetween(){return/^\s*(to|-|–|until|through|till)\s*$/i}}});function Np(t,n){let e=t.clone(),r=t.start,s=n.start;if(e.start=h0(r,s),t.end!=null||n.end!=null){let a=t.end==null?t.start:t.end,o=n.end==null?n.start:n.end,l=h0(a,o);if(t.end==null&&l.date().getTime()<e.start.date().getTime()){let u=l.dayjs().add(1,"day");l.isCertain("day")?di(l,u):Ts(l,u)}e.end=l}return e}function h0(t,n){let e=t.clone();return n.isCertain("hour")?(e.assign("hour",n.get("hour")),e.assign("minute",n.get("minute")),n.isCertain("second")?(e.assign("second",n.get("second")),n.isCertain("millisecond")?e.assign("millisecond",n.get("millisecond")):e.imply("millisecond",n.get("millisecond"))):(e.imply("second",n.get("second")),e.imply("millisecond",n.get("millisecond")))):(e.imply("hour",n.get("hour")),e.imply("minute",n.get("minute")),e.imply("second",n.get("second")),e.imply("millisecond",n.get("millisecond"))),n.isCertain("timezoneOffset")&&e.assign("timezoneOffset",n.get("timezoneOffset")),n.isCertain("meridiem")?e.assign("meridiem",n.get("meridiem")):n.get("meridiem")!=null&&e.get("meridiem")==null&&e.imply("meridiem",n.get("meridiem")),e.get("meridiem")==Me.PM&&e.get("hour")<12&&(n.isCertain("hour")?e.assign("hour",e.get("hour")+12):e.imply("hour",e.get("hour")+12)),e}var f0=X(()=>{Ln();Ta()});var Hl,p0=X(()=>{Ma();f0();Hl=class extends Di{shouldMergeResults(n,e,r){return(e.start.isOnlyDate()&&r.start.isOnlyTime()||r.start.isOnlyDate()&&e.start.isOnlyTime())&&n.match(this.patternBetween())!=null}mergeResults(n,e,r){let s=e.start.isOnlyDate()?Np(e,r):Np(r,e);return s.index=e.index,s.text=e.text+n+r.text,s}}});var Wl,m0=X(()=>{p0();Wl=class extends Hl{patternBetween(){return new RegExp("^\\s*(T|at|after|before|on|of|,|-)?\\s*$")}}});var W$,Yl,v0=X(()=>{Pp();W$=new RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i"),Yl=class{constructor(n){this.timezoneOverrides=n}refine(n,e){var s;let r=(s=n.option.timezones)!=null?s:{};return e.forEach(a=>{var v,y;let o=n.text.substring(a.index+a.text.length),l=W$.exec(o);if(!l)return;let u=l[1].toUpperCase(),c=(y=(v=a.start.date())!=null?v:a.refDate)!=null?y:new Date,d={...this.timezoneOverrides,...r},f=td(u,c,d);if(f==null)return;n.debug(()=>{console.log(`Extracting timezone: '${u}' into: ${f} for: ${a.start}`)});let p=a.start.get("timezoneOffset");p!==null&&f!=p&&(a.start.isCertain("timezoneOffset")||u!=l[1])||a.start.isOnlyDate()&&u!=l[1]||(a.text+=l[0],a.start.isCertain("timezoneOffset")||a.start.assign("timezoneOffset",f),a.end!=null&&!a.end.isCertain("timezoneOffset")&&a.end.assign("timezoneOffset",f))}),e}}});var Y$,z$,V$,U$,zl,g0=X(()=>{Y$=new RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i"),z$=1,V$=2,U$=3,zl=class{refine(n,e){return e.forEach(function(r){if(r.start.isCertain("timezoneOffset"))return;let s=n.text.substring(r.index+r.text.length),a=Y$.exec(s);if(!a)return;n.debug(()=>{console.log(`Extracting timezone: '${a[0]}' into : ${r}`)});let o=parseInt(a[V$]),l=parseInt(a[U$]||"0"),u=o*60+l;u>14*60||(a[z$]==="-"&&(u=-u),r.end!=null&&r.end.assign("timezoneOffset",u),r.start.assign("timezoneOffset",u),r.text+=a[0])}),e}}});var Fa,y0=X(()=>{Fa=class{refine(n,e){if(e.length<2)return e;let r=[],s=e[0];for(let a=1;a<e.length;a++){let o=e[a];o.index<s.index+s.text.length?o.text.length>s.text.length&&(s=o):(r.push(s),s=o)}return s!=null&&r.push(s),r}}});var b0,Vl,w0=X(()=>{b0=En(An(),1);Ta();Vl=class{refine(n,e){return n.option.forwardDate&&e.forEach(function(r){let s=(0,b0.default)(n.refDate);if(r.start.isOnlyTime()&&s.isAfter(r.start.dayjs())&&(s=s.add(1,"day"),Ts(r.start,s),r.end&&r.end.isOnlyTime()&&(Ts(r.end,s),r.start.dayjs().isAfter(r.end.dayjs())&&(s=s.add(1,"day"),Ts(r.end,s)))),r.start.isOnlyWeekdayComponent()&&s.isAfter(r.start.dayjs())&&(s.day()>=r.start.get("weekday")?s=s.day(r.start.get("weekday")+7):s=s.day(r.start.get("weekday")),r.start.imply("day",s.date()),r.start.imply("month",s.month()+1),r.start.imply("year",s.year()),n.debug(()=>{console.log(`Forward weekly adjusted for ${r} (${r.start})`)}),r.end&&r.end.isOnlyWeekdayComponent()&&(s.day()>r.end.get("weekday")?s=s.day(r.end.get("weekday")+7):s=s.day(r.end.get("weekday")),r.end.imply("day",s.date()),r.end.imply("month",s.month()+1),r.end.imply("year",s.year()),n.debug(()=>{console.log(`Forward weekly adjusted for ${r} (${r.end})`)}))),r.start.isDateWithUnknownYear()&&s.isAfter(r.start.dayjs()))for(let a=0;a<3&&s.isAfter(r.start.dayjs());a++)r.start.imply("year",r.start.get("year")+1),n.debug(()=>{console.log(`Forward yearly adjusted for ${r} (${r.start})`)}),r.end&&!r.end.isCertain("year")&&(r.end.imply("year",r.end.get("year")+1),n.debug(()=>{console.log(`Forward yearly adjusted for ${r} (${r.end})`)}))}),e}}});var Ul,S0=X(()=>{Ma();Ul=class extends ad{constructor(n){super(),this.strictMode=n}isValid(n,e){return e.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(n.debug(()=>{console.log(`Removing unlikely result '${e.text}'`)}),!1):e.start.isValidDate()?e.end&&!e.end.isValidDate()?(n.debug(()=>{console.log(`Removing invalid result: ${e} (${e.end})`)}),!1):this.strictMode?this.isStrictModeValid(n,e):!0:(n.debug(()=>{console.log(`Removing invalid result: ${e} (${e.start})`)}),!1)}isStrictModeValid(n,e){return e.start.isOnlyWeekdayComponent()?(n.debug(()=>{console.log(`(Strict) Removing weekday only component: ${e} (${e.end})`)}),!1):e.start.isOnlyTime()&&(!e.start.isCertain("hour")||!e.start.isCertain("minute"))?(n.debug(()=>{console.log(`(Strict) Removing uncertain time component: ${e} (${e.end})`)}),!1):!0}}});var j$,q$,X$,K$,_0,Z$,T0,x0,C0,E0,jl,k0=X(()=>{lr();j$=new RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(?:Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i"),q$=1,X$=2,K$=3,_0=4,Z$=5,T0=6,x0=7,C0=8,E0=9,jl=class extends Ge{innerPattern(){return j$}innerExtract(n,e){let r={};if(r.year=parseInt(e[q$]),r.month=parseInt(e[X$]),r.day=parseInt(e[K$]),e[_0]!=null)if(r.hour=parseInt(e[_0]),r.minute=parseInt(e[Z$]),e[T0]!=null&&(r.second=parseInt(e[T0])),e[x0]!=null&&(r.millisecond=parseInt(e[x0])),e[C0]==null)r.timezoneOffset=0;else{let s=parseInt(e[C0]),a=0;e[E0]!=null&&(a=parseInt(e[E0]));let o=s*60;o<0?o-=a:o+=a,r.timezoneOffset=o}return r}}});var ql,D0=X(()=>{Ma();ql=class extends Di{mergeResults(n,e,r){let s=r.clone();return s.index=e.index,s.text=e.text+n+s.text,s.start.assign("weekday",e.start.get("weekday")),s.end&&s.end.assign("weekday",e.start.get("weekday")),s}shouldMergeResults(n,e,r){return e.start.isOnlyWeekdayComponent()&&!e.start.isCertain("hour")&&r.start.isCertain("day")&&n.match(/^,?\s*$/)!=null}}});function P0(t,n=!1){return t.parsers.unshift(new jl),t.refiners.unshift(new ql),t.refiners.unshift(new zl),t.refiners.unshift(new Fa),t.refiners.push(new Yl),t.refiners.push(new Fa),t.refiners.push(new Vl),t.refiners.push(new Ul(n)),t}var I0=X(()=>{v0();g0();y0();w0();S0();k0();D0()});function O0(t){let n=(0,$a.default)(t.instant),e=new ke(t,{});return di(e,n),ed(e,n),t.timezoneOffset!==null&&e.assign("timezoneOffset",n.utcOffset()),e}function M0(t){let n=(0,$a.default)(t.instant),e=new ke(t,{});return di(e,n),_a(e,n),e}function F0(t){return Q$(t,1)}function Q$(t,n){return N0(t,-n)}function $0(t){return N0(t,1)}function N0(t,n){let e=(0,$a.default)(t.instant),r=new ke(t,{});return e=e.add(n,"day"),di(r,e),_a(r,e),r}function A0(t,n=22){let e=(0,$a.default)(t.instant),r=new ke(t,{});return r.imply("hour",n),r.imply("meridiem",Me.PM),di(r,e),r}function L0(t,n=20){let e=new ke(t,{});return e.imply("meridiem",Me.PM),e.imply("hour",n),e}function R0(t){let n=new ke(t,{}),e=(0,$a.default)(t.instant);return e.hour()>2&&Lw(n,e),n.assign("hour",0),n.imply("minute",0),n.imply("second",0),n.imply("millisecond",0),n}function B0(t,n=6){let e=new ke(t,{});return e.imply("meridiem",Me.AM),e.imply("hour",n),e.imply("minute",0),e.imply("second",0),e.imply("millisecond",0),e}function G0(t,n=15){let e=new ke(t,{});return e.imply("meridiem",Me.PM),e.imply("hour",n),e.imply("minute",0),e.imply("second",0),e.imply("millisecond",0),e}function H0(t){let n=new ke(t,{});return n.imply("meridiem",Me.AM),n.imply("hour",12),n.imply("minute",0),n.imply("second",0),n.imply("millisecond",0),n}var $a,Ap=X(()=>{Ei();$a=En(An(),1);Ta();Ln()});var Y0,J$,Xl,z0=X(()=>{Y0=En(An(),1);lr();Ta();Ap();J$=/(now|today|tonight|tomorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i,Xl=class extends Ge{innerPattern(n){return J$}innerExtract(n,e){let r=(0,Y0.default)(n.refDate),s=e[0].toLowerCase(),a=n.createParsingComponents();switch(s){case"now":return O0(n.reference);case"today":return M0(n.reference);case"yesterday":return F0(n.reference);case"tomorrow":case"tmr":case"tmrw":return $0(n.reference);case"tonight":return A0(n.reference);default:s.match(/last\s*night/)&&(r.hour()>6&&(r=r.add(-1,"day")),di(a,r),a.imply("hour",0));break}return a}}});var eN,Kl,V0=X(()=>{lr();Ap();eN=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|midday|noon)(?=\W|$)/i,Kl=class extends Ge{innerPattern(){return eN}innerExtract(n,e){switch(e[1].toLowerCase()){case"afternoon":return G0(n.reference);case"evening":case"night":return L0(n.reference);case"midnight":return R0(n.reference);case"morning":return B0(n.reference);case"noon":case"midday":return H0(n.reference)}return null}}});function U0(t,n,e){let r=t.getDateWithAdjustedTimezone(),s=tN(r,n,e),a=new ke(t);return a=o0(a,{day:s}),a.assign("weekday",n),a}function tN(t,n,e){let r=t.getDay();switch(e){case"this":return od(t,n);case"last":return j0(t,n);case"next":return r==Tt.SUNDAY?n==Tt.SUNDAY?7:n:r==Tt.SATURDAY?n==Tt.SATURDAY?7:n==Tt.SUNDAY?8:1+n:n<r&&n!=Tt.SUNDAY?od(t,n):od(t,n)+7}return rN(t,n)}function rN(t,n){let e=j0(t,n),r=od(t,n);return r<-e?r:e}function od(t,n){let e=t.getDay(),r=n-e;return r<0&&(r+=7),r}function j0(t,n){let e=t.getDay(),r=n-e;return r>=0&&(r-=7),r}var q0=X(()=>{Ln();Ei();Al()});var iN,nN,sN,aN,Zl,X0=X(()=>{Vt();Bn();lr();q0();iN=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${zt(Fp)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i"),nN=1,sN=2,aN=3,Zl=class extends Ge{innerPattern(){return iN}innerExtract(n,e){let r=e[sN].toLowerCase(),s=Fp[r],a=e[nN],o=e[aN],l=a||o;l=l||"",l=l.toLowerCase();let u=null;return l=="last"||l=="past"?u="last":l=="next"?u="next":l=="this"&&(u="this"),U0(n.reference,s,u)}}});var K0,oN,lN,uN,Ql,Z0=X(()=>{Vt();Ei();K0=En(An(),1);lr();Bn();oN=new RegExp(`(this|last|past|next|after\\s*this)\\s*(${zt(kl)})(?=\\s*)(?=\\W|$)`,"i"),lN=1,uN=2,Ql=class extends Ge{innerPattern(){return oN}innerExtract(n,e){let r=e[lN].toLowerCase(),s=e[uN].toLowerCase(),a=kl[s];if(r=="next"||r.startsWith("after")){let u={};return u[a]=1,ke.createRelativeFromReference(n.reference,u)}if(r=="last"||r=="past"){let u={};return u[a]=-1,ke.createRelativeFromReference(n.reference,u)}let o=n.createParsingComponents(),l=(0,K0.default)(n.reference.instant);return s.match(/week/i)?(l=l.add(-l.get("d"),"d"),o.imply("day",l.date()),o.imply("month",l.month()+1),o.imply("year",l.year())):s.match(/month/i)?(l=l.add(-l.date()+1,"d"),o.imply("day",l.date()),o.assign("year",l.year()),o.assign("month",l.month()+1)):s.match(/year/i)&&(l=l.add(-l.date()+1,"d"),l=l.add(-l.month(),"month"),o.imply("day",l.date()),o.imply("month",l.month()+1),o.assign("year",l.year())),o}}});var cN,ld,dN,Q0,J0,Lp,Jl,eS=X(()=>{Ca();cN=new RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i"),ld=1,dN=5,Q0=2,J0=3,Lp=4,Jl=class{constructor(n){this.groupNumberMonth=n?J0:Q0,this.groupNumberDay=n?Q0:J0}pattern(){return cN}extract(n,e){if(e[ld].length==0&&e.index>0&&e.index<n.text.length){let u=n.text[e.index-1];if(u>="0"&&u<="9")return}let r=e.index+e[ld].length,s=e[0].substr(e[ld].length,e[0].length-e[ld].length-e[dN].length);if(s.match(/^\d\.\d$/)||s.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/)||!e[Lp]&&e[0].indexOf("/")<0)return;let a=n.createParsingResult(r,s),o=parseInt(e[this.groupNumberMonth]),l=parseInt(e[this.groupNumberDay]);if((o<1||o>12)&&o>12)if(l>=1&&l<=12&&o<=31)[l,o]=[o,l];else return null;if(l<1||l>31)return null;if(a.start.assign("day",l),a.start.assign("month",o),e[Lp]){let u=parseInt(e[Lp]),c=rd(u);a.start.assign("year",c)}else{let u=Gn(n.refDate,l,o);a.start.imply("year",u)}return a}}});var hN,fN,eu,tS=X(()=>{Vt();Ei();lr();Al();hN=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${Qi})(?=\\W|$)`,"i"),fN=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${Hn})(?=\\W|$)`,"i"),eu=class extends Ge{constructor(n=!0){super(),this.allowAbbreviations=n}innerPattern(){return this.allowAbbreviations?hN:fN}innerExtract(n,e){let r=e[1].toLowerCase(),s=ki(e[2]);switch(r){case"last":case"past":case"-":s=Oa(s);break}return ke.createRelativeFromReference(n.reference,s)}}});function rS(t){return t.text.match(/\s+(before|from)$/i)!=null}function pN(t){return t.text.match(/\s+(after|since)$/i)!=null}var tu,iS=X(()=>{Ma();Ei();Vt();Al();tu=class extends Di{patternBetween(){return/^\s*$/i}shouldMergeResults(n,e,r){return!n.match(this.patternBetween())||!rS(e)&&!pN(e)?!1:!!r.start.get("day")&&!!r.start.get("month")&&!!r.start.get("year")}mergeResults(n,e,r){let s=ki(e.text);rS(e)&&(s=Oa(s));let a=ke.createRelativeFromReference(new xa(r.start.date()),s);return new Zi(r.reference,e.index,`${e.text}${n}${r.text}`,a)}}});var xs,Rp=X(()=>{Vw();Xw();Qw();e0();r0();i0();a0();l0();u0();d0();m0();I0();z0();V0();X0();Z0();eS();tS();iS();xs=class{createCasualConfiguration(n=!1){let e=this.createConfiguration(!1,n);return e.parsers.unshift(new Xl),e.parsers.unshift(new Kl),e.parsers.unshift(new Ol),e.parsers.unshift(new Ql),e.parsers.unshift(new eu),e}createConfiguration(n=!0,e=!1){return P0({parsers:[new Jl(e),new Dl(n),new Pl,new Il,new Zl,new Ml,new Fl,new Nl(n),new Ll(n),new Rl(n)],refiners:[new tu,new Wl,new Gl]},n)}}});var Ji,Bp,nS=X(()=>{Ei();Rp();Ji=class{constructor(n){this.defaultConfig=new xs,n=n||this.defaultConfig.createCasualConfiguration(),this.parsers=[...n.parsers],this.refiners=[...n.refiners]}clone(){return new Ji({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(n,e,r){let s=this.parse(n,e,r);return s.length>0?s[0].start.date():null}parse(n,e,r){let s=new Bp(n,e,r),a=[];return this.parsers.forEach(o=>{let l=Ji.executeParser(s,o);a=a.concat(l)}),a.sort((o,l)=>o.index-l.index),this.refiners.forEach(function(o){a=o.refine(s,a)}),a}static executeParser(n,e){let r=[],s=e.pattern(n),a=n.text,o=n.text,l=s.exec(o);for(;l;){let u=l.index+a.length-o.length;l.index=u;let c=e.extract(n,l);if(!c){o=a.substring(l.index+1),l=s.exec(o);continue}let d=null;c instanceof Zi?d=c:c instanceof ke?(d=n.createParsingResult(l.index,l[0]),d.start=c):d=n.createParsingResult(l.index,l[0],c);let f=d.index,p=d.text;n.debug(()=>console.log(`${e.constructor.name} extracted (at index=${f}) '${p}'`)),r.push(d),o=a.substring(f+p.length),l=s.exec(o)}return r}},Bp=class{constructor(n,e,r){this.text=n,this.reference=new xa(e),this.option=r!=null?r:{},this.refDate=this.reference.instant}createParsingComponents(n){return n instanceof ke?n:new ke(this.reference,n)}createParsingResult(n,e,r,s){let a=typeof e=="string"?e:this.text.substring(n,e),o=r?this.createParsingComponents(r):null,l=s?this.createParsingComponents(s):null;return new Zi(this.reference,n,a,o,l)}debug(n){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(n):this.option.debug.debug(n))}}});var Gp,sS,mN,_se,aS=X(()=>{nS();Rp();Gp=new xs,sS=new Ji(Gp.createCasualConfiguration(!1)),mN=new Ji(Gp.createConfiguration(!0,!1)),_se=new Ji(Gp.createConfiguration(!1,!0))});function ud(t,n,e){return gN.parse(t,n,e)}var gN,oS=X(()=>{aS();gN=sS});function Hp(t){let n=t.start;return n.isCertain("hour")||n.isCertain("minute")?"time":n.isCertain("day")?"day":n.isCertain("month")?"month":"year"}function Na(t){return t.hour!==0||t.minute!==0||t.second!==0||t.millisecond!==0?"time":t.day!==1?"day":t.month!==1?"month":"year"}function Aa(t,n={}){if(!t||!t.trim())return{error:"empty"};let e=t.trim(),r=bN.test(e),s=e.match(uS);if(s){let c=parseInt(s[1]);if(c>0){if(/^\s*\d+\s*(?:CE|ce|A\.D\.|AD|ad|a\.d\.)\s*$/i.test(e)){let p=J.fromObject({year:c},{zone:n.timezone});if(p.isValid)return{start:p,precision:"year",approximate:r}}let f=[e.replace(uS,c.toString())];for(let p of f){let v=J.fromISO(p,{zone:n.timezone});if(v.isValid)return{start:v,precision:Na(v),approximate:r};let y=J.fromSQL(p,{zone:n.timezone});if(y.isValid)return{start:y,precision:Na(y),approximate:r}}try{let p=n.referenceDate,v=ud(e,p,{forwardDate:!!n.forwardDate});if(v&&v.length>0){let y=v[0],_=J.fromJSDate(y.start.date(),{zone:n.timezone}),S=y.end?J.fromJSDate(y.end.date(),{zone:n.timezone}):void 0,x=Hp(y);return{start:_,end:S,precision:x,approximate:r}}}catch(p){}}}let a=e.match(lS);if(a){let c=parseInt(a[1]);if(c>0){let d=1-c;if(/^\s*\d+\s*(?:BC|bce|BCE|B\.C\.|B\.C|B\.C\.E\.|b\.c\.|b\.c\.e\.|bc|b\.c\.e)\s*$/i.test(e)){let v=J.fromObject({year:d},{zone:n.timezone});if(v.isValid)return{start:v,precision:"year",approximate:r,isBCE:!0,originalYear:c}}let p=[e.replace(lS,d.toString()),d.toString()];for(let v of p){let y=J.fromISO(v,{zone:n.timezone});if(y.isValid)return{start:y,precision:Na(y),approximate:r,isBCE:!0,originalYear:c};let _=J.fromSQL(v,{zone:n.timezone});if(_.isValid)return{start:_,precision:Na(_),approximate:r,isBCE:!0,originalYear:c}}try{let v=n.referenceDate,y=ud(e,v,{forwardDate:!!n.forwardDate});if(y&&y.length>0){let _=y[0],S=_.start.date(),x=J.fromJSDate(S,{zone:n.timezone});if(x.year<0||a){let D=_.end?J.fromJSDate(_.end.date(),{zone:n.timezone}):void 0,E=Hp(_),P=a||x.year<0,O=a?c:x.year===0?1:Math.abs(x.year),A=x;if(a){let M=1-c;A=x.set({year:M,month:x.month,day:x.day})}return{start:A,end:D,precision:E,approximate:r,isBCE:!0,originalYear:O}}}}catch(v){}}}let o=J.fromISO(e,{zone:n.timezone});if(o.isValid)return{start:o,precision:Na(o),approximate:r};let l=J.fromSQL(e,{zone:n.timezone});if(l.isValid)return{start:l,precision:Na(l),approximate:r};try{let c=n.referenceDate,d=ud(e,c,{forwardDate:!!n.forwardDate});if(d&&d.length>0){let f=d[0],p=J.fromJSDate(f.start.date(),{zone:n.timezone}),v=f.end?J.fromJSDate(f.end.date(),{zone:n.timezone}):void 0,y=Hp(f);return{start:p,end:v,precision:y,approximate:r}}}catch(c){}let u=[["yyyy-MM","month"],["yyyy","year"],["LLL dd yyyy","day"],["LLLL dd yyyy","day"]];for(let[c,d]of u){let f=J.fromFormat(e,c,{zone:n.timezone});if(f.isValid)return{start:f,precision:d,approximate:r}}return{error:"unparsed"}}function Wp(t,n,e,r){if(!t)return"";if(e&&r){let a=t.month,o=t.day,l=r+" BCE";return a===1&&o===1?l:o===1?`${t.monthLong} ${l}`:`${t.monthLong} ${o}, ${l}`}return(n?t.setLocale(n):t).toLocaleString(J.DATETIME_MED_WITH_WEEKDAY)}function La(t){return t==null?void 0:t.toMillis()}var bN,lS,uS,Yp=X(()=>{Nw();oS();bN=/(circa|around|about|approx|~|approx\.)/i,lS=/\b(\d+)\s*(BC|bce|BCE|B\.C\.|B\.C|B\.C\.E\.|b\.c\.|b\.c\.e\.|bc|b\.c\.e)\b/i,uS=/\b(\d+)\s*(CE|ce|A\.D\.|AD|ad|a\.d\.)\b/i});var dS={};Cn(dS,{buildFrontmatter:()=>en,getWhitelistKeys:()=>Rt,parseSectionsFromMarkdown:()=>tn,toSafeFileName:()=>wN});function Rt(t){return cS[t]}function en(t,n,e,r){var c,d;let s=cS[t],a={},o=(c=r==null?void 0:r.customFieldsMode)!=null?c:"flatten",l=new Set(Object.keys(n||{})),u=n==null?void 0:n.customFields;if(u&&typeof u=="object"&&!Array.isArray(u)){let f=u;if(o==="flatten"){let p={};for(let[v,y]of Object.entries(f))if(v!=="customFields"){if(l.has(v)){p[v]=y;continue}if(y!=null){if(typeof y=="string"&&y.includes(`
`)){p[v]=y;continue}Array.isArray(y)&&y.length===0||typeof y=="object"&&Object.keys(y).length===0||(a[v]=y)}}Object.keys(p).length>0&&(a.customFields=p)}else Object.keys(f).length>0&&(a.customFields=f)}for(let[f,p]of Object.entries(n||{}))if((s.has(f)||(d=e==null?void 0:e.has(f))!=null&&d)&&!(f==="customFields"&&o==="flatten")&&p!=null){if(typeof p=="string"){if(p.includes(`
`))continue;a[f]=p;continue}if(Array.isArray(p)){if(p.length===0)continue;a[f]=p;continue}if(typeof p=="object"){if(Object.keys(p).length===0)continue;a[f]=p;continue}a[f]=p}return a}function tn(t){let n={};if(!t)return n;if(t.includes("##")){let e=t.split(`
`),r="",s=[];for(let a of e)if(a.startsWith("##")){if(r){let o=s.join(`
`).trim();n[r]=o}r=a.replace(/^##\s*/,"").trim(),s=[]}else r&&s.push(a);if(r){let a=s.join(`
`).trim();n[r]=a}}return Object.keys(n).length>0,n}function wN(t,n="Untitled"){return(t&&t.trim()?t:n).replace(/[\\/:"*?<>|#^\[\]{}]+/g,"")}var cS,rn=X(()=>{cS={character:new Set(["id","name","traits","relationships","locations","events","status","affiliation","groups","profileImagePath","customFields"]),location:new Set(["id","name","locationType","region","status","groups","profileImagePath","customFields"]),event:new Set(["id","name","dateTime","characters","location","status","groups","profileImagePath","customFields"]),item:new Set(["id","name","isPlotCritical","currentOwner","pastOwners","currentLocation","associatedEvents","groups","profileImagePath","customFields"]),reference:new Set(["id","name","category","tags","profileImagePath"]),chapter:new Set(["id","name","number","tags","profileImagePath","linkedCharacters","linkedLocations","linkedEvents","linkedItems","linkedGroups"]),scene:new Set(["id","name","chapterId","chapterName","status","priority","tags","profileImagePath","linkedCharacters","linkedLocations","linkedEvents","linkedItems","linkedGroups"])}});function cd(t){hS=t}function g(t,...n){let e=TN[hS][t];return typeof e=="function"?e(...n):e}var SN,_N,TN,hS,ze=X(()=>{SN={dashboardTitle:"Storyteller suite",openDashboard:"Open dashboard",createNew:"Create new",uploadImage:"Upload Image",image:"Image",storyCreated:t=>`Story "${t}" created and activated.`,created:(t,n)=>`${t} "${n}" created.`,updated:(t,n)=>`${t} "${n}" updated.`,movedToTrash:(t,n)=>`${t} "${n}" moved to trash.`,imageUploaded:t=>`Image uploaded: ${t}`,errorUploadingImage:"Error uploading image. Please try again.",noteCreatedWithSections:"Note created with standard sections for easy editing.",workspaceLeafCreateError:"Error opening dashboard: Could not create workspace leaf.",workspaceLeafRevealError:"Error revealing dashboard: Workspace leaf not found.",errorCannotDeleteWithoutFilePath:t=>`Error: Cannot delete ${t} without file path.`,errorCannotOpenNoteWithoutFilePath:t=>`Error: Cannot open ${t} note without file path.`,remoteImagesBlocked:"Remote images are blocked by settings. Import the image to your gallery to use it safely.",importImage:"Import image",language:"Language",selectLanguage:"Select language",english:"English",chinese:"Chinese (\u4E2D\u6587)",languageChanged:"Language changed. Reload plugin for full effect.",name:"Name",description:"Description",backstory:"Backstory",history:"History",location:"Location",character:"Character",event:"Event",item:"Item",reference:"Reference",chapter:"Chapter",scene:"Scene",group:"Group",characters:"Characters",locations:"Locations",events:"Events",items:"Items",references:"References",chapters:"Chapters",scenes:"Scenes",groups:"Groups",gallery:"Gallery",timeline:"Timeline",create:"Create",edit:"Edit",delete:"Delete",save:"Save",cancel:"Cancel",view:"View",upload:"Upload",import:"Import",export:"Export",createNewCharacter:"Create new character",editCharacter:"Edit character",createNewLocation:"Create new location",editLocation:"Edit location",createNewEvent:"Create new event",editEvent:"Edit event",createNewItem:"Create new item",editItem:"Edit item",createNewReference:"Create new reference",editReference:"Edit reference",createNewChapter:"Create new chapter",editChapter:"Edit chapter",createNewScene:"Create new scene",editScene:"Edit scene",createNewGroup:"Create new group",editGroup:"Edit group",tags:"Tags",summary:"Summary",content:"Content",number:"Number",orderingNumber:"Ordering number (optional)",category:"Category",createCharacter:"Create character",createLocation:"Create location",createEvent:"Create event",createItem:"Create item",createReference:"Create reference",createChapter:"Create chapter",createScene:"Create scene",createGroup:"Create group",saveChanges:"Save changes",deleteCharacter:"Delete character",deleteLocation:"Delete location",deleteEvent:"Delete event",deleteItem:"Delete item",deleteReference:"Delete reference",deleteChapter:"Delete chapter",deleteScene:"Delete scene",deleteGroup:"Delete group",add:"Add",clear:"Clear",ok:"OK",confirm:"Confirm",selectBtn:"Select",previewBtn:"Preview",editBtn:"Edit",openNoteBtn:"Open Note",flattenCustomFields:"Flatten to native keys (recommended)",nestedCustomFields:"Nested under customFields (YAML map)",noGrouping:"No grouping",byLocation:"By location",byGroup:"By group",noneOption:"None",fitOption:"Fit",decadeOption:"Decade",centuryOption:"Century",customFoldersPlaceholderWarning:'Custom folders use {story*} placeholders. Select or create an active story, then click "Rescan custom folders".',openNote:"Open note",createGroupBtn:"Create group",createChapterBtn:"Create chapter",createSceneBtn:"Create scene",createReferenceBtn:"Create reference",viewCharacters:"View characters",viewLocations:"View locations",viewEvents:"View events",viewItems:"View items",viewReferences:"View references",viewChapters:"View chapters",viewScenes:"View scenes",viewGroups:"View groups",viewTimeline:"View timeline",viewGallery:"View gallery",selectOrCreateStoryFirst:"Select or create a story first.",selectGroupPlaceholder:"-- Select group --",affiliation:"Affiliation",groupsHelpCharacter:"Assign this character to one or more groups.",members:"Members",noCustomFields:"No custom fields defined.",selectFromGallery:"Select from gallery",clearImage:"Clear image",addImage:"Add image",imageGallery:"Image gallery",filter:"Filter",search:"Search",storyName:"Story Name",createNewStory:"Create new story",plotItems:"Plot items",title:"Title",caption:"Caption",fit:"Fit",decade:"Decade",century:"Century",today:"Today",copyRange:"Copy range",stackItems:"Stack items",goToChapter:"Go to chapter",unassigned:"Unassigned",chapterTitlePh:"Chapter title",sceneTitlePh:"Scene title",numberEg:"e.g., 1",tagsPh:"tag1, tag2",briefChapterSummaryPh:"Brief summary for this chapter...",writeYourScenePh:"Write your scene...",beatSheet:"Beat sheet (one per line)",beatSheetExample:"- Meet the mentor\\n- The refusal",stories:"Stories",active:"Active",setActive:"Set Active",editStory:"Edit Story",storyDiscovery:"Story discovery",refreshDiscovery:"Refresh discovery",galleryUploadFolder:"Gallery upload folder",timelineAndParsing:"Timeline and parsing",customFieldsSerialization:"Custom fields serialization",forwardDateBias:"Forward-date bias for natural language parsing",customToday:"Custom today (timeline reference)",defaultTimelineGrouping:"Default timeline grouping",defaultZoomPreset:"Default zoom preset",defaultStacking:"Default stacking",defaultDensity:"Default density",showLegendByDefault:"Show legend by default",timelineDefaultHeight:"Timeline default height",useCustomEntityFolders:"Use custom entity folders",previewResolvedFolders:"Preview resolved folders",storyRootFolderOptional:"Story root folder (optional)",charactersFolder:"Characters folder",locationsFolder:"Locations folder",eventsFolder:"Events folder",itemsFolder:"Items folder",referencesFolder:"References folder",scenesFolder:"Scenes folder",chaptersFolder:"Chapters folder",oneStoryMode:"One Story Mode",oneStoryBaseFolder:"One Story base folder",showTutorialSection:"Show tutorial section",support:"Support",supportDevelopment:"Support development",about:"About",pluginInformation:"Plugin information",buyMeACoffee:"Buy me a coffee",github:"GitHub",preview:"Preview",clearCustomToday:"Clear custom today",enterCharacterName:"Enter character name",characterDescriptionPh:"A brief description of the character...",traitsPlaceholder:"e.g., Brave, Curious, Stubborn",characterHistoryPh:"The character's history...",statusPlaceholderCharacter:"e.g., Alive, Deceased, Missing",enterItemName:"Enter item name",itemDescriptionPh:"A visual description of the item...",itemHistoryPh:"The item's origin, past, and significance...",enterLocationName:"Enter location name",locationDescriptionPh:"A brief description of the location...",locationHistoryPh:"The location's history and past events...",statusPlaceholderLocation:"e.g., Active, Ruins, Abandoned",enterEventName:"Enter event name",eventDescriptionPh:"A description of the event...",eventOutcomePh:"The result or consequences of the event...",enterDateTime:"Enter date/time",statusPlaceholderEvent:"e.g., Upcoming, Completed, Ongoing, key plot point",dateTime:"Date/time",outcome:"Outcome",status:"Status",charactersInvolved:"Characters involved",associatedImages:"Associated images",links:"Links",relationships:"Relationships & Location",currentOwner:"Current Owner",currentLocation:"Current Location",plotCritical:"Plot Critical",traits:"Traits",profileImage:"Profile image",itemImage:"Item Image",selectOwner:"Select Owner",selectLocation:"Select Location",changeLocation:"Change location",clearLocation:"Clear location (set to none)",addCharacter:"Add character",addCustomField:"Add custom field",fieldName:"Field name",fieldValue:"Field value",customFieldValueTitle:"Custom field value",newCustomFieldTitle:"New custom field",valueForX:t=>`Value for "${t}"`,fieldNameCannotBeEmpty:"Field name cannot be empty",thatNameIsReserved:"That name is reserved",fieldAlreadyExists:"A field with that name already exists",characterNameRequired:"Character name cannot be empty.",eventNameRequired:"Event name cannot be empty.",itemNameRequired:"Item name cannot be empty.",customFields:"Custom fields",select:"Select",current:"Current",none:"None",removeX:t=>`Remove ${t}`,removeFieldX:t=>`Remove field "${t}"`,filterX:t=>`Filter ${t}`,searchX:t=>`Search ${t}...`,newStory:"+ New story",noCharactersFound:'No characters found. Click "Create new" to add your first character.',noLocationsFound:"No locations found.",noEventsFound:"No events found.",noItemsFound:"No items found.",noImagesFound:"No images found.",noGroupsFound:"No groups found.",noReferencesFound:"No references found.",noChaptersFound:"No chapters found.",noScenesFound:"No scenes found.",matchingFilter:" Matching filter.",filterItems:"Filter Items",filterGroups:"Filter groups",noMembers:"No members.",enterGroupName:"Enter group name",describeGroupPh:"Describe this group...",color:"Color",colorPlaceholder:"#RRGGBB or color name",groupNameRequired:"Group name is required.",groupNameExists:"A group with this name already exists. Please choose a different name.",addImageDetails:"Add image details",editImageDetails:"Edit image details",commaSeparatedTags:"Comma-separated tags.",commaSeparatedCharacterNames:"Comma-separated character names.",commaSeparatedLocationNames:"Comma-separated location names.",commaSeparatedEventNames:"Comma-separated event names.",saveDetails:"Save details",removeFromGallery:"Remove from gallery",imageDetailsSaved:t=>`Image details for "${t}" saved.`,imageRemovedFromGallery:t=>`Image "${t}" removed from gallery.`,confirmDeleteScene:t=>`Delete scene "${t}"?`,confirmDeleteReference:t=>`Delete reference "${t}"?`,confirmDeleteChapter:t=>`Delete chapter "${t}"?`,confirmDeleteGroup:t=>`Are you sure you want to delete group "${t}"?`,confirmDeleteCharacter:t=>`Are you sure you want to delete "${t}"?`,confirmDeleteEvent:t=>`Are you sure you want to delete the event "${t}"? This will move the note to system trash.`,confirmDeleteLocation:t=>`Are you sure you want to delete "${t}"?`,confirmDeleteItem:t=>`Are you sure you want to delete "${t}"?`,confirmDeleteStory:t=>`Delete story "${t}"? This cannot be undone.`,confirmRemoveImageFromGallery:t=>`Are you sure you want to remove "${t}" from the gallery? This does not delete the file itself.`,confirmDeleteCharacterTrash:t=>`Are you sure you want to delete "${t}"? This will move the file to system trash.`,confirmDeleteItemTrash:t=>`Are you sure you want to delete "${t}"? This will move the file to system trash.`,sceneCreated:t=>`Scene "${t}" created.`,sceneUpdated:t=>`Scene "${t}" updated.`,chapterCreated:t=>`Chapter "${t}" created.`,chapterUpdated:t=>`Chapter "${t}" updated.`,referenceCreated:t=>`Reference "${t}" created.`,referenceUpdated:t=>`Reference "${t}" updated.`,groupCreated:t=>`Group "${t}" created.`,groupRenamed:t=>`Group renamed to "${t}".`,groupDeleted:t=>`Group "${t}" deleted.`,characterDeleted:t=>`Character "${t}" deleted.`,locationDeleted:t=>`Location "${t}" deleted.`,itemDeleted:t=>`Item "${t}" deleted.`,fileMovedToTrash:t=>`${t} file moved to trash.`,characterLinkedAlready:t=>`Character "${t}" is already linked.`,failedToDelete:t=>`Failed to delete ${t}.`,failedToSave:t=>`Failed to save ${t}.`,customFieldError:"Custom field name must be unique, non-empty, and not reserved.",sceneNameRequired:"Scene title is required.",chapterNameRequired:"Chapter title is required.",locationNameRequired:"Location name cannot be empty.",errorLoadingCharacters:"Error loading characters. Check console.",errorLoadingLocations:"Error loading locations. Check console.",errorLoadingEvents:"Error loading events. Check console.",errorLoadingItems:"Error loading items. Check console.",groupNotFound:"Group not found.",noGroupsToRename:"No groups to rename.",noGroupsToDelete:"No groups to delete.",couldNotFindNote:"Could not find the note file.",autoDetectedStories:t=>`Storyteller: Auto-detected and imported ${t} new story folder(s).`,errorDiscoveringStories:t=>`Storyteller Suite: Error discovering stories: ${t}`,storiesRefreshed:t=>`Storyteller: Found and imported ${t} new story folder(s).`,noNewStoriesFound:"Storyteller: No new story folders found.",errorRefreshingStories:t=>`Storyteller Suite: Error refreshing stories: ${t}`,errorScanningFolders:t=>`Storyteller Suite: Error scanning custom folders: ${t}`,couldNotAutoDetect:"Storyteller: Could not auto-detect a story root. Please set folders manually.",autoDetectedFolders:(t,n)=>`Storyteller: Auto-detected custom folders under "${t}" (matches: ${n}).`,uploadedToVault:t=>`Uploaded "${t}" to vault.`,errorUploadingFile:"Error uploading file. Check console for details.",errorParsingFile:t=>`Error parsing file: ${t}`,currentValue:t=>`Current: ${t}`,ownerValue:t=>`Owner: ${t}`,noImagesFoundFilter:"No images found. Matching filter.",tutorialGettingStarted:"Tutorial and getting started",type:"Type",region:"Region",storyNameField:"Story Name",descriptionField:"Description",beatSheetPh:`- Meet the mentor
- The refusal`,categoryPh:"Language, Prophecy, Inspiration, Misc, ...",fieldNamePh:"Field name",fieldValuePh:"Field value",galleryUploadFolderPh:"StorytellerSuite/GalleryUploads",customTodayPh:"YYYY-MM-DD or full ISO (supports BCE dates)",timelineHeightPh:"e.g., 380px",storyRootFolderPh:"Creative/Writing/{storyName}",charactersFolderPh:"MyStory/Characters",locationsFolderPh:"MyStory/Locations",eventsFolderPh:"MyStory/Events",itemsFolderPh:"MyStory/Items",referencesFolderPh:"MyStory/References",scenesFolderPh:"MyStory/Scenes",chaptersFolderPh:"MyStory/Chapters",oneStoryBaseFolderPh:"StorytellerSuite",enterStoryNamePh:"Enter story name",describeStoryPh:"Describe your story (optional)",selectImageFilePh:"Select an image file...",filterImagesPh:"Filter by title, tag, link...",selectItemPh:"Select an item to link...",selectEventLocationPh:"Select the event's location...",selectGroupPh:"Select a group\u2026",filterFoldersPh:"Type to filter folders\u2026",selectGalleryImagePh:"Select an image from the gallery...",selectEventPh:"Select an event to link...",selectCharacterPh:"Select a character to link...",priorityInChapter:"Priority in chapter",priorityEg:"e.g., 1",beatSheetOneLine:"Beat sheet one line",writeScenePh:"Write your scene...",scanVaultDesc:"Scan your vault for existing Storyteller stories and import them. Useful after moving folders or changing structure.",galleryFolderDesc:"Folder where uploaded gallery images will be stored",customFieldsDesc:"Choose how custom fields are stored in frontmatter",forwardDateBiasDesc:'Prefer future interpretation for relative dates (e.g., "Friday")',customTodayDesc:"Optional date used for the Today button and relative parsing. Supports BCE dates (e.g., 2024-01-15 for CE, or -00499-01-01 for 500 BCE). Leave empty to use system today.",timelineHeightDesc:"Adjust the height of the timeline modal",useCustomFoldersDesc:"When enabled, use the folder paths below. You can include {storyName}, {storySlug}, or {storyId} to make per-story folders (e.g., Creative/Writing/{storyName}/Characters).",previewFoldersDesc:"See each entity's resolved folder path based on current settings and active story",storyRootDesc:"Base path template for all entities. Supports {storyName}, {storySlug}, {storyId}. Example: Creative/Writing/{storyName}",charactersFolderDesc:"Path for character markdown files (placeholders allowed: {storyName}, {storySlug}, {storyId})",locationsFolderDesc:"Path for location markdown files (placeholders allowed: {storyName}, {storySlug}, {storyId})",eventsFolderDesc:"Path for event markdown files (placeholders allowed: {storyName}, {storySlug}, {storyId})",itemsFolderDesc:"Path for item markdown files (placeholders allowed: {storyName}, {storySlug}, {storyId})",referencesFolderDesc:"Path for reference markdown files (placeholders allowed: {storyName}, {storySlug}, {storyId})",scenesFolderDesc:"Path for scene markdown files (placeholders allowed: {storyName}, {storySlug}, {storyId})",chaptersFolderDesc:"Path for chapter markdown files (placeholders allowed: {storyName}, {storySlug}, {storyId})",oneStoryModeDesc:"Flatten the folder structure to a single story. When enabled (and custom folders disabled), content goes under a single base folder without Stories/StoryName.",oneStoryBaseFolderDesc:"Base folder for Characters/Locations/Events/Items/References/Chapters",showTutorialDesc:"Display the tutorial and getting started section in settings",supportDevDesc:"If you find this plugin helpful, consider supporting its development",pluginInfoDesc:"Storyteller Suite - A comprehensive suite for managing characters, locations, events, and galleries for your stories.",storyNameDesc:"Required. Must be unique.",descriptionOptionalDesc:"Optional",locationNameDesc:"The location's name.",locationTypeDesc:"e.g., City, Forest, Castle, Tavern",locationRegionDesc:"Broader geographic area.",locationStatusDesc:"e.g., Active, Ruins, Abandoned",assignToGroupsDesc:"Assign this location to one or more groups.",manageGroupsDesc:"Manage your groups. Shared across all entity types.",searchGroupsDesc:"Search by group name or description.",manageCharactersDesc:"Manage your story characters.",manageLocationsDesc:"Manage your story locations.",manageEventsDesc:"Manage your story events.",manageImagesDesc:"Manage your story images.",assignEventToGroupsDesc:"Assign this event to one or more groups.",assignItemToGroupsDesc:"Assign this item to one or more groups.",assignCharacterToGroupsDesc:"Assign this character to one or more groups."},_N={dashboardTitle:"\u6545\u4E8B\u8BB2\u8FF0\u8005\u5957\u4EF6",openDashboard:"\u6253\u5F00\u4EEA\u8868\u677F",createNew:"\u521B\u5EFA\u65B0\u7684",uploadImage:"\u4E0A\u4F20\u56FE\u50CF",image:"\u56FE\u50CF",storyCreated:t=>`\u6545\u4E8B"${t}"\u5DF2\u521B\u5EFA\u5E76\u6FC0\u6D3B\u3002`,created:(t,n)=>`${t}"${n}"\u5DF2\u521B\u5EFA\u3002`,updated:(t,n)=>`${t}"${n}"\u5DF2\u66F4\u65B0\u3002`,movedToTrash:(t,n)=>`${t}"${n}"\u5DF2\u79FB\u81F3\u56DE\u6536\u7AD9\u3002`,imageUploaded:t=>`\u56FE\u50CF\u5DF2\u4E0A\u4F20\uFF1A${t}`,errorUploadingImage:"\u4E0A\u4F20\u56FE\u50CF\u51FA\u9519\u3002\u8BF7\u91CD\u8BD5\u3002",noteCreatedWithSections:"\u5DF2\u521B\u5EFA\u5E26\u6709\u6807\u51C6\u7AE0\u8282\u7684\u7B14\u8BB0\uFF0C\u4FBF\u4E8E\u7F16\u8F91\u3002",workspaceLeafCreateError:"\u6253\u5F00\u4EEA\u8868\u677F\u65F6\u51FA\u9519\uFF1A\u65E0\u6CD5\u521B\u5EFA\u5DE5\u4F5C\u533A\u53F6\u3002",workspaceLeafRevealError:"\u663E\u793A\u4EEA\u8868\u677F\u65F6\u51FA\u9519\uFF1A\u5DE5\u4F5C\u533A\u53F6\u672A\u627E\u5230\u3002",errorCannotDeleteWithoutFilePath:t=>`\u9519\u8BEF\uFF1A\u6CA1\u6709\u6587\u4EF6\u8DEF\u5F84\uFF0C\u65E0\u6CD5\u5220\u9664${t}\u3002`,errorCannotOpenNoteWithoutFilePath:t=>`\u9519\u8BEF\uFF1A\u6CA1\u6709\u6587\u4EF6\u8DEF\u5F84\uFF0C\u65E0\u6CD5\u6253\u5F00${t}\u7B14\u8BB0\u3002`,remoteImagesBlocked:"\u8BBE\u7F6E\u963B\u6B62\u4E86\u8FDC\u7A0B\u56FE\u50CF\u3002\u8BF7\u5C06\u56FE\u50CF\u5BFC\u5165\u56FE\u5E93\u4EE5\u5B89\u5168\u4F7F\u7528\u3002",importImage:"\u5BFC\u5165\u56FE\u50CF",language:"\u8BED\u8A00",selectLanguage:"\u9009\u62E9\u8BED\u8A00",english:"English (\u82F1\u8BED)",chinese:"\u4E2D\u6587 (Chinese)",languageChanged:"\u8BED\u8A00\u5DF2\u66F4\u6539\u3002\u91CD\u65B0\u52A0\u8F7D\u63D2\u4EF6\u4EE5\u5B8C\u5168\u751F\u6548\u3002",name:"\u540D\u79F0",description:"\u63CF\u8FF0",backstory:"\u80CC\u666F\u6545\u4E8B",history:"\u5386\u53F2",location:"\u4F4D\u7F6E",character:"\u89D2\u8272",event:"\u4E8B\u4EF6",item:"\u7269\u54C1",reference:"\u53C2\u8003",chapter:"\u7AE0\u8282",scene:"\u573A\u666F",group:"\u7EC4\u7FA4",characters:"\u89D2\u8272",locations:"\u4F4D\u7F6E",events:"\u4E8B\u4EF6",items:"\u7269\u54C1",references:"\u53C2\u8003",chapters:"\u7AE0\u8282",scenes:"\u573A\u666F",groups:"\u7EC4\u7FA4",gallery:"\u56FE\u5E93",timeline:"\u65F6\u95F4\u7EBF",create:"\u521B\u5EFA",edit:"\u7F16\u8F91",delete:"\u5220\u9664",save:"\u4FDD\u5B58",cancel:"\u53D6\u6D88",view:"\u67E5\u770B",upload:"\u4E0A\u4F20",import:"\u5BFC\u5165",export:"\u5BFC\u51FA",createNewCharacter:"\u521B\u5EFA\u65B0\u89D2\u8272",editCharacter:"\u7F16\u8F91\u89D2\u8272",createNewLocation:"\u521B\u5EFA\u65B0\u4F4D\u7F6E",editLocation:"\u7F16\u8F91\u4F4D\u7F6E",createNewEvent:"\u521B\u5EFA\u65B0\u4E8B\u4EF6",editEvent:"\u7F16\u8F91\u4E8B\u4EF6",createNewItem:"\u521B\u5EFA\u65B0\u7269\u54C1",editItem:"\u7F16\u8F91\u7269\u54C1",createNewReference:"\u521B\u5EFA\u65B0\u53C2\u8003",editReference:"\u7F16\u8F91\u53C2\u8003",createNewChapter:"\u521B\u5EFA\u65B0\u7AE0\u8282",editChapter:"\u7F16\u8F91\u7AE0\u8282",createNewScene:"\u521B\u5EFA\u65B0\u573A\u666F",editScene:"\u7F16\u8F91\u573A\u666F",createNewGroup:"\u521B\u5EFA\u65B0\u7EC4\u7FA4",editGroup:"\u7F16\u8F91\u7EC4\u7FA4",tags:"\u6807\u7B7E",summary:"\u6458\u8981",content:"\u5185\u5BB9",number:"\u7F16\u53F7",orderingNumber:"\u6392\u5E8F\u7F16\u53F7\uFF08\u53EF\u9009\uFF09",category:"\u7C7B\u522B",createCharacter:"\u521B\u5EFA\u89D2\u8272",createLocation:"\u521B\u5EFA\u4F4D\u7F6E",createEvent:"\u521B\u5EFA\u4E8B\u4EF6",createItem:"\u521B\u5EFA\u7269\u54C1",createReference:"\u521B\u5EFA\u53C2\u8003",createChapter:"\u521B\u5EFA\u7AE0\u8282",createScene:"\u521B\u5EFA\u573A\u666F",createGroup:"\u521B\u5EFA\u7EC4\u7FA4",saveChanges:"\u4FDD\u5B58\u66F4\u6539",deleteCharacter:"\u5220\u9664\u89D2\u8272",deleteLocation:"\u5220\u9664\u4F4D\u7F6E",deleteEvent:"\u5220\u9664\u4E8B\u4EF6",deleteItem:"\u5220\u9664\u7269\u54C1",deleteReference:"\u5220\u9664\u53C2\u8003",deleteChapter:"\u5220\u9664\u7AE0\u8282",deleteScene:"\u5220\u9664\u573A\u666F",deleteGroup:"\u5220\u9664\u7EC4\u7FA4",add:"\u6DFB\u52A0",clear:"\u6E05\u9664",ok:"\u786E\u5B9A",confirm:"\u786E\u8BA4",selectBtn:"\u9009\u62E9",previewBtn:"\u9884\u89C8",editBtn:"\u7F16\u8F91",openNoteBtn:"\u6253\u5F00\u7B14\u8BB0",flattenCustomFields:"\u5C55\u5E73\u4E3A\u539F\u751F\u952E\uFF08\u63A8\u8350\uFF09",nestedCustomFields:"\u5D4C\u5957\u5728customFields\u4E0B\uFF08YAML\u6620\u5C04\uFF09",noGrouping:"\u65E0\u5206\u7EC4",byLocation:"\u6309\u4F4D\u7F6E",byGroup:"\u6309\u7EC4\u7FA4",noneOption:"\u65E0",fitOption:"\u9002\u914D",decadeOption:"\u5341\u5E74",centuryOption:"\u4E16\u7EAA",customFoldersPlaceholderWarning:'\u81EA\u5B9A\u4E49\u6587\u4EF6\u5939\u4F7F\u7528{story*}\u5360\u4F4D\u7B26\u3002\u8BF7\u9009\u62E9\u6216\u521B\u5EFA\u4E00\u4E2A\u6D3B\u52A8\u6545\u4E8B\uFF0C\u7136\u540E\u70B9\u51FB"\u91CD\u65B0\u626B\u63CF\u81EA\u5B9A\u4E49\u6587\u4EF6\u5939"\u3002',openNote:"\u6253\u5F00\u7B14\u8BB0",createGroupBtn:"\u521B\u5EFA\u7EC4\u7FA4",createChapterBtn:"\u521B\u5EFA\u7AE0\u8282",createSceneBtn:"\u521B\u5EFA\u573A\u666F",createReferenceBtn:"\u521B\u5EFA\u53C2\u8003",viewCharacters:"\u67E5\u770B\u89D2\u8272",viewLocations:"\u67E5\u770B\u4F4D\u7F6E",viewEvents:"\u67E5\u770B\u4E8B\u4EF6",viewItems:"\u67E5\u770B\u7269\u54C1",viewReferences:"\u67E5\u770B\u53C2\u8003",viewChapters:"\u67E5\u770B\u7AE0\u8282",viewScenes:"\u67E5\u770B\u573A\u666F",viewGroups:"\u67E5\u770B\u7EC4\u7FA4",viewTimeline:"\u67E5\u770B\u65F6\u95F4\u7EBF",viewGallery:"\u67E5\u770B\u56FE\u5E93",selectOrCreateStoryFirst:"\u8BF7\u5148\u9009\u62E9\u6216\u521B\u5EFA\u4E00\u4E2A\u6545\u4E8B\u3002",selectGroupPlaceholder:"-- \u9009\u62E9\u7EC4\u7FA4 --",affiliation:"\u96B6\u5C5E",groupsHelpCharacter:"\u5C06\u6B64\u89D2\u8272\u5206\u914D\u5230\u4E00\u4E2A\u6216\u591A\u4E2A\u7EC4\u7FA4\u3002",members:"\u6210\u5458",noCustomFields:"\u672A\u5B9A\u4E49\u81EA\u5B9A\u4E49\u5B57\u6BB5\u3002",selectFromGallery:"\u4ECE\u56FE\u5E93\u9009\u62E9",clearImage:"\u6E05\u9664\u56FE\u50CF",addImage:"\u6DFB\u52A0\u56FE\u50CF",imageGallery:"\u56FE\u50CF\u5E93",filter:"\u7B5B\u9009",search:"\u641C\u7D22",storyName:"\u6545\u4E8B\u540D\u79F0",createNewStory:"\u521B\u5EFA\u65B0\u6545\u4E8B",plotItems:"\u60C5\u8282\u7269\u54C1",title:"\u6807\u9898",caption:"\u8BF4\u660E",fit:"\u9002\u914D",decade:"\u5341\u5E74",century:"\u4E16\u7EAA",today:"\u4ECA\u5929",copyRange:"\u590D\u5236\u8303\u56F4",stackItems:"\u5806\u53E0\u9879\u76EE",goToChapter:"\u524D\u5F80\u7AE0\u8282",unassigned:"\u672A\u5206\u914D",chapterTitlePh:"\u7AE0\u8282\u6807\u9898",sceneTitlePh:"\u573A\u666F\u6807\u9898",numberEg:"\u4F8B\u5982\uFF1A1",tagsPh:"\u6807\u7B7E1\uFF0C\u6807\u7B7E2",briefChapterSummaryPh:"\u672C\u7AE0\u8282\u7684\u7B80\u8981\u6458\u8981...",writeYourScenePh:"\u5199\u4E0B\u4F60\u7684\u573A\u666F...",beatSheet:"\u8282\u62CD\u8868\uFF08\u6BCF\u884C\u4E00\u4E2A\uFF09",beatSheetExample:"- \u9047\u89C1\u5BFC\u5E08\\n- \u62D2\u7EDD",stories:"\u6545\u4E8B",active:"\u5DF2\u6FC0\u6D3B",setActive:"\u8BBE\u4E3A\u6FC0\u6D3B",editStory:"\u7F16\u8F91\u6545\u4E8B",storyDiscovery:"\u6545\u4E8B\u53D1\u73B0",refreshDiscovery:"\u5237\u65B0\u53D1\u73B0",galleryUploadFolder:"\u56FE\u5E93\u4E0A\u4F20\u6587\u4EF6\u5939",timelineAndParsing:"\u65F6\u95F4\u7EBF\u4E0E\u89E3\u6790",customFieldsSerialization:"\u81EA\u5B9A\u4E49\u5B57\u6BB5\u5E8F\u5217\u5316",forwardDateBias:"\u81EA\u7136\u8BED\u8A00\u89E3\u6790\u504F\u5411\u672A\u6765",customToday:"\u81EA\u5B9A\u4E49\u4ECA\u5929\uFF08\u65F6\u95F4\u7EBF\u53C2\u8003\uFF09",defaultTimelineGrouping:"\u9ED8\u8BA4\u65F6\u95F4\u7EBF\u5206\u7EC4",defaultZoomPreset:"\u9ED8\u8BA4\u7F29\u653E\u9884\u8BBE",defaultStacking:"\u9ED8\u8BA4\u5806\u53E0",defaultDensity:"\u9ED8\u8BA4\u5BC6\u5EA6",showLegendByDefault:"\u9ED8\u8BA4\u663E\u793A\u56FE\u4F8B",timelineDefaultHeight:"\u65F6\u95F4\u7EBF\u9ED8\u8BA4\u9AD8\u5EA6",useCustomEntityFolders:"\u4F7F\u7528\u81EA\u5B9A\u4E49\u5B9E\u4F53\u6587\u4EF6\u5939",previewResolvedFolders:"\u9884\u89C8\u89E3\u6790\u540E\u7684\u6587\u4EF6\u5939",storyRootFolderOptional:"\u6545\u4E8B\u6839\u6587\u4EF6\u5939\uFF08\u53EF\u9009\uFF09",charactersFolder:"\u89D2\u8272\u6587\u4EF6\u5939",locationsFolder:"\u4F4D\u7F6E\u6587\u4EF6\u5939",eventsFolder:"\u4E8B\u4EF6\u6587\u4EF6\u5939",itemsFolder:"\u7269\u54C1\u6587\u4EF6\u5939",referencesFolder:"\u53C2\u8003\u6587\u4EF6\u5939",scenesFolder:"\u573A\u666F\u6587\u4EF6\u5939",chaptersFolder:"\u7AE0\u8282\u6587\u4EF6\u5939",oneStoryMode:"\u5355\u6545\u4E8B\u6A21\u5F0F",oneStoryBaseFolder:"\u5355\u6545\u4E8B\u57FA\u7840\u6587\u4EF6\u5939",showTutorialSection:"\u663E\u793A\u6559\u7A0B\u90E8\u5206",support:"\u652F\u6301",supportDevelopment:"\u652F\u6301\u5F00\u53D1",about:"\u5173\u4E8E",pluginInformation:"\u63D2\u4EF6\u4FE1\u606F",buyMeACoffee:"\u8BF7\u6211\u559D\u5496\u5561",github:"GitHub",preview:"\u9884\u89C8",clearCustomToday:"\u6E05\u9664\u81EA\u5B9A\u4E49\u4ECA\u5929",enterCharacterName:"\u8F93\u5165\u89D2\u8272\u540D\u79F0",characterDescriptionPh:"\u89D2\u8272\u7684\u7B80\u8981\u63CF\u8FF0...",traitsPlaceholder:"\u4F8B\u5982\uFF1A\u52C7\u6562\u3001\u597D\u5947\u3001\u56FA\u6267",characterHistoryPh:"\u89D2\u8272\u7684\u5386\u53F2...",statusPlaceholderCharacter:"\u4F8B\u5982\uFF1A\u5B58\u6D3B\u3001\u5DF2\u6545\u3001\u5931\u8E2A",enterItemName:"\u8F93\u5165\u7269\u54C1\u540D\u79F0",itemDescriptionPh:"\u5BF9\u8BE5\u7269\u54C1\u7684\u5916\u89C2\u8FDB\u884C\u63CF\u8FF0...",itemHistoryPh:"\u8BE5\u7269\u54C1\u7684\u8D77\u6E90\u3001\u8FC7\u53BB\u4E0E\u610F\u4E49...",enterLocationName:"\u8F93\u5165\u4F4D\u7F6E\u540D\u79F0",locationDescriptionPh:"\u4F4D\u7F6E\u7684\u7B80\u8981\u63CF\u8FF0...",locationHistoryPh:"\u8BE5\u4F4D\u7F6E\u7684\u5386\u53F2\u548C\u8FC7\u53BB\u4E8B\u4EF6...",statusPlaceholderLocation:"\u4F8B\u5982\uFF1A\u6D3B\u8DC3\u3001\u5E9F\u589F\u3001\u5E9F\u5F03",enterEventName:"\u8F93\u5165\u4E8B\u4EF6\u540D\u79F0",eventDescriptionPh:"\u5BF9\u8BE5\u4E8B\u4EF6\u7684\u63CF\u8FF0...",eventOutcomePh:"\u8BE5\u4E8B\u4EF6\u7684\u7ED3\u679C\u6216\u540E\u679C...",enterDateTime:"\u8F93\u5165\u65E5\u671F/\u65F6\u95F4",statusPlaceholderEvent:"\u4F8B\u5982\uFF1A\u5373\u5C06\u3001\u5DF2\u5B8C\u6210\u3001\u8FDB\u884C\u4E2D\u3001\u5173\u952E\u60C5\u8282\u70B9",dateTime:"\u65E5\u671F/\u65F6\u95F4",outcome:"\u7ED3\u679C",status:"\u72B6\u6001",charactersInvolved:"\u6D89\u53CA\u7684\u89D2\u8272",associatedImages:"\u5173\u8054\u56FE\u50CF",links:"\u94FE\u63A5",relationships:"\u5173\u7CFB\u548C\u4F4D\u7F6E",currentOwner:"\u5F53\u524D\u62E5\u6709\u8005",currentLocation:"\u5F53\u524D\u4F4D\u7F6E",plotCritical:"\u60C5\u8282\u5173\u952E",traits:"\u7279\u5F81",profileImage:"\u4E2A\u4EBA\u8D44\u6599\u56FE\u50CF",itemImage:"\u7269\u54C1\u56FE\u50CF",selectOwner:"\u9009\u62E9\u62E5\u6709\u8005",selectLocation:"\u9009\u62E9\u4F4D\u7F6E",changeLocation:"\u66F4\u6539\u4F4D\u7F6E",clearLocation:"\u6E05\u9664\u4F4D\u7F6E\uFF08\u8BBE\u4E3A\u65E0\uFF09",addCharacter:"\u6DFB\u52A0\u89D2\u8272",addCustomField:"\u6DFB\u52A0\u81EA\u5B9A\u4E49\u5B57\u6BB5",fieldName:"\u5B57\u6BB5\u540D\u79F0",fieldValue:"\u5B57\u6BB5\u503C",customFieldValueTitle:"\u81EA\u5B9A\u4E49\u5B57\u6BB5\u503C",newCustomFieldTitle:"\u65B0\u5EFA\u81EA\u5B9A\u4E49\u5B57\u6BB5",valueForX:t=>`"${t}" \u7684\u503C`,fieldNameCannotBeEmpty:"\u5B57\u6BB5\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",thatNameIsReserved:"\u8BE5\u540D\u79F0\u5DF2\u4FDD\u7559",fieldAlreadyExists:"\u5DF2\u5B58\u5728\u540C\u540D\u5B57\u6BB5",characterNameRequired:"\u89D2\u8272\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A\u3002",eventNameRequired:"\u4E8B\u4EF6\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A\u3002",itemNameRequired:"\u7269\u54C1\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A\u3002",customFields:"\u81EA\u5B9A\u4E49\u5B57\u6BB5",select:"\u9009\u62E9",current:"\u5F53\u524D",none:"\u65E0",removeX:t=>`\u79FB\u9664 ${t}`,removeFieldX:t=>`\u79FB\u9664\u5B57\u6BB5 "${t}"`,filterX:t=>`\u7B5B\u9009${t}`,searchX:t=>`\u641C\u7D22${t}...`,newStory:"+ \u65B0\u6545\u4E8B",noCharactersFound:'\u672A\u627E\u5230\u89D2\u8272\u3002\u70B9\u51FB"\u521B\u5EFA\u65B0\u7684"\u6765\u6DFB\u52A0\u60A8\u7684\u7B2C\u4E00\u4E2A\u89D2\u8272\u3002',noLocationsFound:"\u672A\u627E\u5230\u4F4D\u7F6E\u3002",noEventsFound:"\u672A\u627E\u5230\u4E8B\u4EF6\u3002",noItemsFound:"\u672A\u627E\u5230\u7269\u54C1\u3002",noImagesFound:"\u672A\u627E\u5230\u56FE\u50CF\u3002",noGroupsFound:"\u672A\u627E\u5230\u7EC4\u7FA4\u3002",noReferencesFound:"\u672A\u627E\u5230\u53C2\u8003\u3002",noChaptersFound:"\u672A\u627E\u5230\u7AE0\u8282\u3002",noScenesFound:"\u672A\u627E\u5230\u573A\u666F\u3002",matchingFilter:" \u5339\u914D\u7B5B\u9009\u5668\u3002",filterItems:"\u7B5B\u9009\u7269\u54C1",filterGroups:"\u7B5B\u9009\u7EC4\u7FA4",noMembers:"\u65E0\u6210\u5458\u3002",enterGroupName:"\u8F93\u5165\u7EC4\u7FA4\u540D\u79F0",describeGroupPh:"\u63CF\u8FF0\u6B64\u7EC4\u7FA4...",color:"\u989C\u8272",colorPlaceholder:"#RRGGBB \u6216\u989C\u8272\u540D\u79F0",groupNameRequired:"\u7EC4\u7FA4\u540D\u79F0\u662F\u5FC5\u586B\u9879\u3002",groupNameExists:"\u5DF2\u5B58\u5728\u540C\u540D\u7EC4\u7FA4\u3002\u8BF7\u4F7F\u7528\u4E0D\u540C\u7684\u540D\u79F0\u3002",addImageDetails:"\u6DFB\u52A0\u56FE\u50CF\u8BE6\u60C5",editImageDetails:"\u7F16\u8F91\u56FE\u50CF\u8BE6\u60C5",commaSeparatedTags:"\u4EE5\u9017\u53F7\u5206\u9694\u7684\u6807\u7B7E\u3002",commaSeparatedCharacterNames:"\u4EE5\u9017\u53F7\u5206\u9694\u7684\u89D2\u8272\u540D\u79F0\u3002",commaSeparatedLocationNames:"\u4EE5\u9017\u53F7\u5206\u9694\u7684\u4F4D\u7F6E\u540D\u79F0\u3002",commaSeparatedEventNames:"\u4EE5\u9017\u53F7\u5206\u9694\u7684\u4E8B\u4EF6\u540D\u79F0\u3002",saveDetails:"\u4FDD\u5B58\u8BE6\u60C5",removeFromGallery:"\u4ECE\u56FE\u5E93\u79FB\u9664",imageDetailsSaved:t=>`\u5DF2\u4FDD\u5B58 "${t}" \u7684\u56FE\u50CF\u8BE6\u60C5\u3002`,imageRemovedFromGallery:t=>`\u5DF2\u4ECE\u56FE\u5E93\u4E2D\u79FB\u9664 "${t}"\u3002`,confirmDeleteScene:t=>`\u5220\u9664\u573A\u666F "${t}"\uFF1F`,confirmDeleteReference:t=>`\u5220\u9664\u53C2\u8003 "${t}"\uFF1F`,confirmDeleteChapter:t=>`\u5220\u9664\u7AE0\u8282 "${t}"\uFF1F`,confirmDeleteGroup:t=>`\u786E\u5B9A\u8981\u5220\u9664\u7EC4\u7FA4 "${t}"\uFF1F`,confirmDeleteCharacter:t=>`\u786E\u5B9A\u8981\u5220\u9664 "${t}"\uFF1F`,confirmDeleteEvent:t=>`\u786E\u5B9A\u8981\u5220\u9664\u4E8B\u4EF6 "${t}"\uFF1F\u8FD9\u5C06\u628A\u7B14\u8BB0\u79FB\u81F3\u7CFB\u7EDF\u56DE\u6536\u7AD9\u3002`,confirmDeleteLocation:t=>`\u786E\u5B9A\u8981\u5220\u9664 "${t}"\uFF1F`,confirmDeleteItem:t=>`\u786E\u5B9A\u8981\u5220\u9664 "${t}"\uFF1F`,confirmDeleteStory:t=>`\u5220\u9664\u6545\u4E8B "${t}"\uFF1F\u6B64\u64CD\u4F5C\u65E0\u6CD5\u64A4\u9500\u3002`,confirmRemoveImageFromGallery:t=>`\u786E\u5B9A\u8981\u4ECE\u56FE\u5E93\u4E2D\u79FB\u9664 "${t}"\uFF1F\u8FD9\u4E0D\u4F1A\u5220\u9664\u6587\u4EF6\u672C\u8EAB\u3002`,confirmDeleteCharacterTrash:t=>`\u786E\u5B9A\u8981\u5220\u9664 "${t}"\uFF1F\u8FD9\u5C06\u628A\u6587\u4EF6\u79FB\u81F3\u7CFB\u7EDF\u56DE\u6536\u7AD9\u3002`,confirmDeleteItemTrash:t=>`\u786E\u5B9A\u8981\u5220\u9664 "${t}"\uFF1F\u8FD9\u5C06\u628A\u6587\u4EF6\u79FB\u81F3\u7CFB\u7EDF\u56DE\u6536\u7AD9\u3002`,sceneCreated:t=>`\u573A\u666F "${t}" \u5DF2\u521B\u5EFA\u3002`,sceneUpdated:t=>`\u573A\u666F "${t}" \u5DF2\u66F4\u65B0\u3002`,chapterCreated:t=>`\u7AE0\u8282 "${t}" \u5DF2\u521B\u5EFA\u3002`,chapterUpdated:t=>`\u7AE0\u8282 "${t}" \u5DF2\u66F4\u65B0\u3002`,referenceCreated:t=>`\u53C2\u8003 "${t}" \u5DF2\u521B\u5EFA\u3002`,referenceUpdated:t=>`\u53C2\u8003 "${t}" \u5DF2\u66F4\u65B0\u3002`,groupCreated:t=>`\u7EC4\u7FA4 "${t}" \u5DF2\u521B\u5EFA\u3002`,groupRenamed:t=>`\u7EC4\u7FA4\u5DF2\u91CD\u547D\u540D\u4E3A "${t}"\u3002`,groupDeleted:t=>`\u7EC4\u7FA4 "${t}" \u5DF2\u5220\u9664\u3002`,characterDeleted:t=>`\u89D2\u8272 "${t}" \u5DF2\u5220\u9664\u3002`,locationDeleted:t=>`\u4F4D\u7F6E "${t}" \u5DF2\u5220\u9664\u3002`,itemDeleted:t=>`\u7269\u54C1 "${t}" \u5DF2\u5220\u9664\u3002`,fileMovedToTrash:t=>`${t} \u6587\u4EF6\u5DF2\u79FB\u81F3\u56DE\u6536\u7AD9\u3002`,characterLinkedAlready:t=>`\u89D2\u8272 "${t}" \u5DF2\u7ECF\u5173\u8054\u3002`,failedToDelete:t=>`\u5220\u9664${t}\u5931\u8D25\u3002`,failedToSave:t=>`\u4FDD\u5B58${t}\u5931\u8D25\u3002`,customFieldError:"\u81EA\u5B9A\u4E49\u5B57\u6BB5\u540D\u79F0\u5FC5\u987B\u552F\u4E00\u3001\u975E\u7A7A\u4E14\u672A\u4FDD\u7559\u3002",sceneNameRequired:"\u573A\u666F\u6807\u9898\u662F\u5FC5\u586B\u9879\u3002",chapterNameRequired:"\u7AE0\u8282\u6807\u9898\u662F\u5FC5\u586B\u9879\u3002",locationNameRequired:"\u4F4D\u7F6E\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A\u3002",errorLoadingCharacters:"\u52A0\u8F7D\u89D2\u8272\u65F6\u51FA\u9519\u3002\u8BF7\u68C0\u67E5\u63A7\u5236\u53F0\u3002",errorLoadingLocations:"\u52A0\u8F7D\u4F4D\u7F6E\u65F6\u51FA\u9519\u3002\u8BF7\u68C0\u67E5\u63A7\u5236\u53F0\u3002",errorLoadingEvents:"\u52A0\u8F7D\u4E8B\u4EF6\u65F6\u51FA\u9519\u3002\u8BF7\u68C0\u67E5\u63A7\u5236\u53F0\u3002",errorLoadingItems:"\u52A0\u8F7D\u7269\u54C1\u65F6\u51FA\u9519\u3002\u8BF7\u68C0\u67E5\u63A7\u5236\u53F0\u3002",groupNotFound:"\u672A\u627E\u5230\u7EC4\u7FA4\u3002",noGroupsToRename:"\u6CA1\u6709\u7EC4\u7FA4\u53EF\u91CD\u547D\u540D\u3002",noGroupsToDelete:"\u6CA1\u6709\u7EC4\u7FA4\u53EF\u5220\u9664\u3002",couldNotFindNote:"\u627E\u4E0D\u5230\u7B14\u8BB0\u6587\u4EF6\u3002",autoDetectedStories:t=>`\u6545\u4E8B\u8BB2\u8FF0\u8005\uFF1A\u81EA\u52A8\u68C0\u6D4B\u5E76\u5BFC\u5165\u4E86 ${t} \u4E2A\u65B0\u6545\u4E8B\u6587\u4EF6\u5939\u3002`,errorDiscoveringStories:t=>`\u6545\u4E8B\u8BB2\u8FF0\u8005\u5957\u4EF6\uFF1A\u53D1\u73B0\u6545\u4E8B\u65F6\u51FA\u9519\uFF1A${t}`,storiesRefreshed:t=>`\u6545\u4E8B\u8BB2\u8FF0\u8005\uFF1A\u53D1\u73B0\u5E76\u5BFC\u5165\u4E86 ${t} \u4E2A\u65B0\u6545\u4E8B\u6587\u4EF6\u5939\u3002`,noNewStoriesFound:"\u6545\u4E8B\u8BB2\u8FF0\u8005\uFF1A\u672A\u53D1\u73B0\u65B0\u7684\u6545\u4E8B\u6587\u4EF6\u5939\u3002",errorRefreshingStories:t=>`\u6545\u4E8B\u8BB2\u8FF0\u8005\u5957\u4EF6\uFF1A\u5237\u65B0\u6545\u4E8B\u65F6\u51FA\u9519\uFF1A${t}`,errorScanningFolders:t=>`\u6545\u4E8B\u8BB2\u8FF0\u8005\u5957\u4EF6\uFF1A\u626B\u63CF\u81EA\u5B9A\u4E49\u6587\u4EF6\u5939\u65F6\u51FA\u9519\uFF1A${t}`,couldNotAutoDetect:"\u6545\u4E8B\u8BB2\u8FF0\u8005\uFF1A\u65E0\u6CD5\u81EA\u52A8\u68C0\u6D4B\u6545\u4E8B\u6839\u76EE\u5F55\u3002\u8BF7\u624B\u52A8\u8BBE\u7F6E\u6587\u4EF6\u5939\u3002",autoDetectedFolders:(t,n)=>`\u6545\u4E8B\u8BB2\u8FF0\u8005\uFF1A\u5728 "${t}" \u4E0B\u81EA\u52A8\u68C0\u6D4B\u5230\u81EA\u5B9A\u4E49\u6587\u4EF6\u5939\uFF08\u5339\u914D\uFF1A${n}\uFF09\u3002`,uploadedToVault:t=>`\u5DF2\u4E0A\u4F20 "${t}" \u5230\u4FDD\u9669\u5E93\u3002`,errorUploadingFile:"\u4E0A\u4F20\u6587\u4EF6\u65F6\u51FA\u9519\u3002\u8BF7\u68C0\u67E5\u63A7\u5236\u53F0\u4E86\u89E3\u8BE6\u60C5\u3002",errorParsingFile:t=>`\u89E3\u6790\u6587\u4EF6\u65F6\u51FA\u9519\uFF1A${t}`,currentValue:t=>`\u5F53\u524D\uFF1A${t}`,ownerValue:t=>`\u62E5\u6709\u8005\uFF1A${t}`,noImagesFoundFilter:"\u672A\u627E\u5230\u56FE\u50CF\u3002\u5339\u914D\u7B5B\u9009\u5668\u3002",tutorialGettingStarted:"\u6559\u7A0B\u548C\u5165\u95E8\u6307\u5357",type:"\u7C7B\u578B",region:"\u533A\u57DF",storyNameField:"\u6545\u4E8B\u540D\u79F0",descriptionField:"\u63CF\u8FF0",beatSheetPh:`- \u9047\u89C1\u5BFC\u5E08
- \u62D2\u7EDD`,categoryPh:"\u8BED\u8A00\u3001\u9884\u8A00\u3001\u7075\u611F\u3001\u6742\u9879...",fieldNamePh:"\u5B57\u6BB5\u540D\u79F0",fieldValuePh:"\u5B57\u6BB5\u503C",galleryUploadFolderPh:"\u6545\u4E8B\u8BB2\u8FF0\u8005\u5957\u4EF6/\u56FE\u5E93\u4E0A\u4F20",customTodayPh:"YYYY-MM-DD \u6216\u5B8C\u6574 ISO\uFF08\u652F\u6301\u516C\u5143\u524D\u65E5\u671F\uFF09",timelineHeightPh:"\u4F8B\u5982\uFF1A380px",storyRootFolderPh:"\u521B\u610F/\u5199\u4F5C/{storyName}",charactersFolderPh:"\u6211\u7684\u6545\u4E8B/\u89D2\u8272",locationsFolderPh:"\u6211\u7684\u6545\u4E8B/\u4F4D\u7F6E",eventsFolderPh:"\u6211\u7684\u6545\u4E8B/\u4E8B\u4EF6",itemsFolderPh:"\u6211\u7684\u6545\u4E8B/\u7269\u54C1",referencesFolderPh:"\u6211\u7684\u6545\u4E8B/\u53C2\u8003",scenesFolderPh:"\u6211\u7684\u6545\u4E8B/\u573A\u666F",chaptersFolderPh:"\u6211\u7684\u6545\u4E8B/\u7AE0\u8282",oneStoryBaseFolderPh:"\u6545\u4E8B\u8BB2\u8FF0\u8005\u5957\u4EF6",enterStoryNamePh:"\u8F93\u5165\u6545\u4E8B\u540D\u79F0",describeStoryPh:"\u63CF\u8FF0\u4F60\u7684\u6545\u4E8B\uFF08\u53EF\u9009\uFF09",selectImageFilePh:"\u9009\u62E9\u56FE\u50CF\u6587\u4EF6...",filterImagesPh:"\u6309\u6807\u9898\u3001\u6807\u7B7E\u3001\u94FE\u63A5\u7B5B\u9009...",selectItemPh:"\u9009\u62E9\u8981\u94FE\u63A5\u7684\u7269\u54C1...",selectEventLocationPh:"\u9009\u62E9\u4E8B\u4EF6\u7684\u4F4D\u7F6E...",selectGroupPh:"\u9009\u62E9\u7EC4\u7FA4...",filterFoldersPh:"\u8F93\u5165\u4EE5\u7B5B\u9009\u6587\u4EF6\u5939...",selectGalleryImagePh:"\u4ECE\u56FE\u5E93\u9009\u62E9\u56FE\u50CF...",selectEventPh:"\u9009\u62E9\u8981\u94FE\u63A5\u7684\u4E8B\u4EF6...",selectCharacterPh:"\u9009\u62E9\u8981\u94FE\u63A5\u7684\u89D2\u8272...",priorityInChapter:"\u7AE0\u8282\u4E2D\u7684\u4F18\u5148\u7EA7",priorityEg:"\u4F8B\u5982\uFF0C1",beatSheetOneLine:"\u8282\u62CD\u8868\u5355\u884C",writeScenePh:"\u5199\u4E0B\u4F60\u7684\u573A\u666F...",scanVaultDesc:"\u626B\u63CF\u4F60\u7684\u4FDD\u9669\u5E93\u4EE5\u67E5\u627E\u73B0\u6709\u7684\u6545\u4E8B\u8BB2\u8FF0\u8005\u6545\u4E8B\u5E76\u5BFC\u5165\u5B83\u4EEC\u3002\u5728\u79FB\u52A8\u6587\u4EF6\u5939\u6216\u66F4\u6539\u7ED3\u6784\u540E\u5F88\u6709\u7528\u3002",galleryFolderDesc:"\u5B58\u50A8\u4E0A\u4F20\u7684\u56FE\u5E93\u56FE\u50CF\u7684\u6587\u4EF6\u5939",customFieldsDesc:"\u9009\u62E9\u81EA\u5B9A\u4E49\u5B57\u6BB5\u5728\u524D\u7F6E\u5185\u5BB9\u4E2D\u7684\u5B58\u50A8\u65B9\u5F0F",forwardDateBiasDesc:'\u5BF9\u76F8\u5BF9\u65E5\u671F\u504F\u5411\u672A\u6765\u89E3\u91CA\uFF08\u4F8B\u5982"\u661F\u671F\u4E94"\uFF09',customTodayDesc:'\u7528\u4E8E"\u4ECA\u5929"\u6309\u94AE\u548C\u76F8\u5BF9\u89E3\u6790\u7684\u53EF\u9009\u65E5\u671F\u3002\u652F\u6301\u516C\u5143\u524D\u65E5\u671F\uFF08\u4F8B\u5982\uFF0C2024-01-15 \u8868\u793A\u516C\u5143\uFF0C-00499-01-01 \u8868\u793A\u516C\u5143\u524D 500 \u5E74\uFF09\u3002\u7559\u7A7A\u4F7F\u7528\u7CFB\u7EDF\u4ECA\u5929\u3002',timelineHeightDesc:"\u8C03\u6574\u65F6\u95F4\u7EBF\u6A21\u6001\u6846\u7684\u9AD8\u5EA6",useCustomFoldersDesc:"\u542F\u7528\u65F6\uFF0C\u4F7F\u7528\u4E0B\u9762\u7684\u6587\u4EF6\u5939\u8DEF\u5F84\u3002\u4F60\u53EF\u4EE5\u5305\u542B {storyName}\u3001{storySlug} \u6216 {storyId} \u6765\u521B\u5EFA\u6BCF\u4E2A\u6545\u4E8B\u7684\u6587\u4EF6\u5939\uFF08\u4F8B\u5982\uFF0C\u521B\u610F/\u5199\u4F5C/{storyName}/\u89D2\u8272\uFF09\u3002",previewFoldersDesc:"\u6839\u636E\u5F53\u524D\u8BBE\u7F6E\u548C\u6D3B\u52A8\u6545\u4E8B\u67E5\u770B\u6BCF\u4E2A\u5B9E\u4F53\u7684\u89E3\u6790\u6587\u4EF6\u5939\u8DEF\u5F84",storyRootDesc:"\u6240\u6709\u5B9E\u4F53\u7684\u57FA\u7840\u8DEF\u5F84\u6A21\u677F\u3002\u652F\u6301 {storyName}\u3001{storySlug}\u3001{storyId}\u3002\u793A\u4F8B\uFF1A\u521B\u610F/\u5199\u4F5C/{storyName}",charactersFolderDesc:"\u89D2\u8272 Markdown \u6587\u4EF6\u7684\u8DEF\u5F84\uFF08\u5141\u8BB8\u5360\u4F4D\u7B26\uFF1A{storyName}\u3001{storySlug}\u3001{storyId}\uFF09",locationsFolderDesc:"\u4F4D\u7F6E Markdown \u6587\u4EF6\u7684\u8DEF\u5F84\uFF08\u5141\u8BB8\u5360\u4F4D\u7B26\uFF1A{storyName}\u3001{storySlug}\u3001{storyId}\uFF09",eventsFolderDesc:"\u4E8B\u4EF6 Markdown \u6587\u4EF6\u7684\u8DEF\u5F84\uFF08\u5141\u8BB8\u5360\u4F4D\u7B26\uFF1A{storyName}\u3001{storySlug}\u3001{storyId}\uFF09",itemsFolderDesc:"\u7269\u54C1 Markdown \u6587\u4EF6\u7684\u8DEF\u5F84\uFF08\u5141\u8BB8\u5360\u4F4D\u7B26\uFF1A{storyName}\u3001{storySlug}\u3001{storyId}\uFF09",referencesFolderDesc:"\u53C2\u8003 Markdown \u6587\u4EF6\u7684\u8DEF\u5F84\uFF08\u5141\u8BB8\u5360\u4F4D\u7B26\uFF1A{storyName}\u3001{storySlug}\u3001{storyId}\uFF09",scenesFolderDesc:"\u573A\u666F Markdown \u6587\u4EF6\u7684\u8DEF\u5F84\uFF08\u5141\u8BB8\u5360\u4F4D\u7B26\uFF1A{storyName}\u3001{storySlug}\u3001{storyId}\uFF09",chaptersFolderDesc:"\u7AE0\u8282 Markdown \u6587\u4EF6\u7684\u8DEF\u5F84\uFF08\u5141\u8BB8\u5360\u4F4D\u7B26\uFF1A{storyName}\u3001{storySlug}\u3001{storyId}\uFF09",oneStoryModeDesc:"\u5C06\u6587\u4EF6\u5939\u7ED3\u6784\u6241\u5E73\u5316\u4E3A\u5355\u4E2A\u6545\u4E8B\u3002\u542F\u7528\u65F6\uFF08\u4E14\u7981\u7528\u81EA\u5B9A\u4E49\u6587\u4EF6\u5939\uFF09\uFF0C\u5185\u5BB9\u653E\u5728\u5355\u4E2A\u57FA\u7840\u6587\u4EF6\u5939\u4E0B\uFF0C\u4E0D\u5305\u542B\u6545\u4E8B/\u6545\u4E8B\u540D\u79F0\u3002",oneStoryBaseFolderDesc:"\u89D2\u8272/\u4F4D\u7F6E/\u4E8B\u4EF6/\u7269\u54C1/\u53C2\u8003/\u7AE0\u8282\u7684\u57FA\u7840\u6587\u4EF6\u5939",showTutorialDesc:"\u5728\u8BBE\u7F6E\u4E2D\u663E\u793A\u6559\u7A0B\u548C\u5165\u95E8\u6307\u5357\u90E8\u5206",supportDevDesc:"\u5982\u679C\u4F60\u89C9\u5F97\u8FD9\u4E2A\u63D2\u4EF6\u6709\u7528\uFF0C\u8BF7\u8003\u8651\u652F\u6301\u5176\u5F00\u53D1",pluginInfoDesc:"\u6545\u4E8B\u8BB2\u8FF0\u8005\u5957\u4EF6 - \u7BA1\u7406\u6545\u4E8B\u89D2\u8272\u3001\u4F4D\u7F6E\u3001\u4E8B\u4EF6\u548C\u56FE\u5E93\u7684\u7EFC\u5408\u5957\u4EF6\u3002",storyNameDesc:"\u5FC5\u586B\u3002\u5FC5\u987B\u552F\u4E00\u3002",descriptionOptionalDesc:"\u53EF\u9009",locationNameDesc:"\u4F4D\u7F6E\u7684\u540D\u79F0\u3002",locationTypeDesc:"\u4F8B\u5982\uFF1A\u57CE\u5E02\u3001\u68EE\u6797\u3001\u57CE\u5821\u3001\u9152\u9986",locationRegionDesc:"\u66F4\u5E7F\u6CDB\u7684\u5730\u7406\u533A\u57DF\u3002",locationStatusDesc:"\u4F8B\u5982\uFF1A\u6D3B\u8DC3\u3001\u5E9F\u589F\u3001\u5E9F\u5F03",assignToGroupsDesc:"\u5C06\u6B64\u4F4D\u7F6E\u5206\u914D\u5230\u4E00\u4E2A\u6216\u591A\u4E2A\u7EC4\u7FA4\u3002",manageGroupsDesc:"\u7BA1\u7406\u4F60\u7684\u7EC4\u7FA4\u3002\u5728\u6240\u6709\u5B9E\u4F53\u7C7B\u578B\u95F4\u5171\u4EAB\u3002",searchGroupsDesc:"\u6309\u7EC4\u7FA4\u540D\u79F0\u6216\u63CF\u8FF0\u641C\u7D22\u3002",manageCharactersDesc:"\u7BA1\u7406\u4F60\u7684\u6545\u4E8B\u89D2\u8272\u3002",manageLocationsDesc:"\u7BA1\u7406\u4F60\u7684\u6545\u4E8B\u4F4D\u7F6E\u3002",manageEventsDesc:"\u7BA1\u7406\u4F60\u7684\u6545\u4E8B\u4E8B\u4EF6\u3002",manageImagesDesc:"\u7BA1\u7406\u4F60\u7684\u6545\u4E8B\u56FE\u50CF\u3002",assignEventToGroupsDesc:"\u5C06\u6B64\u4E8B\u4EF6\u5206\u914D\u5230\u4E00\u4E2A\u6216\u591A\u4E2A\u7EC4\u7FA4\u3002",assignItemToGroupsDesc:"\u5C06\u6B64\u7269\u54C1\u5206\u914D\u5230\u4E00\u4E2A\u6216\u591A\u4E2A\u7EC4\u7FA4\u3002",assignCharacterToGroupsDesc:"\u5C06\u6B64\u89D2\u8272\u5206\u914D\u5230\u4E00\u4E2A\u6216\u591A\u4E2A\u7EC4\u7FA4\u3002"},TN={en:SN,zh:_N},hS="en"});var ru,at,Wn=X(()=>{ru=require("obsidian");ze();at=class extends ru.Modal{constructor(e,r){var s;super(e);this.titleText=r.title,this.labelText=r.label,this.defaultValue=(s=r.defaultValue)!=null?s:"",this.validator=r.validator,this.onSubmit=r.onSubmit}onOpen(){let{contentEl:e}=this;e.empty(),e.createEl("h3",{text:this.titleText});let r=null,s=null;new ru.Setting(e).setName(this.labelText).addText(l=>{r=l.setValue(this.defaultValue)}),s=e.createDiv({cls:"mod-warning"}),s.style.display="none";let a=()=>{var u;let l=((u=r==null?void 0:r.getValue())!=null?u:"").trim();if(this.validator){let c=this.validator(l);if(c){s.style.display="",s.setText(c);return}}this.onSubmit(l),this.close()},o=new ru.Setting(e);o.addButton(l=>l.setButtonText(g("ok")).setCta().onClick(a)),o.addButton(l=>l.setButtonText(g("cancel")).onClick(()=>this.close())),this.contentEl.addEventListener("keydown",l=>{l.key==="Enter"&&a()})}}});var md,Ot,nn=X(()=>{md=require("obsidian");ze();Ot=class extends md.FuzzySuggestModal{constructor(e,r,s){super(e);this.plugin=r,this.onChoose=s,this.setPlaceholder(g("selectGalleryImagePh")),this.setInstructions([{command:"Shift + Enter",purpose:"Clear selection"}])}async onOpen(){super.onOpen(),setTimeout(()=>{var e,r;if(this.inputEl){try{(e=this.setQuery)==null||e.call(this,"")}catch(s){}try{this.inputEl.dispatchEvent(new window.Event("input"))}catch(s){}}try{(r=this.onInputChanged)==null||r.call(this)}catch(s){}},0),setTimeout(()=>{var e,r;if(this.inputEl){try{(e=this.setQuery)==null||e.call(this,"")}catch(s){}try{this.inputEl.dispatchEvent(new window.Event("input"))}catch(s){}}try{(r=this.onInputChanged)==null||r.call(this)}catch(s){}},50)}getSuggestions(e){let r=this.getItems();if(!e)return r.map(a=>({item:a,match:{score:0,matches:[]}}));let s=(0,md.prepareFuzzySearch)(e);return r.map(a=>{let o=this.getItemText(a),l=s(o);return l?{item:a,match:l}:null}).filter(a=>!!a)}getItems(){return this.plugin.getGalleryImages()}getItemText(e){return e.title||e.filePath}onChooseItem(e,r){r.shiftKey?this.onChoose(null):this.onChoose(e)}}});var Ga,Kr,Ha=X(()=>{Ga=require("obsidian");ze();Kr=class extends Ga.FuzzySuggestModal{constructor(e,r,s){super(e);this.characters=[];this.plugin=r,this.onChoose=s,this.setPlaceholder(g("selectCharacterPh"))}async onOpen(){super.onOpen();try{this.characters=await this.plugin.listCharacters()}catch(e){console.error("Storyteller Suite: Error fetching characters for suggester:",e),new Ga.Notice(g("errorLoadingCharacters")),this.characters=[]}setTimeout(()=>{var e,r;if(this.inputEl){try{(e=this.setQuery)==null||e.call(this,"")}catch(s){}try{this.inputEl.dispatchEvent(new window.Event("input"))}catch(s){}}try{(r=this.onInputChanged)==null||r.call(this)}catch(s){}},0),setTimeout(()=>{var e,r;if(this.inputEl){try{(e=this.setQuery)==null||e.call(this,"")}catch(s){}try{this.inputEl.dispatchEvent(new window.Event("input"))}catch(s){}}try{(r=this.onInputChanged)==null||r.call(this)}catch(s){}},50)}getSuggestions(e){if(!e)return this.characters.map(s=>({item:s,match:{score:0,matches:[]}}));let r=(0,Ga.prepareFuzzySearch)(e);return this.characters.map(s=>{let a=r(this.getItemText(s));return a?{item:s,match:a}:null}).filter(s=>!!s)}getItems(){return this.characters}getItemText(e){return e.name||"Unnamed character"}onChooseItem(e,r){this.onChoose(e)}}});var Wa,Zr,Ya=X(()=>{Wa=require("obsidian");ze();Zr=class extends Wa.FuzzySuggestModal{constructor(e,r,s){super(e);this.locations=[];this.plugin=r,this.onChoose=s,this.setPlaceholder(g("selectEventLocationPh")),this.setInstructions([{command:"Shift + Enter",purpose:"Clear selection (No Location)"}])}async onOpen(){super.onOpen();try{this.locations=await this.plugin.listLocations()}catch(e){console.error("Storyteller Suite: Error fetching locations for suggester:",e),new Wa.Notice(g("errorLoadingLocations")),this.locations=[]}setTimeout(()=>{var e,r;if(this.inputEl){try{(e=this.setQuery)==null||e.call(this,"")}catch(s){}try{this.inputEl.dispatchEvent(new window.Event("input"))}catch(s){}}try{(r=this.onInputChanged)==null||r.call(this)}catch(s){}},0),setTimeout(()=>{var e,r;if(this.inputEl){try{(e=this.setQuery)==null||e.call(this,"")}catch(s){}try{this.inputEl.dispatchEvent(new window.Event("input"))}catch(s){}}try{(r=this.onInputChanged)==null||r.call(this)}catch(s){}},50)}getSuggestions(e){let r=this.getItems();if(!e)return r.map(a=>({item:a,match:{score:0,matches:[]}}));let s=(0,Wa.prepareFuzzySearch)(e);return r.map(a=>{let o=s(this.getItemText(a));return o?{item:a,match:o}:null}).filter(a=>!!a)}getItems(){return this.locations}getItemText(e){return e.name||"Unnamed location"}onChooseItem(e,r){r.shiftKey?this.onChoose(null):this.onChoose(e)}}});var et,hi,yd=X(()=>{et=require("obsidian");rn();ze();nn();Wn();Ha();Ya();hi=class extends et.Modal{constructor(e,r,s,a,o){super(e);this._groupRefreshInterval=null;this.groupSelectorContainer=null;this.plugin=r,this.isNew=s===null;let l=s?{...s}:{name:"",dateTime:"",description:"",outcome:"",status:void 0,profileImagePath:void 0,characters:[],location:void 0,images:[],customFields:{},groups:[]};l.customFields||(l.customFields={}),l.characters||(l.characters=[]),l.images||(l.images=[]),l.groups||(l.groups=[]),this.event=l,this.onSubmit=a,this.onDelete=o,this.modalEl.addClass("storyteller-event-modal")}onOpen(){let{contentEl:e}=this;e.empty(),e.createEl("h2",{text:this.isNew?g("createNewEvent"):`${g("edit")} ${this.event.name}`}),new et.Setting(e).setName(g("name")).setDesc(g("name")).addText(u=>u.setPlaceholder(g("enterEventName")).setValue(this.event.name).onChange(c=>{this.event.name=c}).inputEl.addClass("storyteller-modal-input-large")),new et.Setting(e).setName(g("dateTime")).setDesc(g("statusPlaceholderEvent")).addText(u=>u.setPlaceholder(g("enterDateTime")).setValue(this.event.dateTime||"").onChange(c=>{this.event.dateTime=c||void 0})),new et.Setting(e).setName(g("description")).setClass("storyteller-modal-setting-vertical").addTextArea(u=>{u.setPlaceholder(g("eventDescriptionPh")).setValue(this.event.description||"").onChange(c=>{this.event.description=c||void 0}),u.inputEl.rows=4,u.inputEl.addClass("storyteller-modal-textarea")}),new et.Setting(e).setName(g("outcome")).setClass("storyteller-modal-setting-vertical").addTextArea(u=>{u.setPlaceholder(g("eventOutcomePh")).setValue(this.event.outcome||"").onChange(c=>{this.event.outcome=c||void 0}),u.inputEl.rows=3,u.inputEl.addClass("storyteller-modal-textarea")}),new et.Setting(e).setName(g("status")).setDesc(g("statusPlaceholderEvent")).addText(u=>u.setValue(this.event.status||"").onChange(c=>{this.event.status=c||void 0}));let r;new et.Setting(e).setName(g("image")).setDesc("").then(u=>{r=u.descEl.createEl("small",{text:g("currentValue",this.event.profileImagePath||g("none"))}),u.descEl.addClass("storyteller-modal-setting-vertical")}).addButton(u=>u.setButtonText(g("select")).setTooltip(g("selectFromGallery")).onClick(()=>{new Ot(this.app,this.plugin,c=>{let d=c?c.filePath:"";this.event.profileImagePath=d||void 0,r.setText(`Current: ${this.event.profileImagePath||"None"}`)}).open()})).addButton(u=>u.setButtonText(g("upload")).setTooltip(g("uploadImage")).onClick(async()=>{let c=document.createElement("input");c.type="file",c.accept="image/*",c.onchange=async()=>{var f;let d=(f=c.files)==null?void 0:f[0];if(d)try{await this.plugin.ensureFolder(this.plugin.settings.galleryUploadFolder);let p=Date.now(),v=d.name.replace(/[^\w\s.-]/g,"").replace(/\s+/g,"_"),y=`${p}_${v}`,_=`${this.plugin.settings.galleryUploadFolder}/${y}`,S=await d.arrayBuffer();await this.app.vault.createBinary(_,S),this.event.profileImagePath=_,r.setText(`Current: ${_}`),new et.Notice(g("imageUploaded",y))}catch(p){console.error("Error uploading image:",p),new et.Notice(g("errorUploadingImage"))}},c.click()})).addButton(u=>u.setIcon("cross").setTooltip(g("clearImage")).setClass("mod-warning").onClick(()=>{this.event.profileImagePath=void 0,r.setText(`Current: ${this.event.profileImagePath||"None"}`)})),e.createEl("h3",{text:g("links")});let s=new et.Setting(e).setName(g("charactersInvolved")).setDesc(g("characters"));this.charactersListEl=s.controlEl.createDiv("storyteller-modal-list"),this.renderList(this.charactersListEl,this.event.characters||[],"character"),s.addButton(u=>u.setButtonText(g("addCharacter")).setTooltip(g("addCharacter")).setCta().onClick(()=>{new Kr(this.app,this.plugin,c=>{c&&c.name&&(this.event.characters||(this.event.characters=[]),this.event.characters.includes(c.name)?new et.Notice(g("characterLinkedAlready",c.name)):(this.event.characters.push(c.name),this.renderList(this.charactersListEl,this.event.characters,"character")))}).open()})),this.locationSetting=new et.Setting(e).setName(g("location")).setDesc(g("currentValue",this.event.location||g("none"))),this.locationSetting.addButton(u=>{this.selectLocationButton=u,u.setTooltip(g("selectLocation")).onClick(()=>{new Zr(this.app,this.plugin,c=>{let d=c?c.name:void 0;this.event.location=d,this.locationSetting.setDesc(`${g("current")}: ${this.event.location||g("none")}`),this.updateLocationClearButton(),this.renderList(this.charactersListEl,this.event.characters||[],"character")}).open()})}),this.updateLocationClearButton();let a=new et.Setting(e).setName(g("associatedImages")).setDesc(g("imageGallery"));this.imagesListEl=a.controlEl.createDiv("storyteller-modal-list"),this.renderList(this.imagesListEl,this.event.images||[],"image"),a.addButton(u=>u.setButtonText(g("addImage")).setTooltip(g("selectFromGallery")).setCta().onClick(()=>{new Ot(this.app,this.plugin,c=>{if(c&&c.filePath){let d=c.filePath;this.event.images||(this.event.images=[]),this.event.images.includes(d)||(this.event.images.push(d),this.renderList(this.imagesListEl,this.event.images,"image"))}}).open()})),e.createEl("h3",{text:g("customFields")});let o=e.createDiv("storyteller-custom-fields-container");new et.Setting(e).addButton(u=>u.setButtonText(g("addCustomField")).setIcon("plus").onClick(()=>{this.event.customFields||(this.event.customFields={});let c=this.event.customFields,d=new Set([...Rt("event"),"customFields","filePath","id","sections"]),f=p=>{new at(this.app,{title:"Custom field value",label:`Value for "${p}"`,defaultValue:"",onSubmit:v=>{c[p]=v}}).open()};new at(this.app,{title:"New custom field",label:"Field name",defaultValue:"",validator:p=>{let v=p.trim();return v?d.has(v)?"That name is reserved":Object.keys(c).some(_=>_.toLowerCase()===v.toLowerCase())?"A field with that name already exists":null:"Field name cannot be empty"},onSubmit:p=>f(p.trim())}).open()})),e.createEl("h3",{text:g("groups")}),this.groupSelectorContainer=e.createDiv("storyteller-group-selector-container"),this.renderGroupSelector(this.groupSelectorContainer),this._groupRefreshInterval=window.setInterval(()=>{this.modalEl.isShown()&&this.groupSelectorContainer&&this.renderGroupSelector(this.groupSelectorContainer)},2e3);let l=new et.Setting(e).setClass("storyteller-modal-buttons");!this.isNew&&this.onDelete&&l.addButton(u=>u.setButtonText(g("deleteEvent")).setClass("mod-warning").onClick(async()=>{if(confirm(g("confirmDeleteEvent",this.event.name))&&this.onDelete)try{await this.onDelete(this.event),this.close()}catch(c){console.error("Error deleting event:",c),new et.Notice(g("workspaceLeafCreateError"))}})),l.controlEl.createDiv({cls:"storyteller-modal-button-spacer"}),l.addButton(u=>u.setButtonText(g("cancel")).onClick(()=>{this.close()})),l.addButton(u=>u.setButtonText(this.isNew?g("createNewEvent"):g("saveChanges")).setCta().onClick(async()=>{var c;if(!((c=this.event.name)!=null&&c.trim())){new et.Notice(g("eventNameRequired"));return}this.event.description=this.event.description||"",this.event.outcome=this.event.outcome||"";try{await this.onSubmit(this.event),this.close()}catch(d){console.error("Error saving event:",d),new et.Notice(g("workspaceLeafRevealError"))}}))}updateLocationClearButton(){if(!this.locationSetting||!this.locationSetting.controlEl)return;let r=this.locationSetting.controlEl.querySelector(".storyteller-clear-location-button");this.selectLocationButton&&this.selectLocationButton.setButtonText(this.event.location?"Change location":"Select location"),this.event.location&&!r?this.locationSetting.addButton(s=>s.setIcon("cross").setTooltip("Clear location (set to none)").setClass("mod-warning").setClass("storyteller-clear-location-button").onClick(()=>{this.event.location=void 0,this.locationSetting.setDesc(g("currentValue",this.event.location||g("none"))),this.updateLocationClearButton()})):!this.event.location&&r&&r.remove()}renderList(e,r,s){if(e.empty(),!r||r.length===0){e.createEl("span",{text:g("none"),cls:"storyteller-modal-list-empty"});return}r.forEach((a,o)=>{let l=e.createDiv("storyteller-modal-list-item");l.createSpan({text:a}),new et.ButtonComponent(l).setClass("storyteller-modal-list-remove").setTooltip(`Remove ${a}`).setIcon("cross").onClick(()=>{s==="character"&&this.event.characters?this.event.characters.splice(o,1):s==="image"&&this.event.images&&this.event.images.splice(o,1),this.renderList(e,r,s)})})}renderCustomFields(e,r){e.empty(),r=r||{};let s=Object.keys(r);if(s.length===0){e.createEl("p",{text:g("noCustomFields"),cls:"storyteller-modal-list-empty"});return}let a=new Set([...Rt("event"),"customFields","filePath","id","sections"]);s.forEach(o=>{let l=o,u=new et.Setting(e).addText(c=>c.setValue(l).setPlaceholder(g("fieldNamePh")).onChange(d=>{let f=d.trim(),p=!Object.keys(r).some(y=>y.toLowerCase()===f.toLowerCase()),v=a.has(f);f&&f!==l&&p&&!v?(r[f]=r[l],delete r[l],l=f):f!==l&&(c.setValue(l),new et.Notice(g("customFieldError")))})).addText(c=>{var d;return c.setValue(((d=r[l])==null?void 0:d.toString())||"").setPlaceholder(g("fieldValuePh")).onChange(f=>{r[l]=f})}).addButton(c=>c.setIcon("trash").setTooltip(`Remove field "${l}"`).setClass("mod-warning").onClick(()=>{delete r[l],this.renderCustomFields(e,r)}));u.controlEl.addClass("storyteller-custom-field-row"),u.infoEl.addClass("storyteller-custom-field-key")})}renderGroupSelector(e){e.empty();let r=this.plugin.getGroups(),s=async()=>{let a=this.event.id||this.event.name,l=(await this.plugin.listEvents()).find(c=>(c.id||c.name)===a),u=new Set((l==null?void 0:l.groups)||this.event.groups||[]);return this.event.groups=Array.from(u),u};(async()=>{let a=await s();if(new et.Setting(e).setName(g("groups")).setDesc(g("assignEventToGroupsDesc")).addDropdown(o=>{o.addOption("",g("selectGroupPlaceholder")),r.forEach(l=>{o.addOption(l.id,l.name)}),o.setValue(""),o.onChange(async l=>{l&&!a.has(l)&&(a.add(l),this.event.groups=Array.from(a),await this.plugin.addMemberToGroup(l,"event",this.event.id||this.event.name),this.renderGroupSelector(e))})}),a.size>0){let o=e.createDiv("selected-groups");r.filter(l=>a.has(l.id)).forEach(l=>{let c=o.createSpan({text:l.name,cls:"group-tag"}).createSpan({text:" \xD7",cls:"remove-group-btn"});c.onclick=async()=>{a.delete(l.id),this.event.groups=Array.from(a),await this.plugin.removeMemberFromGroup(l.id,"event",this.event.id||this.event.name),this.renderGroupSelector(e)}})}})()}onClose(){this.contentEl.empty(),this._groupRefreshInterval&&clearInterval(this._groupRefreshInterval)}}});function re(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function $i(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function bi(){return fS||(fS=1,function(t,n){(function(e,r){t.exports=r()})(ti,function(){var e;function r(){return e.apply(null,arguments)}function s(h){e=h}function a(h){return h instanceof Array||Object.prototype.toString.call(h)==="[object Array]"}function o(h){return h!=null&&Object.prototype.toString.call(h)==="[object Object]"}function l(h,m){return Object.prototype.hasOwnProperty.call(h,m)}function u(h){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(h).length===0;var m;for(m in h)if(l(h,m))return!1;return!0}function c(h){return h===void 0}function d(h){return typeof h=="number"||Object.prototype.toString.call(h)==="[object Number]"}function f(h){return h instanceof Date||Object.prototype.toString.call(h)==="[object Date]"}function p(h,m){var b=[],w,T=h.length;for(w=0;w<T;++w)b.push(m(h[w],w));return b}function v(h,m){for(var b in m)l(m,b)&&(h[b]=m[b]);return l(m,"toString")&&(h.toString=m.toString),l(m,"valueOf")&&(h.valueOf=m.valueOf),h}function y(h,m,b,w){return Qy(h,m,b,w,!0).utc()}function _(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function S(h){return h._pf==null&&(h._pf=_()),h._pf}var x;Array.prototype.some?x=Array.prototype.some:x=function(h){var m=Object(this),b=m.length>>>0,w;for(w=0;w<b;w++)if(w in m&&h.call(this,m[w],w,m))return!0;return!1};function D(h){if(h._isValid==null){var m=S(h),b=x.call(m.parsedDateParts,function(T){return T!=null}),w=!isNaN(h._d.getTime())&&m.overflow<0&&!m.empty&&!m.invalidEra&&!m.invalidMonth&&!m.invalidWeekday&&!m.weekdayMismatch&&!m.nullInput&&!m.invalidFormat&&!m.userInvalidated&&(!m.meridiem||m.meridiem&&b);if(h._strict&&(w=w&&m.charsLeftOver===0&&m.unusedTokens.length===0&&m.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(h))h._isValid=w;else return w}return h._isValid}function E(h){var m=y(NaN);return h!=null?v(S(m),h):S(m).userInvalidated=!0,m}var P=r.momentProperties=[],O=!1;function A(h,m){var b,w,T,k=P.length;if(c(m._isAMomentObject)||(h._isAMomentObject=m._isAMomentObject),c(m._i)||(h._i=m._i),c(m._f)||(h._f=m._f),c(m._l)||(h._l=m._l),c(m._strict)||(h._strict=m._strict),c(m._tzm)||(h._tzm=m._tzm),c(m._isUTC)||(h._isUTC=m._isUTC),c(m._offset)||(h._offset=m._offset),c(m._pf)||(h._pf=S(m)),c(m._locale)||(h._locale=m._locale),k>0)for(b=0;b<k;b++)w=P[b],T=m[w],c(T)||(h[w]=T);return h}function M(h){A(this,h),this._d=new Date(h._d!=null?h._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),O===!1&&(O=!0,r.updateOffset(this),O=!1)}function I(h){return h instanceof M||h!=null&&h._isAMomentObject!=null}function H(h){r.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+h)}function z(h,m){var b=!0;return v(function(){if(r.deprecationHandler!=null&&r.deprecationHandler(null,h),b){var w=[],T,k,L,ae=arguments.length;for(k=0;k<ae;k++){if(T="",typeof arguments[k]=="object"){T+=`
[`+k+"] ";for(L in arguments[0])l(arguments[0],L)&&(T+=L+": "+arguments[0][L]+", ");T=T.slice(0,-2)}else T=arguments[k];w.push(T)}H(h+`
Arguments: `+Array.prototype.slice.call(w).join("")+`
`+new Error().stack),b=!1}return m.apply(this,arguments)},m)}var U={};function N(h,m){r.deprecationHandler!=null&&r.deprecationHandler(h,m),U[h]||(H(m),U[h]=!0)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null;function $(h){return typeof Function!="undefined"&&h instanceof Function||Object.prototype.toString.call(h)==="[object Function]"}function B(h){var m,b;for(b in h)l(h,b)&&(m=h[b],$(m)?this[b]=m:this["_"+b]=m);this._config=h,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function Y(h,m){var b=v({},h),w;for(w in m)l(m,w)&&(o(h[w])&&o(m[w])?(b[w]={},v(b[w],h[w]),v(b[w],m[w])):m[w]!=null?b[w]=m[w]:delete b[w]);for(w in h)l(h,w)&&!l(m,w)&&o(h[w])&&(b[w]=v({},b[w]));return b}function V(h){h!=null&&this.set(h)}var te;Object.keys?te=Object.keys:te=function(h){var m,b=[];for(m in h)l(h,m)&&b.push(m);return b};var ie={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Ce(h,m,b){var w=this._calendar[h]||this._calendar.sameElse;return $(w)?w.call(m,b):w}function be(h,m,b){var w=""+Math.abs(h),T=m-w.length,k=h>=0;return(k?b?"+":"":"-")+Math.pow(10,Math.max(0,T)).toString().substr(1)+w}var Ye=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,q=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,W={},ee={};function G(h,m,b,w){var T=w;typeof w=="string"&&(T=function(){return this[w]()}),h&&(ee[h]=T),m&&(ee[m[0]]=function(){return be(T.apply(this,arguments),m[1],m[2])}),b&&(ee[b]=function(){return this.localeData().ordinal(T.apply(this,arguments),h)})}function he(h){return h.match(/\[[\s\S]/)?h.replace(/^\[|\]$/g,""):h.replace(/\\/g,"")}function me(h){var m=h.match(Ye),b,w;for(b=0,w=m.length;b<w;b++)ee[m[b]]?m[b]=ee[m[b]]:m[b]=he(m[b]);return function(T){var k="",L;for(L=0;L<w;L++)k+=$(m[L])?m[L].call(T,h):m[L];return k}}function we(h,m){return h.isValid()?(m=ct(m,h.localeData()),W[m]=W[m]||me(m),W[m](h)):h.localeData().invalidDate()}function ct(h,m){var b=5;function w(T){return m.longDateFormat(T)||T}for(q.lastIndex=0;b>=0&&q.test(h);)h=h.replace(q,w),q.lastIndex=0,b-=1;return h}var Nt={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Fe(h){var m=this._longDateFormat[h],b=this._longDateFormat[h.toUpperCase()];return m||!b?m:(this._longDateFormat[h]=b.match(Ye).map(function(w){return w==="MMMM"||w==="MM"||w==="DD"||w==="dddd"?w.slice(1):w}).join(""),this._longDateFormat[h])}var At="Invalid date";function Yr(){return this._invalidDate}var cc="%d",dc=/\d{1,2}/;function Ao(h){return this._ordinal.replace("%d",h)}var hs={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Q1(h,m,b,w){var T=this._relativeTime[b];return $(T)?T(h,m,b,w):T.replace(/%d/i,h)}function J1(h,m){var b=this._relativeTime[h>0?"future":"past"];return $(b)?b(m):b.replace(/%s/i,m)}var Lo={};function Xt(h,m){var b=h.toLowerCase();Lo[b]=Lo[b+"s"]=Lo[m]=h}function zr(h){return typeof h=="string"?Lo[h]||Lo[h.toLowerCase()]:void 0}function pf(h){var m={},b,w;for(w in h)l(h,w)&&(b=zr(w),b&&(m[b]=h[w]));return m}var Oy={};function Kt(h,m){Oy[h]=m}function eP(h){var m=[],b;for(b in h)l(h,b)&&m.push({unit:b,priority:Oy[b]});return m.sort(function(w,T){return w.priority-T.priority}),m}function hc(h){return h%4===0&&h%100!==0||h%400===0}function Vr(h){return h<0?Math.ceil(h)||0:Math.floor(h)}function xe(h){var m=+h,b=0;return m!==0&&isFinite(m)&&(b=Vr(m)),b}function ea(h,m){return function(b){return b!=null?(My(this,h,b),r.updateOffset(this,m),this):fc(this,h)}}function fc(h,m){return h.isValid()?h._d["get"+(h._isUTC?"UTC":"")+m]():NaN}function My(h,m,b){h.isValid()&&!isNaN(b)&&(m==="FullYear"&&hc(h.year())&&h.month()===1&&h.date()===29?(b=xe(b),h._d["set"+(h._isUTC?"UTC":"")+m](b,h.month(),wc(b,h.month()))):h._d["set"+(h._isUTC?"UTC":"")+m](b))}function tP(h){return h=zr(h),$(this[h])?this[h]():this}function rP(h,m){if(typeof h=="object"){h=pf(h);var b=eP(h),w,T=b.length;for(w=0;w<T;w++)this[b[w].unit](h[b[w].unit])}else if(h=zr(h),$(this[h]))return this[h](m);return this}var Fy=/\d/,Dr=/\d\d/,$y=/\d{3}/,mf=/\d{4}/,pc=/[+-]?\d{6}/,it=/\d\d?/,Ny=/\d\d\d\d?/,Ay=/\d\d\d\d\d\d?/,mc=/\d{1,3}/,vf=/\d{1,4}/,vc=/[+-]?\d{1,6}/,ta=/\d+/,gc=/[+-]?\d+/,iP=/Z|[+-]\d\d:?\d\d/gi,yc=/Z|[+-]\d\d(?::?\d\d)?/gi,nP=/[+-]?\d+(\.\d{1,3})?/,Ro=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,bc;bc={};function Q(h,m,b){bc[h]=$(m)?m:function(w,T){return w&&b?b:m}}function sP(h,m){return l(bc,h)?bc[h](m._strict,m._locale):new RegExp(aP(h))}function aP(h){return Pr(h.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(m,b,w,T,k){return b||w||T||k}))}function Pr(h){return h.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var gf={};function je(h,m){var b,w=m,T;for(typeof h=="string"&&(h=[h]),d(m)&&(w=function(k,L){L[m]=xe(k)}),T=h.length,b=0;b<T;b++)gf[h[b]]=w}function Bo(h,m){je(h,function(b,w,T,k){T._w=T._w||{},m(b,T._w,T,k)})}function oP(h,m,b){m!=null&&l(gf,h)&&gf[h](m,b._a,b,h)}var Zt=0,Gi=1,Ti=2,Pt=3,ni=4,Hi=5,fs=6,lP=7,uP=8;function cP(h,m){return(h%m+m)%m}var gt;Array.prototype.indexOf?gt=Array.prototype.indexOf:gt=function(h){var m;for(m=0;m<this.length;++m)if(this[m]===h)return m;return-1};function wc(h,m){if(isNaN(h)||isNaN(m))return NaN;var b=cP(m,12);return h+=(m-b)/12,b===1?hc(h)?29:28:31-b%7%2}G("M",["MM",2],"Mo",function(){return this.month()+1}),G("MMM",0,0,function(h){return this.localeData().monthsShort(this,h)}),G("MMMM",0,0,function(h){return this.localeData().months(this,h)}),Xt("month","M"),Kt("month",8),Q("M",it),Q("MM",it,Dr),Q("MMM",function(h,m){return m.monthsShortRegex(h)}),Q("MMMM",function(h,m){return m.monthsRegex(h)}),je(["M","MM"],function(h,m){m[Gi]=xe(h)-1}),je(["MMM","MMMM"],function(h,m,b,w){var T=b._locale.monthsParse(h,w,b._strict);T!=null?m[Gi]=T:S(b).invalidMonth=h});var dP="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ly="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ry=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,hP=Ro,fP=Ro;function pP(h,m){return h?a(this._months)?this._months[h.month()]:this._months[(this._months.isFormat||Ry).test(m)?"format":"standalone"][h.month()]:a(this._months)?this._months:this._months.standalone}function mP(h,m){return h?a(this._monthsShort)?this._monthsShort[h.month()]:this._monthsShort[Ry.test(m)?"format":"standalone"][h.month()]:a(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function vP(h,m,b){var w,T,k,L=h.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],w=0;w<12;++w)k=y([2e3,w]),this._shortMonthsParse[w]=this.monthsShort(k,"").toLocaleLowerCase(),this._longMonthsParse[w]=this.months(k,"").toLocaleLowerCase();return b?m==="MMM"?(T=gt.call(this._shortMonthsParse,L),T!==-1?T:null):(T=gt.call(this._longMonthsParse,L),T!==-1?T:null):m==="MMM"?(T=gt.call(this._shortMonthsParse,L),T!==-1?T:(T=gt.call(this._longMonthsParse,L),T!==-1?T:null)):(T=gt.call(this._longMonthsParse,L),T!==-1?T:(T=gt.call(this._shortMonthsParse,L),T!==-1?T:null))}function gP(h,m,b){var w,T,k;if(this._monthsParseExact)return vP.call(this,h,m,b);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),w=0;w<12;w++){if(T=y([2e3,w]),b&&!this._longMonthsParse[w]&&(this._longMonthsParse[w]=new RegExp("^"+this.months(T,"").replace(".","")+"$","i"),this._shortMonthsParse[w]=new RegExp("^"+this.monthsShort(T,"").replace(".","")+"$","i")),!b&&!this._monthsParse[w]&&(k="^"+this.months(T,"")+"|^"+this.monthsShort(T,""),this._monthsParse[w]=new RegExp(k.replace(".",""),"i")),b&&m==="MMMM"&&this._longMonthsParse[w].test(h))return w;if(b&&m==="MMM"&&this._shortMonthsParse[w].test(h))return w;if(!b&&this._monthsParse[w].test(h))return w}}function By(h,m){var b;if(!h.isValid())return h;if(typeof m=="string"){if(/^\d+$/.test(m))m=xe(m);else if(m=h.localeData().monthsParse(m),!d(m))return h}return b=Math.min(h.date(),wc(h.year(),m)),h._d["set"+(h._isUTC?"UTC":"")+"Month"](m,b),h}function Gy(h){return h!=null?(By(this,h),r.updateOffset(this,!0),this):fc(this,"Month")}function yP(){return wc(this.year(),this.month())}function bP(h){return this._monthsParseExact?(l(this,"_monthsRegex")||Hy.call(this),h?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=hP),this._monthsShortStrictRegex&&h?this._monthsShortStrictRegex:this._monthsShortRegex)}function wP(h){return this._monthsParseExact?(l(this,"_monthsRegex")||Hy.call(this),h?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=fP),this._monthsStrictRegex&&h?this._monthsStrictRegex:this._monthsRegex)}function Hy(){function h(L,ae){return ae.length-L.length}var m=[],b=[],w=[],T,k;for(T=0;T<12;T++)k=y([2e3,T]),m.push(this.monthsShort(k,"")),b.push(this.months(k,"")),w.push(this.months(k,"")),w.push(this.monthsShort(k,""));for(m.sort(h),b.sort(h),w.sort(h),T=0;T<12;T++)m[T]=Pr(m[T]),b[T]=Pr(b[T]);for(T=0;T<24;T++)w[T]=Pr(w[T]);this._monthsRegex=new RegExp("^("+w.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+b.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+m.join("|")+")","i")}G("Y",0,0,function(){var h=this.year();return h<=9999?be(h,4):"+"+h}),G(0,["YY",2],0,function(){return this.year()%100}),G(0,["YYYY",4],0,"year"),G(0,["YYYYY",5],0,"year"),G(0,["YYYYYY",6,!0],0,"year"),Xt("year","y"),Kt("year",1),Q("Y",gc),Q("YY",it,Dr),Q("YYYY",vf,mf),Q("YYYYY",vc,pc),Q("YYYYYY",vc,pc),je(["YYYYY","YYYYYY"],Zt),je("YYYY",function(h,m){m[Zt]=h.length===2?r.parseTwoDigitYear(h):xe(h)}),je("YY",function(h,m){m[Zt]=r.parseTwoDigitYear(h)}),je("Y",function(h,m){m[Zt]=parseInt(h,10)});function Go(h){return hc(h)?366:365}r.parseTwoDigitYear=function(h){return xe(h)+(xe(h)>68?1900:2e3)};var Wy=ea("FullYear",!0);function SP(){return hc(this.year())}function _P(h,m,b,w,T,k,L){var ae;return h<100&&h>=0?(ae=new Date(h+400,m,b,w,T,k,L),isFinite(ae.getFullYear())&&ae.setFullYear(h)):ae=new Date(h,m,b,w,T,k,L),ae}function Ho(h){var m,b;return h<100&&h>=0?(b=Array.prototype.slice.call(arguments),b[0]=h+400,m=new Date(Date.UTC.apply(null,b)),isFinite(m.getUTCFullYear())&&m.setUTCFullYear(h)):m=new Date(Date.UTC.apply(null,arguments)),m}function Sc(h,m,b){var w=7+m-b,T=(7+Ho(h,0,w).getUTCDay()-m)%7;return-T+w-1}function Yy(h,m,b,w,T){var k=(7+b-w)%7,L=Sc(h,w,T),ae=1+7*(m-1)+k+L,Se,qe;return ae<=0?(Se=h-1,qe=Go(Se)+ae):ae>Go(h)?(Se=h+1,qe=ae-Go(h)):(Se=h,qe=ae),{year:Se,dayOfYear:qe}}function Wo(h,m,b){var w=Sc(h.year(),m,b),T=Math.floor((h.dayOfYear()-w-1)/7)+1,k,L;return T<1?(L=h.year()-1,k=T+Wi(L,m,b)):T>Wi(h.year(),m,b)?(k=T-Wi(h.year(),m,b),L=h.year()+1):(L=h.year(),k=T),{week:k,year:L}}function Wi(h,m,b){var w=Sc(h,m,b),T=Sc(h+1,m,b);return(Go(h)-w+T)/7}G("w",["ww",2],"wo","week"),G("W",["WW",2],"Wo","isoWeek"),Xt("week","w"),Xt("isoWeek","W"),Kt("week",5),Kt("isoWeek",5),Q("w",it),Q("ww",it,Dr),Q("W",it),Q("WW",it,Dr),Bo(["w","ww","W","WW"],function(h,m,b,w){m[w.substr(0,1)]=xe(h)});function TP(h){return Wo(h,this._week.dow,this._week.doy).week}var xP={dow:0,doy:6};function CP(){return this._week.dow}function EP(){return this._week.doy}function kP(h){var m=this.localeData().week(this);return h==null?m:this.add((h-m)*7,"d")}function DP(h){var m=Wo(this,1,4).week;return h==null?m:this.add((h-m)*7,"d")}G("d",0,"do","day"),G("dd",0,0,function(h){return this.localeData().weekdaysMin(this,h)}),G("ddd",0,0,function(h){return this.localeData().weekdaysShort(this,h)}),G("dddd",0,0,function(h){return this.localeData().weekdays(this,h)}),G("e",0,0,"weekday"),G("E",0,0,"isoWeekday"),Xt("day","d"),Xt("weekday","e"),Xt("isoWeekday","E"),Kt("day",11),Kt("weekday",11),Kt("isoWeekday",11),Q("d",it),Q("e",it),Q("E",it),Q("dd",function(h,m){return m.weekdaysMinRegex(h)}),Q("ddd",function(h,m){return m.weekdaysShortRegex(h)}),Q("dddd",function(h,m){return m.weekdaysRegex(h)}),Bo(["dd","ddd","dddd"],function(h,m,b,w){var T=b._locale.weekdaysParse(h,w,b._strict);T!=null?m.d=T:S(b).invalidWeekday=h}),Bo(["d","e","E"],function(h,m,b,w){m[w]=xe(h)});function PP(h,m){return typeof h!="string"?h:isNaN(h)?(h=m.weekdaysParse(h),typeof h=="number"?h:null):parseInt(h,10)}function IP(h,m){return typeof h=="string"?m.weekdaysParse(h)%7||7:isNaN(h)?null:h}function yf(h,m){return h.slice(m,7).concat(h.slice(0,m))}var OP="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),zy="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),MP="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),FP=Ro,$P=Ro,NP=Ro;function AP(h,m){var b=a(this._weekdays)?this._weekdays:this._weekdays[h&&h!==!0&&this._weekdays.isFormat.test(m)?"format":"standalone"];return h===!0?yf(b,this._week.dow):h?b[h.day()]:b}function LP(h){return h===!0?yf(this._weekdaysShort,this._week.dow):h?this._weekdaysShort[h.day()]:this._weekdaysShort}function RP(h){return h===!0?yf(this._weekdaysMin,this._week.dow):h?this._weekdaysMin[h.day()]:this._weekdaysMin}function BP(h,m,b){var w,T,k,L=h.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],w=0;w<7;++w)k=y([2e3,1]).day(w),this._minWeekdaysParse[w]=this.weekdaysMin(k,"").toLocaleLowerCase(),this._shortWeekdaysParse[w]=this.weekdaysShort(k,"").toLocaleLowerCase(),this._weekdaysParse[w]=this.weekdays(k,"").toLocaleLowerCase();return b?m==="dddd"?(T=gt.call(this._weekdaysParse,L),T!==-1?T:null):m==="ddd"?(T=gt.call(this._shortWeekdaysParse,L),T!==-1?T:null):(T=gt.call(this._minWeekdaysParse,L),T!==-1?T:null):m==="dddd"?(T=gt.call(this._weekdaysParse,L),T!==-1||(T=gt.call(this._shortWeekdaysParse,L),T!==-1)?T:(T=gt.call(this._minWeekdaysParse,L),T!==-1?T:null)):m==="ddd"?(T=gt.call(this._shortWeekdaysParse,L),T!==-1||(T=gt.call(this._weekdaysParse,L),T!==-1)?T:(T=gt.call(this._minWeekdaysParse,L),T!==-1?T:null)):(T=gt.call(this._minWeekdaysParse,L),T!==-1||(T=gt.call(this._weekdaysParse,L),T!==-1)?T:(T=gt.call(this._shortWeekdaysParse,L),T!==-1?T:null))}function GP(h,m,b){var w,T,k;if(this._weekdaysParseExact)return BP.call(this,h,m,b);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),w=0;w<7;w++){if(T=y([2e3,1]).day(w),b&&!this._fullWeekdaysParse[w]&&(this._fullWeekdaysParse[w]=new RegExp("^"+this.weekdays(T,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[w]=new RegExp("^"+this.weekdaysShort(T,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[w]=new RegExp("^"+this.weekdaysMin(T,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[w]||(k="^"+this.weekdays(T,"")+"|^"+this.weekdaysShort(T,"")+"|^"+this.weekdaysMin(T,""),this._weekdaysParse[w]=new RegExp(k.replace(".",""),"i")),b&&m==="dddd"&&this._fullWeekdaysParse[w].test(h))return w;if(b&&m==="ddd"&&this._shortWeekdaysParse[w].test(h))return w;if(b&&m==="dd"&&this._minWeekdaysParse[w].test(h))return w;if(!b&&this._weekdaysParse[w].test(h))return w}}function HP(h){if(!this.isValid())return h!=null?this:NaN;var m=this._isUTC?this._d.getUTCDay():this._d.getDay();return h!=null?(h=PP(h,this.localeData()),this.add(h-m,"d")):m}function WP(h){if(!this.isValid())return h!=null?this:NaN;var m=(this.day()+7-this.localeData()._week.dow)%7;return h==null?m:this.add(h-m,"d")}function YP(h){if(!this.isValid())return h!=null?this:NaN;if(h!=null){var m=IP(h,this.localeData());return this.day(this.day()%7?m:m-7)}else return this.day()||7}function zP(h){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||bf.call(this),h?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=FP),this._weekdaysStrictRegex&&h?this._weekdaysStrictRegex:this._weekdaysRegex)}function VP(h){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||bf.call(this),h?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=$P),this._weekdaysShortStrictRegex&&h?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function UP(h){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||bf.call(this),h?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=NP),this._weekdaysMinStrictRegex&&h?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function bf(){function h(ar,ji){return ji.length-ar.length}var m=[],b=[],w=[],T=[],k,L,ae,Se,qe;for(k=0;k<7;k++)L=y([2e3,1]).day(k),ae=Pr(this.weekdaysMin(L,"")),Se=Pr(this.weekdaysShort(L,"")),qe=Pr(this.weekdays(L,"")),m.push(ae),b.push(Se),w.push(qe),T.push(ae),T.push(Se),T.push(qe);m.sort(h),b.sort(h),w.sort(h),T.sort(h),this._weekdaysRegex=new RegExp("^("+T.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+w.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+b.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+m.join("|")+")","i")}function wf(){return this.hours()%12||12}function jP(){return this.hours()||24}G("H",["HH",2],0,"hour"),G("h",["hh",2],0,wf),G("k",["kk",2],0,jP),G("hmm",0,0,function(){return""+wf.apply(this)+be(this.minutes(),2)}),G("hmmss",0,0,function(){return""+wf.apply(this)+be(this.minutes(),2)+be(this.seconds(),2)}),G("Hmm",0,0,function(){return""+this.hours()+be(this.minutes(),2)}),G("Hmmss",0,0,function(){return""+this.hours()+be(this.minutes(),2)+be(this.seconds(),2)});function Vy(h,m){G(h,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),m)})}Vy("a",!0),Vy("A",!1),Xt("hour","h"),Kt("hour",13);function Uy(h,m){return m._meridiemParse}Q("a",Uy),Q("A",Uy),Q("H",it),Q("h",it),Q("k",it),Q("HH",it,Dr),Q("hh",it,Dr),Q("kk",it,Dr),Q("hmm",Ny),Q("hmmss",Ay),Q("Hmm",Ny),Q("Hmmss",Ay),je(["H","HH"],Pt),je(["k","kk"],function(h,m,b){var w=xe(h);m[Pt]=w===24?0:w}),je(["a","A"],function(h,m,b){b._isPm=b._locale.isPM(h),b._meridiem=h}),je(["h","hh"],function(h,m,b){m[Pt]=xe(h),S(b).bigHour=!0}),je("hmm",function(h,m,b){var w=h.length-2;m[Pt]=xe(h.substr(0,w)),m[ni]=xe(h.substr(w)),S(b).bigHour=!0}),je("hmmss",function(h,m,b){var w=h.length-4,T=h.length-2;m[Pt]=xe(h.substr(0,w)),m[ni]=xe(h.substr(w,2)),m[Hi]=xe(h.substr(T)),S(b).bigHour=!0}),je("Hmm",function(h,m,b){var w=h.length-2;m[Pt]=xe(h.substr(0,w)),m[ni]=xe(h.substr(w))}),je("Hmmss",function(h,m,b){var w=h.length-4,T=h.length-2;m[Pt]=xe(h.substr(0,w)),m[ni]=xe(h.substr(w,2)),m[Hi]=xe(h.substr(T))});function qP(h){return(h+"").toLowerCase().charAt(0)==="p"}var XP=/[ap]\.?m?\.?/i,KP=ea("Hours",!0);function ZP(h,m,b){return h>11?b?"pm":"PM":b?"am":"AM"}var jy={calendar:ie,longDateFormat:Nt,invalidDate:At,ordinal:cc,dayOfMonthOrdinalParse:dc,relativeTime:hs,months:dP,monthsShort:Ly,week:xP,weekdays:OP,weekdaysMin:MP,weekdaysShort:zy,meridiemParse:XP},st={},Yo={},zo;function QP(h,m){var b,w=Math.min(h.length,m.length);for(b=0;b<w;b+=1)if(h[b]!==m[b])return b;return w}function qy(h){return h&&h.toLowerCase().replace("_","-")}function JP(h){for(var m=0,b,w,T,k;m<h.length;){for(k=qy(h[m]).split("-"),b=k.length,w=qy(h[m+1]),w=w?w.split("-"):null;b>0;){if(T=_c(k.slice(0,b).join("-")),T)return T;if(w&&w.length>=b&&QP(k,w)>=b-1)break;b--}m++}return zo}function eI(h){return h.match("^[^/\\\\]*$")!=null}function _c(h){var m=null,b;if(st[h]===void 0&&t&&t.exports&&eI(h))try{m=zo._abbr,b=$i,b("./locale/"+h),_n(m)}catch(w){st[h]=null}return st[h]}function _n(h,m){var b;return h&&(c(m)?b=Yi(h):b=Sf(h,m),b?zo=b:typeof console!="undefined"&&console.warn&&console.warn("Locale "+h+" not found. Did you forget to load it?")),zo._abbr}function Sf(h,m){if(m!==null){var b,w=jy;if(m.abbr=h,st[h]!=null)N("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),w=st[h]._config;else if(m.parentLocale!=null)if(st[m.parentLocale]!=null)w=st[m.parentLocale]._config;else if(b=_c(m.parentLocale),b!=null)w=b._config;else return Yo[m.parentLocale]||(Yo[m.parentLocale]=[]),Yo[m.parentLocale].push({name:h,config:m}),null;return st[h]=new V(Y(w,m)),Yo[h]&&Yo[h].forEach(function(T){Sf(T.name,T.config)}),_n(h),st[h]}else return delete st[h],null}function tI(h,m){if(m!=null){var b,w,T=jy;st[h]!=null&&st[h].parentLocale!=null?st[h].set(Y(st[h]._config,m)):(w=_c(h),w!=null&&(T=w._config),m=Y(T,m),w==null&&(m.abbr=h),b=new V(m),b.parentLocale=st[h],st[h]=b),_n(h)}else st[h]!=null&&(st[h].parentLocale!=null?(st[h]=st[h].parentLocale,h===_n()&&_n(h)):st[h]!=null&&delete st[h]);return st[h]}function Yi(h){var m;if(h&&h._locale&&h._locale._abbr&&(h=h._locale._abbr),!h)return zo;if(!a(h)){if(m=_c(h),m)return m;h=[h]}return JP(h)}function rI(){return te(st)}function _f(h){var m,b=h._a;return b&&S(h).overflow===-2&&(m=b[Gi]<0||b[Gi]>11?Gi:b[Ti]<1||b[Ti]>wc(b[Zt],b[Gi])?Ti:b[Pt]<0||b[Pt]>24||b[Pt]===24&&(b[ni]!==0||b[Hi]!==0||b[fs]!==0)?Pt:b[ni]<0||b[ni]>59?ni:b[Hi]<0||b[Hi]>59?Hi:b[fs]<0||b[fs]>999?fs:-1,S(h)._overflowDayOfYear&&(m<Zt||m>Ti)&&(m=Ti),S(h)._overflowWeeks&&m===-1&&(m=lP),S(h)._overflowWeekday&&m===-1&&(m=uP),S(h).overflow=m),h}var iI=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,nI=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,sI=/Z|[+-]\d\d(?::?\d\d)?/,Tc=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Tf=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],aI=/^\/?Date\((-?\d+)/i,oI=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,lI={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Xy(h){var m,b,w=h._i,T=iI.exec(w)||nI.exec(w),k,L,ae,Se,qe=Tc.length,ar=Tf.length;if(T){for(S(h).iso=!0,m=0,b=qe;m<b;m++)if(Tc[m][1].exec(T[1])){L=Tc[m][0],k=Tc[m][2]!==!1;break}if(L==null){h._isValid=!1;return}if(T[3]){for(m=0,b=ar;m<b;m++)if(Tf[m][1].exec(T[3])){ae=(T[2]||" ")+Tf[m][0];break}if(ae==null){h._isValid=!1;return}}if(!k&&ae!=null){h._isValid=!1;return}if(T[4])if(sI.exec(T[4]))Se="Z";else{h._isValid=!1;return}h._f=L+(ae||"")+(Se||""),Cf(h)}else h._isValid=!1}function uI(h,m,b,w,T,k){var L=[cI(h),Ly.indexOf(m),parseInt(b,10),parseInt(w,10),parseInt(T,10)];return k&&L.push(parseInt(k,10)),L}function cI(h){var m=parseInt(h,10);return m<=49?2e3+m:m<=999?1900+m:m}function dI(h){return h.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function hI(h,m,b){if(h){var w=zy.indexOf(h),T=new Date(m[0],m[1],m[2]).getDay();if(w!==T)return S(b).weekdayMismatch=!0,b._isValid=!1,!1}return!0}function fI(h,m,b){if(h)return lI[h];if(m)return 0;var w=parseInt(b,10),T=w%100,k=(w-T)/100;return k*60+T}function Ky(h){var m=oI.exec(dI(h._i)),b;if(m){if(b=uI(m[4],m[3],m[2],m[5],m[6],m[7]),!hI(m[1],b,h))return;h._a=b,h._tzm=fI(m[8],m[9],m[10]),h._d=Ho.apply(null,h._a),h._d.setUTCMinutes(h._d.getUTCMinutes()-h._tzm),S(h).rfc2822=!0}else h._isValid=!1}function pI(h){var m=aI.exec(h._i);if(m!==null){h._d=new Date(+m[1]);return}if(Xy(h),h._isValid===!1)delete h._isValid;else return;if(Ky(h),h._isValid===!1)delete h._isValid;else return;h._strict?h._isValid=!1:r.createFromInputFallback(h)}r.createFromInputFallback=z("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(h){h._d=new Date(h._i+(h._useUTC?" UTC":""))});function ra(h,m,b){return h!=null?h:m!=null?m:b}function mI(h){var m=new Date(r.now());return h._useUTC?[m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()]:[m.getFullYear(),m.getMonth(),m.getDate()]}function xf(h){var m,b,w=[],T,k,L;if(!h._d){for(T=mI(h),h._w&&h._a[Ti]==null&&h._a[Gi]==null&&vI(h),h._dayOfYear!=null&&(L=ra(h._a[Zt],T[Zt]),(h._dayOfYear>Go(L)||h._dayOfYear===0)&&(S(h)._overflowDayOfYear=!0),b=Ho(L,0,h._dayOfYear),h._a[Gi]=b.getUTCMonth(),h._a[Ti]=b.getUTCDate()),m=0;m<3&&h._a[m]==null;++m)h._a[m]=w[m]=T[m];for(;m<7;m++)h._a[m]=w[m]=h._a[m]==null?m===2?1:0:h._a[m];h._a[Pt]===24&&h._a[ni]===0&&h._a[Hi]===0&&h._a[fs]===0&&(h._nextDay=!0,h._a[Pt]=0),h._d=(h._useUTC?Ho:_P).apply(null,w),k=h._useUTC?h._d.getUTCDay():h._d.getDay(),h._tzm!=null&&h._d.setUTCMinutes(h._d.getUTCMinutes()-h._tzm),h._nextDay&&(h._a[Pt]=24),h._w&&typeof h._w.d!="undefined"&&h._w.d!==k&&(S(h).weekdayMismatch=!0)}}function vI(h){var m,b,w,T,k,L,ae,Se,qe;m=h._w,m.GG!=null||m.W!=null||m.E!=null?(k=1,L=4,b=ra(m.GG,h._a[Zt],Wo(nt(),1,4).year),w=ra(m.W,1),T=ra(m.E,1),(T<1||T>7)&&(Se=!0)):(k=h._locale._week.dow,L=h._locale._week.doy,qe=Wo(nt(),k,L),b=ra(m.gg,h._a[Zt],qe.year),w=ra(m.w,qe.week),m.d!=null?(T=m.d,(T<0||T>6)&&(Se=!0)):m.e!=null?(T=m.e+k,(m.e<0||m.e>6)&&(Se=!0)):T=k),w<1||w>Wi(b,k,L)?S(h)._overflowWeeks=!0:Se!=null?S(h)._overflowWeekday=!0:(ae=Yy(b,w,T,k,L),h._a[Zt]=ae.year,h._dayOfYear=ae.dayOfYear)}r.ISO_8601=function(){},r.RFC_2822=function(){};function Cf(h){if(h._f===r.ISO_8601){Xy(h);return}if(h._f===r.RFC_2822){Ky(h);return}h._a=[],S(h).empty=!0;var m=""+h._i,b,w,T,k,L,ae=m.length,Se=0,qe,ar;for(T=ct(h._f,h._locale).match(Ye)||[],ar=T.length,b=0;b<ar;b++)k=T[b],w=(m.match(sP(k,h))||[])[0],w&&(L=m.substr(0,m.indexOf(w)),L.length>0&&S(h).unusedInput.push(L),m=m.slice(m.indexOf(w)+w.length),Se+=w.length),ee[k]?(w?S(h).empty=!1:S(h).unusedTokens.push(k),oP(k,w,h)):h._strict&&!w&&S(h).unusedTokens.push(k);S(h).charsLeftOver=ae-Se,m.length>0&&S(h).unusedInput.push(m),h._a[Pt]<=12&&S(h).bigHour===!0&&h._a[Pt]>0&&(S(h).bigHour=void 0),S(h).parsedDateParts=h._a.slice(0),S(h).meridiem=h._meridiem,h._a[Pt]=gI(h._locale,h._a[Pt],h._meridiem),qe=S(h).era,qe!==null&&(h._a[Zt]=h._locale.erasConvertYear(qe,h._a[Zt])),xf(h),_f(h)}function gI(h,m,b){var w;return b==null?m:h.meridiemHour!=null?h.meridiemHour(m,b):(h.isPM!=null&&(w=h.isPM(b),w&&m<12&&(m+=12),!w&&m===12&&(m=0)),m)}function yI(h){var m,b,w,T,k,L,ae=!1,Se=h._f.length;if(Se===0){S(h).invalidFormat=!0,h._d=new Date(NaN);return}for(T=0;T<Se;T++)k=0,L=!1,m=A({},h),h._useUTC!=null&&(m._useUTC=h._useUTC),m._f=h._f[T],Cf(m),D(m)&&(L=!0),k+=S(m).charsLeftOver,k+=S(m).unusedTokens.length*10,S(m).score=k,ae?k<w&&(w=k,b=m):(w==null||k<w||L)&&(w=k,b=m,L&&(ae=!0));v(h,b||m)}function bI(h){if(!h._d){var m=pf(h._i),b=m.day===void 0?m.date:m.day;h._a=p([m.year,m.month,b,m.hour,m.minute,m.second,m.millisecond],function(w){return w&&parseInt(w,10)}),xf(h)}}function wI(h){var m=new M(_f(Zy(h)));return m._nextDay&&(m.add(1,"d"),m._nextDay=void 0),m}function Zy(h){var m=h._i,b=h._f;return h._locale=h._locale||Yi(h._l),m===null||b===void 0&&m===""?E({nullInput:!0}):(typeof m=="string"&&(h._i=m=h._locale.preparse(m)),I(m)?new M(_f(m)):(f(m)?h._d=m:a(b)?yI(h):b?Cf(h):SI(h),D(h)||(h._d=null),h))}function SI(h){var m=h._i;c(m)?h._d=new Date(r.now()):f(m)?h._d=new Date(m.valueOf()):typeof m=="string"?pI(h):a(m)?(h._a=p(m.slice(0),function(b){return parseInt(b,10)}),xf(h)):o(m)?bI(h):d(m)?h._d=new Date(m):r.createFromInputFallback(h)}function Qy(h,m,b,w,T){var k={};return(m===!0||m===!1)&&(w=m,m=void 0),(b===!0||b===!1)&&(w=b,b=void 0),(o(h)&&u(h)||a(h)&&h.length===0)&&(h=void 0),k._isAMomentObject=!0,k._useUTC=k._isUTC=T,k._l=b,k._i=h,k._f=m,k._strict=w,wI(k)}function nt(h,m,b,w){return Qy(h,m,b,w,!1)}var _I=z("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var h=nt.apply(null,arguments);return this.isValid()&&h.isValid()?h<this?this:h:E()}),TI=z("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var h=nt.apply(null,arguments);return this.isValid()&&h.isValid()?h>this?this:h:E()});function Jy(h,m){var b,w;if(m.length===1&&a(m[0])&&(m=m[0]),!m.length)return nt();for(b=m[0],w=1;w<m.length;++w)(!m[w].isValid()||m[w][h](b))&&(b=m[w]);return b}function xI(){var h=[].slice.call(arguments,0);return Jy("isBefore",h)}function CI(){var h=[].slice.call(arguments,0);return Jy("isAfter",h)}var EI=function(){return Date.now?Date.now():+new Date},Vo=["year","quarter","month","week","day","hour","minute","second","millisecond"];function kI(h){var m,b=!1,w,T=Vo.length;for(m in h)if(l(h,m)&&!(gt.call(Vo,m)!==-1&&(h[m]==null||!isNaN(h[m]))))return!1;for(w=0;w<T;++w)if(h[Vo[w]]){if(b)return!1;parseFloat(h[Vo[w]])!==xe(h[Vo[w]])&&(b=!0)}return!0}function DI(){return this._isValid}function PI(){return si(NaN)}function xc(h){var m=pf(h),b=m.year||0,w=m.quarter||0,T=m.month||0,k=m.week||m.isoWeek||0,L=m.day||0,ae=m.hour||0,Se=m.minute||0,qe=m.second||0,ar=m.millisecond||0;this._isValid=kI(m),this._milliseconds=+ar+qe*1e3+Se*6e4+ae*1e3*60*60,this._days=+L+k*7,this._months=+T+w*3+b*12,this._data={},this._locale=Yi(),this._bubble()}function Cc(h){return h instanceof xc}function Ef(h){return h<0?Math.round(-1*h)*-1:Math.round(h)}function II(h,m,b){var w=Math.min(h.length,m.length),T=Math.abs(h.length-m.length),k=0,L;for(L=0;L<w;L++)(b&&h[L]!==m[L]||!b&&xe(h[L])!==xe(m[L]))&&k++;return k+T}function eb(h,m){G(h,0,0,function(){var b=this.utcOffset(),w="+";return b<0&&(b=-b,w="-"),w+be(~~(b/60),2)+m+be(~~b%60,2)})}eb("Z",":"),eb("ZZ",""),Q("Z",yc),Q("ZZ",yc),je(["Z","ZZ"],function(h,m,b){b._useUTC=!0,b._tzm=kf(yc,h)});var OI=/([\+\-]|\d\d)/gi;function kf(h,m){var b=(m||"").match(h),w,T,k;return b===null?null:(w=b[b.length-1]||[],T=(w+"").match(OI)||["-",0,0],k=+(T[1]*60)+xe(T[2]),k===0?0:T[0]==="+"?k:-k)}function Df(h,m){var b,w;return m._isUTC?(b=m.clone(),w=(I(h)||f(h)?h.valueOf():nt(h).valueOf())-b.valueOf(),b._d.setTime(b._d.valueOf()+w),r.updateOffset(b,!1),b):nt(h).local()}function Pf(h){return-Math.round(h._d.getTimezoneOffset())}r.updateOffset=function(){};function MI(h,m,b){var w=this._offset||0,T;if(!this.isValid())return h!=null?this:NaN;if(h!=null){if(typeof h=="string"){if(h=kf(yc,h),h===null)return this}else Math.abs(h)<16&&!b&&(h=h*60);return!this._isUTC&&m&&(T=Pf(this)),this._offset=h,this._isUTC=!0,T!=null&&this.add(T,"m"),w!==h&&(!m||this._changeInProgress?nb(this,si(h-w,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?w:Pf(this)}function FI(h,m){return h!=null?(typeof h!="string"&&(h=-h),this.utcOffset(h,m),this):-this.utcOffset()}function $I(h){return this.utcOffset(0,h)}function NI(h){return this._isUTC&&(this.utcOffset(0,h),this._isUTC=!1,h&&this.subtract(Pf(this),"m")),this}function AI(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var h=kf(iP,this._i);h!=null?this.utcOffset(h):this.utcOffset(0,!0)}return this}function LI(h){return this.isValid()?(h=h?nt(h).utcOffset():0,(this.utcOffset()-h)%60===0):!1}function RI(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function BI(){if(!c(this._isDSTShifted))return this._isDSTShifted;var h={},m;return A(h,this),h=Zy(h),h._a?(m=h._isUTC?y(h._a):nt(h._a),this._isDSTShifted=this.isValid()&&II(h._a,m.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function GI(){return this.isValid()?!this._isUTC:!1}function HI(){return this.isValid()?this._isUTC:!1}function tb(){return this.isValid()?this._isUTC&&this._offset===0:!1}var WI=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,YI=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function si(h,m){var b=h,w=null,T,k,L;return Cc(h)?b={ms:h._milliseconds,d:h._days,M:h._months}:d(h)||!isNaN(+h)?(b={},m?b[m]=+h:b.milliseconds=+h):(w=WI.exec(h))?(T=w[1]==="-"?-1:1,b={y:0,d:xe(w[Ti])*T,h:xe(w[Pt])*T,m:xe(w[ni])*T,s:xe(w[Hi])*T,ms:xe(Ef(w[fs]*1e3))*T}):(w=YI.exec(h))?(T=w[1]==="-"?-1:1,b={y:ps(w[2],T),M:ps(w[3],T),w:ps(w[4],T),d:ps(w[5],T),h:ps(w[6],T),m:ps(w[7],T),s:ps(w[8],T)}):b==null?b={}:typeof b=="object"&&("from"in b||"to"in b)&&(L=zI(nt(b.from),nt(b.to)),b={},b.ms=L.milliseconds,b.M=L.months),k=new xc(b),Cc(h)&&l(h,"_locale")&&(k._locale=h._locale),Cc(h)&&l(h,"_isValid")&&(k._isValid=h._isValid),k}si.fn=xc.prototype,si.invalid=PI;function ps(h,m){var b=h&&parseFloat(h.replace(",","."));return(isNaN(b)?0:b)*m}function rb(h,m){var b={};return b.months=m.month()-h.month()+(m.year()-h.year())*12,h.clone().add(b.months,"M").isAfter(m)&&--b.months,b.milliseconds=+m-+h.clone().add(b.months,"M"),b}function zI(h,m){var b;return h.isValid()&&m.isValid()?(m=Df(m,h),h.isBefore(m)?b=rb(h,m):(b=rb(m,h),b.milliseconds=-b.milliseconds,b.months=-b.months),b):{milliseconds:0,months:0}}function ib(h,m){return function(b,w){var T,k;return w!==null&&!isNaN(+w)&&(N(m,"moment()."+m+"(period, number) is deprecated. Please use moment()."+m+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),k=b,b=w,w=k),T=si(b,w),nb(this,T,h),this}}function nb(h,m,b,w){var T=m._milliseconds,k=Ef(m._days),L=Ef(m._months);h.isValid()&&(w=w==null?!0:w,L&&By(h,fc(h,"Month")+L*b),k&&My(h,"Date",fc(h,"Date")+k*b),T&&h._d.setTime(h._d.valueOf()+T*b),w&&r.updateOffset(h,k||L))}var VI=ib(1,"add"),UI=ib(-1,"subtract");function sb(h){return typeof h=="string"||h instanceof String}function jI(h){return I(h)||f(h)||sb(h)||d(h)||XI(h)||qI(h)||h===null||h===void 0}function qI(h){var m=o(h)&&!u(h),b=!1,w=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],T,k,L=w.length;for(T=0;T<L;T+=1)k=w[T],b=b||l(h,k);return m&&b}function XI(h){var m=a(h),b=!1;return m&&(b=h.filter(function(w){return!d(w)&&sb(h)}).length===0),m&&b}function KI(h){var m=o(h)&&!u(h),b=!1,w=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],T,k;for(T=0;T<w.length;T+=1)k=w[T],b=b||l(h,k);return m&&b}function ZI(h,m){var b=h.diff(m,"days",!0);return b<-6?"sameElse":b<-1?"lastWeek":b<0?"lastDay":b<1?"sameDay":b<2?"nextDay":b<7?"nextWeek":"sameElse"}function QI(h,m){arguments.length===1&&(arguments[0]?jI(arguments[0])?(h=arguments[0],m=void 0):KI(arguments[0])&&(m=arguments[0],h=void 0):(h=void 0,m=void 0));var b=h||nt(),w=Df(b,this).startOf("day"),T=r.calendarFormat(this,w)||"sameElse",k=m&&($(m[T])?m[T].call(this,b):m[T]);return this.format(k||this.localeData().calendar(T,this,nt(b)))}function JI(){return new M(this)}function eO(h,m){var b=I(h)?h:nt(h);return this.isValid()&&b.isValid()?(m=zr(m)||"millisecond",m==="millisecond"?this.valueOf()>b.valueOf():b.valueOf()<this.clone().startOf(m).valueOf()):!1}function tO(h,m){var b=I(h)?h:nt(h);return this.isValid()&&b.isValid()?(m=zr(m)||"millisecond",m==="millisecond"?this.valueOf()<b.valueOf():this.clone().endOf(m).valueOf()<b.valueOf()):!1}function rO(h,m,b,w){var T=I(h)?h:nt(h),k=I(m)?m:nt(m);return this.isValid()&&T.isValid()&&k.isValid()?(w=w||"()",(w[0]==="("?this.isAfter(T,b):!this.isBefore(T,b))&&(w[1]===")"?this.isBefore(k,b):!this.isAfter(k,b))):!1}function iO(h,m){var b=I(h)?h:nt(h),w;return this.isValid()&&b.isValid()?(m=zr(m)||"millisecond",m==="millisecond"?this.valueOf()===b.valueOf():(w=b.valueOf(),this.clone().startOf(m).valueOf()<=w&&w<=this.clone().endOf(m).valueOf())):!1}function nO(h,m){return this.isSame(h,m)||this.isAfter(h,m)}function sO(h,m){return this.isSame(h,m)||this.isBefore(h,m)}function aO(h,m,b){var w,T,k;if(!this.isValid())return NaN;if(w=Df(h,this),!w.isValid())return NaN;switch(T=(w.utcOffset()-this.utcOffset())*6e4,m=zr(m),m){case"year":k=Ec(this,w)/12;break;case"month":k=Ec(this,w);break;case"quarter":k=Ec(this,w)/3;break;case"second":k=(this-w)/1e3;break;case"minute":k=(this-w)/6e4;break;case"hour":k=(this-w)/36e5;break;case"day":k=(this-w-T)/864e5;break;case"week":k=(this-w-T)/6048e5;break;default:k=this-w}return b?k:Vr(k)}function Ec(h,m){if(h.date()<m.date())return-Ec(m,h);var b=(m.year()-h.year())*12+(m.month()-h.month()),w=h.clone().add(b,"months"),T,k;return m-w<0?(T=h.clone().add(b-1,"months"),k=(m-w)/(w-T)):(T=h.clone().add(b+1,"months"),k=(m-w)/(T-w)),-(b+k)||0}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function oO(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function lO(h){if(!this.isValid())return null;var m=h!==!0,b=m?this.clone().utc():this;return b.year()<0||b.year()>9999?we(b,m?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):$(Date.prototype.toISOString)?m?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",we(b,"Z")):we(b,m?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function uO(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var h="moment",m="",b,w,T,k;return this.isLocal()||(h=this.utcOffset()===0?"moment.utc":"moment.parseZone",m="Z"),b="["+h+'("]',w=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",T="-MM-DD[T]HH:mm:ss.SSS",k=m+'[")]',this.format(b+w+T+k)}function cO(h){h||(h=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var m=we(this,h);return this.localeData().postformat(m)}function dO(h,m){return this.isValid()&&(I(h)&&h.isValid()||nt(h).isValid())?si({to:this,from:h}).locale(this.locale()).humanize(!m):this.localeData().invalidDate()}function hO(h){return this.from(nt(),h)}function fO(h,m){return this.isValid()&&(I(h)&&h.isValid()||nt(h).isValid())?si({from:this,to:h}).locale(this.locale()).humanize(!m):this.localeData().invalidDate()}function pO(h){return this.to(nt(),h)}function ab(h){var m;return h===void 0?this._locale._abbr:(m=Yi(h),m!=null&&(this._locale=m),this)}var ob=z("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(h){return h===void 0?this.localeData():this.locale(h)});function lb(){return this._locale}var kc=1e3,ia=60*kc,Dc=60*ia,ub=(365*400+97)*24*Dc;function na(h,m){return(h%m+m)%m}function cb(h,m,b){return h<100&&h>=0?new Date(h+400,m,b)-ub:new Date(h,m,b).valueOf()}function db(h,m,b){return h<100&&h>=0?Date.UTC(h+400,m,b)-ub:Date.UTC(h,m,b)}function mO(h){var m,b;if(h=zr(h),h===void 0||h==="millisecond"||!this.isValid())return this;switch(b=this._isUTC?db:cb,h){case"year":m=b(this.year(),0,1);break;case"quarter":m=b(this.year(),this.month()-this.month()%3,1);break;case"month":m=b(this.year(),this.month(),1);break;case"week":m=b(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":m=b(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":m=b(this.year(),this.month(),this.date());break;case"hour":m=this._d.valueOf(),m-=na(m+(this._isUTC?0:this.utcOffset()*ia),Dc);break;case"minute":m=this._d.valueOf(),m-=na(m,ia);break;case"second":m=this._d.valueOf(),m-=na(m,kc);break}return this._d.setTime(m),r.updateOffset(this,!0),this}function vO(h){var m,b;if(h=zr(h),h===void 0||h==="millisecond"||!this.isValid())return this;switch(b=this._isUTC?db:cb,h){case"year":m=b(this.year()+1,0,1)-1;break;case"quarter":m=b(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":m=b(this.year(),this.month()+1,1)-1;break;case"week":m=b(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":m=b(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":m=b(this.year(),this.month(),this.date()+1)-1;break;case"hour":m=this._d.valueOf(),m+=Dc-na(m+(this._isUTC?0:this.utcOffset()*ia),Dc)-1;break;case"minute":m=this._d.valueOf(),m+=ia-na(m,ia)-1;break;case"second":m=this._d.valueOf(),m+=kc-na(m,kc)-1;break}return this._d.setTime(m),r.updateOffset(this,!0),this}function gO(){return this._d.valueOf()-(this._offset||0)*6e4}function yO(){return Math.floor(this.valueOf()/1e3)}function bO(){return new Date(this.valueOf())}function wO(){var h=this;return[h.year(),h.month(),h.date(),h.hour(),h.minute(),h.second(),h.millisecond()]}function SO(){var h=this;return{years:h.year(),months:h.month(),date:h.date(),hours:h.hours(),minutes:h.minutes(),seconds:h.seconds(),milliseconds:h.milliseconds()}}function _O(){return this.isValid()?this.toISOString():null}function TO(){return D(this)}function xO(){return v({},S(this))}function CO(){return S(this).overflow}function EO(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}G("N",0,0,"eraAbbr"),G("NN",0,0,"eraAbbr"),G("NNN",0,0,"eraAbbr"),G("NNNN",0,0,"eraName"),G("NNNNN",0,0,"eraNarrow"),G("y",["y",1],"yo","eraYear"),G("y",["yy",2],0,"eraYear"),G("y",["yyy",3],0,"eraYear"),G("y",["yyyy",4],0,"eraYear"),Q("N",If),Q("NN",If),Q("NNN",If),Q("NNNN",LO),Q("NNNNN",RO),je(["N","NN","NNN","NNNN","NNNNN"],function(h,m,b,w){var T=b._locale.erasParse(h,w,b._strict);T?S(b).era=T:S(b).invalidEra=h}),Q("y",ta),Q("yy",ta),Q("yyy",ta),Q("yyyy",ta),Q("yo",BO),je(["y","yy","yyy","yyyy"],Zt),je(["yo"],function(h,m,b,w){var T;b._locale._eraYearOrdinalRegex&&(T=h.match(b._locale._eraYearOrdinalRegex)),b._locale.eraYearOrdinalParse?m[Zt]=b._locale.eraYearOrdinalParse(h,T):m[Zt]=parseInt(h,10)});function kO(h,m){var b,w,T,k=this._eras||Yi("en")._eras;for(b=0,w=k.length;b<w;++b){switch(typeof k[b].since){case"string":T=r(k[b].since).startOf("day"),k[b].since=T.valueOf();break}switch(typeof k[b].until){case"undefined":k[b].until=1/0;break;case"string":T=r(k[b].until).startOf("day").valueOf(),k[b].until=T.valueOf();break}}return k}function DO(h,m,b){var w,T,k=this.eras(),L,ae,Se;for(h=h.toUpperCase(),w=0,T=k.length;w<T;++w)if(L=k[w].name.toUpperCase(),ae=k[w].abbr.toUpperCase(),Se=k[w].narrow.toUpperCase(),b)switch(m){case"N":case"NN":case"NNN":if(ae===h)return k[w];break;case"NNNN":if(L===h)return k[w];break;case"NNNNN":if(Se===h)return k[w];break}else if([L,ae,Se].indexOf(h)>=0)return k[w]}function PO(h,m){var b=h.since<=h.until?1:-1;return m===void 0?r(h.since).year():r(h.since).year()+(m-h.offset)*b}function IO(){var h,m,b,w=this.localeData().eras();for(h=0,m=w.length;h<m;++h)if(b=this.clone().startOf("day").valueOf(),w[h].since<=b&&b<=w[h].until||w[h].until<=b&&b<=w[h].since)return w[h].name;return""}function OO(){var h,m,b,w=this.localeData().eras();for(h=0,m=w.length;h<m;++h)if(b=this.clone().startOf("day").valueOf(),w[h].since<=b&&b<=w[h].until||w[h].until<=b&&b<=w[h].since)return w[h].narrow;return""}function MO(){var h,m,b,w=this.localeData().eras();for(h=0,m=w.length;h<m;++h)if(b=this.clone().startOf("day").valueOf(),w[h].since<=b&&b<=w[h].until||w[h].until<=b&&b<=w[h].since)return w[h].abbr;return""}function FO(){var h,m,b,w,T=this.localeData().eras();for(h=0,m=T.length;h<m;++h)if(b=T[h].since<=T[h].until?1:-1,w=this.clone().startOf("day").valueOf(),T[h].since<=w&&w<=T[h].until||T[h].until<=w&&w<=T[h].since)return(this.year()-r(T[h].since).year())*b+T[h].offset;return this.year()}function $O(h){return l(this,"_erasNameRegex")||Of.call(this),h?this._erasNameRegex:this._erasRegex}function NO(h){return l(this,"_erasAbbrRegex")||Of.call(this),h?this._erasAbbrRegex:this._erasRegex}function AO(h){return l(this,"_erasNarrowRegex")||Of.call(this),h?this._erasNarrowRegex:this._erasRegex}function If(h,m){return m.erasAbbrRegex(h)}function LO(h,m){return m.erasNameRegex(h)}function RO(h,m){return m.erasNarrowRegex(h)}function BO(h,m){return m._eraYearOrdinalRegex||ta}function Of(){var h=[],m=[],b=[],w=[],T,k,L=this.eras();for(T=0,k=L.length;T<k;++T)m.push(Pr(L[T].name)),h.push(Pr(L[T].abbr)),b.push(Pr(L[T].narrow)),w.push(Pr(L[T].name)),w.push(Pr(L[T].abbr)),w.push(Pr(L[T].narrow));this._erasRegex=new RegExp("^("+w.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+m.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+h.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+b.join("|")+")","i")}G(0,["gg",2],0,function(){return this.weekYear()%100}),G(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Pc(h,m){G(0,[h,h.length],0,m)}Pc("gggg","weekYear"),Pc("ggggg","weekYear"),Pc("GGGG","isoWeekYear"),Pc("GGGGG","isoWeekYear"),Xt("weekYear","gg"),Xt("isoWeekYear","GG"),Kt("weekYear",1),Kt("isoWeekYear",1),Q("G",gc),Q("g",gc),Q("GG",it,Dr),Q("gg",it,Dr),Q("GGGG",vf,mf),Q("gggg",vf,mf),Q("GGGGG",vc,pc),Q("ggggg",vc,pc),Bo(["gggg","ggggg","GGGG","GGGGG"],function(h,m,b,w){m[w.substr(0,2)]=xe(h)}),Bo(["gg","GG"],function(h,m,b,w){m[w]=r.parseTwoDigitYear(h)});function GO(h){return hb.call(this,h,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function HO(h){return hb.call(this,h,this.isoWeek(),this.isoWeekday(),1,4)}function WO(){return Wi(this.year(),1,4)}function YO(){return Wi(this.isoWeekYear(),1,4)}function zO(){var h=this.localeData()._week;return Wi(this.year(),h.dow,h.doy)}function VO(){var h=this.localeData()._week;return Wi(this.weekYear(),h.dow,h.doy)}function hb(h,m,b,w,T){var k;return h==null?Wo(this,w,T).year:(k=Wi(h,w,T),m>k&&(m=k),UO.call(this,h,m,b,w,T))}function UO(h,m,b,w,T){var k=Yy(h,m,b,w,T),L=Ho(k.year,0,k.dayOfYear);return this.year(L.getUTCFullYear()),this.month(L.getUTCMonth()),this.date(L.getUTCDate()),this}G("Q",0,"Qo","quarter"),Xt("quarter","Q"),Kt("quarter",7),Q("Q",Fy),je("Q",function(h,m){m[Gi]=(xe(h)-1)*3});function jO(h){return h==null?Math.ceil((this.month()+1)/3):this.month((h-1)*3+this.month()%3)}G("D",["DD",2],"Do","date"),Xt("date","D"),Kt("date",9),Q("D",it),Q("DD",it,Dr),Q("Do",function(h,m){return h?m._dayOfMonthOrdinalParse||m._ordinalParse:m._dayOfMonthOrdinalParseLenient}),je(["D","DD"],Ti),je("Do",function(h,m){m[Ti]=xe(h.match(it)[0])});var fb=ea("Date",!0);G("DDD",["DDDD",3],"DDDo","dayOfYear"),Xt("dayOfYear","DDD"),Kt("dayOfYear",4),Q("DDD",mc),Q("DDDD",$y),je(["DDD","DDDD"],function(h,m,b){b._dayOfYear=xe(h)});function qO(h){var m=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return h==null?m:this.add(h-m,"d")}G("m",["mm",2],0,"minute"),Xt("minute","m"),Kt("minute",14),Q("m",it),Q("mm",it,Dr),je(["m","mm"],ni);var XO=ea("Minutes",!1);G("s",["ss",2],0,"second"),Xt("second","s"),Kt("second",15),Q("s",it),Q("ss",it,Dr),je(["s","ss"],Hi);var KO=ea("Seconds",!1);G("S",0,0,function(){return~~(this.millisecond()/100)}),G(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),G(0,["SSS",3],0,"millisecond"),G(0,["SSSS",4],0,function(){return this.millisecond()*10}),G(0,["SSSSS",5],0,function(){return this.millisecond()*100}),G(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),G(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),G(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),G(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),Xt("millisecond","ms"),Kt("millisecond",16),Q("S",mc,Fy),Q("SS",mc,Dr),Q("SSS",mc,$y);var Tn,pb;for(Tn="SSSS";Tn.length<=9;Tn+="S")Q(Tn,ta);function ZO(h,m){m[fs]=xe(("0."+h)*1e3)}for(Tn="S";Tn.length<=9;Tn+="S")je(Tn,ZO);pb=ea("Milliseconds",!1),G("z",0,0,"zoneAbbr"),G("zz",0,0,"zoneName");function QO(){return this._isUTC?"UTC":""}function JO(){return this._isUTC?"Coordinated Universal Time":""}var j=M.prototype;j.add=VI,j.calendar=QI,j.clone=JI,j.diff=aO,j.endOf=vO,j.format=cO,j.from=dO,j.fromNow=hO,j.to=fO,j.toNow=pO,j.get=tP,j.invalidAt=CO,j.isAfter=eO,j.isBefore=tO,j.isBetween=rO,j.isSame=iO,j.isSameOrAfter=nO,j.isSameOrBefore=sO,j.isValid=TO,j.lang=ob,j.locale=ab,j.localeData=lb,j.max=TI,j.min=_I,j.parsingFlags=xO,j.set=rP,j.startOf=mO,j.subtract=UI,j.toArray=wO,j.toObject=SO,j.toDate=bO,j.toISOString=lO,j.inspect=uO,typeof Symbol!="undefined"&&Symbol.for!=null&&(j[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),j.toJSON=_O,j.toString=oO,j.unix=yO,j.valueOf=gO,j.creationData=EO,j.eraName=IO,j.eraNarrow=OO,j.eraAbbr=MO,j.eraYear=FO,j.year=Wy,j.isLeapYear=SP,j.weekYear=GO,j.isoWeekYear=HO,j.quarter=j.quarters=jO,j.month=Gy,j.daysInMonth=yP,j.week=j.weeks=kP,j.isoWeek=j.isoWeeks=DP,j.weeksInYear=zO,j.weeksInWeekYear=VO,j.isoWeeksInYear=WO,j.isoWeeksInISOWeekYear=YO,j.date=fb,j.day=j.days=HP,j.weekday=WP,j.isoWeekday=YP,j.dayOfYear=qO,j.hour=j.hours=KP,j.minute=j.minutes=XO,j.second=j.seconds=KO,j.millisecond=j.milliseconds=pb,j.utcOffset=MI,j.utc=$I,j.local=NI,j.parseZone=AI,j.hasAlignedHourOffset=LI,j.isDST=RI,j.isLocal=GI,j.isUtcOffset=HI,j.isUtc=tb,j.isUTC=tb,j.zoneAbbr=QO,j.zoneName=JO,j.dates=z("dates accessor is deprecated. Use date instead.",fb),j.months=z("months accessor is deprecated. Use month instead",Gy),j.years=z("years accessor is deprecated. Use year instead",Wy),j.zone=z("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",FI),j.isDSTShifted=z("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",BI);function eM(h){return nt(h*1e3)}function tM(){return nt.apply(null,arguments).parseZone()}function mb(h){return h}var Ne=V.prototype;Ne.calendar=Ce,Ne.longDateFormat=Fe,Ne.invalidDate=Yr,Ne.ordinal=Ao,Ne.preparse=mb,Ne.postformat=mb,Ne.relativeTime=Q1,Ne.pastFuture=J1,Ne.set=B,Ne.eras=kO,Ne.erasParse=DO,Ne.erasConvertYear=PO,Ne.erasAbbrRegex=NO,Ne.erasNameRegex=$O,Ne.erasNarrowRegex=AO,Ne.months=pP,Ne.monthsShort=mP,Ne.monthsParse=gP,Ne.monthsRegex=wP,Ne.monthsShortRegex=bP,Ne.week=TP,Ne.firstDayOfYear=EP,Ne.firstDayOfWeek=CP,Ne.weekdays=AP,Ne.weekdaysMin=RP,Ne.weekdaysShort=LP,Ne.weekdaysParse=GP,Ne.weekdaysRegex=zP,Ne.weekdaysShortRegex=VP,Ne.weekdaysMinRegex=UP,Ne.isPM=qP,Ne.meridiem=ZP;function Ic(h,m,b,w){var T=Yi(),k=y().set(w,m);return T[b](k,h)}function vb(h,m,b){if(d(h)&&(m=h,h=void 0),h=h||"",m!=null)return Ic(h,m,b,"month");var w,T=[];for(w=0;w<12;w++)T[w]=Ic(h,w,b,"month");return T}function Mf(h,m,b,w){typeof h=="boolean"?(d(m)&&(b=m,m=void 0),m=m||""):(m=h,b=m,h=!1,d(m)&&(b=m,m=void 0),m=m||"");var T=Yi(),k=h?T._week.dow:0,L,ae=[];if(b!=null)return Ic(m,(b+k)%7,w,"day");for(L=0;L<7;L++)ae[L]=Ic(m,(L+k)%7,w,"day");return ae}function rM(h,m){return vb(h,m,"months")}function iM(h,m){return vb(h,m,"monthsShort")}function nM(h,m,b){return Mf(h,m,b,"weekdays")}function sM(h,m,b){return Mf(h,m,b,"weekdaysShort")}function aM(h,m,b){return Mf(h,m,b,"weekdaysMin")}_n("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(h){var m=h%10,b=xe(h%100/10)===1?"th":m===1?"st":m===2?"nd":m===3?"rd":"th";return h+b}}),r.lang=z("moment.lang is deprecated. Use moment.locale instead.",_n),r.langData=z("moment.langData is deprecated. Use moment.localeData instead.",Yi);var zi=Math.abs;function oM(){var h=this._data;return this._milliseconds=zi(this._milliseconds),this._days=zi(this._days),this._months=zi(this._months),h.milliseconds=zi(h.milliseconds),h.seconds=zi(h.seconds),h.minutes=zi(h.minutes),h.hours=zi(h.hours),h.months=zi(h.months),h.years=zi(h.years),this}function gb(h,m,b,w){var T=si(m,b);return h._milliseconds+=w*T._milliseconds,h._days+=w*T._days,h._months+=w*T._months,h._bubble()}function lM(h,m){return gb(this,h,m,1)}function uM(h,m){return gb(this,h,m,-1)}function yb(h){return h<0?Math.floor(h):Math.ceil(h)}function cM(){var h=this._milliseconds,m=this._days,b=this._months,w=this._data,T,k,L,ae,Se;return h>=0&&m>=0&&b>=0||h<=0&&m<=0&&b<=0||(h+=yb(Ff(b)+m)*864e5,m=0,b=0),w.milliseconds=h%1e3,T=Vr(h/1e3),w.seconds=T%60,k=Vr(T/60),w.minutes=k%60,L=Vr(k/60),w.hours=L%24,m+=Vr(L/24),Se=Vr(bb(m)),b+=Se,m-=yb(Ff(Se)),ae=Vr(b/12),b%=12,w.days=m,w.months=b,w.years=ae,this}function bb(h){return h*4800/146097}function Ff(h){return h*146097/4800}function dM(h){if(!this.isValid())return NaN;var m,b,w=this._milliseconds;if(h=zr(h),h==="month"||h==="quarter"||h==="year")switch(m=this._days+w/864e5,b=this._months+bb(m),h){case"month":return b;case"quarter":return b/3;case"year":return b/12}else switch(m=this._days+Math.round(Ff(this._months)),h){case"week":return m/7+w/6048e5;case"day":return m+w/864e5;case"hour":return m*24+w/36e5;case"minute":return m*1440+w/6e4;case"second":return m*86400+w/1e3;case"millisecond":return Math.floor(m*864e5)+w;default:throw new Error("Unknown unit "+h)}}function hM(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+xe(this._months/12)*31536e6:NaN}function Vi(h){return function(){return this.as(h)}}var fM=Vi("ms"),pM=Vi("s"),mM=Vi("m"),vM=Vi("h"),gM=Vi("d"),yM=Vi("w"),bM=Vi("M"),wM=Vi("Q"),SM=Vi("y");function _M(){return si(this)}function TM(h){return h=zr(h),this.isValid()?this[h+"s"]():NaN}function ms(h){return function(){return this.isValid()?this._data[h]:NaN}}var xM=ms("milliseconds"),CM=ms("seconds"),EM=ms("minutes"),kM=ms("hours"),DM=ms("days"),PM=ms("months"),IM=ms("years");function OM(){return Vr(this.days()/7)}var Ui=Math.round,sa={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function MM(h,m,b,w,T){return T.relativeTime(m||1,!!b,h,w)}function FM(h,m,b,w){var T=si(h).abs(),k=Ui(T.as("s")),L=Ui(T.as("m")),ae=Ui(T.as("h")),Se=Ui(T.as("d")),qe=Ui(T.as("M")),ar=Ui(T.as("w")),ji=Ui(T.as("y")),xn=k<=b.ss&&["s",k]||k<b.s&&["ss",k]||L<=1&&["m"]||L<b.m&&["mm",L]||ae<=1&&["h"]||ae<b.h&&["hh",ae]||Se<=1&&["d"]||Se<b.d&&["dd",Se];return b.w!=null&&(xn=xn||ar<=1&&["w"]||ar<b.w&&["ww",ar]),xn=xn||qe<=1&&["M"]||qe<b.M&&["MM",qe]||ji<=1&&["y"]||["yy",ji],xn[2]=m,xn[3]=+h>0,xn[4]=w,MM.apply(null,xn)}function $M(h){return h===void 0?Ui:typeof h=="function"?(Ui=h,!0):!1}function NM(h,m){return sa[h]===void 0?!1:m===void 0?sa[h]:(sa[h]=m,h==="s"&&(sa.ss=m-1),!0)}function AM(h,m){if(!this.isValid())return this.localeData().invalidDate();var b=!1,w=sa,T,k;return typeof h=="object"&&(m=h,h=!1),typeof h=="boolean"&&(b=h),typeof m=="object"&&(w=Object.assign({},sa,m),m.s!=null&&m.ss==null&&(w.ss=m.s-1)),T=this.localeData(),k=FM(this,!b,w,T),b&&(k=T.pastFuture(+this,k)),T.postformat(k)}var $f=Math.abs;function aa(h){return(h>0)-(h<0)||+h}function Oc(){if(!this.isValid())return this.localeData().invalidDate();var h=$f(this._milliseconds)/1e3,m=$f(this._days),b=$f(this._months),w,T,k,L,ae=this.asSeconds(),Se,qe,ar,ji;return ae?(w=Vr(h/60),T=Vr(w/60),h%=60,w%=60,k=Vr(b/12),b%=12,L=h?h.toFixed(3).replace(/\.?0+$/,""):"",Se=ae<0?"-":"",qe=aa(this._months)!==aa(ae)?"-":"",ar=aa(this._days)!==aa(ae)?"-":"",ji=aa(this._milliseconds)!==aa(ae)?"-":"",Se+"P"+(k?qe+k+"Y":"")+(b?qe+b+"M":"")+(m?ar+m+"D":"")+(T||w||h?"T":"")+(T?ji+T+"H":"")+(w?ji+w+"M":"")+(h?ji+L+"S":"")):"P0D"}var Oe=xc.prototype;Oe.isValid=DI,Oe.abs=oM,Oe.add=lM,Oe.subtract=uM,Oe.as=dM,Oe.asMilliseconds=fM,Oe.asSeconds=pM,Oe.asMinutes=mM,Oe.asHours=vM,Oe.asDays=gM,Oe.asWeeks=yM,Oe.asMonths=bM,Oe.asQuarters=wM,Oe.asYears=SM,Oe.valueOf=hM,Oe._bubble=cM,Oe.clone=_M,Oe.get=TM,Oe.milliseconds=xM,Oe.seconds=CM,Oe.minutes=EM,Oe.hours=kM,Oe.days=DM,Oe.weeks=OM,Oe.months=PM,Oe.years=IM,Oe.humanize=AM,Oe.toISOString=Oc,Oe.toString=Oc,Oe.toJSON=Oc,Oe.locale=ab,Oe.localeData=lb,Oe.toIsoString=z("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Oc),Oe.lang=ob,G("X",0,0,"unix"),G("x",0,0,"valueOf"),Q("x",gc),Q("X",nP),je("X",function(h,m,b){b._d=new Date(parseFloat(h)*1e3)}),je("x",function(h,m,b){b._d=new Date(xe(h))});return r.version="2.29.4",s(nt),r.fn=j,r.min=xI,r.max=CI,r.now=EI,r.utc=y,r.unix=eM,r.months=rM,r.isDate=f,r.locale=_n,r.invalid=E,r.duration=si,r.isMoment=I,r.weekdays=nM,r.parseZone=tM,r.localeData=Yi,r.isDuration=Cc,r.monthsShort=iM,r.weekdaysMin=aM,r.defineLocale=Sf,r.updateLocale=tI,r.locales=rI,r.weekdaysShort=sM,r.normalizeUnits=zr,r.relativeTimeRounding=$M,r.relativeTimeThreshold=NM,r.calendarFormat=ZI,r.prototype=j,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r})}(zp)),zp.exports}function Pe(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function S_(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),$h(t,r.key,r)}}function Ie(t,n,e){return n&&S_(t.prototype,n),e&&S_(t,e),$h(t,"prototype",{writable:!1}),t}function De(t,n,e){return n in t?$h(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function rW(t){if(cE(t))return t}function ZW(t,n){var e=t==null?null:typeof to!="undefined"&&Ai(t)||t["@@iterator"];if(e!=null){var r=[],s=!0,a=!1,o,l;try{for(e=e.call(t);!(s=(o=e.next()).done)&&(r.push(o.value),!(n&&r.length===n));s=!0);}catch(u){a=!0,l=u}finally{try{!s&&e.return!=null&&e.return()}finally{if(a)throw l}}return r}}function Ev(t,n){(n==null||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function vE(t,n){var e;if(t){if(typeof t=="string")return Ev(t,n);var r=_Y(e=Object.prototype.toString.call(t)).call(e,8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return mE(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ev(t,n)}}function kY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ur(t,n){return rW(t)||ZW(t,n)||vE(t,n)||kY()}function de(t){return de=typeof to=="function"&&typeof NY=="symbol"?function(n){return typeof n}:function(n){return n&&typeof to=="function"&&n.constructor===to&&n!==to.prototype?"symbol":typeof n},de(t)}function AY(t){if(cE(t))return Ev(t)}function LY(t){if(typeof to!="undefined"&&Ai(t)!=null||t["@@iterator"]!=null)return mE(t)}function RY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lt(t){return AY(t)||LY(t)||vE(t)||RY()}function yi(){return yi=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},yi.apply(this,arguments)}function ii(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n}function Pd(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Lh(t,n){for(var e,r,s=n[0].toUpperCase()+n.slice(1),a=0;a<Q_.length;){if(e=Q_[a],r=e?e+s:n,r in t)return r;a++}}function BU(){if(!ok)return!1;var t={},n=ln.CSS&&ln.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(e){return t[e]=n?ln.CSS.supports("touch-action",e):!0}),t}function un(t,n,e){var r;if(t)if(t.forEach)t.forEach(n,e);else if(t.length!==void 0)for(r=0;r<t.length;)n.call(e,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&n.call(e,t[r],r,t)}function Rh(t,n){return typeof t===RU?t.apply(n&&n[0]||void 0,n):t}function Is(t,n){return t.indexOf(n)>-1}function UU(t){if(Is(t,Ms))return Ms;var n=Is(t,Tu),e=Is(t,xu);return n&&e?Ms:n||e?n?Tu:xu:Is(t,Ov)?Ov:uk}function Ag(t,n){for(;t;){if(t===n)return!0;t=t.parentNode}return!1}function pk(t){var n=t.length;if(n===1)return{x:ro(t[0].clientX),y:ro(t[0].clientY)};for(var e=0,r=0,s=0;s<n;)e+=t[s].clientX,r+=t[s].clientY,s++;return{x:ro(e/n),y:ro(r/n)}}function J_(t){for(var n=[],e=0;e<t.pointers.length;)n[e]={clientX:ro(t.pointers[e].clientX),clientY:ro(t.pointers[e].clientY)},e++;return{timeStamp:$g(),pointers:n,center:pk(n),deltaX:t.deltaX,deltaY:t.deltaY}}function ih(t,n,e){e||(e=hk);var r=n[e[0]]-t[e[0]],s=n[e[1]]-t[e[1]];return Math.sqrt(r*r+s*s)}function Mv(t,n,e){e||(e=hk);var r=n[e[0]]-t[e[0]],s=n[e[1]]-t[e[1]];return Math.atan2(s,r)*180/Math.PI}function mk(t,n){return t===n?th:Bs(t)>=Bs(n)?t<0?rc:ic:n<0?nc:fo}function jU(t,n){var e=n.center,r=t.offsetDelta||{},s=t.prevDelta||{},a=t.prevInput||{};(n.eventType===hr||a.eventType===Et)&&(s=t.prevDelta={x:a.deltaX||0,y:a.deltaY||0},r=t.offsetDelta={x:e.x,y:e.y}),n.deltaX=s.x+(e.x-r.x),n.deltaY=s.y+(e.y-r.y)}function vk(t,n,e){return{x:n/t||0,y:e/t||0}}function qU(t,n){return ih(n[0],n[1],rh)/ih(t[0],t[1],rh)}function XU(t,n){return Mv(n[1],n[0],rh)+Mv(t[1],t[0],rh)}function KU(t,n){var e=t.lastInterval||n,r=n.timeStamp-e.timeStamp,s,a,o,l;if(n.eventType!==wr&&(r>VU||e.velocity===void 0)){var u=n.deltaX-e.deltaX,c=n.deltaY-e.deltaY,d=vk(r,u,c);a=d.x,o=d.y,s=Bs(d.x)>Bs(d.y)?d.x:d.y,l=mk(u,c),t.lastInterval=n}else s=e.velocity,a=e.velocityX,o=e.velocityY,l=e.direction;n.velocity=s,n.velocityX=a,n.velocityY=o,n.direction=l}function ZU(t,n){var e=t.session,r=n.pointers,s=r.length;e.firstInput||(e.firstInput=J_(n)),s>1&&!e.firstMultiple?e.firstMultiple=J_(n):s===1&&(e.firstMultiple=!1);var a=e.firstInput,o=e.firstMultiple,l=o?o.center:a.center,u=n.center=pk(r);n.timeStamp=$g(),n.deltaTime=n.timeStamp-a.timeStamp,n.angle=Mv(l,u),n.distance=ih(l,u),jU(e,n),n.offsetDirection=mk(n.deltaX,n.deltaY);var c=vk(n.deltaTime,n.deltaX,n.deltaY);n.overallVelocityX=c.x,n.overallVelocityY=c.y,n.overallVelocity=Bs(c.x)>Bs(c.y)?c.x:c.y,n.scale=o?qU(o.pointers,r):1,n.rotation=o?XU(o.pointers,r):0,n.maxPointers=e.prevInput?n.pointers.length>e.prevInput.maxPointers?n.pointers.length:e.prevInput.maxPointers:n.pointers.length,KU(e,n);var d=t.element,f=n.srcEvent,p;f.composedPath?p=f.composedPath()[0]:f.path?p=f.path[0]:p=f.target,Ag(p,d)&&(d=p),n.target=d}function QU(t,n,e){var r=e.pointers.length,s=e.changedPointers.length,a=n&hr&&r-s===0,o=n&(Et|wr)&&r-s===0;e.isFirst=!!a,e.isFinal=!!o,a&&(t.session={}),e.eventType=n,ZU(t,e),t.emit("hammer.input",e),t.recognize(e),t.session.prevInput=e}function Cu(t){return t.trim().split(/\s+/g)}function pu(t,n,e){un(Cu(n),function(r){t.addEventListener(r,e,!1)})}function mu(t,n,e){un(Cu(n),function(r){t.removeEventListener(r,e,!1)})}function eT(t){var n=t.ownerDocument||t;return n.defaultView||n.parentWindow||window}function Gs(t,n,e){if(t.indexOf&&!e)return t.indexOf(n);for(var r=0;r<t.length;){if(e&&t[r][e]==n||!e&&t[r]===n)return r;r++}return-1}function Eu(t){return Array.prototype.slice.call(t,0)}function Lg(t,n,e){for(var r=[],s=[],a=0;a<t.length;){var o=n?t[a][n]:t[a];Gs(s,o)<0&&r.push(t[a]),s[a]=o,a++}return e&&(n?r=r.sort(function(l,u){return l[n]>u[n]}):r=r.sort()),r}function ij(t,n){var e=Eu(t.touches),r=this.targetIds;if(n&(hr|Zs)&&e.length===1)return r[e[0].identifier]=!0,[e,e];var s,a,o=Eu(t.changedTouches),l=[],u=this.target;if(a=e.filter(function(c){return Ag(c.target,u)}),n===hr)for(s=0;s<a.length;)r[a[s].identifier]=!0,s++;for(s=0;s<o.length;)r[o[s].identifier]&&l.push(o[s]),n&(Et|wr)&&delete r[o[s].identifier],s++;if(l.length)return[Lg(a.concat(l),"identifier",!0),l]}function rT(t){var n=t.changedPointers,e=n[0];if(e.identifier===this.primaryTouch){var r={x:e.clientX,y:e.clientY},s=this.lastTouches;this.lastTouches.push(r);var a=function(){var l=s.indexOf(r);l>-1&&s.splice(l,1)};setTimeout(a,oj)}}function lj(t,n){t&hr?(this.primaryTouch=n.changedPointers[0].identifier,rT.call(this,n)):t&(Et|wr)&&rT.call(this,n)}function uj(t){for(var n=t.srcEvent.clientX,e=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var s=this.lastTouches[r],a=Math.abs(n-s.x),o=Math.abs(e-s.y);if(a<=tT&&o<=tT)return!0}return!1}function cj(t){var n,e=t.options.inputClass;return e?n=e:HU?n=bk:WU?n=Rg:ck?n=wk:n=Bg,new n(t,QU)}function io(t,n,e){return Array.isArray(t)?(un(t,e[n],e),!0):!1}function hj(){return dj++}function Od(t,n){var e=n.manager;return e?e.get(t):t}function iT(t){return t&ku?"cancel":t&Qn?"end":t&po?"move":t&Jr?"start":""}function Sk(t){return t===fo?"down":t===nc?"up":t===rc?"left":t===ic?"right":""}function aT(t,n){var e=t.element;if(e.style){var r;un(t.options.cssProps,function(s,a){r=Lh(e.style,a),n?(t.oldCssProps[r]=e.style[r],e.style[r]=s):e.style[r]=t.oldCssProps[r]||""}),n||(t.oldCssProps={})}}function pj(t,n){var e=document.createEvent("Event");e.initEvent(t,!0,!0),e.gesture=n,n.target.dispatchEvent(e)}function bj(t,n){var e=Eu(t.touches),r=Eu(t.changedTouches);return n&(Et|wr)&&(e=Lg(e.concat(r),"identifier",!0)),[e,r]}function kk(t,n,e){var r="DEPRECATED METHOD: "+n+`
`+e+` AT 
`;return function(){var s=new Error("get-stack-trace"),a=s&&s.stack?s.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=window.console&&(window.console.warn||window.console.log);return o&&o.call(window.console,r,a),t.apply(this,arguments)}}function Sj(t,n,e){var r=n.prototype,s;s=t.prototype=Object.create(r),s.constructor=t,s._super=r,e&&Rs(s,e)}function lT(t,n){return function(){return t.apply(n,arguments)}}function uT(t,n){var e=kt(t);if(co){var r=co(t);n&&(r=oe(r).call(r,function(s){return Eo(t,s).enumerable})),e.push.apply(e,r)}return e}function cT(t){for(var n=1;n<arguments.length;n++){var e,r,s=arguments[n]!=null?arguments[n]:{};n%2?K(e=uT(Object(s),!0)).call(e,function(a){De(t,a,s[a])}):ho?kg(t,ho(s)):K(r=uT(Object(s))).call(r,function(a){Zu(t,a,Eo(s,a))})}return t}function Wg(t,n){var e=typeof yn!="undefined"&&Ai(t)||t["@@iterator"];if(!e){if(pe(t)||(e=_j(t))||n&&t&&typeof t.length=="number"){e&&(t=e);var r=0,s=function(){};return{s,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(c){throw c},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,l;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function _j(t,n){var e;if(t){if(typeof t=="string")return dT(t,n);var r=sr(e=Object.prototype.toString.call(t)).call(e,8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return as(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dT(t,n)}}function dT(t,n){(n==null||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function Pk(t){for(var n,e=arguments.length,r=new Array(e>1?e-1:0),s=1;s<e;s++)r[s-1]=arguments[s];return zg.apply(void 0,rt(n=[{},t]).call(n,r))}function zg(){var t=nh.apply(void 0,arguments);return Ok(t),t}function nh(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];if(n.length<2)return n[0];if(n.length>2){var r;return nh.apply(void 0,rt(r=[zg(n[0],n[1])]).call(r,lt(sr(n).call(n,2))))}var s=n[0],a=n[1],o=Wg(_E(a)),l;try{for(o.s();!(l=o.n()).done;){var u=l.value;Object.prototype.propertyIsEnumerable.call(a,u)&&(a[u]===Yg?delete s[u]:s[u]!==null&&a[u]!==null&&de(s[u])==="object"&&de(a[u])==="object"&&!pe(s[u])&&!pe(a[u])?s[u]=nh(s[u],a[u]):s[u]=Ik(a[u]))}}catch(c){o.e(c)}finally{o.f()}return s}function Ik(t){return pe(t)?He(t).call(t,function(n){return Ik(n)}):de(t)==="object"&&t!==null?nh({},t):t}function Ok(t){for(var n=0,e=kt(t);n<e.length;n++){var r=e[n];t[r]===Yg?delete t[r]:de(t[r])==="object"&&t[r]!==null&&Ok(t[r])}}function Tj(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return xj(n.length?n:[Nr()])}function xj(t){var n=Cj(t),e=ur(n,3),r=e[0],s=e[1],a=e[2],o=1,l=function(){var c=2091639*r+o*23283064365386963e-26;return r=s,s=a,a=c-(o=c|0)};return l.uint32=function(){return l()*4294967296},l.fract53=function(){return l()+(l()*2097152|0)*11102230246251565e-32},l.algorithm="Alea",l.seed=t,l.version="0.9",l}function Cj(){for(var t=Ej(),n=t(" "),e=t(" "),r=t(" "),s=0;s<arguments.length;s++)n-=t(s<0||arguments.length<=s?void 0:arguments[s]),n<0&&(n+=1),e-=t(s<0||arguments.length<=s?void 0:arguments[s]),e<0&&(e+=1),r-=t(s<0||arguments.length<=s?void 0:arguments[s]),r<0&&(r+=1);return[n,e,r]}function Ej(){var t=4022871197;return function(n){for(var e=n.toString(),r=0;r<e.length;r++){t+=e.charCodeAt(r);var s=.02519603282416938*t;t=s>>>0,s-=t,s*=t,t=s>>>0,s-=t,t+=s*4294967296}return(t>>>0)*23283064365386963e-26}}function kj(){var t=function(){};return{on:t,off:t,destroy:t,emit:t,get:function(){return{set:t}}}}function Mi(t){var n=this,e;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(function(){n._dom.overlay.parentNode.removeChild(n._dom.overlay)});var r=Vg(this._dom.overlay);r.on("tap",R(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(function(){r.destroy()});var s=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];K(s).call(s,function(a){r.on(a,function(o){o.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=function(a){Dj(a.target,t)||n.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(function(){document.body.removeEventListener("click",n._onClick)})),this._escListener=function(a){("key"in a?a.key==="Escape":a.keyCode===27)&&n.deactivate()}}function Dj(t,n){for(;t;){if(t===n)return!0;t=t.parentNode}return!1}function vu(t){return t instanceof Number||typeof t=="number"}function Mk(t){if(t)for(;t.hasChildNodes()===!0;){var n=t.firstChild;n&&(Mk(n),t.removeChild(n))}}function Lr(t){return t instanceof String||typeof t=="string"}function $v(t){return de(t)==="object"&&t!==null}function $j(t){if(t instanceof Date)return!0;if(Lr(t)){var n=Pj.exec(t);if(n)return!0;if(!isNaN(Date.parse(t)))return!0}return!1}function Hs(t,n,e,r){var s=!1;r===!0&&(s=n[e]===null&&t[e]!==void 0),s?delete t[e]:t[e]=n[e]}function Fk(t,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;for(var r in t)if(n[r]!==void 0)if(n[r]===null||de(n[r])!=="object")Hs(t,n,r,e);else{var s=t[r],a=n[r];$v(s)&&$v(a)&&Fk(s,a,e)}}function Aj(t,n){if(!pe(t))throw new Error("Array with property names expected as first argument");for(var e=arguments.length,r=new Array(e>2?e-2:0),s=2;s<e;s++)r[s-2]=arguments[s];for(var a=0,o=r;a<o.length;a++)for(var l=o[a],u=0;u<t.length;u++){var c=t[u];l&&Object.prototype.hasOwnProperty.call(l,c)&&(n[c]=l[c])}return n}function Lj(t,n,e){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(pe(e))throw new TypeError("Arrays are not supported by deepExtend");for(var s=0;s<t.length;s++){var a=t[s];if(Object.prototype.hasOwnProperty.call(e,a))if(e[a]&&e[a].constructor===Object)n[a]===void 0&&(n[a]={}),n[a].constructor===Object?Du(n[a],e[a],!1,r):Hs(n,e,a,r);else{if(pe(e[a]))throw new TypeError("Arrays are not supported by deepExtend");Hs(n,e,a,r)}}return n}function Rj(t,n,e){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(pe(e))throw new TypeError("Arrays are not supported by deepExtend");for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&!es(t).call(t,s))if(e[s]&&e[s].constructor===Object)n[s]===void 0&&(n[s]={}),n[s].constructor===Object?Du(n[s],e[s]):Hs(n,e,s,r);else if(pe(e[s])){n[s]=[];for(var a=0;a<e[s].length;a++)n[s].push(e[s][a])}else Hs(n,e,s,r);return n}function Du(t,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s)||e===!0)if(de(n[s])==="object"&&n[s]!==null&&L_(n[s])===Object.prototype)t[s]===void 0?t[s]=Du({},n[s],e):de(t[s])==="object"&&t[s]!==null&&L_(t[s])===Object.prototype?Du(t[s],n[s],e):Hs(t,n,s,r);else if(pe(n[s])){var a;t[s]=sr(a=n[s]).call(a)}else Hs(t,n,s,r);return t}function Bj(t,n){if(t.length!==n.length)return!1;for(var e=0,r=t.length;e<r;e++)if(t[e]!=n[e])return!1;return!0}function hu(t){var n=de(t);return n==="object"?t===null?"null":t instanceof Boolean?"Boolean":t instanceof Number?"Number":t instanceof String?"String":pe(t)?"Array":t instanceof Date?"Date":"Object":n==="number"?"Number":n==="boolean"?"Boolean":n==="string"?"String":n===void 0?"undefined":n}function Pu(t,n){var e;return rt(e=[]).call(e,lt(t),[n])}function $k(t){return sr(t).call(t)}function Gj(t){return t.getBoundingClientRect().left}function Hj(t){return t.getBoundingClientRect().right}function Wj(t){return t.getBoundingClientRect().top}function Yj(t,n){var e=t.className.split(" "),r=n.split(" ");e=rt(e).call(e,oe(r).call(r,function(s){return!es(e).call(e,s)})),t.className=e.join(" ")}function zj(t,n){var e=t.className.split(" "),r=n.split(" ");e=oe(e).call(e,function(s){return!es(r).call(r,s)}),t.className=e.join(" ")}function Vj(t,n){if(pe(t))for(var e=t.length,r=0;r<e;r++)n(t[r],r,t);else for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n(t[s],s,t)}function jj(t,n,e){return t[n]!==e?(t[n]=e,!0):!1}function qj(t){var n=!1;return function(){n||(n=!0,requestAnimationFrame(function(){n=!1,t()}))}}function Xj(t,n,e,r){if(t.addEventListener){var s;r===void 0&&(r=!1),n==="mousewheel"&&es(s=navigator.userAgent).call(s,"Firefox")&&(n="DOMMouseScroll"),t.addEventListener(n,e,r)}else t.attachEvent("on"+n,e)}function Kj(t,n,e,r){if(t.removeEventListener){var s;r===void 0&&(r=!1),n==="mousewheel"&&es(s=navigator.userAgent).call(s,"Firefox")&&(n="DOMMouseScroll"),t.removeEventListener(n,e,r)}else t.detachEvent("on"+n,e)}function Zj(t){t||(t=window.event),t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)}function Qj(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event,n=null;return t&&(t.target?n=t.target:t.srcElement&&(n=t.srcElement)),!(n instanceof Element)||n.nodeType!=null&&n.nodeType==3&&(n=n.parentNode,!(n instanceof Element))?null:n}function Jj(t,n){for(var e=t;e;){if(e===n)return!0;if(e.parentNode)e=e.parentNode;else return!1}return!1}function Bh(t){var n;switch(t.length){case 3:case 4:return n=Oj.exec(t),n?{r:Ar(n[1]+n[1],16),g:Ar(n[2]+n[2],16),b:Ar(n[3]+n[3],16)}:null;case 6:case 7:return n=Ij.exec(t),n?{r:Ar(n[1],16),g:Ar(n[2],16),b:Ar(n[3],16)}:null;default:return null}}function t5(t,n){if(es(t).call(t,"rgba"))return t;if(es(t).call(t,"rgb")){var e=t.substr(Ze(t).call(t,"(")+1).replace(")","").split(",");return"rgba("+e[0]+","+e[1]+","+e[2]+","+n+")"}else{var r=Bh(t);return r==null?t:"rgba("+r.r+","+r.g+","+r.b+","+n+")"}}function Ug(t,n,e){var r;return"#"+sr(r=((1<<24)+(t<<16)+(n<<8)+e).toString(16)).call(r,1)}function r5(t,n){if(Lr(t)){var e=t;if(qg(e)){var r,s=He(r=e.substr(4).substr(0,e.length-5).split(",")).call(r,function(p){return Ar(p)});e=Ug(s[0],s[1],s[2])}if(jg(e)===!0){var a=Nk(e),o={h:a.h,s:a.s*.8,v:Math.min(1,a.v*1.02)},l={h:a.h,s:Math.min(1,a.s*1.25),v:a.v*.8},u=Nv(l.h,l.s,l.v),c=Nv(o.h,o.s,o.v);return{background:e,border:u,highlight:{background:c,border:u},hover:{background:c,border:u}}}else return{background:e,border:e,highlight:{background:e,border:e},hover:{background:e,border:e}}}else if(n){var d={background:t.background||n.background,border:t.border||n.border,highlight:Lr(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||n.highlight.background,border:t.highlight&&t.highlight.border||n.highlight.border},hover:Lr(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||n.hover.border,background:t.hover&&t.hover.background||n.hover.background}};return d}else{var f={background:t.background||void 0,border:t.border||void 0,highlight:Lr(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||void 0,border:t.highlight&&t.highlight.border||void 0},hover:Lr(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||void 0,background:t.hover&&t.hover.background||void 0}};return f}}function no(t,n,e){t=t/255,n=n/255,e=e/255;var r=Math.min(t,Math.min(n,e)),s=Math.max(t,Math.max(n,e));if(r===s)return{h:0,s:0,v:r};var a=t===r?n-e:e===r?t-n:e-t,o=t===r?3:e===r?1:5,l=60*(o-a/(s-r))/360,u=(s-r)/s,c=s;return{h:l,s:u,v:c}}function i5(t,n){var e=ao.split(t.style.cssText),r=ao.split(n),s=cT(cT({},e),r);t.style.cssText=ao.join(s)}function n5(t,n){var e=ao.split(t.style.cssText),r=ao.split(n);for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&delete e[s];t.style.cssText=ao.join(e)}function gu(t,n,e){var r,s,a,o=Math.floor(t*6),l=t*6-o,u=e*(1-n),c=e*(1-l*n),d=e*(1-(1-l)*n);switch(o%6){case 0:r=e,s=d,a=u;break;case 1:r=c,s=e,a=u;break;case 2:r=u,s=e,a=d;break;case 3:r=u,s=c,a=e;break;case 4:r=d,s=u,a=e;break;case 5:r=e,s=u,a=c;break}return{r:Math.floor(r*255),g:Math.floor(s*255),b:Math.floor(a*255)}}function Nv(t,n,e){var r=gu(t,n,e);return Ug(r.r,r.g,r.b)}function Nk(t){var n=Bh(t);if(!n)throw new TypeError("'".concat(t,"' is not a valid color."));return no(n.r,n.g,n.b)}function jg(t){var n=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t);return n}function qg(t){return Mj.test(t)}function Ak(t){return Fj.test(t)}function s5(t,n){if(n!==null&&de(n)==="object"){for(var e=Ju(n),r=0;r<t.length;r++)Object.prototype.hasOwnProperty.call(n,t[r])&&de(n[t[r]])=="object"&&(e[t[r]]=Xg(n[t[r]]));return e}else return null}function Xg(t){if(t===null||de(t)!=="object")return null;if(t instanceof Element)return t;var n=Ju(t);for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&de(t[e])=="object"&&(n[e]=Xg(t[e]));return n}function a5(t,n){for(var e=0;e<t.length;e++){var r=t[e],s=void 0;for(s=e;s>0&&n(r,t[s-1])<0;s--)t[s]=t[s-1];t[s]=r}return t}function o5(t,n,e){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=function(y){return y!=null},a=function(y){return y!==null&&de(y)==="object"},o=function(y){for(var _ in y)if(Object.prototype.hasOwnProperty.call(y,_))return!1;return!0};if(!a(t))throw new Error("Parameter mergeTarget must be an object");if(!a(n))throw new Error("Parameter options must be an object");if(!s(e))throw new Error("Parameter option must have a value");if(!a(r))throw new Error("Parameter globalOptions must be an object");var l=function(y,_,S){a(y[S])||(y[S]={});var x=_[S],D=y[S];for(var E in x)Object.prototype.hasOwnProperty.call(x,E)&&(D[E]=x[E])},u=n[e],c=a(r)&&!o(r),d=c?r[e]:void 0,f=d?d.enabled:void 0;if(u!==void 0){if(typeof u=="boolean"){a(t[e])||(t[e]={}),t[e].enabled=u;return}if(u===null&&!a(t[e]))if(s(d))t[e]=Ju(d);else return;if(a(u)){var p=!0;u.enabled!==void 0?p=u.enabled:f!==void 0&&(p=d.enabled),l(t,n,e),t[e].enabled=p}}}function l5(t,n,e,r){for(var s=1e4,a=0,o=0,l=t.length-1;o<=l&&a<s;){var u=Math.floor((o+l)/2),c=t[u],d=r===void 0?c[e]:c[e][r],f=n(d);if(f==0)return u;f==-1?o=u+1:l=u-1,a++}return-1}function u5(t,n,e,r,s){var a=1e4,o=0,l=0,u=t.length-1,c,d,f,p;for(s=s!=null?s:function(v,y){return v==y?0:v<y?-1:1};l<=u&&o<a;){if(p=Math.floor(.5*(u+l)),c=t[Math.max(0,p-1)][e],d=t[p][e],f=t[Math.min(t.length-1,p+1)][e],s(d,n)==0)return p;if(s(c,n)<0&&s(d,n)>0)return r=="before"?Math.max(0,p-1):p;if(s(d,n)<0&&s(f,n)>0)return r=="before"?p:Math.min(t.length-1,p+1);s(d,n)<0?l=p+1:u=p-1,o++}return-1}function d5(){var t=document.createElement("p");t.style.width="100%",t.style.height="200px";var n=document.createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.visibility="hidden",n.style.width="200px",n.style.height="150px",n.style.overflow="hidden",n.appendChild(t),document.body.appendChild(n);var e=t.offsetWidth;n.style.overflow="scroll";var r=t.offsetWidth;return e==r&&(r=n.clientWidth),document.body.removeChild(n),e-r}function h5(t,n){var e;pe(n)||(n=[n]);var r=Wg(t),s;try{for(r.s();!(s=r.n()).done;){var a=s.value;if(a){e=a[n[0]];for(var o=1;o<n.length;o++)e&&(e=e[n[o]]);if(typeof e!="undefined")break}}}catch(l){r.e(l)}finally{r.f()}return e}function Av(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];if(n.length<1)throw new TypeError("Invalid arguments.");if(n.length===1)return document.createTextNode(n[0]);var r=document.createElement(n[0]);return r.appendChild(Av.apply(void 0,lt(sr(n).call(n,1)))),r}function sn(t){for(var n in t)t.hasOwnProperty(n)&&(t[n].redundant=t[n].used,t[n].used=[])}function $r(t){for(var n in t)if(t.hasOwnProperty(n)&&t[n].redundant){for(var e=0;e<t[n].redundant.length;e++)t[n].redundant[e].parentNode.removeChild(t[n].redundant[e]);t[n].redundant=[]}}function Bk(t){sn(t),$r(t),sn(t)}function ei(t,n,e){var r;return n.hasOwnProperty(t)?n[t].redundant.length>0?(r=n[t].redundant[0],n[t].redundant.shift()):(r=document.createElementNS("http://www.w3.org/2000/svg",t),e.appendChild(r)):(r=document.createElementNS("http://www.w3.org/2000/svg",t),n[t]={used:[],redundant:[]},e.appendChild(r)),n[t].used.push(r),r}function zd(t,n,e,r){var s;return n.hasOwnProperty(t)?n[t].redundant.length>0?(s=n[t].redundant[0],n[t].redundant.shift()):(s=document.createElement(t),r!==void 0?e.insertBefore(s,r):e.appendChild(s)):(s=document.createElement(t),n[t]={used:[],redundant:[]},r!==void 0?e.insertBefore(s,r):e.appendChild(s)),n[t].used.push(s),s}function Ws(t,n,e,r,s,a){var o;if(e.style=="circle"?(o=ei("circle",r,s),o.setAttributeNS(null,"cx",t),o.setAttributeNS(null,"cy",n),o.setAttributeNS(null,"r",.5*e.size)):(o=ei("rect",r,s),o.setAttributeNS(null,"x",t-.5*e.size),o.setAttributeNS(null,"y",n-.5*e.size),o.setAttributeNS(null,"width",e.size),o.setAttributeNS(null,"height",e.size)),e.styles!==void 0&&o.setAttributeNS(null,"style",e.styles),o.setAttributeNS(null,"class",e.className+" vis-point"),a){var l=ei("text",r,s);a.xOffset&&(t=t+a.xOffset),a.yOffset&&(n=n+a.yOffset),a.content&&(l.textContent=a.content),a.className&&l.setAttributeNS(null,"class",a.className+" vis-label"),l.setAttributeNS(null,"x",t),l.setAttributeNS(null,"y",n)}return o}function sh(t,n,e,r,s,a,o,l){if(r!=0){r<0&&(r*=-1,n-=r);var u=ei("rect",a,o);u.setAttributeNS(null,"x",t-.5*e),u.setAttributeNS(null,"y",n),u.setAttributeNS(null,"width",e),u.setAttributeNS(null,"height",r),u.setAttributeNS(null,"class",s),l&&u.setAttributeNS(null,"style",l)}}function Gk(){try{return navigator?navigator.languages&&navigator.languages.length?navigator.languages:navigator.userLanguage||navigator.language||navigator.browserLanguage||"en":"en"}catch(t){return"en"}}function Ke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Bv(t,n){var e;return Bv=Rv?jk(e=Rv).call(e):function(s,a){return s.__proto__=a,s},Bv(t,n)}function fr(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=z5(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),$h(t,"prototype",{writable:!1}),n&&Bv(t,n)}function xr(t,n){if(n&&(de(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ke(t)}function We(t){var n;return We=Rv?jk(n=vT).call(n):function(r){return r.__proto__||vT(r)},We(t)}function hK(){if(!ux)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ux(dK)}function WD(t,n){var e=n||0,r=HD;return[r[t[e++]],r[t[e++]],r[t[e++]],r[t[e++]],"-",r[t[e++]],r[t[e++]],"-",r[t[e++]],r[t[e++]],"-",r[t[e++]],r[t[e++]],"-",r[t[e++]],r[t[e++]],r[t[e++]],r[t[e++]],r[t[e++]],r[t[e++]]].join("")}function fK(t){var n=[];return t.replace(/[a-fA-F0-9]{2}/g,function(e){n.push(parseInt(e,16))}),n}function pK(t){t=unescape(encodeURIComponent(t));for(var n=new Array(t.length),e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n}function YD(t,n,e){var r=function(a,o,l,u){var c=l&&u||0;if(typeof a=="string"&&(a=pK(a)),typeof o=="string"&&(o=fK(o)),!Array.isArray(a))throw TypeError("value must be an array of bytes");if(!Array.isArray(o)||o.length!==16)throw TypeError("namespace must be uuid string or an Array of 16 byte values");var d=e(o.concat(a));if(d[6]=d[6]&15|n,d[8]=d[8]&63|128,l)for(var f=0;f<16;++f)l[c+f]=d[f];return l||WD(d)};try{r.name=t}catch(s){}return r.DNS=mK,r.URL=vK,r}function gK(t){if(typeof t=="string"){var n=unescape(encodeURIComponent(t));t=new Array(n.length);for(var e=0;e<n.length;e++)t[e]=n.charCodeAt(e)}return yK(bK(wK(t),t.length*8))}function yK(t){var n,e,r=[],s=t.length*32,a="0123456789abcdef",o;for(n=0;n<s;n+=8)e=t[n>>5]>>>n%32&255,o=parseInt(a.charAt(e>>>4&15)+a.charAt(e&15),16),r.push(o);return r}function bK(t,n){t[n>>5]|=128<<n%32,t[(n+64>>>9<<4)+14]=n;var e,r,s,a,o,l=1732584193,u=-271733879,c=-1732584194,d=271733878;for(e=0;e<t.length;e+=16)r=l,s=u,a=c,o=d,l=Qt(l,u,c,d,t[e],7,-680876936),d=Qt(d,l,u,c,t[e+1],12,-389564586),c=Qt(c,d,l,u,t[e+2],17,606105819),u=Qt(u,c,d,l,t[e+3],22,-1044525330),l=Qt(l,u,c,d,t[e+4],7,-176418897),d=Qt(d,l,u,c,t[e+5],12,1200080426),c=Qt(c,d,l,u,t[e+6],17,-1473231341),u=Qt(u,c,d,l,t[e+7],22,-45705983),l=Qt(l,u,c,d,t[e+8],7,1770035416),d=Qt(d,l,u,c,t[e+9],12,-1958414417),c=Qt(c,d,l,u,t[e+10],17,-42063),u=Qt(u,c,d,l,t[e+11],22,-1990404162),l=Qt(l,u,c,d,t[e+12],7,1804603682),d=Qt(d,l,u,c,t[e+13],12,-40341101),c=Qt(c,d,l,u,t[e+14],17,-1502002290),u=Qt(u,c,d,l,t[e+15],22,1236535329),l=Jt(l,u,c,d,t[e+1],5,-165796510),d=Jt(d,l,u,c,t[e+6],9,-1069501632),c=Jt(c,d,l,u,t[e+11],14,643717713),u=Jt(u,c,d,l,t[e],20,-373897302),l=Jt(l,u,c,d,t[e+5],5,-701558691),d=Jt(d,l,u,c,t[e+10],9,38016083),c=Jt(c,d,l,u,t[e+15],14,-660478335),u=Jt(u,c,d,l,t[e+4],20,-405537848),l=Jt(l,u,c,d,t[e+9],5,568446438),d=Jt(d,l,u,c,t[e+14],9,-1019803690),c=Jt(c,d,l,u,t[e+3],14,-187363961),u=Jt(u,c,d,l,t[e+8],20,1163531501),l=Jt(l,u,c,d,t[e+13],5,-1444681467),d=Jt(d,l,u,c,t[e+2],9,-51403784),c=Jt(c,d,l,u,t[e+7],14,1735328473),u=Jt(u,c,d,l,t[e+12],20,-1926607734),l=er(l,u,c,d,t[e+5],4,-378558),d=er(d,l,u,c,t[e+8],11,-2022574463),c=er(c,d,l,u,t[e+11],16,1839030562),u=er(u,c,d,l,t[e+14],23,-35309556),l=er(l,u,c,d,t[e+1],4,-1530992060),d=er(d,l,u,c,t[e+4],11,1272893353),c=er(c,d,l,u,t[e+7],16,-155497632),u=er(u,c,d,l,t[e+10],23,-1094730640),l=er(l,u,c,d,t[e+13],4,681279174),d=er(d,l,u,c,t[e],11,-358537222),c=er(c,d,l,u,t[e+3],16,-722521979),u=er(u,c,d,l,t[e+6],23,76029189),l=er(l,u,c,d,t[e+9],4,-640364487),d=er(d,l,u,c,t[e+12],11,-421815835),c=er(c,d,l,u,t[e+15],16,530742520),u=er(u,c,d,l,t[e+2],23,-995338651),l=tr(l,u,c,d,t[e],6,-198630844),d=tr(d,l,u,c,t[e+7],10,1126891415),c=tr(c,d,l,u,t[e+14],15,-1416354905),u=tr(u,c,d,l,t[e+5],21,-57434055),l=tr(l,u,c,d,t[e+12],6,1700485571),d=tr(d,l,u,c,t[e+3],10,-1894986606),c=tr(c,d,l,u,t[e+10],15,-1051523),u=tr(u,c,d,l,t[e+1],21,-2054922799),l=tr(l,u,c,d,t[e+8],6,1873313359),d=tr(d,l,u,c,t[e+15],10,-30611744),c=tr(c,d,l,u,t[e+6],15,-1560198380),u=tr(u,c,d,l,t[e+13],21,1309151649),l=tr(l,u,c,d,t[e+4],6,-145523070),d=tr(d,l,u,c,t[e+11],10,-1120210379),c=tr(c,d,l,u,t[e+2],15,718787259),u=tr(u,c,d,l,t[e+9],21,-343485551),l=Zn(l,r),u=Zn(u,s),c=Zn(c,a),d=Zn(d,o);return[l,u,c,d]}function wK(t){var n,e=[];for(e[(t.length>>2)-1]=void 0,n=0;n<e.length;n+=1)e[n]=0;var r=t.length*8;for(n=0;n<r;n+=8)e[n>>5]|=(t[n/8]&255)<<n%32;return e}function Zn(t,n){var e=(t&65535)+(n&65535),r=(t>>16)+(n>>16)+(e>>16);return r<<16|e&65535}function SK(t,n){return t<<n|t>>>32-n}function Vh(t,n,e,r,s,a){return Zn(SK(Zn(Zn(n,t),Zn(r,a)),s),e)}function Qt(t,n,e,r,s,a,o){return Vh(n&e|~n&r,t,n,s,a,o)}function Jt(t,n,e,r,s,a,o){return Vh(n&r|e&~r,t,n,s,a,o)}function er(t,n,e,r,s,a,o){return Vh(n^e^r,t,n,s,a,o)}function tr(t,n,e,r,s,a,o){return Vh(e^(n|~r),t,n,s,a,o)}function Ns(t,n,e){var r=n&&e||0;typeof t=="string"&&(n=t==="binary"?new Array(16):null,t=null),t=t||{};var s=t.random||(t.rng||hK)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,n)for(var a=0;a<16;++a)n[r+a]=s[a];return n||WD(s)}function _K(t,n,e,r){switch(t){case 0:return n&e^~n&r;case 1:return n^e^r;case 2:return n&e^n&r^e&r;case 3:return n^e^r}}function rv(t,n){return t<<n|t>>>32-n}function TK(t){var n=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var r=unescape(encodeURIComponent(t));t=new Array(r.length);for(var s=0;s<r.length;s++)t[s]=r.charCodeAt(s)}t.push(128);for(var a=t.length/4+2,o=Math.ceil(a/16),l=new Array(o),s=0;s<o;s++){l[s]=new Array(16);for(var u=0;u<16;u++)l[s][u]=t[s*64+u*4]<<24|t[s*64+u*4+1]<<16|t[s*64+u*4+2]<<8|t[s*64+u*4+3]}l[o-1][14]=(t.length-1)*8/Math.pow(2,32),l[o-1][14]=Math.floor(l[o-1][14]),l[o-1][15]=(t.length-1)*8&4294967295;for(var s=0;s<o;s++){for(var c=new Array(80),d=0;d<16;d++)c[d]=l[s][d];for(var d=16;d<80;d++)c[d]=rv(c[d-3]^c[d-8]^c[d-14]^c[d-16],1);for(var f=e[0],p=e[1],v=e[2],y=e[3],_=e[4],d=0;d<80;d++){var S=Math.floor(d/20),x=rv(f,5)+_K(S,p,v,y)+_+n[S]+c[d]>>>0;_=y,y=v,v=rv(p,30)>>>0,p=f,f=x}e[0]=e[0]+f>>>0,e[1]=e[1]+p>>>0,e[2]=e[2]+v>>>0,e[3]=e[3]+y>>>0,e[4]=e[4]+_>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}function cx(t,n){var e=kt(t);if(co){var r=co(t);n&&(r=oe(r).call(r,function(s){return Eo(t,s).enumerable})),e.push.apply(e,r)}return e}function dx(t){for(var n=1;n<arguments.length;n++){var e,r,s=arguments[n]!=null?arguments[n]:{};n%2?K(e=cx(Object(s),!0)).call(e,function(a){De(t,a,s[a])}):ho?kg(t,ho(s)):K(r=cx(Object(s))).call(r,function(a){Zu(t,a,Eo(s,a))})}return t}function VD(t){var n=xK();return function(){var r=We(t),s;if(n){var a=We(this).constructor;s=ne(r,arguments,a)}else s=r.apply(this,arguments);return xr(this,s)}}function xK(){if(typeof Reflect=="undefined"||!ne||ne.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(ne(Boolean,[],function(){})),!0}catch(t){return!1}}function gr(t,n){var e=typeof yn!="undefined"&&Ai(t)||t["@@iterator"];if(!e){if(pe(t)||(e=CK(t))||n&&t&&typeof t.length=="number"){e&&(t=e);var r=0,s=function(){};return{s,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(c){throw c},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,l;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function CK(t,n){var e;if(t){if(typeof t=="string")return hx(t,n);var r=sr(e=Object.prototype.toString.call(t)).call(e,8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return as(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hx(t,n)}}function hx(t,n){(n==null||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function EK(t){return new DK(t)}function qv(t){return typeof t=="string"||typeof t=="number"}function PK(t,n){return t[n]==null&&(t[n]=Ns()),t}function IK(t,n){return de(n)==="object"&&n!==null&&t===n.idProp&&typeof n.add=="function"&&typeof n.clear=="function"&&typeof n.distinct=="function"&&typeof K(n)=="function"&&typeof n.get=="function"&&typeof n.getDataSet=="function"&&typeof n.getIds=="function"&&typeof n.length=="number"&&typeof He(n)=="function"&&typeof n.max=="function"&&typeof n.min=="function"&&typeof n.off=="function"&&typeof n.on=="function"&&typeof n.remove=="function"&&typeof n.setOptions=="function"&&typeof n.stream=="function"&&typeof n.update=="function"&&typeof n.updateOnly=="function"}function OK(t,n){return de(n)==="object"&&n!==null&&t===n.idProp&&typeof K(n)=="function"&&typeof n.get=="function"&&typeof n.getDataSet=="function"&&typeof n.getIds=="function"&&typeof n.length=="number"&&typeof He(n)=="function"&&typeof n.off=="function"&&typeof n.on=="function"&&typeof n.stream=="function"&&IK(t,n.getDataSet())}function XD(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function MK(t,n,e){}function FK(t,n,e){}function NK(t,n){return $K.test(n)?"":n}function LK(t,n){t=cu.trimRight(t),t[t.length-1]!==";"&&(t+=";");var e=t.length,r=!1,s=0,a=0,o="";function l(){if(!r){var d=cu.trim(t.slice(s,a)),f=d.indexOf(":");if(f!==-1){var p=cu.trim(d.slice(0,f)),v=cu.trim(d.slice(f+1));if(p){var y=n(s,o.length,p,v,d);y&&(o+=y+"; ")}}}s=a+1}for(;a<e;a++){var u=t[a];if(u==="/"&&t[a+1]==="*"){var c=t.indexOf("*/",a+2);if(c===-1)break;a=c+1,s=a+1,r=!1}else u==="("?r=!0:u===")"?r=!1:u===";"?r||l():u===`
`&&l()}return cu.trim(o)}function px(t){return t==null}function GK(t){var n={};for(var e in t)n[e]=t[e];return n}function KD(t){t=GK(t||{}),t.whiteList=t.whiteList||Ad.whiteList,t.onAttr=t.onAttr||Ad.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||Ad.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||Ad.safeAttrValue,this.options=t}function ZD(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}function zK(t,n,e){}function VK(t,n,e){}function UK(t,n,e){}function jK(t,n,e){}function JD(t){return t.replace(XK,"&lt;").replace(KK,"&gt;")}function qK(t,n,e,r){if(e=s1(e),n==="href"||n==="src"){if(e=ch.trim(e),e==="#")return"#";if(!(e.substr(0,7)==="http://"||e.substr(0,8)==="https://"||e.substr(0,7)==="mailto:"||e.substr(0,4)==="tel:"||e.substr(0,11)==="data:image/"||e.substr(0,6)==="ftp://"||e.substr(0,2)==="./"||e.substr(0,3)==="../"||e[0]==="#"||e[0]==="/"))return""}else if(n==="background"){if(Ld.lastIndex=0,Ld.test(e))return""}else if(n==="style"){if(mx.lastIndex=0,mx.test(e)||(vx.lastIndex=0,vx.test(e)&&(Ld.lastIndex=0,Ld.test(e))))return"";r!==!1&&(r=r||QD,e=r.process(e))}return e=a1(e),e}function e1(t){return t.replace(ZK,"&quot;")}function t1(t){return t.replace(QK,'"')}function r1(t){return t.replace(JK,function(e,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function i1(t){return t.replace(eZ,":").replace(tZ," ")}function n1(t){for(var n="",e=0,r=t.length;e<r;e++)n+=t.charCodeAt(e)<32?" ":t.charAt(e);return ch.trim(n)}function s1(t){return t=t1(t),t=r1(t),t=i1(t),t=n1(t),t}function a1(t){return t=e1(t),t=JD(t),t}function rZ(){return""}function iZ(t,n){typeof n!="function"&&(n=function(){});var e=!Array.isArray(t);function r(o){return e?!0:ch.indexOf(t,o)!==-1}var s=[],a=!1;return{onIgnoreTag:function(o,l,u){if(r(o))if(u.isClosing){var c="[/removed]",d=u.position+c.length;return s.push([a!==!1?a:u.position,d]),a=!1,c}else return a||(a=u.position),"[removed]";else return n(o,l,u)},remove:function(o){var l="",u=0;return ch.forEach(s,function(c){l+=o.slice(u,c[0]),u=c[1]}),l+=o.slice(u),l}}}function nZ(t){for(var n="",e=0;e<t.length;){var r=t.indexOf("<!--",e);if(r===-1){n+=t.slice(e);break}n+=t.slice(e,r);var s=t.indexOf("-->",r);if(s===-1)break;e=s+3}return n}function sZ(t){var n=t.split("");return n=n.filter(function(e){var r=e.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),n.join("")}function aZ(t){var n=Un.spaceIndex(t),e;return n===-1?e=t.slice(1,-1):e=t.slice(1,n+1),e=Un.trim(e).toLowerCase(),e.slice(0,1)==="/"&&(e=e.slice(1)),e.slice(-1)==="/"&&(e=e.slice(0,-1)),e}function oZ(t){return t.slice(0,2)==="</"}function lZ(t,n,e){var r="",s=0,a=!1,o=!1,l=0,u=t.length,c="",d="";e:for(l=0;l<u;l++){var f=t.charAt(l);if(a===!1){if(f==="<"){a=l;continue}}else if(o===!1){if(f==="<"){r+=e(t.slice(s,l)),a=l,s=l;continue}if(f===">"){r+=e(t.slice(s,a)),d=t.slice(a,l+1),c=aZ(d),r+=n(a,r.length,c,d,oZ(d)),s=l+1,a=!1;continue}if(f==='"'||f==="'")for(var p=1,v=t.charAt(l-p);v.trim()===""||v==="=";){if(v==="="){o=f;continue e}v=t.charAt(l-++p)}}else if(f===o){o=!1;continue}}return s<t.length&&(r+=e(t.substr(s))),r}function cZ(t,n){var e=0,r=0,s=[],a=!1,o=t.length;function l(p,v){if(p=Un.trim(p),p=p.replace(uZ,"").toLowerCase(),!(p.length<1)){var y=n(p,v||"");y&&s.push(y)}}for(var u=0;u<o;u++){var c=t.charAt(u),d,f;if(a===!1&&c==="="){a=t.slice(e,u),e=u+1,r=t.charAt(e)==='"'||t.charAt(e)==="'"?e:hZ(t,u+1);continue}if(a!==!1&&u===r){if(f=t.indexOf(c,u+1),f===-1)break;d=Un.trim(t.slice(r+1,f)),l(a,d),a=!1,u=f,e=u+1;continue}if(/\s|\n|\t/.test(c))if(t=t.replace(/\s|\n|\t/g," "),a===!1)if(f=dZ(t,u),f===-1){d=Un.trim(t.slice(e,u)),l(d),a=!1,e=u+1;continue}else{u=f-1;continue}else if(f=fZ(t,u-1),f===-1){d=Un.trim(t.slice(e,u)),d=gx(d),l(a,d),a=!1,e=u+1;continue}else continue}return e<t.length&&(a===!1?l(t.slice(e)):l(a,gx(Un.trim(t.slice(e))))),Un.trim(s.join(" "))}function dZ(t,n){for(;n<t.length;n++){var e=t[n];if(e!==" ")return e==="="?n:-1}}function hZ(t,n){for(;n<t.length;n++){var e=t[n];if(e!==" ")return e==="'"||e==='"'?n:-1}}function fZ(t,n){for(;n>0;n--){var e=t[n];if(e!==" ")return e==="="?n:-1}}function pZ(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function gx(t){return pZ(t)?t.substr(1,t.length-2):t}function Rd(t){return t==null}function yZ(t){var n=Xd.spaceIndex(t);if(n===-1)return{html:"",closing:t[t.length-2]==="/"};t=Xd.trim(t.slice(n+1,-1));var e=t[t.length-1]==="/";return e&&(t=Xd.trim(t.slice(0,-1))),{html:t,closing:e}}function bZ(t){var n={};for(var e in t)n[e]=t[e];return n}function wZ(t){var n={};for(var e in t)Array.isArray(t[e])?n[e.toLowerCase()]=t[e].map(function(r){return r.toLowerCase()}):n[e.toLowerCase()]=t[e];return n}function l1(t){t=bZ(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=pi.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=wZ(t.whiteList||t.allowList):t.whiteList=pi.whiteList,t.onTag=t.onTag||pi.onTag,t.onTagAttr=t.onTagAttr||pi.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||pi.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||pi.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||pi.safeAttrValue,t.escapeHtml=t.escapeHtml||pi.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new mZ(t.css))}function yx(t,n){var e=kt(t);if(co){var r=co(t);n&&(r=oe(r).call(r,function(s){return Eo(t,s).enumerable})),e.push.apply(e,r)}return e}function bx(t){for(var n=1;n<arguments.length;n++){var e,r,s=arguments[n]!=null?arguments[n]:{};n%2?K(e=yx(Object(s),!0)).call(e,function(a){De(t,a,s[a])}):ho?kg(t,ho(s)):K(r=yx(Object(s))).call(r,function(a){Zu(t,a,Eo(s,a))})}return t}function mn(t){var n;if(!t)return!1;var e=(n=t.idProp)!==null&&n!==void 0?n:t._idProp;return e?OK(e,t):!1}function py(t,n){var e;if(t!==void 0){if(t===null)return null;if(!n)return t;if(typeof n!="string"&&!(n instanceof String))throw new Error("Type must be a string");switch(n){case"boolean":case"Boolean":return Boolean(t);case"number":case"Number":return Lr(t)&&!isNaN(Date.parse(t))?fi(t).valueOf():Number(t.valueOf());case"string":case"String":return String(t);case"Date":try{return py(t,"Moment").toDate()}catch(s){throw s instanceof TypeError?new TypeError("Cannot convert object of type "+hu(t)+" to type "+n):s}case"Moment":if(vu(t))return fi(t);if(t instanceof Date)return fi(t.valueOf());if(fi.isMoment(t))return fi(t);if(Lr(t))return e=iv.exec(t),e?fi(Number(e[1])):(e=TZ.exec(t),fi(e?Number(t):t));throw new TypeError("Cannot convert object of type "+hu(t)+" to type "+n);case"ISODate":if(vu(t))return new Date(t);if(t instanceof Date)return t.toISOString();if(fi.isMoment(t))return t.toDate().toISOString();if(Lr(t))return e=iv.exec(t),e?new Date(Number(e[1])).toISOString():fi(t).format();throw new Error("Cannot convert object of type "+hu(t)+" to type ISODate");case"ASPDate":if(vu(t))return"/Date("+t+")/";if(t instanceof Date||fi.isMoment(t))return"/Date("+t.valueOf()+")/";if(Lr(t)){e=iv.exec(t);var r;return e?r=new Date(Number(e[1])).valueOf():r=new Date(t).valueOf(),"/Date("+r+")/"}else throw new Error("Cannot convert object of type "+hu(t)+" to type ASPDate");default:throw new Error("Unknown type ".concat(n))}}}function go(t){var n,e,r,s,a,o,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{start:"Date",end:"Date"},u=t._idProp,c=new zs({fieldId:u}),d=He(n=EK(t)).call(n,function(f){var p;return zh(p=kt(f)).call(p,function(v,y){return v[y]=py(f[y],l[y]),v},{})}).to(c);return d.all().start(),{add:function(){var p;return(p=t.getDataSet()).add.apply(p,arguments)},remove:function(){var p;return(p=t.getDataSet()).remove.apply(p,arguments)},update:function(){var p;return(p=t.getDataSet()).update.apply(p,arguments)},updateOnly:function(){var p;return(p=t.getDataSet()).updateOnly.apply(p,arguments)},clear:function(){var p;return(p=t.getDataSet()).clear.apply(p,arguments)},forEach:R(e=K(c)).call(e,c),get:R(r=c.get).call(r,c),getIds:R(s=c.getIds).call(s,c),off:R(a=c.off).call(a,c),on:R(o=c.on).call(o,c),get length(){return c.length},idProp:u,type:l,rawDS:t,coercedDS:c,dispose:function(){return d.stop()}}}function jh(t,n,e){if(e&&!pe(e))return jh(t,n,[e]);if(n.hiddenDates=[],e&&pe(e)==!0){for(var r,s=0;s<e.length;s++)if(eo(e[s])===void 0){var a={};a.start=t(e[s].start).toDate().valueOf(),a.end=t(e[s].end).toDate().valueOf(),n.hiddenDates.push(a)}bt(r=n.hiddenDates).call(r,function(o,l){return o.start-l.start})}}function Fu(t,n,e){if(e&&!pe(e))return Fu(t,n,[e]);if(e&&n.domProps.centerContainer.width!==void 0){jh(t,n,e);for(var r=t(n.range.start),s=t(n.range.end),a=n.range.end-n.range.start,o=a/n.domProps.centerContainer.width,l=0;l<e.length;l++)if(eo(e[l])!==void 0){var u=t(e[l].start),c=t(e[l].end);if(u._d=="Invalid Date")throw new Error("Supplied start date is not valid: ".concat(e[l].start));if(c._d=="Invalid Date")throw new Error("Supplied end date is not valid: ".concat(e[l].end));var d=c-u;if(d>=4*o){var f=0,p=s.clone();switch(eo(e[l])){case"daily":u.day()!=c.day()&&(f=1),u.dayOfYear(r.dayOfYear()),u.year(r.year()),u.subtract(7,"days"),c.dayOfYear(r.dayOfYear()),c.year(r.year()),c.subtract(7-f,"days"),p.add(1,"weeks");break;case"weekly":{var v=c.diff(u,"days"),y=u.day();u.date(r.date()),u.month(r.month()),u.year(r.year()),c=u.clone(),u.day(y),c.day(y),c.add(v,"days"),u.subtract(1,"weeks"),c.subtract(1,"weeks"),p.add(1,"weeks");break}case"monthly":u.month()!=c.month()&&(f=1),u.month(r.month()),u.year(r.year()),u.subtract(1,"months"),c.month(r.month()),c.year(r.year()),c.subtract(1,"months"),c.add(f,"months"),p.add(1,"months");break;case"yearly":u.year()!=c.year()&&(f=1),u.year(r.year()),u.subtract(1,"years"),c.year(r.year()),c.subtract(1,"years"),c.add(f,"years"),p.add(1,"years");break;default:console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",eo(e[l]));return}for(;u<p;)switch(n.hiddenDates.push({start:u.valueOf(),end:c.valueOf()}),eo(e[l])){case"daily":u.add(1,"days"),c.add(1,"days");break;case"weekly":u.add(1,"weeks"),c.add(1,"weeks");break;case"monthly":u.add(1,"months"),c.add(1,"months");break;case"yearly":u.add(1,"y"),c.add(1,"y");break;default:console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",eo(e[l]));return}n.hiddenDates.push({start:u.valueOf(),end:c.valueOf()})}}f1(n);var _=Nu(n.range.start,n.hiddenDates),S=Nu(n.range.end,n.hiddenDates),x=n.range.start,D=n.range.end;_.hidden==!0&&(x=n.range.startToFront==!0?_.startDate-1:_.endDate+1),S.hidden==!0&&(D=n.range.endToFront==!0?S.startDate-1:S.endDate+1),(_.hidden==!0||S.hidden==!0)&&n.range._applyRange(x,D)}}function f1(t){for(var n,e=t.hiddenDates,r=[],s=0;s<e.length;s++)for(var a=0;a<e.length;a++)s!=a&&e[a].remove!=!0&&e[s].remove!=!0&&(e[a].start>=e[s].start&&e[a].end<=e[s].end?e[a].remove=!0:e[a].start>=e[s].start&&e[a].start<=e[s].end?(e[s].end=e[a].end,e[a].remove=!0):e[a].end>=e[s].start&&e[a].end<=e[s].end&&(e[s].start=e[a].start,e[a].remove=!0));for(s=0;s<e.length;s++)e[s].remove!==!0&&r.push(e[s]);t.hiddenDates=r,bt(n=t.hiddenDates).call(n,function(o,l){return o.start-l.start})}function eQ(t){for(var n=0;n<t.length;n++)console.log(n,new Date(t[n].start),new Date(t[n].end),t[n].start,t[n].end,t[n].remove)}function p1(t,n,e){for(var r=!1,s=n.current.valueOf(),a=0;a<n.hiddenDates.length;a++){var o=n.hiddenDates[a].start,l=n.hiddenDates[a].end;if(s>=o&&s<l){r=!0;break}}if(r==!0&&s<n._end.valueOf()&&s!=e){var u=t(e),c=t(l);u.year()!=c.year()?n.switchedYear=!0:u.month()!=c.month()?n.switchedMonth=!0:u.dayOfYear()!=c.dayOfYear()&&(n.switchedDay=!0),n.current=c}}function Zv(t,n,e){var r;if(t.body.hiddenDates.length==0)return r=t.range.conversion(e),(n.valueOf()-r.offset)*r.scale;var s=Nu(n,t.body.hiddenDates);s.hidden==!0&&(n=s.startDate);var a=lo(t.body.hiddenDates,t.range.start,t.range.end);if(n<t.range.start){r=t.range.conversion(e,a);var o=m1(t.body.hiddenDates,n,r.offset);return n=t.options.moment(n).toDate().valueOf(),n=n+o,-(r.offset-n.valueOf())*r.scale}else if(n>t.range.end){var l={start:t.range.start,end:n};return n=Jv(t.options.moment,t.body.hiddenDates,l,n),r=t.range.conversion(e,a),(n.valueOf()-r.offset)*r.scale}else return n=Jv(t.options.moment,t.body.hiddenDates,t.range,n),r=t.range.conversion(e,a),(n.valueOf()-r.offset)*r.scale}function Qv(t,n,e){if(t.body.hiddenDates.length==0){var r=t.range.conversion(e);return new Date(n/r.scale+r.offset)}else{var s=lo(t.body.hiddenDates,t.range.start,t.range.end),a=t.range.end-t.range.start-s,o=a*n/e,l=v1(t.body.hiddenDates,t.range,o);return new Date(l+o+t.range.start)}}function lo(t,n,e){for(var r=0,s=0;s<t.length;s++){var a=t[s].start,o=t[s].end;a>=n&&o<e&&(r+=o-a)}return r}function m1(t,n,e){for(var r=0,s=0;s<t.length;s++){var a=t[s].start,o=t[s].end;a>=n&&o<=e&&(r+=o-a)}return r}function Jv(t,n,e,r){return r=t(r).toDate().valueOf(),r-=$u(t,n,e,r),r}function $u(t,n,e,r){var s=0;r=t(r).toDate().valueOf();for(var a=0;a<n.length;a++){var o=n[a].start,l=n[a].end;o>=e.start&&l<e.end&&r>=l&&(s+=l-o)}return s}function v1(t,n,e){for(var r=0,s=0,a=n.start,o=0;o<t.length;o++){var l=t[o].start,u=t[o].end;if(l>=n.start&&u<n.end){if(s+=l-a,a=u,s>=e)break;r+=u-l}}return r}function jn(t,n,e,r){var s=Nu(n,t);return s.hidden==!0?e<0?r==!0?s.startDate-(s.endDate-n)-1:s.startDate-1:r==!0?s.endDate+(n-s.startDate)+1:s.endDate+1:n}function Nu(t,n){for(var e=0;e<n.length;e++){var r=n[e].start,s=n[e].end;if(t>=r&&t<s)return{hidden:!0,startDate:r,endDate:s}}return{hidden:!1,startDate:r,endDate:s}}function rQ(t){var n=iQ();return function(){var r=We(t),s;if(n){var a=We(this).constructor;s=ne(r,arguments,a)}else s=r.apply(this,arguments);return xr(this,s)}}function iQ(){if(typeof Reflect=="undefined"||!ne||ne.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(ne(Boolean,[],function(){})),!0}catch(t){return!1}}function Tx(t){if(t!="horizontal"&&t!="vertical")throw new TypeError('Unknown direction "'.concat(t,'". Choose "horizontal" or "vertical".'))}function eg(t,n){var e=n||{preventDefault:!1};if(t.Manager){var r=t,s=function(c,d){var f=Object.create(e);return d&&r.assign(f,d),eg(new r(c,f),f)};return r.assign(s,r),s.Manager=function(c,d){var f=Object.create(e);return d&&r.assign(f,d),eg(new r.Manager(c,f),f)},s}var a=Object.create(t),o=t.element;o.hammer||(o.hammer=[]),o.hammer.push(a),t.on("hammer.input",function(c){(e.preventDefault===!0||e.preventDefault===c.pointerType)&&c.preventDefault(),c.isFirst&&(Bd=c.target)}),a._handlers={},a.on=function(c,d){return l(c).forEach(function(f){var p=a._handlers[f];p||(a._handlers[f]=p=[],t.on(f,u)),p.push(d)}),a},a.off=function(c,d){return l(c).forEach(function(f){var p=a._handlers[f];p&&(p=d?p.filter(function(v){return v!==d}):[],p.length>0?a._handlers[f]=p:(t.off(f,u),delete a._handlers[f]))}),a},a.emit=function(c,d){Bd=d.target,t.emit(c,d)},a.destroy=function(){var c=t.element.hammer,d=c.indexOf(a);d!==-1&&c.splice(d,1),c.length||delete t.element.hammer,a._handlers={},t.destroy()};function l(c){return c.match(/[^ ]+/g)}function u(c){if(c.type!=="hammer.input"){if(c.srcEvent._handled||(c.srcEvent._handled={}),c.srcEvent._handled[c.type])return;c.srcEvent._handled[c.type]=!0}var d=!1;c.stopPropagation=function(){d=!0};var f=c.srcEvent.stopPropagation.bind(c.srcEvent);typeof f=="function"&&(c.srcEvent.stopPropagation=function(){f(),c.stopPropagation()}),c.firstTarget=Bd;for(var p=Bd;p&&!d;){var v=p.hammer;if(v){for(var y,_=0;_<v.length;_++)if(y=v[_]._handlers[c.type],y)for(var S=0;S<y.length&&!d;S++)y[S](c)}p=p.parentNode}}return a}function oQ(){var t=function(){};return{on:t,off:t,destroy:t,emit:t,get:function(e){return{set:t}}}}function y1(t,n){n.inputHandler=function(e){e.isFirst&&n(e)},t.on("hammer.input",n.inputHandler)}function lQ(t,n){return n.inputHandler=function(e){e.isFinal&&n(e)},t.on("hammer.input",n.inputHandler)}function uQ(t){var n="pan-y";return t.getTouchAction=function(){return[n]},t}function pr(t,n){n===void 0&&(n={});var e=n.insertAt;if(!(!t||typeof document=="undefined")){var r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",e==="top"&&r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s),s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}}function dQ(t){var n=hQ();return function(){var r=We(t),s;if(n){var a=We(this).constructor;s=ne(r,arguments,a)}else s=r.apply(this,arguments);return xr(this,s)}}function hQ(){if(typeof Reflect=="undefined"||!ne||ne.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(ne(Boolean,[],function(){})),!0}catch(t){return!1}}function b1(t){var n=t&&t.preventDefault||!1,e=t&&t.container||window,r={},s={keydown:{},keyup:{}},a={},o;for(o=97;o<=122;o++)a[String.fromCharCode(o)]={code:65+(o-97),shift:!1};for(o=65;o<=90;o++)a[String.fromCharCode(o)]={code:o,shift:!0};for(o=0;o<=9;o++)a[""+o]={code:48+o,shift:!1};for(o=1;o<=12;o++)a["F"+o]={code:111+o,shift:!1};for(o=0;o<=9;o++)a["num"+o]={code:96+o,shift:!1};a["num*"]={code:106,shift:!1},a["num+"]={code:107,shift:!1},a["num-"]={code:109,shift:!1},a["num/"]={code:111,shift:!1},a["num."]={code:110,shift:!1},a.left={code:37,shift:!1},a.up={code:38,shift:!1},a.right={code:39,shift:!1},a.down={code:40,shift:!1},a.space={code:32,shift:!1},a.enter={code:13,shift:!1},a.shift={code:16,shift:void 0},a.esc={code:27,shift:!1},a.backspace={code:8,shift:!1},a.tab={code:9,shift:!1},a.ctrl={code:17,shift:!1},a.alt={code:18,shift:!1},a.delete={code:46,shift:!1},a.pageup={code:33,shift:!1},a.pagedown={code:34,shift:!1},a["="]={code:187,shift:!1},a["-"]={code:189,shift:!1},a["]"]={code:221,shift:!1},a["["]={code:219,shift:!1};var l=function(d){c(d,"keydown")},u=function(d){c(d,"keyup")},c=function(d,f){if(s[f][d.keyCode]!==void 0){for(var p=s[f][d.keyCode],v=0;v<p.length;v++)(p[v].shift===void 0||p[v].shift==!0&&d.shiftKey==!0||p[v].shift==!1&&d.shiftKey==!1)&&p[v].fn(d);n==!0&&d.preventDefault()}};return r.bind=function(d,f,p){if(p===void 0&&(p="keydown"),a[d]===void 0)throw new Error("unsupported key: "+d);s[p][a[d].code]===void 0&&(s[p][a[d].code]=[]),s[p][a[d].code].push({fn:f,shift:a[d].shift})},r.bindAll=function(d,f){f===void 0&&(f="keydown");for(var p in a)a.hasOwnProperty(p)&&r.bind(p,d,f)},r.getKey=function(d){for(var f in a)if(a.hasOwnProperty(f)){if(d.shiftKey==!0&&a[f].shift==!0&&d.keyCode==a[f].code)return f;if(d.shiftKey==!1&&a[f].shift==!1&&d.keyCode==a[f].code)return f;if(d.keyCode==a[f].code&&f=="shift")return f}return"unknown key, currently not supported"},r.unbind=function(d,f,p){if(p===void 0&&(p="keydown"),a[d]===void 0)throw new Error("unsupported key: "+d);if(f!==void 0){var v=[],y=s[p][a[d].code];if(y!==void 0)for(var _=0;_<y.length;_++)y[_].fn==f&&y[_].shift==a[d].shift||v.push(s[p][a[d].code][_]);s[p][a[d].code]=v}else s[p][a[d].code]=[]},r.reset=function(){s={keydown:{},keyup:{}}},r.destroy=function(){s={keydown:{},keyup:{}},e.removeEventListener("keydown",l,!0),e.removeEventListener("keyup",u,!0)},e.addEventListener("keydown",l,!0),e.addEventListener("keyup",u,!0),r}function Qr(t){var n,e;this.active=!1,this.dom={container:t},this.dom.overlay=document.createElement("div"),this.dom.overlay.className="vis-overlay",this.dom.container.appendChild(this.dom.overlay),this.hammer=rr(this.dom.overlay),this.hammer.on("tap",R(n=this._onTapOverlay).call(n,this));var r=this,s=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];K(s).call(s,function(a){r.hammer.on(a,function(o){o.stopPropagation()})}),document&&document.body&&(this.onClick=function(a){pQ(a.target,t)||r.deactivate()},document.body.addEventListener("click",this.onClick)),this.keycharm!==void 0&&this.keycharm.destroy(),this.keycharm=b1(),this.escListener=R(e=this.deactivate).call(e,this)}function pQ(t,n){for(;t;){if(t===n)return!0;t=t.parentNode}return!1}function RQ(t){var n=BQ();return function(){var r=We(t),s;if(n){var a=We(this).constructor;s=ne(r,arguments,a)}else s=r.apply(this,arguments);return xr(this,s)}}function BQ(){if(typeof Reflect=="undefined"||!ne||ne.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(ne(Boolean,[],function(){})),!0}catch(t){return!1}}function UQ(t){var n=jQ();return function(){var r=We(t),s;if(n){var a=We(this).constructor;s=ne(r,arguments,a)}else s=r.apply(this,arguments);return xr(this,s)}}function jQ(){if(typeof Reflect=="undefined"||!ne||ne.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(ne(Boolean,[],function(){})),!0}catch(t){return!1}}function pJ(t,n){var e=typeof yn!="undefined"&&Ai(t)||t["@@iterator"];if(!e){if(pe(t)||(e=mJ(t))||n&&t&&typeof t.length=="number"){e&&(t=e);var r=0,s=function(){};return{s,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(c){throw c},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,l;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function mJ(t,n){var e;if(t){if(typeof t=="string")return Dx(t,n);var r=sr(e=Object.prototype.toString.call(t)).call(e,8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return as(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dx(t,n)}}function Dx(t,n){(n==null||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function M1(t){bt(t).call(t,function(n,e){return n.data.start-e.data.start})}function F1(t){bt(t).call(t,function(n,e){var r="end"in n.data?n.data.end:n.data.start,s="end"in e.data?e.data.end:e.data.start;return r-s})}function rg(t,n,e,r){var s=Sy(t,n.item,!1,function(a){return a.stack&&(e||a.top===null)},function(a){return a.stack},function(a){return n.axis},r);return s===null}function $1(t,n,e){var r=Sy(t,n.item,!1,function(s){return s.stack},function(s){return!0},function(s){return s.baseTop});e.height=r-e.top+.5*n.item.vertical}function N1(t,n,e,r){for(var s=0;s<t.length;s++)if(t[s].data.subgroup==null)t[s].top=n.item.vertical;else if(t[s].data.subgroup!==void 0&&r){var a=0;for(var o in e)e.hasOwnProperty(o)&&e[o].visible==!0&&e[o].index<e[t[s].data.subgroup].index&&(a+=e[o].height,e[t[s].data.subgroup].top=a);t[s].top=a+.5*n.item.vertical}r||A1(t,n,e)}function A1(t,n,e){var r;Sy(bt(r=Og(e)).call(r,function(a,o){return a.index>o.index?1:a.index<o.index?-1:0}),{vertical:0},!0,function(a){return!0},function(a){return!0},function(a){return 0});for(var s=0;s<t.length;s++)t[s].data.subgroup!==void 0&&(t[s].top=e[t[s].data.subgroup].top+.5*n.item.vertical)}function ig(t,n,e){var r=!1,s=[];for(var a in e)e[a].hasOwnProperty("index")?s[e[a].index]=a:s.push(a);for(var o=0;o<s.length;o++)if(a=s[o],e.hasOwnProperty(a)){r=r||e[a].stack,e[a].top=0;for(var l in e)e[l].visible&&e[a].index>e[l].index&&(e[a].top+=e[l].height);for(var u=t[a],c=0;c<u.length;c++)u[c].data.subgroup!==void 0&&(u[c].top=e[u[c].data.subgroup].top+.5*n.item.vertical,e[a].stack&&(u[c].baseTop=u[c].top));r&&e[a].stack&&$1(t[a],n,e[a])}}function Sy(t,n,e,r,s,a,o){var l=function(I){return I.start},u=function(I){return I.end};if(!e){var c=!!(t[0]&&t[0].options.rtl);c?l=function(I){return I.right}:l=function(I){return I.left},u=function(I){return l(I)+I.width+n.horizontal}}var d=[],f=[],p=null,v=0,y=pJ(t),_;try{for(y.s();!(_=y.n()).done;){var S=_.value;r(S)?d.push(S):s(S)&&function(){var M=l(S);p!==null&&M<p-Fr&&(v=0),p=M,v=Gd(f,function(I){return l(I)-Fr>M},v),cr(f).call(f,v,0,S),v++}()}}catch(M){y.e(M)}finally{y.f()}p=null;var x=null;v=0;for(var D=0,E=0,P=0,O=function(){var I,H,z=d.shift();z.top=a(z);var U=l(z),N=u(z);p!==null&&U<p-Fr&&(D=0,E=0,v=0,x=null),p=U,D=Gd(f,function(te){return U<u(te)-Fr},D),(x===null||x<N-Fr)&&(E=Gd(f,function(te){return N<l(te)-Fr},Math.max(D,E))),x!==null&&x-Fr>N&&(E=gJ(f,function(te){return N+Fr>=l(te)},D,horizontalOVerlapEndIndex)+1);for(var $=bt(I=oe(H=sr(f).call(f,D,E)).call(H,function(te){return U<u(te)-Fr&&N-Fr>l(te)})).call(I,function(te,ie){return te.top-ie.top}),B=0;B<$.length;B++){var Y=$[B];vJ(z,Y,n)&&(z.top=Y.top+Y.height+n.vertical)}s(z)&&(v=Gd(f,function(te){return l(te)-Fr>U},v),cr(f).call(f,v,0,z),v++);var V=z.top+z.height;if(V>P&&(P=V),o&&o())return{v:null}};d.length>0;){var A=O();if(de(A)==="object")return A.v}return P}function vJ(t,n,e){return t.top-e.vertical+Fr<n.top+n.height&&t.top+t.height+e.vertical-Fr>n.top}function Gd(t,n,e){var r;e||(e=0);var s=fJ(r=sr(t).call(t,e)).call(r,n);return s===-1?t.length:s+e}function gJ(t,n,e,r){for(e||(e=0),r||(r=t.length),i=r-1;i>=e;i--)if(n(t[i]))return i;return e-1}function SJ(t){var n=_J();return function(){var r=We(t),s;if(n){var a=We(this).constructor;s=ne(r,arguments,a)}else s=r.apply(this,arguments);return xr(this,s)}}function _J(){if(typeof Reflect=="undefined"||!ne||ne.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(ne(Boolean,[],function(){})),!0}catch(t){return!1}}function xJ(t,n){var e=typeof yn!="undefined"&&Ai(t)||t["@@iterator"];if(!e){if(pe(t)||(e=CJ(t))||n&&t&&typeof t.length=="number"){e&&(t=e);var r=0,s=function(){};return{s,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(c){throw c},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,l;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function CJ(t,n){var e;if(t){if(typeof t=="string")return Ix(t,n);var r=sr(e=Object.prototype.toString.call(t)).call(e,8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return as(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ix(t,n)}}function Ix(t,n){(n==null||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function EJ(t){var n=kJ();return function(){var r=We(t),s;if(n){var a=We(this).constructor;s=ne(r,arguments,a)}else s=r.apply(this,arguments);return xr(this,s)}}function kJ(){if(typeof Reflect=="undefined"||!ne||ne.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(ne(Boolean,[],function(){})),!0}catch(t){return!1}}function DJ(t){var n=PJ();return function(){var r=We(t),s;if(n){var a=We(this).constructor;s=ne(r,arguments,a)}else s=r.apply(this,arguments);return xr(this,s)}}function PJ(){if(typeof Reflect=="undefined"||!ne||ne.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(ne(Boolean,[],function(){})),!0}catch(t){return!1}}function IJ(t){var n=OJ();return function(){var r=We(t),s;if(n){var a=We(this).constructor;s=ne(r,arguments,a)}else s=r.apply(this,arguments);return xr(this,s)}}function OJ(){if(typeof Reflect=="undefined"||!ne||ne.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(ne(Boolean,[],function(){})),!0}catch(t){return!1}}function MJ(t){var n=FJ();return function(){var r=We(t),s;if(n){var a=We(this).constructor;s=ne(r,arguments,a)}else s=r.apply(this,arguments);return xr(this,s)}}function FJ(){if(typeof Reflect=="undefined"||!ne||ne.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(ne(Boolean,[],function(){})),!0}catch(t){return!1}}function Ox(t,n){var e=typeof yn!="undefined"&&Ai(t)||t["@@iterator"];if(!e){if(pe(t)||(e=qJ(t))||n&&t&&typeof t.length=="number"){e&&(t=e);var r=0,s=function(){};return{s,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(c){throw c},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,l;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function qJ(t,n){var e;if(t){if(typeof t=="string")return Mx(t,n);var r=sr(e=Object.prototype.toString.call(t)).call(e,8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return as(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mx(t,n)}}function Mx(t,n){(n==null||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function XJ(t){var n=KJ();return function(){var r=We(t),s;if(n){var a=We(this).constructor;s=ne(r,arguments,a)}else s=r.apply(this,arguments);return xr(this,s)}}function KJ(){if(typeof Reflect=="undefined"||!ne||ne.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(ne(Boolean,[],function(){})),!0}catch(t){return!1}}function ZJ(t,n){var e=typeof yn!="undefined"&&Ai(t)||t["@@iterator"];if(!e){if(pe(t)||(e=QJ(t))||n&&t&&typeof t.length=="number"){e&&(t=e);var r=0,s=function(){};return{s,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(c){throw c},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,l;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function QJ(t,n){var e;if(t){if(typeof t=="string")return Fx(t,n);var r=sr(e=Object.prototype.toString.call(t)).call(e,8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return as(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fx(t,n)}}function Fx(t,n){(n==null||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function ks(t,n){var e=typeof yn!="undefined"&&Ai(t)||t["@@iterator"];if(!e){if(pe(t)||(e=see(t))||n&&t&&typeof t.length=="number"){e&&(t=e);var r=0,s=function(){};return{s,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(c){throw c},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,l;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function see(t,n){var e;if(t){if(typeof t=="string")return $x(t,n);var r=sr(e=Object.prototype.toString.call(t)).call(e,8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return as(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $x(t,n)}}function $x(t,n){(n==null||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function aee(t){var n=oee();return function(){var r=We(t),s;if(n){var a=We(this).constructor;s=ne(r,arguments,a)}else s=r.apply(this,arguments);return xr(this,s)}}function oee(){if(typeof Reflect=="undefined"||!ne||ne.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(ne(Boolean,[],function(){})),!0}catch(t){return!1}}function pee(t){var n=mee();return function(){var r=We(t),s;if(n){var a=We(this).constructor;s=ne(r,arguments,a)}else s=r.apply(this,arguments);return xr(this,s)}}function mee(){if(typeof Reflect=="undefined"||!ne||ne.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(ne(Boolean,[],function(){})),!0}catch(t){return!1}}function lv(t){return C.convert(t.data.start,"Date").valueOf()}function uv(t){var n=t.data.end!=null?t.data.end:t.data.start;return C.convert(n,"Date").valueOf()}function Rx(t,n){if(!n.parent)return!1;var e=t.options.rtl?t.props.rightContainer.height:t.props.leftContainer.height,r=t.props.center.height,s=n.parent,a=s.top,o=!0,l=t.timeAxis.options.orientation.axis,u=function(){return l=="bottom"?s.height-n.top-n.height:n.top},c=t._getScrollTop()*-1,d=a+u(),f=n.height;return d<c?a+e<=a+u()+f&&(a+=u()-t.itemSet.options.margin.item.vertical):d+f>c+e?a+=u()+f-e+t.itemSet.options.margin.item.vertical:o=!1,a=Math.min(a,r-e),{shouldScroll:o,scrollOffset:a,itemTop:d}}function yee(t,n){var e=typeof yn!="undefined"&&Ai(t)||t["@@iterator"];if(!e){if(pe(t)||(e=bee(t))||n&&t&&typeof t.length=="number"){e&&(t=e);var r=0,s=function(){};return{s,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(c){throw c},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,l;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function bee(t,n){var e;if(t){if(typeof t=="string")return Bx(t,n);var r=sr(e=Object.prototype.toString.call(t)).call(e,8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return as(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Bx(t,n)}}function Bx(t,n){(n==null||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function wee(t){var n=See();return function(){var r=We(t),s;if(n){var a=We(this).constructor;s=ne(r,arguments,a)}else s=r.apply(this,arguments);return xr(this,s)}}function See(){if(typeof Reflect=="undefined"||!ne||ne.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(ne(Boolean,[],function(){})),!0}catch(t){return!1}}function ac(t,n){}function sg(t,n){return n=typeof n=="undefined"?{}:n,{style:n.style||t.options.drawPoints.style,styles:n.styles||t.options.drawPoints.styles,size:n.size||t.options.drawPoints.size,className:n.className||t.className}}function _ee(t,n){var e=void 0;return t.options&&t.options.drawPoints&&t.options.drawPoints.onRender&&typeof t.options.drawPoints.onRender=="function"&&(e=t.options.drawPoints.onRender),n.group.options&&n.group.options.drawPoints&&n.group.options.drawPoints.onRender&&typeof n.group.options.drawPoints.onRender=="function"&&(e=n.group.options.drawPoints.onRender),e}function dr(t,n){}function Ut(t,n){}function wn(t,n,e,r){this.id=n;var s=["sampling","style","sort","yAxisOrientation","barChart","drawPoints","shaded","interpolation","zIndex","excludeFromStacking","excludeFromLegend"];this.options=C.selectiveBridgeObject(s,e),this.usingDefaultStyle=t.className===void 0,this.groupsUsingDefaultStyles=r,this.zeroPosition=0,this.update(t),this.usingDefaultStyle==!0&&(this.groupsUsingDefaultStyles[0]+=1),this.itemsData=[],this.visible=t.visible===void 0?!0:t.visible}function Sr(t,n,e,r){this.body=t,this.defaultOptions={enabled:!1,icons:!0,iconSize:20,iconSpacing:6,left:{visible:!0,position:"top-left"},right:{visible:!0,position:"top-right"}},this.side=e,this.options=C.extend({},this.defaultOptions),this.linegraphOptions=r,this.svgElements={},this.dom={},this.groups={},this.amountOfGroups=0,this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups},this.setOptions(n)}function Ue(t,n){this.id=Ns(),this.body=t,this.defaultOptions={yAxisOrientation:"left",defaultGroup:"default",sort:!0,sampling:!0,stack:!1,graphHeight:"400px",shaded:{enabled:!1,orientation:"bottom"},style:"line",barChart:{width:50,sideBySide:!1,align:"center"},interpolation:{enabled:!0,parametrization:"centripetal",alpha:.5},drawPoints:{enabled:!0,size:6,style:"square"},dataAxis:{},legend:{},groups:{visibility:{}}},this.options=C.extend({},this.defaultOptions),this.dom={},this.props={},this.hammer=null,this.groups={},this.abortedGraphUpdate=!1,this.updateSVGheight=!1,this.updateSVGheightOnResize=!1,this.forceGraphUpdate=!0;var e=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(s,a,o){e._onAdd(a.items)},update:function(s,a,o){e._onUpdate(a.items)},remove:function(s,a,o){e._onRemove(a.items)}},this.groupListeners={add:function(s,a,o){e._onAddGroups(a.items)},update:function(s,a,o){e._onUpdateGroups(a.items)},remove:function(s,a,o){e._onRemoveGroups(a.items)}},this.items={},this.selection=[],this.lastStart=this.body.range.start,this.touchParams={},this.svgElements={},this.setOptions(n),this.groupsUsingDefaultStyles=[0],this.body.emitter.on("rangechanged",function(){e.svg.style.left=C.option.asSize(-e.props.width),e.forceGraphUpdate=!0,e.redraw.call(e)}),this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups}}function Ri(t,n,e,r){var s,a,o,l,u,c,d;if(!(pe(e)||mn(e))&&e instanceof Object){var f=r;r=e,e=f}r&&r.throttleRedraw&&console.warn('Graph2d option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');var p=this;this.defaultOptions={start:null,end:null,autoResize:!0,orientation:{axis:"bottom",item:"bottom"},moment:ir,width:null,height:null,maxHeight:null,minHeight:null},this.options=C.deepExtend({},this.defaultOptions),this._create(t),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:R(s=this.on).call(s,this),off:R(a=this.off).call(a,this),emit:R(o=this.emit).call(o,this)},hiddenDates:[],util:{getScale:function(){return p.timeAxis.step.scale},getStep:function(){return p.timeAxis.step.step},toScreen:R(l=p._toScreen).call(l,p),toGlobalScreen:R(u=p._toGlobalScreen).call(u,p),toTime:R(c=p._toTime).call(c,p),toGlobalTime:R(d=p._toGlobalTime).call(d,p)}},this.range=new my(this.body),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new Lu(this.body),this.components.push(this.timeAxis),this.currentTime=new wy(this.body),this.components.push(this.currentTime),this.linegraph=new Ue(this.body),this.components.push(this.linegraph),this.itemsData=null,this.groupsData=null,this.on("tap",function(v){p.emit("click",p.getEventProperties(v))}),this.on("doubletap",function(v){p.emit("doubleClick",p.getEventProperties(v))}),this.dom.root.oncontextmenu=function(v){p.emit("contextmenu",p.getEventProperties(v))},this.initialFitDone=!1,this.on("changed",function(){if(p.itemsData!=null){if(!p.initialFitDone&&!p.options.rollingMode)if(p.initialFitDone=!0,p.options.start!=null||p.options.end!=null){if(p.options.start==null||p.options.end==null)var v=p.getItemRange();var y=p.options.start!=null?p.options.start:v.min,_=p.options.end!=null?p.options.end:v.max;p.setWindow(y,_,{animation:!1})}else p.fit({animation:!1});!p.initialDrawDone&&(p.initialRangeChangeDone||!p.options.start&&!p.options.end||p.options.rollingMode)&&(p.initialDrawDone=!0,p.dom.root.style.visibility="visible",p.dom.loadingScreen.parentNode.removeChild(p.dom.loadingScreen),p.options.onInitialDrawComplete&&nr(function(){return p.options.onInitialDrawComplete()},0))}}),r&&this.setOptions(r),e&&this.setGroups(e),n&&this.setItems(n),this._redraw()}var ti,zp,fS,Hx,Re,xN,Bu,Wx,Yx,CN,cv,EN,Be,kN,DN,Gu,bd,se,vh,PN,pS,IN,ON,MN,FN,mS,$N,ag,vS,NN,AN,bo,LN,RN,BN,_r,GN,HN,WN,Bt,YN,zN,VN,UN,gh,Ve,Dt,Vp,Up,jN,gS,ri,qN,is,zx,jp,yS,bS,wS,SS,mi,Kd,wo,_S,XN,og,KN,Vx,ZN,QN,TS,JN,xS,Ux,za,Os,CS,eA,vt,tA,rA,jx,lg,qx,iA,nA,Vs,sA,aA,oA,Hd,lA,uA,cA,dA,hA,vn,fA,pA,mA,Ni,ug,vA,gA,yA,bA,ES,wA,kS,SA,_A,TA,dv,xA,cg,CA,EA,kA,DS,DA,PA,Gt,IA,Ht,Tr,OA,PS,hv,MA,dg,FA,$A,NA,Xx,AA,LA,Kx,Zx,RA,BA,GA,Br,HA,wd,Gr,WA,Qe,YA,zA,VA,UA,jA,qA,hg,XA,KA,yh,ZA,QA,JA,eL,wi,tL,fg,rL,qp,Xp,Kp,iL,nL,sL,aL,IS,OS,oL,lL,uL,cL,dL,hL,fL,pL,bh,mL,vL,gL,yL,Sd,MS,bL,Zp,wL,Qp,Jp,em,Us,SL,_L,TL,ns,xL,CL,FS,wh,Hu,EL,Qx,tm,kL,DL,rm,im,PL,IL,$S,fv,OL,Zd,wu,Qd,ML,FL,Yn,NS,nm,AS,Cs,So,$L,Jx,LS,RS,js,qs,Wu,eC,tC,NL,AL,LL,RL,BL,sm,GL,Sh,HL,WL,Si,YL,zL,VL,UL,jL,qL,XL,KL,BS,ZL,QL,JL,Yu,eR,tR,rR,iR,rC,GS,nR,sR,aR,ss,_d,oR,lR,uR,cR,dR,Va,hR,Ua,HS,fR,ue,pv,pR,iC,mR,pg,vR,gR,nC,_h,yR,bR,wR,zu,SR,_R,TR,xR,Hr,CR,ER,kR,WS,mg,DR,am,PR,IR,OR,YS,sC,vg,MR,FR,Vu,$R,NR,AR,LR,RR,BR,GR,aC,HR,WR,zS,YR,zR,VR,UR,VS,US,mv,vv,oC,om,lC,jS,jR,Td,Wd,Xs,qR,uC,XR,KR,ZR,QR,JR,e2,qS,gv,t2,Th,r2,xh,i2,n2,s2,XS,a2,o2,yv,cC,an,lm,um,l2,dC,u2,c2,d2,h2,f2,p2,m2,v2,g2,KS,_o,To,y2,b2,w2,S2,_2,T2,x2,hC,C2,E2,k2,D2,P2,I2,O2,fC,M2,F2,$2,N2,A2,L2,ZS,R2,QS,B2,G2,xd,cm,JS,Cd,e_,H2,gg,W2,Y2,pC,z2,mC,V2,U2,j2,t_,q2,vC,X2,K2,Z2,Q2,J2,eB,tB,gC,rB,iB,yC,nB,sB,aB,bC,oB,wC,yg,lB,uB,nu,SC,Ch,cB,dB,hB,xo,fB,r_,pB,mB,vB,Eh,gB,yB,bB,wB,SB,_B,TB,bg,xB,CB,EB,kB,DB,PB,IB,OB,i_,MB,FB,n_,$B,NB,_C,TC,s_,dm,xC,AB,LB,RB,BB,GB,HB,WB,CC,as,EC,YB,a_,kC,zB,DC,VB,UB,jB,qB,XB,KB,ZB,QB,JB,o_,eG,l_,hm,kd,Ed,tG,rG,iG,nG,sG,aG,Ai,PC,oG,Ks,Uu,lG,uG,cG,wg,dG,u_,hG,fG,pG,mG,IC,vG,gG,OC,yG,MC,bG,kh,wG,ju,Dh,SG,c_,_G,TG,xG,wt,CG,d_,EG,kG,DG,PG,h_,IG,OG,Ph,MG,FG,$G,NG,AG,LG,f_,zn,gn,Co,Sg,RG,BG,qu,GG,uo,Ls,_g,Ct,HG,WG,YG,zG,bv,wv,VG,Ih,Tg,FC,Sv,Su,$C,UG,NC,_v,AC,LC,jG,RC,qG,Tv,Xu,XG,BC,p_,GC,KG,ZG,QG,HC,Oh,yr,Mh,_u,m_,JG,v_,vi,on,Xn,WC,fm,su,YC,qn,zC,eH,VC,dn,Ku,pm,mm,tH,xv,Cv,vm,Fh,xg,rH,UC,jC,qC,Cg,g_,y_,iH,nH,sH,aH,co,XC,KC,oH,lH,uH,ZC,QC,cH,dH,hH,JC,fH,pH,mH,Eo,eE,vH,gH,yH,bH,wH,SH,Eg,_H,TH,xH,CH,EH,kH,DH,PH,IH,OH,ho,tE,rE,MH,FH,b_,$H,iE,NH,AH,LH,kg,nE,sE,RH,BH,w_,GH,aE,HH,WH,oE,Zu,Dg,YH,zH,VH,UH,$h,lE,jH,qH,XH,KH,ZH,uE,QH,JH,eW,tW,cE,Nh,iW,nW,sW,aW,Qu,oW,lW,uW,cW,dW,hW,fW,__,pW,mW,vW,gW,dE,T_,x_,C_,yW,bW,wW,SW,_W,TW,xW,CW,EW,kW,DW,PW,IW,OW,MW,FW,$W,NW,AW,LW,RW,BW,hE,GW,HW,WW,YW,zW,VW,UW,jW,qW,XW,KW,to,Pg,QW,JW,E_,eY,tY,k_,rY,iY,nY,sY,aY,oY,lY,uY,gm,cY,dY,ut,hY,fY,pY,mY,ym,vY,gY,fE,yY,bY,wY,SY,_Y,pE,TY,xY,CY,EY,mE,Ig,DY,PY,IY,gE,OY,MY,FY,$Y,NY,yE,yn,bE,BY,GY,HY,WY,bm,YY,zY,VY,rt,wE,sr,SE,UY,jY,qY,XY,KY,ZY,_E,TE,pe,xE,QY,JY,e3,t3,r3,i3,n3,s3,wm,a3,o3,l3,He,CE,u3,c3,EE,d3,h3,f3,p3,m3,v3,kt,kE,g3,y3,b3,DE,w3,S3,_3,T3,x3,Nr,PE,C3,IE,E3,k3,D3,D_,P3,OE,I3,O3,Sm,M3,ME,F3,P_,$3,N3,A3,L3,_m,R3,B3,FE,R,$E,G3,ko,H3,W3,Y3,z3,V3,I_,U3,j3,q3,X3,K3,Z3,Q3,J3,Tm,ez,NE,K,AE,tz,rz,iz,nz,O_,sz,az,oz,lz,xm,uz,cz,LE,dz,RE,hz,fz,pz,mz,vz,gz,yz,bz,wz,Sz,_z,Tz,xz,Cz,Ez,kz,Dz,Pz,Iz,Cm,Oz,Mz,Fz,cr,BE,M_,$z,Nz,Az,Em,Lz,Rz,Bz,Gz,ja,F_,Hz,Wz,Yz,$_,zz,Vz,Uz,jz,hn,GE,qz,Xz,Kz,Zz,Qz,Jz,e4,t4,r4,i4,n4,s4,a4,o4,l4,u4,c4,d4,h4,f4,N_,p4,m4,v4,g4,A_,y4,b4,km,Dm,w4,S4,_4,es,HE,T4,x4,C4,WE,E4,k4,D4,P4,I4,YE,L_,zE,O4,M4,F4,$4,N4,A4,L4,R4,Pm,B4,G4,H4,oe,VE,W4,UE,Y4,z4,V4,U4,j4,R_,q4,X4,K4,Z4,Q4,J4,eV,Og,jE,Ah,tV,rV,iV,nV,B_,Jd,sV,aV,Im,Mg,qE,oV,lV,uV,cV,G_,fu,H_,W_,XE,dV,hV,fV,pV,Y_,mV,vV,gV,yV,Ar,KE,bV,wV,SV,_V,kv,z_,TV,xV,CV,EV,kV,Om,DV,PV,IV,Ze,ZE,OV,MV,V_,U_,FV,$V,NV,AV,LV,RV,BV,GV,Mm,HV,WV,YV,Fm,QE,zV,VV,UV,jV,qV,XV,KV,JE,Ju,ek,ZV,QV,JV,eU,ec,tU,rU,eh,Dd,j_,iU,nU,sU,aU,q_,X_,oU,lU,Dv,uU,cU,dU,hU,br,tk,fU,pU,rk,mU,Pv,vU,gU,yU,bU,wU,SU,_U,K_,TU,xU,nr,ik,CU,Z_,EU,kU,DU,PU,IU,OU,MU,FU,$m,$U,NU,AU,nk,sk,Fg,Iv,Rs,Q_,LU,RU,ro,Bs,$g,ln,ak,ok,lk,uk,Ov,Ms,Tu,xu,Id,GU,ck,HU,WU,tc,YU,Ng,zU,VU,hr,Zs,Et,wr,th,rc,ic,nc,fo,Fi,Fs,dk,hk,rh,fk,Do,JU,ej,gk,yk,bk,tj,rj,Rg,nj,sj,aj,Bg,oj,tT,wk,Yd,Jr,po,Qn,cn,ku,Oi,dj,sc,Fv,mo,Gg,_k,Tk,xk,Ck,Ek,nT,fj,sT,oT,mj,vj,gj,yj,Dk,wj,Hg,Yg,Vg,Pj,Ij,Oj,Mj,Fj,Nj,Uj,e5,ao,c5,f5,Lk,p5,m5,au,hT,Lv,v5,g5,y5,b5,w5,S5,_5,T5,Rk,x5,Hk,C5,E5,k5,D5,Wk,P5,I5,Nm,O5,fT,M5,pT,F5,Yk,Kg,$5,N5,zk,Vk,mT,A5,L5,R5,B5,ne,Zg,G5,H5,W5,Y5,z5,Qg,V5,U5,j5,q5,X5,K5,Z5,Q5,J5,e6,Rv,Uk,t6,r6,i6,n6,jk,Jg,s6,a6,o6,l6,vT,qk,Xk,Kk,u6,c6,d6,h6,Zk,gT,f6,p6,m6,v6,g6,y6,b6,Qk,w6,S6,_6,T6,x6,C6,E6,k6,D6,P6,I6,O6,yT,M6,F6,bT,$6,Vd,wT,Po,N6,A6,L6,R6,B6,G6,H6,W6,Y6,ah,z6,Jk,Md,Am,V6,U6,j6,q6,X6,K6,Z6,oh,Q6,Iu,Lm,J6,eD,e8,tD,t8,r8,i8,n8,ST,rD,s8,a8,o8,ey,_T,l8,u8,c8,iD,d8,nD,h8,f8,Gh,Rr,p8,m8,TT,v8,g8,xT,y8,CT,b8,w8,S8,Gv,Hv,_8,Rm,T8,ET,x8,Bm,yu,kT,Ou,Es,Gm,Hm,ty,Wm,DT,PT,sD,C8,E8,k8,D8,P8,Ys,IT,I8,Ym,O8,M8,F8,zm,OT,MT,FT,Fd,$T,aD,ou,Ps,bu,Ja,Vm,Um,$d,NT,$8,Io,AT,N8,A8,L8,R8,oD,B8,G8,Hh,lD,H8,W8,Wh,Y8,fn,z8,ts,Wv,V8,U8,j8,Yv,lh,q8,X8,K8,LT,Z8,Q8,uD,ry,J8,e9,cD,zv,t9,iy,r9,i9,n9,uh,RT,s9,Li,BT,a9,o9,l9,gi,Ud,dD,Vv,ny,vo,u9,c9,hD,fD,d9,GT,pD,h9,sy,mD,HT,Nd,WT,ay,Yh,f9,vD,gD,yD,bD,p9,YT,m9,so,oo,Uv,v9,g9,y9,b9,w9,S9,_9,T9,x9,C9,E9,k9,D9,zT,P9,VT,I9,O9,M9,F9,UT,$9,N9,A9,L9,R9,B9,G9,H9,W9,Y9,z9,V9,wD,U9,j9,q9,X9,jd,vr,SD,K9,Z9,Q9,J9,e7,t7,jT,r7,i7,n7,s7,qT,a7,o7,l7,u7,c7,d7,h7,jm,f7,p7,m7,zh,_D,v7,g7,y7,b7,w7,TD,S7,_7,T7,x7,C7,E7,k7,D7,P7,I7,O7,qm,M7,F7,$7,N7,xD,oy,A7,L7,R7,B7,G7,XT,qd,H7,W7,Y7,z7,V7,U7,j7,q7,ly,X7,KT,K7,uy,Z7,Q7,CD,pn,J7,cy,eq,tq,rq,iq,nq,sq,aq,oq,lq,uq,cq,dq,hq,fq,pq,mq,vq,gq,ED,yq,bq,kD,wq,Sq,ZT,_q,Tq,xq,Cq,Eq,lu,QT,DD,JT,Xm,PD,kq,Dq,Pq,Iq,Oq,Mq,ID,OD,Fq,$q,Nq,Aq,Lq,Rq,Jn,MD,$s,FD,Bq,Gq,Hq,Wq,Yq,zq,Vq,Uq,Km,$D,ex,jq,jv,qq,Xq,Kq,Zq,tx,Qq,Jq,eX,tX,rx,rX,iX,ND,nX,sX,aX,ix,dy,oX,lX,nx,uX,sx,ax,Kn,ox,cX,dX,hX,fX,AD,pX,mX,vX,gX,yX,bX,Zm,wX,SX,_X,bt,LD,TX,xX,CX,EX,kX,DX,PX,IX,Qm,OX,MX,FX,hy,RD,$X,NX,AX,LX,RX,BX,GX,HX,Jm,WX,YX,Ds,BD,zX,VX,UX,jX,qX,XX,KX,ZX,ev,QX,JX,lx,GD,eK,tK,rK,iK,nK,sK,aK,oK,tv,lK,uK,cK,ux,dK,HD,uu,mK,vK,zD,kK,DK,UD,jD,fx,zs,qD,ir,fi,Xv,pt,Mu,Qs,$K,AK,cu,RK,Ad,BK,HK,fy,WK,YK,ch,QD,XK,KK,ZK,QK,JK,eZ,tZ,Ld,mx,vx,Uh,Un,uZ,mZ,pi,o1,vZ,gZ,Xd,SZ,_Z,iv,TZ,u1,xZ,Kv,CZ,C,c1,d1,EZ,kZ,DZ,PZ,IZ,OZ,dh,wx,Sx,MZ,FZ,$Z,_x,NZ,AZ,LZ,RZ,hh,bn,h1,BZ,GZ,HZ,WZ,YZ,zZ,VZ,UZ,jZ,qZ,XZ,KZ,nv,ZZ,QZ,JZ,eo,tQ,my,g1,nQ,sQ,aQ,Bd,tg,xx,rr,Au,cQ,Lu,Cx,fQ,vy,mQ,vQ,gy,gQ,yQ,yy,bQ,wQ,w1,SQ,qh,_Q,TQ,xQ,S1,CQ,_1,EQ,T1,kQ,x1,DQ,by,PQ,IQ,C1,OQ,E1,MQ,Xh,FQ,$Q,NQ,k1,AQ,yo,LQ,Kh,GQ,HQ,WQ,YQ,zQ,VQ,As,wy,D1,qQ,XQ,Ex,P1,KQ,ZQ,QQ,JQ,sv,eJ,tJ,rJ,iJ,I1,nJ,sJ,kx,O1,aJ,oJ,lJ,uJ,av,cJ,dJ,hJ,fJ,Fr,yJ,bJ,wJ,Px,fh,_y,TJ,Js,L1,R1,rs,os,$J,NJ,B1,AJ,LJ,RJ,BJ,GJ,HJ,WJ,YJ,ov,zJ,VJ,UJ,jJ,Ty,JJ,eee,tee,ree,iee,nee,qa,Vn,Ru,du,Nx,ph,G1,ge,ve,tt,Ax,Xa,yt,lee,Ka,Lx,uee,cee,dee,hee,fee,H1,vee,W1,gee,ng,mh,ye,$e,Xe,Tee,Za,ot,xee,Qa,Gx,Cee,Eee,kee,Dee,Y1=X(()=>{ti=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};zp={exports:{}};(function(t,n){(function(e,r){r(typeof $i=="function"?bi():e.moment)})(ti,function(e){function r(a,o,l,u){var c={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[a+" Tage",a+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[a+" Monate",a+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[a+" Jahre",a+" Jahren"]};return o?c[l][0]:c[l][1]}var s=e.defineLocale("de",{months:"Januar_Februar_M\xE4rz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._M\xE4rz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:r,mm:"%d Minuten",h:r,hh:"%d Stunden",d:r,dd:r,w:r,ww:"%d Wochen",M:r,MM:r,y:r,yy:r},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return s})})();(function(t,n){(function(e,r){r(typeof $i=="function"?bi():e.moment)})(ti,function(e){var r="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),s="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),a=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],o=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,l=e.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(u,c){return u?/-MMM-/.test(c)?s[u.month()]:r[u.month()]:r},monthsRegex:o,monthsShortRegex:o,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:a,longMonthsParse:a,shortMonthsParse:a,weekdays:"domingo_lunes_martes_mi\xE9rcoles_jueves_viernes_s\xE1bado".split("_"),weekdaysShort:"dom._lun._mar._mi\xE9._jue._vie._s\xE1b.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s\xE1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(this.hours()!==1?"s":"")+"] LT"},nextDay:function(){return"[ma\xF1ana a la"+(this.hours()!==1?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(this.hours()!==1?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(this.hours()!==1?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(this.hours()!==1?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un d\xEDa",dd:"%d d\xEDas",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un a\xF1o",yy:"%d a\xF1os"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%d\xBA",week:{dow:1,doy:4},invalidDate:"Fecha inv\xE1lida"});return l})})();(function(t,n){(function(e,r){r(typeof $i=="function"?bi():e.moment)})(ti,function(e){var r=/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i,s=/(janv\.?|févr\.?|mars|avr\.?|mai|juin|juil\.?|août|sept\.?|oct\.?|nov\.?|déc\.?)/i,a=/(janv\.?|févr\.?|mars|avr\.?|mai|juin|juil\.?|août|sept\.?|oct\.?|nov\.?|déc\.?|janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i,o=[/^janv/i,/^févr/i,/^mars/i,/^avr/i,/^mai/i,/^juin/i,/^juil/i,/^août/i,/^sept/i,/^oct/i,/^nov/i,/^déc/i],l=e.defineLocale("fr",{months:"janvier_f\xE9vrier_mars_avril_mai_juin_juillet_ao\xFBt_septembre_octobre_novembre_d\xE9cembre".split("_"),monthsShort:"janv._f\xE9vr._mars_avr._mai_juin_juil._ao\xFBt_sept._oct._nov._d\xE9c.".split("_"),monthsRegex:a,monthsShortRegex:a,monthsStrictRegex:r,monthsShortStrictRegex:s,monthsParse:o,longMonthsParse:o,shortMonthsParse:o,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd\u2019hui \xE0] LT",nextDay:"[Demain \xE0] LT",nextWeek:"dddd [\xE0] LT",lastDay:"[Hier \xE0] LT",lastWeek:"dddd [dernier \xE0] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",w:"une semaine",ww:"%d semaines",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(u,c){switch(c){case"D":return u+(u===1?"er":"");default:case"M":case"Q":case"DDD":case"d":return u+(u===1?"er":"e");case"w":case"W":return u+(u===1?"re":"e")}},week:{dow:1,doy:4}});return l})})();(function(t,n){(function(e,r){r(typeof $i=="function"?bi():e.moment)})(ti,function(e){var r=e.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_luned\xEC_marted\xEC_mercoled\xEC_gioved\xEC_venerd\xEC_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:function(){return"[Oggi a"+(this.hours()>1?"lle ":this.hours()===0?" ":"ll'")+"]LT"},nextDay:function(){return"[Domani a"+(this.hours()>1?"lle ":this.hours()===0?" ":"ll'")+"]LT"},nextWeek:function(){return"dddd [a"+(this.hours()>1?"lle ":this.hours()===0?" ":"ll'")+"]LT"},lastDay:function(){return"[Ieri a"+(this.hours()>1?"lle ":this.hours()===0?" ":"ll'")+"]LT"},lastWeek:function(){switch(this.day()){case 0:return"[La scorsa] dddd [a"+(this.hours()>1?"lle ":this.hours()===0?" ":"ll'")+"]LT";default:return"[Lo scorso] dddd [a"+(this.hours()>1?"lle ":this.hours()===0?" ":"ll'")+"]LT"}},sameElse:"L"},relativeTime:{future:"tra %s",past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",w:"una settimana",ww:"%d settimane",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%d\xBA",week:{dow:1,doy:4}});return r})})();(function(t,n){(function(e,r){r(typeof $i=="function"?bi():e.moment)})(ti,function(e){var r=e.defineLocale("ja",{eras:[{since:"2019-05-01",offset:1,name:"\u4EE4\u548C",narrow:"\u32FF",abbr:"R"},{since:"1989-01-08",until:"2019-04-30",offset:1,name:"\u5E73\u6210",narrow:"\u337B",abbr:"H"},{since:"1926-12-25",until:"1989-01-07",offset:1,name:"\u662D\u548C",narrow:"\u337C",abbr:"S"},{since:"1912-07-30",until:"1926-12-24",offset:1,name:"\u5927\u6B63",narrow:"\u337D",abbr:"T"},{since:"1873-01-01",until:"1912-07-29",offset:6,name:"\u660E\u6CBB",narrow:"\u337E",abbr:"M"},{since:"0001-01-01",until:"1873-12-31",offset:1,name:"\u897F\u66A6",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"\u7D00\u5143\u524D",narrow:"BC",abbr:"BC"}],eraYearOrdinalRegex:/(元|\d+)年/,eraYearOrdinalParse:function(s,a){return a[1]==="\u5143"?1:parseInt(a[1]||s,10)},months:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),weekdays:"\u65E5\u66DC\u65E5_\u6708\u66DC\u65E5_\u706B\u66DC\u65E5_\u6C34\u66DC\u65E5_\u6728\u66DC\u65E5_\u91D1\u66DC\u65E5_\u571F\u66DC\u65E5".split("_"),weekdaysShort:"\u65E5_\u6708_\u706B_\u6C34_\u6728_\u91D1_\u571F".split("_"),weekdaysMin:"\u65E5_\u6708_\u706B_\u6C34_\u6728_\u91D1_\u571F".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY\u5E74M\u6708D\u65E5",LLL:"YYYY\u5E74M\u6708D\u65E5 HH:mm",LLLL:"YYYY\u5E74M\u6708D\u65E5 dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYY\u5E74M\u6708D\u65E5",lll:"YYYY\u5E74M\u6708D\u65E5 HH:mm",llll:"YYYY\u5E74M\u6708D\u65E5(ddd) HH:mm"},meridiemParse:/午前|午後/i,isPM:function(s){return s==="\u5348\u5F8C"},meridiem:function(s,a,o){return s<12?"\u5348\u524D":"\u5348\u5F8C"},calendar:{sameDay:"[\u4ECA\u65E5] LT",nextDay:"[\u660E\u65E5] LT",nextWeek:function(s){return s.week()!==this.week()?"[\u6765\u9031]dddd LT":"dddd LT"},lastDay:"[\u6628\u65E5] LT",lastWeek:function(s){return this.week()!==s.week()?"[\u5148\u9031]dddd LT":"dddd LT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}日/,ordinal:function(s,a){switch(a){case"y":return s===1?"\u5143\u5E74":s+"\u5E74";case"d":case"D":case"DDD":return s+"\u65E5";default:return s}},relativeTime:{future:"%s\u5F8C",past:"%s\u524D",s:"\u6570\u79D2",ss:"%d\u79D2",m:"1\u5206",mm:"%d\u5206",h:"1\u6642\u9593",hh:"%d\u6642\u9593",d:"1\u65E5",dd:"%d\u65E5",M:"1\u30F6\u6708",MM:"%d\u30F6\u6708",y:"1\u5E74",yy:"%d\u5E74"}});return r})})();(function(t,n){(function(e,r){r(typeof $i=="function"?bi():e.moment)})(ti,function(e){var r="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),s="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),a=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],o=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,l=e.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(u,c){return u?/-MMM-/.test(c)?s[u.month()]:r[u.month()]:r},monthsRegex:o,monthsShortRegex:o,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:a,longMonthsParse:a,shortMonthsParse:a,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"\xE9\xE9n minuut",mm:"%d minuten",h:"\xE9\xE9n uur",hh:"%d uur",d:"\xE9\xE9n dag",dd:"%d dagen",w:"\xE9\xE9n week",ww:"%d weken",M:"\xE9\xE9n maand",MM:"%d maanden",y:"\xE9\xE9n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(u){return u+(u===1||u===8||u>=20?"ste":"de")},week:{dow:1,doy:4}});return l})})();(function(t,n){(function(e,r){r(typeof $i=="function"?bi():e.moment)})(ti,function(e){var r="stycze\u0144_luty_marzec_kwiecie\u0144_maj_czerwiec_lipiec_sierpie\u0144_wrzesie\u0144_pa\u017Adziernik_listopad_grudzie\u0144".split("_"),s="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrze\u015Bnia_pa\u017Adziernika_listopada_grudnia".split("_"),a=[/^sty/i,/^lut/i,/^mar/i,/^kwi/i,/^maj/i,/^cze/i,/^lip/i,/^sie/i,/^wrz/i,/^paź/i,/^lis/i,/^gru/i];function o(c){return c%10<5&&c%10>1&&~~(c/10)%10!==1}function l(c,d,f){var p=c+" ";switch(f){case"ss":return p+(o(c)?"sekundy":"sekund");case"m":return d?"minuta":"minut\u0119";case"mm":return p+(o(c)?"minuty":"minut");case"h":return d?"godzina":"godzin\u0119";case"hh":return p+(o(c)?"godziny":"godzin");case"ww":return p+(o(c)?"tygodnie":"tygodni");case"MM":return p+(o(c)?"miesi\u0105ce":"miesi\u0119cy");case"yy":return p+(o(c)?"lata":"lat")}}var u=e.defineLocale("pl",{months:function(c,d){return c?/D MMMM/.test(d)?s[c.month()]:r[c.month()]:r},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa\u017A_lis_gru".split("_"),monthsParse:a,longMonthsParse:a,shortMonthsParse:a,weekdays:"niedziela_poniedzia\u0142ek_wtorek_\u015Broda_czwartek_pi\u0105tek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_\u015Br_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_\u015Ar_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dzi\u015B o] LT",nextDay:"[Jutro o] LT",nextWeek:function(){switch(this.day()){case 0:return"[W niedziel\u0119 o] LT";case 2:return"[We wtorek o] LT";case 3:return"[W \u015Brod\u0119 o] LT";case 6:return"[W sobot\u0119 o] LT";default:return"[W] dddd [o] LT"}},lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zesz\u0142\u0105 niedziel\u0119 o] LT";case 3:return"[W zesz\u0142\u0105 \u015Brod\u0119 o] LT";case 6:return"[W zesz\u0142\u0105 sobot\u0119 o] LT";default:return"[W zesz\u0142y] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",ss:l,m:l,mm:l,h:l,hh:l,d:"1 dzie\u0144",dd:"%d dni",w:"tydzie\u0144",ww:l,M:"miesi\u0105c",MM:l,y:"rok",yy:l},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}});return u})})();(function(t,n){(function(e,r){r(typeof $i=="function"?bi():e.moment)})(ti,function(e){function r(l,u){var c=l.split("_");return u%10===1&&u%100!==11?c[0]:u%10>=2&&u%10<=4&&(u%100<10||u%100>=20)?c[1]:c[2]}function s(l,u,c){var d={ss:u?"\u0441\u0435\u043A\u0443\u043D\u0434\u0430_\u0441\u0435\u043A\u0443\u043D\u0434\u044B_\u0441\u0435\u043A\u0443\u043D\u0434":"\u0441\u0435\u043A\u0443\u043D\u0434\u0443_\u0441\u0435\u043A\u0443\u043D\u0434\u044B_\u0441\u0435\u043A\u0443\u043D\u0434",mm:u?"\u043C\u0438\u043D\u0443\u0442\u0430_\u043C\u0438\u043D\u0443\u0442\u044B_\u043C\u0438\u043D\u0443\u0442":"\u043C\u0438\u043D\u0443\u0442\u0443_\u043C\u0438\u043D\u0443\u0442\u044B_\u043C\u0438\u043D\u0443\u0442",hh:"\u0447\u0430\u0441_\u0447\u0430\u0441\u0430_\u0447\u0430\u0441\u043E\u0432",dd:"\u0434\u0435\u043D\u044C_\u0434\u043D\u044F_\u0434\u043D\u0435\u0439",ww:"\u043D\u0435\u0434\u0435\u043B\u044F_\u043D\u0435\u0434\u0435\u043B\u0438_\u043D\u0435\u0434\u0435\u043B\u044C",MM:"\u043C\u0435\u0441\u044F\u0446_\u043C\u0435\u0441\u044F\u0446\u0430_\u043C\u0435\u0441\u044F\u0446\u0435\u0432",yy:"\u0433\u043E\u0434_\u0433\u043E\u0434\u0430_\u043B\u0435\u0442"};return c==="m"?u?"\u043C\u0438\u043D\u0443\u0442\u0430":"\u043C\u0438\u043D\u0443\u0442\u0443":l+" "+r(d[c],+l)}var a=[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i],o=e.defineLocale("ru",{months:{format:"\u044F\u043D\u0432\u0430\u0440\u044F_\u0444\u0435\u0432\u0440\u0430\u043B\u044F_\u043C\u0430\u0440\u0442\u0430_\u0430\u043F\u0440\u0435\u043B\u044F_\u043C\u0430\u044F_\u0438\u044E\u043D\u044F_\u0438\u044E\u043B\u044F_\u0430\u0432\u0433\u0443\u0441\u0442\u0430_\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F_\u043E\u043A\u0442\u044F\u0431\u0440\u044F_\u043D\u043E\u044F\u0431\u0440\u044F_\u0434\u0435\u043A\u0430\u0431\u0440\u044F".split("_"),standalone:"\u044F\u043D\u0432\u0430\u0440\u044C_\u0444\u0435\u0432\u0440\u0430\u043B\u044C_\u043C\u0430\u0440\u0442_\u0430\u043F\u0440\u0435\u043B\u044C_\u043C\u0430\u0439_\u0438\u044E\u043D\u044C_\u0438\u044E\u043B\u044C_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044C_\u043E\u043A\u0442\u044F\u0431\u0440\u044C_\u043D\u043E\u044F\u0431\u0440\u044C_\u0434\u0435\u043A\u0430\u0431\u0440\u044C".split("_")},monthsShort:{format:"\u044F\u043D\u0432._\u0444\u0435\u0432\u0440._\u043C\u0430\u0440._\u0430\u043F\u0440._\u043C\u0430\u044F_\u0438\u044E\u043D\u044F_\u0438\u044E\u043B\u044F_\u0430\u0432\u0433._\u0441\u0435\u043D\u0442._\u043E\u043A\u0442._\u043D\u043E\u044F\u0431._\u0434\u0435\u043A.".split("_"),standalone:"\u044F\u043D\u0432._\u0444\u0435\u0432\u0440._\u043C\u0430\u0440\u0442_\u0430\u043F\u0440._\u043C\u0430\u0439_\u0438\u044E\u043D\u044C_\u0438\u044E\u043B\u044C_\u0430\u0432\u0433._\u0441\u0435\u043D\u0442._\u043E\u043A\u0442._\u043D\u043E\u044F\u0431._\u0434\u0435\u043A.".split("_")},weekdays:{standalone:"\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435_\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A_\u0432\u0442\u043E\u0440\u043D\u0438\u043A_\u0441\u0440\u0435\u0434\u0430_\u0447\u0435\u0442\u0432\u0435\u0440\u0433_\u043F\u044F\u0442\u043D\u0438\u0446\u0430_\u0441\u0443\u0431\u0431\u043E\u0442\u0430".split("_"),format:"\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435_\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A_\u0432\u0442\u043E\u0440\u043D\u0438\u043A_\u0441\u0440\u0435\u0434\u0443_\u0447\u0435\u0442\u0432\u0435\u0440\u0433_\u043F\u044F\u0442\u043D\u0438\u0446\u0443_\u0441\u0443\u0431\u0431\u043E\u0442\u0443".split("_"),isFormat:/\[ ?[Вв] ?(?:прошлую|следующую|эту)? ?] ?dddd/},weekdaysShort:"\u0432\u0441_\u043F\u043D_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043F\u0442_\u0441\u0431".split("_"),weekdaysMin:"\u0432\u0441_\u043F\u043D_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043F\u0442_\u0441\u0431".split("_"),monthsParse:a,longMonthsParse:a,shortMonthsParse:a,monthsRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsShortRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsStrictRegex:/^(январ[яь]|феврал[яь]|марта?|апрел[яь]|ма[яй]|июн[яь]|июл[яь]|августа?|сентябр[яь]|октябр[яь]|ноябр[яь]|декабр[яь])/i,monthsShortStrictRegex:/^(янв\.|февр?\.|мар[т.]|апр\.|ма[яй]|июн[ья.]|июл[ья.]|авг\.|сент?\.|окт\.|нояб?\.|дек\.)/i,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY \u0433.",LLL:"D MMMM YYYY \u0433., H:mm",LLLL:"dddd, D MMMM YYYY \u0433., H:mm"},calendar:{sameDay:"[\u0421\u0435\u0433\u043E\u0434\u043D\u044F, \u0432] LT",nextDay:"[\u0417\u0430\u0432\u0442\u0440\u0430, \u0432] LT",lastDay:"[\u0412\u0447\u0435\u0440\u0430, \u0432] LT",nextWeek:function(l){if(l.week()!==this.week())switch(this.day()){case 0:return"[\u0412 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0435] dddd, [\u0432] LT";case 1:case 2:case 4:return"[\u0412 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439] dddd, [\u0432] LT";case 3:case 5:case 6:return"[\u0412 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E] dddd, [\u0432] LT"}else return this.day()===2?"[\u0412\u043E] dddd, [\u0432] LT":"[\u0412] dddd, [\u0432] LT"},lastWeek:function(l){if(l.week()!==this.week())switch(this.day()){case 0:return"[\u0412 \u043F\u0440\u043E\u0448\u043B\u043E\u0435] dddd, [\u0432] LT";case 1:case 2:case 4:return"[\u0412 \u043F\u0440\u043E\u0448\u043B\u044B\u0439] dddd, [\u0432] LT";case 3:case 5:case 6:return"[\u0412 \u043F\u0440\u043E\u0448\u043B\u0443\u044E] dddd, [\u0432] LT"}else return this.day()===2?"[\u0412\u043E] dddd, [\u0432] LT":"[\u0412] dddd, [\u0432] LT"},sameElse:"L"},relativeTime:{future:"\u0447\u0435\u0440\u0435\u0437 %s",past:"%s \u043D\u0430\u0437\u0430\u0434",s:"\u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E \u0441\u0435\u043A\u0443\u043D\u0434",ss:s,m:s,mm:s,h:"\u0447\u0430\u0441",hh:s,d:"\u0434\u0435\u043D\u044C",dd:s,w:"\u043D\u0435\u0434\u0435\u043B\u044F",ww:s,M:"\u043C\u0435\u0441\u044F\u0446",MM:s,y:"\u0433\u043E\u0434",yy:s},meridiemParse:/ночи|утра|дня|вечера/i,isPM:function(l){return/^(дня|вечера)$/.test(l)},meridiem:function(l,u,c){return l<4?"\u043D\u043E\u0447\u0438":l<12?"\u0443\u0442\u0440\u0430":l<17?"\u0434\u043D\u044F":"\u0432\u0435\u0447\u0435\u0440\u0430"},dayOfMonthOrdinalParse:/\d{1,2}-(й|го|я)/,ordinal:function(l,u){switch(u){case"M":case"d":case"DDD":return l+"-\u0439";case"D":return l+"-\u0433\u043E";case"w":case"W":return l+"-\u044F";default:return l}},week:{dow:1,doy:4}});return o})})();(function(t,n){(function(e,r){r(typeof $i=="function"?bi():e.moment)})(ti,function(e){function r(u,c){var d=u.split("_");return c%10===1&&c%100!==11?d[0]:c%10>=2&&c%10<=4&&(c%100<10||c%100>=20)?d[1]:d[2]}function s(u,c,d){var f={ss:c?"\u0441\u0435\u043A\u0443\u043D\u0434\u0430_\u0441\u0435\u043A\u0443\u043D\u0434\u0438_\u0441\u0435\u043A\u0443\u043D\u0434":"\u0441\u0435\u043A\u0443\u043D\u0434\u0443_\u0441\u0435\u043A\u0443\u043D\u0434\u0438_\u0441\u0435\u043A\u0443\u043D\u0434",mm:c?"\u0445\u0432\u0438\u043B\u0438\u043D\u0430_\u0445\u0432\u0438\u043B\u0438\u043D\u0438_\u0445\u0432\u0438\u043B\u0438\u043D":"\u0445\u0432\u0438\u043B\u0438\u043D\u0443_\u0445\u0432\u0438\u043B\u0438\u043D\u0438_\u0445\u0432\u0438\u043B\u0438\u043D",hh:c?"\u0433\u043E\u0434\u0438\u043D\u0430_\u0433\u043E\u0434\u0438\u043D\u0438_\u0433\u043E\u0434\u0438\u043D":"\u0433\u043E\u0434\u0438\u043D\u0443_\u0433\u043E\u0434\u0438\u043D\u0438_\u0433\u043E\u0434\u0438\u043D",dd:"\u0434\u0435\u043D\u044C_\u0434\u043D\u0456_\u0434\u043D\u0456\u0432",MM:"\u043C\u0456\u0441\u044F\u0446\u044C_\u043C\u0456\u0441\u044F\u0446\u0456_\u043C\u0456\u0441\u044F\u0446\u0456\u0432",yy:"\u0440\u0456\u043A_\u0440\u043E\u043A\u0438_\u0440\u043E\u043A\u0456\u0432"};return d==="m"?c?"\u0445\u0432\u0438\u043B\u0438\u043D\u0430":"\u0445\u0432\u0438\u043B\u0438\u043D\u0443":d==="h"?c?"\u0433\u043E\u0434\u0438\u043D\u0430":"\u0433\u043E\u0434\u0438\u043D\u0443":u+" "+r(f[d],+u)}function a(u,c){var d={nominative:"\u043D\u0435\u0434\u0456\u043B\u044F_\u043F\u043E\u043D\u0435\u0434\u0456\u043B\u043E\u043A_\u0432\u0456\u0432\u0442\u043E\u0440\u043E\u043A_\u0441\u0435\u0440\u0435\u0434\u0430_\u0447\u0435\u0442\u0432\u0435\u0440_\u043F\u2019\u044F\u0442\u043D\u0438\u0446\u044F_\u0441\u0443\u0431\u043E\u0442\u0430".split("_"),accusative:"\u043D\u0435\u0434\u0456\u043B\u044E_\u043F\u043E\u043D\u0435\u0434\u0456\u043B\u043E\u043A_\u0432\u0456\u0432\u0442\u043E\u0440\u043E\u043A_\u0441\u0435\u0440\u0435\u0434\u0443_\u0447\u0435\u0442\u0432\u0435\u0440_\u043F\u2019\u044F\u0442\u043D\u0438\u0446\u044E_\u0441\u0443\u0431\u043E\u0442\u0443".split("_"),genitive:"\u043D\u0435\u0434\u0456\u043B\u0456_\u043F\u043E\u043D\u0435\u0434\u0456\u043B\u043A\u0430_\u0432\u0456\u0432\u0442\u043E\u0440\u043A\u0430_\u0441\u0435\u0440\u0435\u0434\u0438_\u0447\u0435\u0442\u0432\u0435\u0440\u0433\u0430_\u043F\u2019\u044F\u0442\u043D\u0438\u0446\u0456_\u0441\u0443\u0431\u043E\u0442\u0438".split("_")},f;return u===!0?d.nominative.slice(1,7).concat(d.nominative.slice(0,1)):u?(f=/(\[[ВвУу]\]) ?dddd/.test(c)?"accusative":/\[?(?:минулої|наступної)? ?\] ?dddd/.test(c)?"genitive":"nominative",d[f][u.day()]):d.nominative}function o(u){return function(){return u+"\u043E"+(this.hours()===11?"\u0431":"")+"] LT"}}var l=e.defineLocale("uk",{months:{format:"\u0441\u0456\u0447\u043D\u044F_\u043B\u044E\u0442\u043E\u0433\u043E_\u0431\u0435\u0440\u0435\u0437\u043D\u044F_\u043A\u0432\u0456\u0442\u043D\u044F_\u0442\u0440\u0430\u0432\u043D\u044F_\u0447\u0435\u0440\u0432\u043D\u044F_\u043B\u0438\u043F\u043D\u044F_\u0441\u0435\u0440\u043F\u043D\u044F_\u0432\u0435\u0440\u0435\u0441\u043D\u044F_\u0436\u043E\u0432\u0442\u043D\u044F_\u043B\u0438\u0441\u0442\u043E\u043F\u0430\u0434\u0430_\u0433\u0440\u0443\u0434\u043D\u044F".split("_"),standalone:"\u0441\u0456\u0447\u0435\u043D\u044C_\u043B\u044E\u0442\u0438\u0439_\u0431\u0435\u0440\u0435\u0437\u0435\u043D\u044C_\u043A\u0432\u0456\u0442\u0435\u043D\u044C_\u0442\u0440\u0430\u0432\u0435\u043D\u044C_\u0447\u0435\u0440\u0432\u0435\u043D\u044C_\u043B\u0438\u043F\u0435\u043D\u044C_\u0441\u0435\u0440\u043F\u0435\u043D\u044C_\u0432\u0435\u0440\u0435\u0441\u0435\u043D\u044C_\u0436\u043E\u0432\u0442\u0435\u043D\u044C_\u043B\u0438\u0441\u0442\u043E\u043F\u0430\u0434_\u0433\u0440\u0443\u0434\u0435\u043D\u044C".split("_")},monthsShort:"\u0441\u0456\u0447_\u043B\u044E\u0442_\u0431\u0435\u0440_\u043A\u0432\u0456\u0442_\u0442\u0440\u0430\u0432_\u0447\u0435\u0440\u0432_\u043B\u0438\u043F_\u0441\u0435\u0440\u043F_\u0432\u0435\u0440_\u0436\u043E\u0432\u0442_\u043B\u0438\u0441\u0442_\u0433\u0440\u0443\u0434".split("_"),weekdays:a,weekdaysShort:"\u043D\u0434_\u043F\u043D_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043F\u0442_\u0441\u0431".split("_"),weekdaysMin:"\u043D\u0434_\u043F\u043D_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043F\u0442_\u0441\u0431".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY \u0440.",LLL:"D MMMM YYYY \u0440., HH:mm",LLLL:"dddd, D MMMM YYYY \u0440., HH:mm"},calendar:{sameDay:o("[\u0421\u044C\u043E\u0433\u043E\u0434\u043D\u0456 "),nextDay:o("[\u0417\u0430\u0432\u0442\u0440\u0430 "),lastDay:o("[\u0412\u0447\u043E\u0440\u0430 "),nextWeek:o("[\u0423] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return o("[\u041C\u0438\u043D\u0443\u043B\u043E\u0457] dddd [").call(this);case 1:case 2:case 4:return o("[\u041C\u0438\u043D\u0443\u043B\u043E\u0433\u043E] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:"\u0437\u0430 %s",past:"%s \u0442\u043E\u043C\u0443",s:"\u0434\u0435\u043A\u0456\u043B\u044C\u043A\u0430 \u0441\u0435\u043A\u0443\u043D\u0434",ss:s,m:s,mm:s,h:"\u0433\u043E\u0434\u0438\u043D\u0443",hh:s,d:"\u0434\u0435\u043D\u044C",dd:s,M:"\u043C\u0456\u0441\u044F\u0446\u044C",MM:s,y:"\u0440\u0456\u043A",yy:s},meridiemParse:/ночі|ранку|дня|вечора/,isPM:function(u){return/^(дня|вечора)$/.test(u)},meridiem:function(u,c,d){return u<4?"\u043D\u043E\u0447\u0456":u<12?"\u0440\u0430\u043D\u043A\u0443":u<17?"\u0434\u043D\u044F":"\u0432\u0435\u0447\u043E\u0440\u0430"},dayOfMonthOrdinalParse:/\d{1,2}-(й|го)/,ordinal:function(u,c){switch(c){case"M":case"d":case"DDD":case"w":case"W":return u+"-\u0439";case"D":return u+"-\u0433\u043E";default:return u}},week:{dow:1,doy:7}});return l})})();Hx={exports:{}},Re=function(t){try{return!!t()}catch(n){return!0}},xN=Re,Bu=!xN(function(){var t=function(){}.bind();return typeof t!="function"||t.hasOwnProperty("prototype")}),Wx=Bu,Yx=Function.prototype,CN=Yx.bind,cv=Yx.call,EN=Wx&&CN.bind(cv,cv),Be=Wx?function(t){return t&&EN(t)}:function(t){return t&&function(){return cv.apply(t,arguments)}},kN=Math.ceil,DN=Math.floor,Gu=function(t){var n=+t;return n!==n||n===0?0:(n>0?DN:kN)(n)},bd=function(t){return t&&t.Math==Math&&t},se=bd(typeof globalThis=="object"&&globalThis)||bd(typeof window=="object"&&window)||bd(typeof self=="object"&&self)||bd(typeof ti=="object"&&ti)||function(){return this}()||Function("return this")(),vh={exports:{}},PN=!0,pS=se,IN=Object.defineProperty,ON=function(t,n){try{IN(pS,t,{value:n,configurable:!0,writable:!0})}catch(e){pS[t]=n}return n},MN=se,FN=ON,mS="__core-js_shared__",$N=MN[mS]||FN(mS,{}),ag=$N,vS=ag;(vh.exports=function(t,n){return vS[t]||(vS[t]=n!==void 0?n:{})})("versions",[]).push({version:"3.21.1",mode:"pure",copyright:"\xA9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"});NN=se,AN=NN.TypeError,bo=function(t){if(t==null)throw AN("Can't call method on "+t);return t},LN=se,RN=bo,BN=LN.Object,_r=function(t){return BN(RN(t))},GN=Be,HN=_r,WN=GN({}.hasOwnProperty),Bt=Object.hasOwn||function(n,e){return WN(HN(n),e)},YN=Be,zN=0,VN=Math.random(),UN=YN(1 .toString),gh=function(t){return"Symbol("+(t===void 0?"":t)+")_"+UN(++zN+VN,36)},Ve={},Dt=function(t){return typeof t=="function"},Vp=Ve,Up=se,jN=Dt,gS=function(t){return jN(t)?t:void 0},ri=function(t,n){return arguments.length<2?gS(Vp[t])||gS(Up[t]):Vp[t]&&Vp[t][n]||Up[t]&&Up[t][n]},qN=ri,is=qN("navigator","userAgent")||"",zx=se,jp=is,yS=zx.process,bS=zx.Deno,wS=yS&&yS.versions||bS&&bS.version,SS=wS&&wS.v8;SS&&(mi=SS.split("."),Kd=mi[0]>0&&mi[0]<4?1:+(mi[0]+mi[1]));!Kd&&jp&&(mi=jp.match(/Edge\/(\d+)/),(!mi||mi[1]>=74)&&(mi=jp.match(/Chrome\/(\d+)/),mi&&(Kd=+mi[1])));wo=Kd,_S=wo,XN=Re,og=!!Object.getOwnPropertySymbols&&!XN(function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&_S&&_S<41}),KN=og,Vx=KN&&!Symbol.sham&&typeof Symbol.iterator=="symbol",ZN=se,QN=vh.exports,TS=Bt,JN=gh,xS=og,Ux=Vx,za=QN("wks"),Os=ZN.Symbol,CS=Os&&Os.for,eA=Ux?Os:Os&&Os.withoutSetter||JN,vt=function(t){if(!TS(za,t)||!(xS||typeof za[t]=="string")){var n="Symbol."+t;xS&&TS(Os,t)?za[t]=Os[t]:Ux&&CS?za[t]=CS(n):za[t]=eA(n)}return za[t]},tA=vt,rA=tA("toStringTag"),jx={};jx[rA]="z";lg=String(jx)==="[object z]",qx=Be,iA=qx({}.toString),nA=qx("".slice),Vs=function(t){return nA(iA(t),8,-1)},sA=se,aA=lg,oA=Dt,Hd=Vs,lA=vt,uA=lA("toStringTag"),cA=sA.Object,dA=Hd(function(){return arguments}())=="Arguments",hA=function(t,n){try{return t[n]}catch(e){}},vn=aA?Hd:function(t){var n,e,r;return t===void 0?"Undefined":t===null?"Null":typeof(e=hA(n=cA(t),uA))=="string"?e:dA?Hd(n):(r=Hd(n))=="Object"&&oA(n.callee)?"Arguments":r},fA=se,pA=vn,mA=fA.String,Ni=function(t){if(pA(t)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return mA(t)},ug=Be,vA=Gu,gA=Ni,yA=bo,bA=ug("".charAt),ES=ug("".charCodeAt),wA=ug("".slice),kS=function(t){return function(n,e){var r=gA(yA(n)),s=vA(e),a=r.length,o,l;return s<0||s>=a?t?"":void 0:(o=ES(r,s),o<55296||o>56319||s+1===a||(l=ES(r,s+1))<56320||l>57343?t?bA(r,s):o:t?wA(r,s,s+2):(o-55296<<10)+(l-56320)+65536)}},SA={codeAt:kS(!1),charAt:kS(!0)},_A=Be,TA=Dt,dv=ag,xA=_A(Function.toString);TA(dv.inspectSource)||(dv.inspectSource=function(t){return xA(t)});cg=dv.inspectSource,CA=se,EA=Dt,kA=cg,DS=CA.WeakMap,DA=EA(DS)&&/native code/.test(kA(DS)),PA=Dt,Gt=function(t){return typeof t=="object"?t!==null:PA(t)},IA=Re,Ht=!IA(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),Tr={},OA=se,PS=Gt,hv=OA.document,MA=PS(hv)&&PS(hv.createElement),dg=function(t){return MA?hv.createElement(t):{}},FA=Ht,$A=Re,NA=dg,Xx=!FA&&!$A(function(){return Object.defineProperty(NA("div"),"a",{get:function(){return 7}}).a!=7}),AA=Ht,LA=Re,Kx=AA&&LA(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),Zx=se,RA=Gt,BA=Zx.String,GA=Zx.TypeError,Br=function(t){if(RA(t))return t;throw GA(BA(t)+" is not an object")},HA=Bu,wd=Function.prototype.call,Gr=HA?wd.bind(wd):function(){return wd.apply(wd,arguments)},WA=Be,Qe=WA({}.isPrototypeOf),YA=se,zA=ri,VA=Dt,UA=Qe,jA=Vx,qA=YA.Object,hg=jA?function(t){return typeof t=="symbol"}:function(t){var n=zA("Symbol");return VA(n)&&UA(n.prototype,qA(t))},XA=se,KA=XA.String,yh=function(t){try{return KA(t)}catch(n){return"Object"}},ZA=se,QA=Dt,JA=yh,eL=ZA.TypeError,wi=function(t){if(QA(t))return t;throw eL(JA(t)+" is not a function")},tL=wi,fg=function(t,n){var e=t[n];return e==null?void 0:tL(e)},rL=se,qp=Gr,Xp=Dt,Kp=Gt,iL=rL.TypeError,nL=function(t,n){var e,r;if(n==="string"&&Xp(e=t.toString)&&!Kp(r=qp(e,t))||Xp(e=t.valueOf)&&!Kp(r=qp(e,t))||n!=="string"&&Xp(e=t.toString)&&!Kp(r=qp(e,t)))return r;throw iL("Can't convert object to primitive value")},sL=se,aL=Gr,IS=Gt,OS=hg,oL=fg,lL=nL,uL=vt,cL=sL.TypeError,dL=uL("toPrimitive"),hL=function(t,n){if(!IS(t)||OS(t))return t;var e=oL(t,dL),r;if(e){if(n===void 0&&(n="default"),r=aL(e,t,n),!IS(r)||OS(r))return r;throw cL("Can't convert object to primitive value")}return n===void 0&&(n="number"),lL(t,n)},fL=hL,pL=hg,bh=function(t){var n=fL(t,"string");return pL(n)?n:n+""},mL=se,vL=Ht,gL=Xx,yL=Kx,Sd=Br,MS=bh,bL=mL.TypeError,Zp=Object.defineProperty,wL=Object.getOwnPropertyDescriptor,Qp="enumerable",Jp="configurable",em="writable";Tr.f=vL?yL?function(n,e,r){if(Sd(n),e=MS(e),Sd(r),typeof n=="function"&&e==="prototype"&&"value"in r&&em in r&&!r[em]){var s=wL(n,e);s&&s[em]&&(n[e]=r.value,r={configurable:Jp in r?r[Jp]:s[Jp],enumerable:Qp in r?r[Qp]:s[Qp],writable:!1})}return Zp(n,e,r)}:Zp:function(n,e,r){if(Sd(n),e=MS(e),Sd(r),gL)try{return Zp(n,e,r)}catch(s){}if("get"in r||"set"in r)throw bL("Accessors not supported");return"value"in r&&(n[e]=r.value),n};Us=function(t,n){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:n}},SL=Ht,_L=Tr,TL=Us,ns=SL?function(t,n,e){return _L.f(t,n,TL(1,e))}:function(t,n,e){return t[n]=e,t},xL=vh.exports,CL=gh,FS=xL("keys"),wh=function(t){return FS[t]||(FS[t]=CL(t))},Hu={},EL=DA,Qx=se,tm=Be,kL=Gt,DL=ns,rm=Bt,im=ag,PL=wh,IL=Hu,$S="Object already initialized",fv=Qx.TypeError,OL=Qx.WeakMap,ML=function(t){return Qd(t)?wu(t):Zd(t,{})},FL=function(t){return function(n){var e;if(!kL(n)||(e=wu(n)).type!==t)throw fv("Incompatible receiver, "+t+" required");return e}};EL||im.state?(Yn=im.state||(im.state=new OL),NS=tm(Yn.get),nm=tm(Yn.has),AS=tm(Yn.set),Zd=function(t,n){if(nm(Yn,t))throw new fv($S);return n.facade=t,AS(Yn,t,n),n},wu=function(t){return NS(Yn,t)||{}},Qd=function(t){return nm(Yn,t)}):(Cs=PL("state"),IL[Cs]=!0,Zd=function(t,n){if(rm(t,Cs))throw new fv($S);return n.facade=t,DL(t,Cs,n),n},wu=function(t){return rm(t,Cs)?t[Cs]:{}},Qd=function(t){return rm(t,Cs)});So={set:Zd,get:wu,has:Qd,enforce:ML,getterFor:FL},$L=Bu,Jx=Function.prototype,LS=Jx.apply,RS=Jx.call,js=typeof Reflect=="object"&&Reflect.apply||($L?RS.bind(LS):function(){return RS.apply(LS,arguments)}),qs={},Wu={},eC={}.propertyIsEnumerable,tC=Object.getOwnPropertyDescriptor,NL=tC&&!eC.call({1:2},1);Wu.f=NL?function(n){var e=tC(this,n);return!!e&&e.enumerable}:eC;AL=se,LL=Be,RL=Re,BL=Vs,sm=AL.Object,GL=LL("".split),Sh=RL(function(){return!sm("z").propertyIsEnumerable(0)})?function(t){return BL(t)=="String"?GL(t,""):sm(t)}:sm,HL=Sh,WL=bo,Si=function(t){return HL(WL(t))},YL=Ht,zL=Gr,VL=Wu,UL=Us,jL=Si,qL=bh,XL=Bt,KL=Xx,BS=Object.getOwnPropertyDescriptor;qs.f=YL?BS:function(n,e){if(n=jL(n),e=qL(e),KL)try{return BS(n,e)}catch(r){}if(XL(n,e))return UL(!zL(VL.f,n,e),n[e])};ZL=Re,QL=Dt,JL=/#|\.prototype\./,Yu=function(t,n){var e=tR[eR(t)];return e==iR?!0:e==rR?!1:QL(n)?ZL(n):!!n},eR=Yu.normalize=function(t){return String(t).replace(JL,".").toLowerCase()},tR=Yu.data={},rR=Yu.NATIVE="N",iR=Yu.POLYFILL="P",rC=Yu,GS=Be,nR=wi,sR=Bu,aR=GS(GS.bind),ss=function(t,n){return nR(t),n===void 0?t:sR?aR(t,n):function(){return t.apply(n,arguments)}},_d=se,oR=js,lR=Be,uR=Dt,cR=qs.f,dR=rC,Va=Ve,hR=ss,Ua=ns,HS=Bt,fR=function(t){var n=function(e,r,s){if(this instanceof n){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,s)}return oR(t,this,arguments)};return n.prototype=t.prototype,n},ue=function(t,n){var e=t.target,r=t.global,s=t.stat,a=t.proto,o=r?_d:s?_d[e]:(_d[e]||{}).prototype,l=r?Va:Va[e]||Ua(Va,e,{})[e],u=l.prototype,c,d,f,p,v,y,_,S,x;for(p in n)c=dR(r?p:e+(s?".":"#")+p,t.forced),d=!c&&o&&HS(o,p),y=l[p],d&&(t.noTargetGet?(x=cR(o,p),_=x&&x.value):_=o[p]),v=d&&_?_:n[p],!(d&&typeof y==typeof v)&&(t.bind&&d?S=hR(v,_d):t.wrap&&d?S=fR(v):a&&uR(v)?S=lR(v):S=v,(t.sham||v&&v.sham||y&&y.sham)&&Ua(S,"sham",!0),Ua(l,p,S),a&&(f=e+"Prototype",HS(Va,f)||Ua(Va,f,{}),Ua(Va[f],p,v),t.real&&u&&!u[p]&&Ua(u,p,v)))},pv=Ht,pR=Bt,iC=Function.prototype,mR=pv&&Object.getOwnPropertyDescriptor,pg=pR(iC,"name"),vR=pg&&function(){}.name==="something",gR=pg&&(!pv||pv&&mR(iC,"name").configurable),nC={EXISTS:pg,PROPER:vR,CONFIGURABLE:gR},_h={},yR=Gu,bR=Math.max,wR=Math.min,zu=function(t,n){var e=yR(t);return e<0?bR(e+n,0):wR(e,n)},SR=Gu,_R=Math.min,TR=function(t){return t>0?_R(SR(t),9007199254740991):0},xR=TR,Hr=function(t){return xR(t.length)},CR=Si,ER=zu,kR=Hr,WS=function(t){return function(n,e,r){var s=CR(n),a=kR(s),o=ER(r,a),l;if(t&&e!=e){for(;a>o;)if(l=s[o++],l!=l)return!0}else for(;a>o;o++)if((t||o in s)&&s[o]===e)return t||o||0;return!t&&-1}},mg={includes:WS(!0),indexOf:WS(!1)},DR=Be,am=Bt,PR=Si,IR=mg.indexOf,OR=Hu,YS=DR([].push),sC=function(t,n){var e=PR(t),r=0,s=[],a;for(a in e)!am(OR,a)&&am(e,a)&&YS(s,a);for(;n.length>r;)am(e,a=n[r++])&&(~IR(s,a)||YS(s,a));return s},vg=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],MR=sC,FR=vg,Vu=Object.keys||function(n){return MR(n,FR)},$R=Ht,NR=Kx,AR=Tr,LR=Br,RR=Si,BR=Vu;_h.f=$R&&!NR?Object.defineProperties:function(n,e){LR(n);for(var r=RR(e),s=BR(e),a=s.length,o=0,l;a>o;)AR.f(n,l=s[o++],r[l]);return n};GR=ri,aC=GR("document","documentElement"),HR=Br,WR=_h,zS=vg,YR=Hu,zR=aC,VR=dg,UR=wh,VS=">",US="<",mv="prototype",vv="script",oC=UR("IE_PROTO"),om=function(){},lC=function(t){return US+vv+VS+t+US+"/"+vv+VS},jS=function(t){t.write(lC("")),t.close();var n=t.parentWindow.Object;return t=null,n},jR=function(){var t=VR("iframe"),n="java"+vv+":",e;return t.style.display="none",zR.appendChild(t),t.src=String(n),e=t.contentWindow.document,e.open(),e.write(lC("document.F=Object")),e.close(),e.F},Wd=function(){try{Td=new ActiveXObject("htmlfile")}catch(n){}Wd=typeof document!="undefined"?document.domain&&Td?jS(Td):jR():jS(Td);for(var t=zS.length;t--;)delete Wd[mv][zS[t]];return Wd()};YR[oC]=!0;Xs=Object.create||function(n,e){var r;return n!==null?(om[mv]=HR(n),r=new om,om[mv]=null,r[oC]=n):r=Wd(),e===void 0?r:WR.f(r,e)},qR=Re,uC=!qR(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),XR=se,KR=Bt,ZR=Dt,QR=_r,JR=wh,e2=uC,qS=JR("IE_PROTO"),gv=XR.Object,t2=gv.prototype,Th=e2?gv.getPrototypeOf:function(t){var n=QR(t);if(KR(n,qS))return n[qS];var e=n.constructor;return ZR(e)&&n instanceof e?e.prototype:n instanceof gv?t2:null},r2=ns,xh=function(t,n,e,r){r&&r.enumerable?t[n]=e:r2(t,n,e)},i2=Re,n2=Dt,s2=Xs,XS=Th,a2=xh,o2=vt,yv=o2("iterator"),cC=!1;[].keys&&(um=[].keys(),"next"in um?(lm=XS(XS(um)),lm!==Object.prototype&&(an=lm)):cC=!0);l2=an==null||i2(function(){var t={};return an[yv].call(t)!==t});l2?an={}:an=s2(an);n2(an[yv])||a2(an,yv,function(){return this});dC={IteratorPrototype:an,BUGGY_SAFARI_ITERATORS:cC},u2=lg,c2=vn,d2=u2?{}.toString:function(){return"[object "+c2(this)+"]"},h2=lg,f2=Tr.f,p2=ns,m2=Bt,v2=d2,g2=vt,KS=g2("toStringTag"),_o=function(t,n,e,r){if(t){var s=e?t:t.prototype;m2(s,KS)||f2(s,KS,{configurable:!0,value:n}),r&&!h2&&p2(s,"toString",v2)}},To={},y2=dC.IteratorPrototype,b2=Xs,w2=Us,S2=_o,_2=To,T2=function(){return this},x2=function(t,n,e,r){var s=n+" Iterator";return t.prototype=b2(y2,{next:w2(+!r,e)}),S2(t,s,!1,!0),_2[s]=T2,t},hC=se,C2=Dt,E2=hC.String,k2=hC.TypeError,D2=function(t){if(typeof t=="object"||C2(t))return t;throw k2("Can't set "+E2(t)+" as a prototype")},P2=Be,I2=Br,O2=D2,fC=Object.setPrototypeOf||("__proto__"in{}?function(){var t=!1,n={},e;try{e=P2(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),e(n,[]),t=n instanceof Array}catch(r){}return function(s,a){return I2(s),O2(a),t?e(s,a):s.__proto__=a,s}}():void 0),M2=ue,F2=Gr,$2=nC,N2=x2,A2=Th,L2=_o,ZS=xh,R2=vt,QS=To,B2=dC,G2=$2.PROPER,xd=B2.BUGGY_SAFARI_ITERATORS,cm=R2("iterator"),JS="keys",Cd="values",e_="entries",H2=function(){return this},gg=function(t,n,e,r,s,a,o){N2(e,n,r);var l=function(x){if(x===s&&p)return p;if(!xd&&x in d)return d[x];switch(x){case JS:return function(){return new e(this,x)};case Cd:return function(){return new e(this,x)};case e_:return function(){return new e(this,x)}}return function(){return new e(this)}},u=n+" Iterator",c=!1,d=t.prototype,f=d[cm]||d["@@iterator"]||s&&d[s],p=!xd&&f||l(s),v=n=="Array"&&d.entries||f,y,_,S;if(v&&(y=A2(v.call(new t)),y!==Object.prototype&&y.next&&(L2(y,u,!0,!0),QS[u]=H2)),G2&&s==Cd&&f&&f.name!==Cd&&(c=!0,p=function(){return F2(f,this)}),s)if(_={values:l(Cd),keys:a?p:l(JS),entries:l(e_)},o)for(S in _)(xd||c||!(S in d))&&ZS(d,S,_[S]);else M2({target:n,proto:!0,forced:xd||c},_);return o&&d[cm]!==p&&ZS(d,cm,p,{name:s}),QS[n]=p,_},W2=SA.charAt,Y2=Ni,pC=So,z2=gg,mC="String Iterator",V2=pC.set,U2=pC.getterFor(mC);z2(String,"String",function(t){V2(this,{type:mC,string:Y2(t),index:0})},function(){var n=U2(this),e=n.string,r=n.index,s;return r>=e.length?{value:void 0,done:!0}:(s=W2(e,r),n.index+=s.length,{value:s,done:!1})});j2=Gr,t_=Br,q2=fg,vC=function(t,n,e){var r,s;t_(t);try{if(r=q2(t,"return"),!r){if(n==="throw")throw e;return e}r=j2(r,t)}catch(a){s=!0,r=a}if(n==="throw")throw e;if(s)throw r;return t_(r),e},X2=Br,K2=vC,Z2=function(t,n,e,r){try{return r?n(X2(e)[0],e[1]):n(e)}catch(s){K2(t,"throw",s)}},Q2=vt,J2=To,eB=Q2("iterator"),tB=Array.prototype,gC=function(t){return t!==void 0&&(J2.Array===t||tB[eB]===t)},rB=Be,iB=Re,yC=Dt,nB=vn,sB=ri,aB=cg,bC=function(){},oB=[],wC=sB("Reflect","construct"),yg=/^\s*(?:class|function)\b/,lB=rB(yg.exec),uB=!yg.exec(bC),nu=function(n){if(!yC(n))return!1;try{return wC(bC,oB,n),!0}catch(e){return!1}},SC=function(n){if(!yC(n))return!1;switch(nB(n)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return uB||!!lB(yg,aB(n))}catch(e){return!0}};SC.sham=!0;Ch=!wC||iB(function(){var t;return nu(nu.call)||!nu(Object)||!nu(function(){t=!0})||t})?SC:nu,cB=bh,dB=Tr,hB=Us,xo=function(t,n,e){var r=cB(n);r in t?dB.f(t,r,hB(0,e)):t[r]=e},fB=vn,r_=fg,pB=To,mB=vt,vB=mB("iterator"),Eh=function(t){if(t!=null)return r_(t,vB)||r_(t,"@@iterator")||pB[fB(t)]},gB=se,yB=Gr,bB=wi,wB=Br,SB=yh,_B=Eh,TB=gB.TypeError,bg=function(t,n){var e=arguments.length<2?_B(t):n;if(bB(e))return wB(yB(e,t));throw TB(SB(t)+" is not iterable")},xB=se,CB=ss,EB=Gr,kB=_r,DB=Z2,PB=gC,IB=Ch,OB=Hr,i_=xo,MB=bg,FB=Eh,n_=xB.Array,$B=function(n){var e=kB(n),r=IB(this),s=arguments.length,a=s>1?arguments[1]:void 0,o=a!==void 0;o&&(a=CB(a,s>2?arguments[2]:void 0));var l=FB(e),u=0,c,d,f,p,v,y;if(l&&!(this==n_&&PB(l)))for(p=MB(e,l),v=p.next,d=r?new this:[];!(f=EB(v,p)).done;u++)y=o?DB(p,a,[f.value,u],!0):f.value,i_(d,u,y);else for(c=OB(e),d=r?new this(c):n_(c);c>u;u++)y=o?a(e[u],u):e[u],i_(d,u,y);return d.length=u,d},NB=vt,_C=NB("iterator"),TC=!1;try{s_=0,dm={next:function(){return{done:!!s_++}},return:function(){TC=!0}},dm[_C]=function(){return this},Array.from(dm,function(){throw 2})}catch(t){}xC=function(t,n){if(!n&&!TC)return!1;var e=!1;try{var r={};r[_C]=function(){return{next:function(){return{done:e=!0}}}},t(r)}catch(s){}return e},AB=ue,LB=$B,RB=xC,BB=!RB(function(t){Array.from(t)});AB({target:"Array",stat:!0,forced:BB},{from:LB});GB=Ve,HB=GB.Array.from,WB=HB,CC=WB;(function(t){t.exports=CC})(Hx);as=re(Hx.exports),EC={exports:{}},YB=Si,a_=To,kC=So;Tr.f;zB=gg,DC="Array Iterator",VB=kC.set,UB=kC.getterFor(DC);zB(Array,"Array",function(t,n){VB(this,{type:DC,target:YB(t),index:0,kind:n})},function(){var t=UB(this),n=t.target,e=t.kind,r=t.index++;return!n||r>=n.length?(t.target=void 0,{value:void 0,done:!0}):e=="keys"?{value:r,done:!1}:e=="values"?{value:n[r],done:!1}:{value:[r,n[r]],done:!1}},"values");a_.Arguments=a_.Array;jB=Eh,qB=jB,XB={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},KB=XB,ZB=se,QB=vn,JB=ns,o_=To,eG=vt,l_=eG("toStringTag");for(Ed in KB)hm=ZB[Ed],kd=hm&&hm.prototype,kd&&QB(kd)!==l_&&JB(kd,l_,Ed),o_[Ed]=o_.Array;tG=qB,rG=tG,iG=rG,nG=iG,sG=nG,aG=sG;(function(t){t.exports=aG})(EC);Ai=re(EC.exports),PC={exports:{}},oG=Vs,Ks=Array.isArray||function(n){return oG(n)=="Array"},Uu={},lG=sC,uG=vg,cG=uG.concat("length","prototype");Uu.f=Object.getOwnPropertyNames||function(n){return lG(n,cG)};wg={},dG=se,u_=zu,hG=Hr,fG=xo,pG=dG.Array,mG=Math.max,IC=function(t,n,e){for(var r=hG(t),s=u_(n,r),a=u_(e===void 0?r:e,r),o=pG(mG(a-s,0)),l=0;s<a;s++,l++)fG(o,l,t[s]);return o.length=l,o},vG=Vs,gG=Si,OC=Uu.f,yG=IC,MC=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],bG=function(t){try{return OC(t)}catch(n){return yG(MC)}};wg.f=function(n){return MC&&vG(n)=="Window"?bG(n):OC(gG(n))};kh={};kh.f=Object.getOwnPropertySymbols;wG=Be,ju=wG([].slice),Dh={},SG=vt;Dh.f=SG;c_=Ve,_G=Bt,TG=Dh,xG=Tr.f,wt=function(t){var n=c_.Symbol||(c_.Symbol={});_G(n,t)||xG(n,t,{value:TG.f(t)})},CG=se,d_=Ks,EG=Ch,kG=Gt,DG=vt,PG=DG("species"),h_=CG.Array,IG=function(t){var n;return d_(t)&&(n=t.constructor,EG(n)&&(n===h_||d_(n.prototype))?n=void 0:kG(n)&&(n=n[PG],n===null&&(n=void 0))),n===void 0?h_:n},OG=IG,Ph=function(t,n){return new(OG(t))(n===0?0:n)},MG=ss,FG=Be,$G=Sh,NG=_r,AG=Hr,LG=Ph,f_=FG([].push),zn=function(t){var n=t==1,e=t==2,r=t==3,s=t==4,a=t==6,o=t==7,l=t==5||a;return function(u,c,d,f){for(var p=NG(u),v=$G(p),y=MG(c,d),_=AG(v),S=0,x=f||LG,D=n?x(u,_):e||o?x(u,0):void 0,E,P;_>S;S++)if((l||S in v)&&(E=v[S],P=y(E,S,p),t))if(n)D[S]=P;else if(P)switch(t){case 3:return!0;case 5:return E;case 6:return S;case 2:f_(D,E)}else switch(t){case 4:return!1;case 7:f_(D,E)}return a?-1:r||s?s:D}},gn={forEach:zn(0),map:zn(1),filter:zn(2),some:zn(3),every:zn(4),find:zn(5),findIndex:zn(6),filterReject:zn(7)},Co=ue,Sg=se,RG=ri,BG=js,qu=Gr,GG=Be,uo=Ht,Ls=og,_g=Re,Ct=Bt,HG=Ks,WG=Dt,YG=Gt,zG=Qe,bv=hg,wv=Br,VG=_r,Ih=Si,Tg=bh,FC=Ni,Sv=Us,Su=Xs,$C=Vu,UG=Uu,NC=wg,_v=kh,AC=qs,LC=Tr,jG=_h,RC=Wu,qG=ju,Tv=xh,Xu=vh.exports,XG=wh,BC=Hu,p_=gh,GC=vt,KG=Dh,ZG=wt,QG=_o,HC=So,Oh=gn.forEach,yr=XG("hidden"),Mh="Symbol",_u="prototype",m_=GC("toPrimitive"),JG=HC.set,v_=HC.getterFor(Mh),vi=Object[_u],on=Sg.Symbol,Xn=on&&on[_u],WC=Sg.TypeError,fm=Sg.QObject,su=RG("JSON","stringify"),YC=AC.f,qn=LC.f,zC=NC.f,eH=RC.f,VC=GG([].push),dn=Xu("symbols"),Ku=Xu("op-symbols"),pm=Xu("string-to-symbol-registry"),mm=Xu("symbol-to-string-registry"),tH=Xu("wks"),xv=!fm||!fm[_u]||!fm[_u].findChild,Cv=uo&&_g(function(){return Su(qn({},"a",{get:function(){return qn(this,"a",{value:7}).a}})).a!=7})?function(t,n,e){var r=YC(vi,n);r&&delete vi[n],qn(t,n,e),r&&t!==vi&&qn(vi,n,r)}:qn,vm=function(t,n){var e=dn[t]=Su(Xn);return JG(e,{type:Mh,tag:t,description:n}),uo||(e.description=n),e},Fh=function(n,e,r){n===vi&&Fh(Ku,e,r),wv(n);var s=Tg(e);return wv(r),Ct(dn,s)?(r.enumerable?(Ct(n,yr)&&n[yr][s]&&(n[yr][s]=!1),r=Su(r,{enumerable:Sv(0,!1)})):(Ct(n,yr)||qn(n,yr,Sv(1,{})),n[yr][s]=!0),Cv(n,s,r)):qn(n,s,r)},xg=function(n,e){wv(n);var r=Ih(e),s=$C(r).concat(Cg(r));return Oh(s,function(a){(!uo||qu(UC,r,a))&&Fh(n,a,r[a])}),n},rH=function(n,e){return e===void 0?Su(n):xg(Su(n),e)},UC=function(n){var e=Tg(n),r=qu(eH,this,e);return this===vi&&Ct(dn,e)&&!Ct(Ku,e)?!1:r||!Ct(this,e)||!Ct(dn,e)||Ct(this,yr)&&this[yr][e]?r:!0},jC=function(n,e){var r=Ih(n),s=Tg(e);if(!(r===vi&&Ct(dn,s)&&!Ct(Ku,s))){var a=YC(r,s);return a&&Ct(dn,s)&&!(Ct(r,yr)&&r[yr][s])&&(a.enumerable=!0),a}},qC=function(n){var e=zC(Ih(n)),r=[];return Oh(e,function(s){!Ct(dn,s)&&!Ct(BC,s)&&VC(r,s)}),r},Cg=function(n){var e=n===vi,r=zC(e?Ku:Ih(n)),s=[];return Oh(r,function(a){Ct(dn,a)&&(!e||Ct(vi,a))&&VC(s,dn[a])}),s};Ls||(on=function(){if(zG(Xn,this))throw WC("Symbol is not a constructor");var n=!arguments.length||arguments[0]===void 0?void 0:FC(arguments[0]),e=p_(n),r=function(s){this===vi&&qu(r,Ku,s),Ct(this,yr)&&Ct(this[yr],e)&&(this[yr][e]=!1),Cv(this,e,Sv(1,s))};return uo&&xv&&Cv(vi,e,{configurable:!0,set:r}),vm(e,n)},Xn=on[_u],Tv(Xn,"toString",function(){return v_(this).tag}),Tv(on,"withoutSetter",function(t){return vm(p_(t),t)}),RC.f=UC,LC.f=Fh,jG.f=xg,AC.f=jC,UG.f=NC.f=qC,_v.f=Cg,KG.f=function(t){return vm(GC(t),t)},uo&&qn(Xn,"description",{configurable:!0,get:function(){return v_(this).description}}));Co({global:!0,wrap:!0,forced:!Ls,sham:!Ls},{Symbol:on});Oh($C(tH),function(t){ZG(t)});Co({target:Mh,stat:!0,forced:!Ls},{for:function(t){var n=FC(t);if(Ct(pm,n))return pm[n];var e=on(n);return pm[n]=e,mm[e]=n,e},keyFor:function(n){if(!bv(n))throw WC(n+" is not a symbol");if(Ct(mm,n))return mm[n]},useSetter:function(){xv=!0},useSimple:function(){xv=!1}});Co({target:"Object",stat:!0,forced:!Ls,sham:!uo},{create:rH,defineProperty:Fh,defineProperties:xg,getOwnPropertyDescriptor:jC});Co({target:"Object",stat:!0,forced:!Ls},{getOwnPropertyNames:qC,getOwnPropertySymbols:Cg});Co({target:"Object",stat:!0,forced:_g(function(){_v.f(1)})},{getOwnPropertySymbols:function(n){return _v.f(VG(n))}});su&&(g_=!Ls||_g(function(){var t=on();return su([t])!="[null]"||su({a:t})!="{}"||su(Object(t))!="{}"}),Co({target:"JSON",stat:!0,forced:g_},{stringify:function(n,e,r){var s=qG(arguments),a=e;if(!(!YG(e)&&n===void 0||bv(n)))return HG(e)||(e=function(o,l){if(WG(a)&&(l=qu(a,this,o,l)),!bv(l))return l}),s[1]=e,BG(su,null,s)}}));Xn[m_]||(y_=Xn.valueOf,Tv(Xn,m_,function(t){return qu(y_,this)}));QG(on,Mh);BC[yr]=!0;iH=Ve,nH=iH.Object.getOwnPropertySymbols,sH=nH,aH=sH;(function(t){t.exports=aH})(PC);co=re(PC.exports),XC={exports:{}},KC={exports:{}},oH=ue,lH=Re,uH=Si,ZC=qs.f,QC=Ht,cH=lH(function(){ZC(1)}),dH=!QC||cH;oH({target:"Object",stat:!0,forced:dH,sham:!QC},{getOwnPropertyDescriptor:function(n,e){return ZC(uH(n),e)}});hH=Ve,JC=hH.Object,fH=KC.exports=function(n,e){return JC.getOwnPropertyDescriptor(n,e)};JC.getOwnPropertyDescriptor.sham&&(fH.sham=!0);pH=KC.exports,mH=pH;(function(t){t.exports=mH})(XC);Eo=re(XC.exports),eE={exports:{}},vH=ri,gH=Be,yH=Uu,bH=kh,wH=Br,SH=gH([].concat),Eg=vH("Reflect","ownKeys")||function(n){var e=yH.f(wH(n)),r=bH.f;return r?SH(e,r(n)):e},_H=ue,TH=Ht,xH=Eg,CH=Si,EH=qs,kH=xo;_H({target:"Object",stat:!0,sham:!TH},{getOwnPropertyDescriptors:function(n){for(var e=CH(n),r=EH.f,s=xH(e),a={},o=0,l,u;s.length>o;)u=r(e,l=s[o++]),u!==void 0&&kH(a,l,u);return a}});DH=Ve,PH=DH.Object.getOwnPropertyDescriptors,IH=PH,OH=IH;(function(t){t.exports=OH})(eE);ho=re(eE.exports),tE={exports:{}},rE={exports:{}},MH=ue,FH=Ht,b_=_h.f;MH({target:"Object",stat:!0,forced:Object.defineProperties!==b_,sham:!FH},{defineProperties:b_});$H=Ve,iE=$H.Object,NH=rE.exports=function(n,e){return iE.defineProperties(n,e)};iE.defineProperties.sham&&(NH.sham=!0);AH=rE.exports,LH=AH;(function(t){t.exports=LH})(tE);kg=re(tE.exports),nE={exports:{}},sE={exports:{}},RH=ue,BH=Ht,w_=Tr.f;RH({target:"Object",stat:!0,forced:Object.defineProperty!==w_,sham:!BH},{defineProperty:w_});GH=Ve,aE=GH.Object,HH=sE.exports=function(n,e,r){return aE.defineProperty(n,e,r)};aE.defineProperty.sham&&(HH.sham=!0);WH=sE.exports,oE=WH;(function(t){t.exports=oE})(nE);Zu=re(nE.exports);Dg={exports:{}},YH=oE,zH=YH,VH=zH,UH=VH;(function(t){t.exports=UH})(Dg);$h=re(Dg.exports);lE={exports:{}},jH=ue,qH=Ks;jH({target:"Array",stat:!0},{isArray:qH});XH=Ve,KH=XH.Array.isArray,ZH=KH,uE=ZH,QH=uE,JH=QH,eW=JH,tW=eW;(function(t){t.exports=tW})(lE);cE=re(lE.exports);Nh={exports:{}},iW=Re,nW=vt,sW=wo,aW=nW("species"),Qu=function(t){return sW>=51||!iW(function(){var n=[],e=n.constructor={};return e[aW]=function(){return{foo:1}},n[t](Boolean).foo!==1})},oW=ue,lW=se,uW=Re,cW=Ks,dW=Gt,hW=_r,fW=Hr,__=xo,pW=Ph,mW=Qu,vW=vt,gW=wo,dE=vW("isConcatSpreadable"),T_=9007199254740991,x_="Maximum allowed index exceeded",C_=lW.TypeError,yW=gW>=51||!uW(function(){var t=[];return t[dE]=!1,t.concat()[0]!==t}),bW=mW("concat"),wW=function(t){if(!dW(t))return!1;var n=t[dE];return n!==void 0?!!n:cW(t)},SW=!yW||!bW;oW({target:"Array",proto:!0,forced:SW},{concat:function(n){var e=hW(this),r=pW(e,0),s=0,a,o,l,u,c;for(a=-1,l=arguments.length;a<l;a++)if(c=a===-1?e:arguments[a],wW(c)){if(u=fW(c),s+u>T_)throw C_(x_);for(o=0;o<u;o++,s++)o in c&&__(r,s,c[o])}else{if(s>=T_)throw C_(x_);__(r,s++,c)}return r.length=s,r}});_W=wt;_W("asyncIterator");TW=wt;TW("hasInstance");xW=wt;xW("isConcatSpreadable");CW=wt;CW("iterator");EW=wt;EW("match");kW=wt;kW("matchAll");DW=wt;DW("replace");PW=wt;PW("search");IW=wt;IW("species");OW=wt;OW("split");MW=wt;MW("toPrimitive");FW=wt;FW("toStringTag");$W=wt;$W("unscopables");NW=se,AW=_o;AW(NW.JSON,"JSON",!0);LW=Ve,RW=LW.Symbol,BW=RW,hE=BW,GW=hE,HW=GW,WW=wt;WW("asyncDispose");YW=wt;YW("dispose");zW=wt;zW("matcher");VW=wt;VW("metadata");UW=wt;UW("observable");jW=wt;jW("patternMatch");qW=wt;qW("replaceAll");XW=HW,KW=XW;(function(t){t.exports=KW})(Nh);to=re(Nh.exports);Pg={exports:{}},QW=ue,JW=se,E_=Ks,eY=Ch,tY=Gt,k_=zu,rY=Hr,iY=Si,nY=xo,sY=vt,aY=Qu,oY=ju,lY=aY("slice"),uY=sY("species"),gm=JW.Array,cY=Math.max;QW({target:"Array",proto:!0,forced:!lY},{slice:function(n,e){var r=iY(this),s=rY(r),a=k_(n,s),o=k_(e===void 0?s:e,s),l,u,c;if(E_(r)&&(l=r.constructor,eY(l)&&(l===gm||E_(l.prototype))?l=void 0:tY(l)&&(l=l[uY],l===null&&(l=void 0)),l===gm||l===void 0))return oY(r,a,o);for(u=new(l===void 0?gm:l)(cY(o-a,0)),c=0;a<o;a++,c++)a in r&&nY(u,c,r[a]);return u.length=c,u}});dY=Ve,ut=function(t){return dY[t+"Prototype"]},hY=ut,fY=hY("Array").slice,pY=Qe,mY=fY,ym=Array.prototype,vY=function(t){var n=t.slice;return t===ym||pY(ym,t)&&n===ym.slice?mY:n},gY=vY,fE=gY,yY=fE,bY=yY,wY=bY,SY=wY;(function(t){t.exports=SY})(Pg);_Y=re(Pg.exports),pE={exports:{}},TY=CC,xY=TY,CY=xY,EY=CY;(function(t){t.exports=EY})(pE);mE=re(pE.exports);Ig={exports:{}},DY=Dh,PY=DY.f("iterator"),IY=PY,gE=IY,OY=gE,MY=OY,FY=MY,$Y=FY;(function(t){t.exports=$Y})(Ig);NY=re(Ig.exports);yE={exports:{}};(function(t){t.exports=hE})(yE);yn=re(yE.exports),bE={exports:{}},BY=ut,GY=BY("Array").concat,HY=Qe,WY=GY,bm=Array.prototype,YY=function(t){var n=t.concat;return t===bm||HY(bm,t)&&n===bm.concat?WY:n},zY=YY,VY=zY;(function(t){t.exports=VY})(bE);rt=re(bE.exports),wE={exports:{}};(function(t){t.exports=fE})(wE);sr=re(wE.exports),SE={exports:{}},UY=ue,jY=Eg;UY({target:"Reflect",stat:!0},{ownKeys:jY});qY=Ve,XY=qY.Reflect.ownKeys,KY=XY,ZY=KY;(function(t){t.exports=ZY})(SE);_E=re(SE.exports),TE={exports:{}};(function(t){t.exports=uE})(TE);pe=re(TE.exports),xE={exports:{}},QY=ue,JY=gn.map,e3=Qu,t3=e3("map");QY({target:"Array",proto:!0,forced:!t3},{map:function(n){return JY(this,n,arguments.length>1?arguments[1]:void 0)}});r3=ut,i3=r3("Array").map,n3=Qe,s3=i3,wm=Array.prototype,a3=function(t){var n=t.map;return t===wm||n3(wm,t)&&n===wm.map?s3:n},o3=a3,l3=o3;(function(t){t.exports=l3})(xE);He=re(xE.exports),CE={exports:{}},u3=ue,c3=_r,EE=Vu,d3=Re,h3=d3(function(){EE(1)});u3({target:"Object",stat:!0,forced:h3},{keys:function(n){return EE(c3(n))}});f3=Ve,p3=f3.Object.keys,m3=p3,v3=m3;(function(t){t.exports=v3})(CE);kt=re(CE.exports),kE={exports:{}},g3=ue,y3=se,b3=Be,DE=y3.Date,w3=b3(DE.prototype.getTime);g3({target:"Date",stat:!0},{now:function(){return w3(new DE)}});S3=Ve,_3=S3.Date.now,T3=_3,x3=T3;(function(t){t.exports=x3})(kE);Nr=re(kE.exports),PE={exports:{}},C3=se,IE=Be,E3=wi,k3=Gt,D3=Bt,D_=ju,P3=Bu,OE=C3.Function,I3=IE([].concat),O3=IE([].join),Sm={},M3=function(t,n,e){if(!D3(Sm,n)){for(var r=[],s=0;s<n;s++)r[s]="a["+s+"]";Sm[n]=OE("C,a","return new C("+O3(r,",")+")")}return Sm[n](t,e)},ME=P3?OE.bind:function(n){var e=E3(this),r=e.prototype,s=D_(arguments,1),a=function(){var l=I3(s,D_(arguments));return this instanceof a?M3(e,l.length,l):e.apply(n,l)};return k3(r)&&(a.prototype=r),a},F3=ue,P_=ME;F3({target:"Function",proto:!0,forced:Function.bind!==P_},{bind:P_});$3=ut,N3=$3("Function").bind,A3=Qe,L3=N3,_m=Function.prototype,R3=function(t){var n=t.bind;return t===_m||A3(_m,t)&&n===_m.bind?L3:n},B3=R3,FE=B3;(function(t){t.exports=FE})(PE);R=re(PE.exports),$E={exports:{}},G3=Re,ko=function(t,n){var e=[][t];return!!e&&G3(function(){e.call(null,n||function(){return 1},1)})},H3=gn.forEach,W3=ko,Y3=W3("forEach"),z3=Y3?[].forEach:function(n){return H3(this,n,arguments.length>1?arguments[1]:void 0)},V3=ue,I_=z3;V3({target:"Array",proto:!0,forced:[].forEach!=I_},{forEach:I_});U3=ut,j3=U3("Array").forEach,q3=j3,X3=q3,K3=vn,Z3=Bt,Q3=Qe,J3=X3,Tm=Array.prototype,ez={DOMTokenList:!0,NodeList:!0},NE=function(t){var n=t.forEach;return t===Tm||Q3(Tm,t)&&n===Tm.forEach||Z3(ez,K3(t))?J3:n};(function(t){t.exports=NE})($E);K=re($E.exports),AE={exports:{}},tz=ue,rz=Be,iz=Ks,nz=rz([].reverse),O_=[1,2];tz({target:"Array",proto:!0,forced:String(O_)===String(O_.reverse())},{reverse:function(){return iz(this)&&(this.length=this.length),nz(this)}});sz=ut,az=sz("Array").reverse,oz=Qe,lz=az,xm=Array.prototype,uz=function(t){var n=t.reverse;return t===xm||oz(xm,t)&&n===xm.reverse?lz:n},cz=uz,LE=cz;(function(t){t.exports=LE})(AE);dz=re(AE.exports),RE={exports:{}},hz=ue,fz=se,pz=zu,mz=Gu,vz=Hr,gz=_r,yz=Ph,bz=xo,wz=Qu,Sz=wz("splice"),_z=fz.TypeError,Tz=Math.max,xz=Math.min,Cz=9007199254740991,Ez="Maximum allowed length exceeded";hz({target:"Array",proto:!0,forced:!Sz},{splice:function(n,e){var r=gz(this),s=vz(r),a=pz(n,s),o=arguments.length,l,u,c,d,f,p;if(o===0?l=u=0:o===1?(l=0,u=s-a):(l=o-2,u=xz(Tz(mz(e),0),s-a)),s+l-u>Cz)throw _z(Ez);for(c=yz(r,u),d=0;d<u;d++)f=a+d,f in r&&bz(c,d,r[f]);if(c.length=u,l<u){for(d=a;d<s-u;d++)f=d+u,p=d+l,f in r?r[p]=r[f]:delete r[p];for(d=s;d>s-u+l;d--)delete r[d-1]}else if(l>u)for(d=s-u;d>a;d--)f=d+u-1,p=d+l-1,f in r?r[p]=r[f]:delete r[p];for(d=0;d<l;d++)r[d+a]=arguments[d+2];return r.length=s-u+l,c}});kz=ut,Dz=kz("Array").splice,Pz=Qe,Iz=Dz,Cm=Array.prototype,Oz=function(t){var n=t.splice;return t===Cm||Pz(Cm,t)&&n===Cm.splice?Iz:n},Mz=Oz,Fz=Mz;(function(t){t.exports=Fz})(RE);cr=re(RE.exports),BE={exports:{}},M_=Ht,$z=Be,Nz=Gr,Az=Re,Em=Vu,Lz=kh,Rz=Wu,Bz=_r,Gz=Sh,ja=Object.assign,F_=Object.defineProperty,Hz=$z([].concat),Wz=!ja||Az(function(){if(M_&&ja({b:1},ja(F_({},"a",{enumerable:!0,get:function(){F_(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var t={},n={},e=Symbol(),r="abcdefghijklmnopqrst";return t[e]=7,r.split("").forEach(function(s){n[s]=s}),ja({},t)[e]!=7||Em(ja({},n)).join("")!=r})?function(n,e){for(var r=Bz(n),s=arguments.length,a=1,o=Lz.f,l=Rz.f;s>a;)for(var u=Gz(arguments[a++]),c=o?Hz(Em(u),o(u)):Em(u),d=c.length,f=0,p;d>f;)p=c[f++],(!M_||Nz(l,u,p))&&(r[p]=u[p]);return r}:ja,Yz=ue,$_=Wz;Yz({target:"Object",stat:!0,forced:Object.assign!==$_},{assign:$_});zz=Ve,Vz=zz.Object.assign,Uz=Vz,jz=Uz;(function(t){t.exports=jz})(BE);hn=re(BE.exports),GE={exports:{}},qz=ue,Xz=mg.includes;qz({target:"Array",proto:!0},{includes:function(n){return Xz(this,n,arguments.length>1?arguments[1]:void 0)}});Kz=ut,Zz=Kz("Array").includes,Qz=Gt,Jz=Vs,e4=vt,t4=e4("match"),r4=function(t){var n;return Qz(t)&&((n=t[t4])!==void 0?!!n:Jz(t)=="RegExp")},i4=se,n4=r4,s4=i4.TypeError,a4=function(t){if(n4(t))throw s4("The method doesn't accept regular expressions");return t},o4=vt,l4=o4("match"),u4=function(t){var n=/./;try{"/./"[t](n)}catch(e){try{return n[l4]=!1,"/./"[t](n)}catch(r){}}return!1},c4=ue,d4=Be,h4=a4,f4=bo,N_=Ni,p4=u4,m4=d4("".indexOf);c4({target:"String",proto:!0,forced:!p4("includes")},{includes:function(n){return!!~m4(N_(f4(this)),N_(h4(n)),arguments.length>1?arguments[1]:void 0)}});v4=ut,g4=v4("String").includes,A_=Qe,y4=Zz,b4=g4,km=Array.prototype,Dm=String.prototype,w4=function(t){var n=t.includes;return t===km||A_(km,t)&&n===km.includes?y4:typeof t=="string"||t===Dm||A_(Dm,t)&&n===Dm.includes?b4:n},S4=w4,_4=S4;(function(t){t.exports=_4})(GE);es=re(GE.exports),HE={exports:{}},T4=ue,x4=Re,C4=_r,WE=Th,E4=uC,k4=x4(function(){WE(1)});T4({target:"Object",stat:!0,forced:k4,sham:!E4},{getPrototypeOf:function(n){return WE(C4(n))}});D4=Ve,P4=D4.Object.getPrototypeOf,I4=P4,YE=I4;(function(t){t.exports=YE})(HE);L_=re(HE.exports),zE={exports:{}},O4=ue,M4=gn.filter,F4=Qu,$4=F4("filter");O4({target:"Array",proto:!0,forced:!$4},{filter:function(n){return M4(this,n,arguments.length>1?arguments[1]:void 0)}});N4=ut,A4=N4("Array").filter,L4=Qe,R4=A4,Pm=Array.prototype,B4=function(t){var n=t.filter;return t===Pm||L4(Pm,t)&&n===Pm.filter?R4:n},G4=B4,H4=G4;(function(t){t.exports=H4})(zE);oe=re(zE.exports),VE={exports:{}},W4=Ht,UE=Be,Y4=Vu,z4=Si,V4=Wu.f,U4=UE(V4),j4=UE([].push),R_=function(t){return function(n){for(var e=z4(n),r=Y4(e),s=r.length,a=0,o=[],l;s>a;)l=r[a++],(!W4||U4(e,l))&&j4(o,t?[l,e[l]]:e[l]);return o}},q4={entries:R_(!0),values:R_(!1)},X4=ue,K4=q4.values;X4({target:"Object",stat:!0},{values:function(n){return K4(n)}});Z4=Ve,Q4=Z4.Object.values,J4=Q4,eV=J4;(function(t){t.exports=eV})(VE);Og=re(VE.exports),jE={exports:{}},Ah=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`,tV=Be,rV=bo,iV=Ni,nV=Ah,B_=tV("".replace),Jd="["+nV+"]",sV=RegExp("^"+Jd+Jd+"*"),aV=RegExp(Jd+Jd+"*$"),Im=function(t){return function(n){var e=iV(rV(n));return t&1&&(e=B_(e,sV,"")),t&2&&(e=B_(e,aV,"")),e}},Mg={start:Im(1),end:Im(2),trim:Im(3)},qE=se,oV=Re,lV=Be,uV=Ni,cV=Mg.trim,G_=Ah,fu=qE.parseInt,H_=qE.Symbol,W_=H_&&H_.iterator,XE=/^[+-]?0x/i,dV=lV(XE.exec),hV=fu(G_+"08")!==8||fu(G_+"0x16")!==22||W_&&!oV(function(){fu(Object(W_))}),fV=hV?function(n,e){var r=cV(uV(n));return fu(r,e>>>0||(dV(XE,r)?16:10))}:fu,pV=ue,Y_=fV;pV({global:!0,forced:parseInt!=Y_},{parseInt:Y_});mV=Ve,vV=mV.parseInt,gV=vV,yV=gV;(function(t){t.exports=yV})(jE);Ar=re(jE.exports),KE={exports:{}},bV=ue,wV=Be,SV=mg.indexOf,_V=ko,kv=wV([].indexOf),z_=!!kv&&1/kv([1],1,-0)<0,TV=_V("indexOf");bV({target:"Array",proto:!0,forced:z_||!TV},{indexOf:function(n){var e=arguments.length>1?arguments[1]:void 0;return z_?kv(this,n,e)||0:SV(this,n,e)}});xV=ut,CV=xV("Array").indexOf,EV=Qe,kV=CV,Om=Array.prototype,DV=function(t){var n=t.indexOf;return t===Om||EV(Om,t)&&n===Om.indexOf?kV:n},PV=DV,IV=PV;(function(t){t.exports=IV})(KE);Ze=re(KE.exports),ZE={exports:{}},OV=nC.PROPER,MV=Re,V_=Ah,U_="\u200B\x85\u180E",FV=function(t){return MV(function(){return!!V_[t]()||U_[t]()!==U_||OV&&V_[t].name!==t})},$V=ue,NV=Mg.trim,AV=FV;$V({target:"String",proto:!0,forced:AV("trim")},{trim:function(){return NV(this)}});LV=ut,RV=LV("String").trim,BV=Qe,GV=RV,Mm=String.prototype,HV=function(t){var n=t.trim;return typeof t=="string"||t===Mm||BV(Mm,t)&&n===Mm.trim?GV:n},WV=HV,YV=WV;(function(t){t.exports=YV})(ZE);Fm=re(ZE.exports),QE={exports:{}},zV=ue,VV=Ht,UV=Xs;zV({target:"Object",stat:!0,sham:!VV},{create:UV});jV=Ve,qV=jV.Object,XV=function(n,e){return qV.create(n,e)},KV=XV,JE=KV;(function(t){t.exports=JE})(QE);Ju=re(QE.exports),ek={exports:{}},ZV=ue,QV=se,JV=ri,eU=js,ec=Be,tU=Re,rU=QV.Array,eh=JV("JSON","stringify"),Dd=ec(/./.exec),j_=ec("".charAt),iU=ec("".charCodeAt),nU=ec("".replace),sU=ec(1 .toString),aU=/[\uD800-\uDFFF]/g,q_=/^[\uD800-\uDBFF]$/,X_=/^[\uDC00-\uDFFF]$/,oU=function(t,n,e){var r=j_(e,n-1),s=j_(e,n+1);return Dd(q_,t)&&!Dd(X_,s)||Dd(X_,t)&&!Dd(q_,r)?"\\u"+sU(iU(t,0),16):t},lU=tU(function(){return eh("\uDF06\uD834")!=='"\\udf06\\ud834"'||eh("\uDEAD")!=='"\\udead"'});eh&&ZV({target:"JSON",stat:!0,forced:lU},{stringify:function(n,e,r){for(var s=0,a=arguments.length,o=rU(a);s<a;s++)o[s]=arguments[s];var l=eU(eh,null,o);return typeof l=="string"?nU(l,aU,oU):l}});Dv=Ve,uU=js;Dv.JSON||(Dv.JSON={stringify:JSON.stringify});cU=function(n,e,r){return uU(Dv.JSON.stringify,null,arguments)},dU=cU,hU=dU;(function(t){t.exports=hU})(ek);br=re(ek.exports),tk={exports:{}},fU=se,pU=fU.TypeError,rk=function(t,n){if(t<n)throw pU("Not enough arguments");return t},mU=ue,Pv=se,vU=js,gU=Dt,yU=is,bU=ju,wU=rk,SU=/MSIE .\./.test(yU),_U=Pv.Function,K_=function(t){return function(n,e){var r=wU(arguments.length,1)>2,s=gU(n)?n:_U(n),a=r?bU(arguments,2):void 0;return t(r?function(){vU(s,this,a)}:s,e)}};mU({global:!0,bind:!0,forced:SU},{setTimeout:K_(Pv.setTimeout),setInterval:K_(Pv.setInterval)});TU=Ve,xU=TU.setTimeout;(function(t){t.exports=xU})(tk);nr=re(tk.exports),ik={exports:{}},CU=_r,Z_=zu,EU=Hr,kU=function(n){for(var e=CU(this),r=EU(e),s=arguments.length,a=Z_(s>1?arguments[1]:void 0,r),o=s>2?arguments[2]:void 0,l=o===void 0?r:Z_(o,r);l>a;)e[a++]=n;return e},DU=ue,PU=kU;DU({target:"Array",proto:!0},{fill:PU});IU=ut,OU=IU("Array").fill,MU=Qe,FU=OU,$m=Array.prototype,$U=function(t){var n=t.fill;return t===$m||MU($m,t)&&n===$m.fill?FU:n},NU=$U,AU=NU;(function(t){t.exports=AU})(ik);nk=re(ik.exports),sk={exports:{}};(function(t){t.exports=n;function n(r){if(r)return e(r)}function e(r){for(var s in n.prototype)r[s]=n.prototype[s];return r}n.prototype.on=n.prototype.addEventListener=function(r,s){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(s),this},n.prototype.once=function(r,s){function a(){this.off(r,a),s.apply(this,arguments)}return a.fn=s,this.on(r,a),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(r,s){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var a=this._callbacks["$"+r];if(!a)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var o,l=0;l<a.length;l++)if(o=a[l],o===s||o.fn===s){a.splice(l,1);break}return a.length===0&&delete this._callbacks["$"+r],this},n.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var s=new Array(arguments.length-1),a=this._callbacks["$"+r],o=1;o<arguments.length;o++)s[o-1]=arguments[o];if(a){a=a.slice(0);for(var o=0,l=a.length;o<l;++o)a[o].apply(this,s)}return this},n.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]},n.prototype.hasListeners=function(r){return!!this.listeners(r).length}})(sk);Fg=sk.exports;typeof Object.assign!="function"?Iv=function(n){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(n),r=1;r<arguments.length;r++){var s=arguments[r];if(s!=null)for(var a in s)s.hasOwnProperty(a)&&(e[a]=s[a])}return e}:Iv=Object.assign;Rs=Iv,Q_=["","webkit","Moz","MS","ms","o"],LU=typeof document=="undefined"?{style:{}}:document.createElement("div"),RU="function",ro=Math.round,Bs=Math.abs,$g=Date.now;typeof window=="undefined"?ln={}:ln=window;ak=Lh(LU.style,"touchAction"),ok=ak!==void 0;lk="compute",uk="auto",Ov="manipulation",Ms="none",Tu="pan-x",xu="pan-y",Id=BU(),GU=/mobile|tablet|ip(ad|hone|od)|android/i,ck="ontouchstart"in ln,HU=Lh(ln,"PointerEvent")!==void 0,WU=ck&&GU.test(navigator.userAgent),tc="touch",YU="pen",Ng="mouse",zU="kinect",VU=25,hr=1,Zs=2,Et=4,wr=8,th=1,rc=2,ic=4,nc=8,fo=16,Fi=rc|ic,Fs=nc|fo,dk=Fi|Fs,hk=["x","y"],rh=["clientX","clientY"];fk=function(){function t(e,r){this.manager=e,this.set(r)}var n=t.prototype;return n.set=function(r){r===lk&&(r=this.compute()),ok&&this.manager.element.style&&Id[r]&&(this.manager.element.style[ak]=r),this.actions=r.toLowerCase().trim()},n.update=function(){this.set(this.manager.options.touchAction)},n.compute=function(){var r=[];return un(this.manager.recognizers,function(s){Rh(s.options.enable,[s])&&(r=r.concat(s.getTouchAction()))}),UU(r.join(" "))},n.preventDefaults=function(r){var s=r.srcEvent,a=r.offsetDirection;if(this.manager.session.prevented){s.preventDefault();return}var o=this.actions,l=Is(o,Ms)&&!Id[Ms],u=Is(o,xu)&&!Id[xu],c=Is(o,Tu)&&!Id[Tu];if(l){var d=r.pointers.length===1,f=r.distance<2,p=r.deltaTime<250;if(d&&f&&p)return}if(!(c&&u)&&(l||u&&a&Fi||c&&a&Fs))return this.preventSrc(s)},n.preventSrc=function(r){this.manager.session.prevented=!0,r.preventDefault()},t}();Do=function(){function t(e,r){var s=this;this.manager=e,this.callback=r,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(a){Rh(e.options.enable,[e])&&s.handler(a)},this.init()}var n=t.prototype;return n.handler=function(){},n.init=function(){this.evEl&&pu(this.element,this.evEl,this.domHandler),this.evTarget&&pu(this.target,this.evTarget,this.domHandler),this.evWin&&pu(eT(this.element),this.evWin,this.domHandler)},n.destroy=function(){this.evEl&&mu(this.element,this.evEl,this.domHandler),this.evTarget&&mu(this.target,this.evTarget,this.domHandler),this.evWin&&mu(eT(this.element),this.evWin,this.domHandler)},t}();JU={pointerdown:hr,pointermove:Zs,pointerup:Et,pointercancel:wr,pointerout:wr},ej={2:tc,3:YU,4:Ng,5:zU},gk="pointerdown",yk="pointermove pointerup pointercancel";ln.MSPointerEvent&&!ln.PointerEvent&&(gk="MSPointerDown",yk="MSPointerMove MSPointerUp MSPointerCancel");bk=function(t){ii(n,t);function n(){var r,s=n.prototype;return s.evEl=gk,s.evWin=yk,r=t.apply(this,arguments)||this,r.store=r.manager.session.pointerEvents=[],r}var e=n.prototype;return e.handler=function(s){var a=this.store,o=!1,l=s.type.toLowerCase().replace("ms",""),u=JU[l],c=ej[s.pointerType]||s.pointerType,d=c===tc,f=Gs(a,s.pointerId,"pointerId");u&hr&&(s.button===0||d)?f<0&&(a.push(s),f=a.length-1):u&(Et|wr)&&(o=!0),!(f<0)&&(a[f]=s,this.callback(this.manager,u,{pointers:a,changedPointers:[s],pointerType:c,srcEvent:s}),o&&a.splice(f,1))},n}(Do);tj={touchstart:hr,touchmove:Zs,touchend:Et,touchcancel:wr},rj="touchstart touchmove touchend touchcancel",Rg=function(t){ii(n,t);function n(){var r;return n.prototype.evTarget=rj,r=t.apply(this,arguments)||this,r.targetIds={},r}var e=n.prototype;return e.handler=function(s){var a=tj[s.type],o=ij.call(this,s,a);o&&this.callback(this.manager,a,{pointers:o[0],changedPointers:o[1],pointerType:tc,srcEvent:s})},n}(Do);nj={mousedown:hr,mousemove:Zs,mouseup:Et},sj="mousedown",aj="mousemove mouseup",Bg=function(t){ii(n,t);function n(){var r,s=n.prototype;return s.evEl=sj,s.evWin=aj,r=t.apply(this,arguments)||this,r.pressed=!1,r}var e=n.prototype;return e.handler=function(s){var a=nj[s.type];a&hr&&s.button===0&&(this.pressed=!0),a&Zs&&s.which!==1&&(a=Et),this.pressed&&(a&Et&&(this.pressed=!1),this.callback(this.manager,a,{pointers:[s],changedPointers:[s],pointerType:Ng,srcEvent:s}))},n}(Do),oj=2500,tT=25;wk=function(){var t=function(n){ii(e,n);function e(s,a){var o;return o=n.call(this,s,a)||this,o.handler=function(l,u,c){var d=c.pointerType===tc,f=c.pointerType===Ng;if(!(f&&c.sourceCapabilities&&c.sourceCapabilities.firesTouchEvents)){if(d)lj.call(Pd(Pd(o)),u,c);else if(f&&uj.call(Pd(Pd(o)),c))return;o.callback(l,u,c)}},o.touch=new Rg(o.manager,o.handler),o.mouse=new Bg(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}var r=e.prototype;return r.destroy=function(){this.touch.destroy(),this.mouse.destroy()},e}(Do);return t}();Yd=1,Jr=2,po=4,Qn=8,cn=Qn,ku=16,Oi=32,dj=1;sc=function(){function t(e){e===void 0&&(e={}),this.options=yi({enable:!0},e),this.id=hj(),this.manager=null,this.state=Yd,this.simultaneous={},this.requireFail=[]}var n=t.prototype;return n.set=function(r){return Rs(this.options,r),this.manager&&this.manager.touchAction.update(),this},n.recognizeWith=function(r){if(io(r,"recognizeWith",this))return this;var s=this.simultaneous;return r=Od(r,this),s[r.id]||(s[r.id]=r,r.recognizeWith(this)),this},n.dropRecognizeWith=function(r){return io(r,"dropRecognizeWith",this)?this:(r=Od(r,this),delete this.simultaneous[r.id],this)},n.requireFailure=function(r){if(io(r,"requireFailure",this))return this;var s=this.requireFail;return r=Od(r,this),Gs(s,r)===-1&&(s.push(r),r.requireFailure(this)),this},n.dropRequireFailure=function(r){if(io(r,"dropRequireFailure",this))return this;r=Od(r,this);var s=Gs(this.requireFail,r);return s>-1&&this.requireFail.splice(s,1),this},n.hasRequireFailures=function(){return this.requireFail.length>0},n.canRecognizeWith=function(r){return!!this.simultaneous[r.id]},n.emit=function(r){var s=this,a=this.state;function o(l){s.manager.emit(l,r)}a<Qn&&o(s.options.event+iT(a)),o(s.options.event),r.additionalEvent&&o(r.additionalEvent),a>=Qn&&o(s.options.event+iT(a))},n.tryEmit=function(r){if(this.canEmit())return this.emit(r);this.state=Oi},n.canEmit=function(){for(var r=0;r<this.requireFail.length;){if(!(this.requireFail[r].state&(Oi|Yd)))return!1;r++}return!0},n.recognize=function(r){var s=Rs({},r);if(!Rh(this.options.enable,[this,s])){this.reset(),this.state=Oi;return}this.state&(cn|ku|Oi)&&(this.state=Yd),this.state=this.process(s),this.state&(Jr|po|Qn|ku)&&this.tryEmit(s)},n.process=function(r){},n.getTouchAction=function(){},n.reset=function(){},t}(),Fv=function(t){ii(n,t);function n(r){var s;return r===void 0&&(r={}),s=t.call(this,yi({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},r))||this,s.pTime=!1,s.pCenter=!1,s._timer=null,s._input=null,s.count=0,s}var e=n.prototype;return e.getTouchAction=function(){return[Ov]},e.process=function(s){var a=this,o=this.options,l=s.pointers.length===o.pointers,u=s.distance<o.threshold,c=s.deltaTime<o.time;if(this.reset(),s.eventType&hr&&this.count===0)return this.failTimeout();if(u&&c&&l){if(s.eventType!==Et)return this.failTimeout();var d=this.pTime?s.timeStamp-this.pTime<o.interval:!0,f=!this.pCenter||ih(this.pCenter,s.center)<o.posThreshold;this.pTime=s.timeStamp,this.pCenter=s.center,!f||!d?this.count=1:this.count+=1,this._input=s;var p=this.count%o.taps;if(p===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){a.state=cn,a.tryEmit()},o.interval),Jr):cn}return Oi},e.failTimeout=function(){var s=this;return this._timer=setTimeout(function(){s.state=Oi},this.options.interval),Oi},e.reset=function(){clearTimeout(this._timer)},e.emit=function(){this.state===cn&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},n}(sc),mo=function(t){ii(n,t);function n(r){return r===void 0&&(r={}),t.call(this,yi({pointers:1},r))||this}var e=n.prototype;return e.attrTest=function(s){var a=this.options.pointers;return a===0||s.pointers.length===a},e.process=function(s){var a=this.state,o=s.eventType,l=a&(Jr|po),u=this.attrTest(s);return l&&(o&wr||!u)?a|ku:l||u?o&Et?a|Qn:a&Jr?a|po:Jr:Oi},n}(sc);Gg=function(t){ii(n,t);function n(r){var s;return r===void 0&&(r={}),s=t.call(this,yi({event:"pan",threshold:10,pointers:1,direction:dk},r))||this,s.pX=null,s.pY=null,s}var e=n.prototype;return e.getTouchAction=function(){var s=this.options.direction,a=[];return s&Fi&&a.push(xu),s&Fs&&a.push(Tu),a},e.directionTest=function(s){var a=this.options,o=!0,l=s.distance,u=s.direction,c=s.deltaX,d=s.deltaY;return u&a.direction||(a.direction&Fi?(u=c===0?th:c<0?rc:ic,o=c!==this.pX,l=Math.abs(s.deltaX)):(u=d===0?th:d<0?nc:fo,o=d!==this.pY,l=Math.abs(s.deltaY))),s.direction=u,o&&l>a.threshold&&u&a.direction},e.attrTest=function(s){return mo.prototype.attrTest.call(this,s)&&(this.state&Jr||!(this.state&Jr)&&this.directionTest(s))},e.emit=function(s){this.pX=s.deltaX,this.pY=s.deltaY;var a=Sk(s.direction);a&&(s.additionalEvent=this.options.event+a),t.prototype.emit.call(this,s)},n}(mo),_k=function(t){ii(n,t);function n(r){return r===void 0&&(r={}),t.call(this,yi({event:"swipe",threshold:10,velocity:.3,direction:Fi|Fs,pointers:1},r))||this}var e=n.prototype;return e.getTouchAction=function(){return Gg.prototype.getTouchAction.call(this)},e.attrTest=function(s){var a=this.options.direction,o;return a&(Fi|Fs)?o=s.overallVelocity:a&Fi?o=s.overallVelocityX:a&Fs&&(o=s.overallVelocityY),t.prototype.attrTest.call(this,s)&&a&s.offsetDirection&&s.distance>this.options.threshold&&s.maxPointers===this.options.pointers&&Bs(o)>this.options.velocity&&s.eventType&Et},e.emit=function(s){var a=Sk(s.offsetDirection);a&&this.manager.emit(this.options.event+a,s),this.manager.emit(this.options.event,s)},n}(mo),Tk=function(t){ii(n,t);function n(r){return r===void 0&&(r={}),t.call(this,yi({event:"pinch",threshold:0,pointers:2},r))||this}var e=n.prototype;return e.getTouchAction=function(){return[Ms]},e.attrTest=function(s){return t.prototype.attrTest.call(this,s)&&(Math.abs(s.scale-1)>this.options.threshold||this.state&Jr)},e.emit=function(s){if(s.scale!==1){var a=s.scale<1?"in":"out";s.additionalEvent=this.options.event+a}t.prototype.emit.call(this,s)},n}(mo),xk=function(t){ii(n,t);function n(r){return r===void 0&&(r={}),t.call(this,yi({event:"rotate",threshold:0,pointers:2},r))||this}var e=n.prototype;return e.getTouchAction=function(){return[Ms]},e.attrTest=function(s){return t.prototype.attrTest.call(this,s)&&(Math.abs(s.rotation)>this.options.threshold||this.state&Jr)},n}(mo),Ck=function(t){ii(n,t);function n(r){var s;return r===void 0&&(r={}),s=t.call(this,yi({event:"press",pointers:1,time:251,threshold:9},r))||this,s._timer=null,s._input=null,s}var e=n.prototype;return e.getTouchAction=function(){return[uk]},e.process=function(s){var a=this,o=this.options,l=s.pointers.length===o.pointers,u=s.distance<o.threshold,c=s.deltaTime>o.time;if(this._input=s,!u||!l||s.eventType&(Et|wr)&&!c)this.reset();else if(s.eventType&hr)this.reset(),this._timer=setTimeout(function(){a.state=cn,a.tryEmit()},o.time);else if(s.eventType&Et)return cn;return Oi},e.reset=function(){clearTimeout(this._timer)},e.emit=function(s){this.state===cn&&(s&&s.eventType&Et?this.manager.emit(this.options.event+"up",s):(this._input.timeStamp=$g(),this.manager.emit(this.options.event,this._input)))},n}(sc),Ek={domEvents:!1,touchAction:lk,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},nT=[[xk,{enable:!1}],[Tk,{enable:!1},["rotate"]],[_k,{direction:Fi}],[Gg,{direction:Fi},["swipe"]],[Fv],[Fv,{event:"doubletap",taps:2},["tap"]],[Ck]],fj=1,sT=2;oT=function(){function t(e,r){var s=this;this.options=Rs({},Ek,r||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=cj(this),this.touchAction=new fk(this,this.options.touchAction),aT(this,!0),un(this.options.recognizers,function(a){var o=s.add(new a[0](a[1]));a[2]&&o.recognizeWith(a[2]),a[3]&&o.requireFailure(a[3])},this)}var n=t.prototype;return n.set=function(r){return Rs(this.options,r),r.touchAction&&this.touchAction.update(),r.inputTarget&&(this.input.destroy(),this.input.target=r.inputTarget,this.input.init()),this},n.stop=function(r){this.session.stopped=r?sT:fj},n.recognize=function(r){var s=this.session;if(!s.stopped){this.touchAction.preventDefaults(r);var a,o=this.recognizers,l=s.curRecognizer;(!l||l&&l.state&cn)&&(s.curRecognizer=null,l=null);for(var u=0;u<o.length;)a=o[u],s.stopped!==sT&&(!l||a===l||a.canRecognizeWith(l))?a.recognize(r):a.reset(),!l&&a.state&(Jr|po|Qn)&&(s.curRecognizer=a,l=a),u++}},n.get=function(r){if(r instanceof sc)return r;for(var s=this.recognizers,a=0;a<s.length;a++)if(s[a].options.event===r)return s[a];return null},n.add=function(r){if(io(r,"add",this))return this;var s=this.get(r.options.event);return s&&this.remove(s),this.recognizers.push(r),r.manager=this,this.touchAction.update(),r},n.remove=function(r){if(io(r,"remove",this))return this;var s=this.get(r);if(r){var a=this.recognizers,o=Gs(a,s);o!==-1&&(a.splice(o,1),this.touchAction.update())}return this},n.on=function(r,s){if(r===void 0||s===void 0)return this;var a=this.handlers;return un(Cu(r),function(o){a[o]=a[o]||[],a[o].push(s)}),this},n.off=function(r,s){if(r===void 0)return this;var a=this.handlers;return un(Cu(r),function(o){s?a[o]&&a[o].splice(Gs(a[o],s),1):delete a[o]}),this},n.emit=function(r,s){this.options.domEvents&&pj(r,s);var a=this.handlers[r]&&this.handlers[r].slice();if(!(!a||!a.length)){s.type=r,s.preventDefault=function(){s.srcEvent.preventDefault()};for(var o=0;o<a.length;)a[o](s),o++}},n.destroy=function(){this.element&&aT(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),mj={touchstart:hr,touchmove:Zs,touchend:Et,touchcancel:wr},vj="touchstart",gj="touchstart touchmove touchend touchcancel",yj=function(t){ii(n,t);function n(){var r,s=n.prototype;return s.evTarget=vj,s.evWin=gj,r=t.apply(this,arguments)||this,r.started=!1,r}var e=n.prototype;return e.handler=function(s){var a=mj[s.type];if(a===hr&&(this.started=!0),!!this.started){var o=bj.call(this,s,a);a&(Et|wr)&&o[0].length-o[1].length===0&&(this.started=!1),this.callback(this.manager,a,{pointers:o[0],changedPointers:o[1],pointerType:tc,srcEvent:s})}},n}(Do);Dk=kk(function(t,n,e){for(var r=Object.keys(n),s=0;s<r.length;)(!e||e&&t[r[s]]===void 0)&&(t[r[s]]=n[r[s]]),s++;return t},"extend","Use `assign`."),wj=kk(function(t,n){return Dk(t,n,!0)},"merge","Use `assign`.");Hg=function(){var t=function(e,r){return r===void 0&&(r={}),new oT(e,yi({recognizers:nT.concat()},r))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=dk,t.DIRECTION_DOWN=fo,t.DIRECTION_LEFT=rc,t.DIRECTION_RIGHT=ic,t.DIRECTION_UP=nc,t.DIRECTION_HORIZONTAL=Fi,t.DIRECTION_VERTICAL=Fs,t.DIRECTION_NONE=th,t.DIRECTION_DOWN=fo,t.INPUT_START=hr,t.INPUT_MOVE=Zs,t.INPUT_END=Et,t.INPUT_CANCEL=wr,t.STATE_POSSIBLE=Yd,t.STATE_BEGAN=Jr,t.STATE_CHANGED=po,t.STATE_ENDED=Qn,t.STATE_RECOGNIZED=cn,t.STATE_CANCELLED=ku,t.STATE_FAILED=Oi,t.Manager=oT,t.Input=Do,t.TouchAction=fk,t.TouchInput=Rg,t.MouseInput=Bg,t.PointerEventInput=bk,t.TouchMouseInput=wk,t.SingleTouchInput=yj,t.Recognizer=sc,t.AttrRecognizer=mo,t.Tap=Fv,t.Pan=Gg,t.Swipe=_k,t.Pinch=Tk,t.Rotate=xk,t.Press=Ck,t.on=pu,t.off=mu,t.each=un,t.merge=wj,t.extend=Dk,t.bindFn=lT,t.assign=Rs,t.inherit=Sj,t.bindFn=lT,t.prefixed=Lh,t.toArray=Eu,t.inArray=Gs,t.uniqueArray=Lg,t.splitStr=Cu,t.boolOrFn=Rh,t.hasParent=Ag,t.addEventListeners=pu,t.removeEventListeners=mu,t.defaults=Rs({},Ek,{preset:nT}),t}();Hg.defaults;Yg=yn("DELETE");Vg=typeof window!="undefined"?window.Hammer||Hg:function(){return kj()};Fg(Mi.prototype);Mi.current=null;Mi.prototype.destroy=function(){var t,n;this.deactivate();var e=Wg(dz(t=cr(n=this._cleanupQueue).call(n,0)).call(t)),r;try{for(e.s();!(r=e.n()).done;){var s=r.value;s()}}catch(a){e.e(a)}finally{e.f()}};Mi.prototype.activate=function(){Mi.current&&Mi.current.deactivate(),Mi.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};Mi.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};Mi.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};Pj=/^\/?Date\((-?\d+)/i,Ij=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Oj=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Mj=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,Fj=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;Nj=hn;Uj=Og;e5={asBoolean:function(n,e){return typeof n=="function"&&(n=n()),n!=null?n!=!1:e||null},asNumber:function(n,e){return typeof n=="function"&&(n=n()),n!=null?Number(n)||e||null:e||null},asString:function(n,e){return typeof n=="function"&&(n=n()),n!=null?String(n):e||null},asSize:function(n,e){return typeof n=="function"&&(n=n()),Lr(n)?n:vu(n)?n+"px":e||null},asElement:function(n,e){return typeof n=="function"&&(n=n()),n||e||null}};ao={split:function(n){var e,r={};return K(e=n.split(";")).call(e,function(s){if(Fm(s).call(s)!=""){var a,o,l=s.split(":"),u=Fm(a=l[0]).call(a),c=Fm(o=l[1]).call(o);r[u]=c}}),r},join:function(n){var e;return He(e=kt(n)).call(e,function(r){return r+": "+n[r]}).join("; ")}};c5={linear:function(n){return n},easeInQuad:function(n){return n*n},easeOutQuad:function(n){return n*(2-n)},easeInOutQuad:function(n){return n<.5?2*n*n:-1+(4-2*n)*n},easeInCubic:function(n){return n*n*n},easeOutCubic:function(n){return--n*n*n+1},easeInOutCubic:function(n){return n<.5?4*n*n*n:(n-1)*(2*n-2)*(2*n-2)+1},easeInQuart:function(n){return n*n*n*n},easeOutQuart:function(n){return 1- --n*n*n*n},easeInOutQuart:function(n){return n<.5?8*n*n*n*n:1-8*--n*n*n*n},easeInQuint:function(n){return n*n*n*n*n},easeOutQuint:function(n){return 1+--n*n*n*n*n},easeInOutQuint:function(n){return n<.5?16*n*n*n*n*n:1+16*--n*n*n*n*n}};f5={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"},Lk=function(){function t(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;Pe(this,t),this.pixelRatio=n,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}return Ie(t,[{key:"insertTo",value:function(e){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(e){if(typeof e=="function")this.updateCallback=e;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}},{key:"setCloseCallback",value:function(e){if(typeof e=="function")this.closeCallback=e;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}},{key:"_isColorString",value:function(e){if(typeof e=="string")return f5[e]}},{key:"setColor",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e!=="none"){var s,a=this._isColorString(e);if(a!==void 0&&(e=a),Lr(e)===!0){if(qg(e)===!0){var o=e.substr(4).substr(0,e.length-5).split(",");s={r:o[0],g:o[1],b:o[2],a:1}}else if(Ak(e)===!0){var l=e.substr(5).substr(0,e.length-6).split(",");s={r:l[0],g:l[1],b:l[2],a:l[3]}}else if(jg(e)===!0){var u=Bh(e);s={r:u.r,g:u.g,b:u.b,a:1}}}else if(e instanceof Object&&e.r!==void 0&&e.g!==void 0&&e.b!==void 0){var c=e.a!==void 0?e.a:"1.0";s={r:e.r,g:e.g,b:e.b,a:c}}if(s===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+br(e));this._setColor(s,r)}}},{key:"show",value:function(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var e=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;r===!0&&(this.previousColor=hn({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",nr(function(){e.closeCallback!==void 0&&(e.closeCallback(),e.closeCallback=void 0)},0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;r===!0&&(this.initialColor=hn({},e)),this.color=e;var s=no(e.r,e.g,e.b),a=2*Math.PI,o=this.r*s.s,l=this.centerCoordinates.x+o*Math.sin(a*s.h),u=this.centerCoordinates.y+o*Math.cos(a*s.h);this.colorPickerSelector.style.left=l-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=u-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}},{key:"_setOpacity",value:function(e){this.color.a=e/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(e){var r=no(this.color.r,this.color.g,this.color.b);r.v=e/100;var s=gu(r.h,r.s,r.v);s.a=this.color.a,this.color=s,this._updatePicker()}},{key:"_updatePicker",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color,r=no(e.r,e.g,e.b),s=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(s.webkitBackingStorePixelRatio||s.mozBackingStorePixelRatio||s.msBackingStorePixelRatio||s.oBackingStorePixelRatio||s.backingStorePixelRatio||1)),s.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var a=this.colorPickerCanvas.clientWidth,o=this.colorPickerCanvas.clientHeight;s.clearRect(0,0,a,o),s.putImageData(this.hueCircle,0,0),s.fillStyle="rgba(0,0,0,"+(1-r.v)+")",s.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),nk(s).call(s),this.brightnessRange.value=100*r.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){var e,r,s,a;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var l=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(l.webkitBackingStorePixelRatio||l.mozBackingStorePixelRatio||l.msBackingStorePixelRatio||l.oBackingStorePixelRatio||l.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch(c){}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch(c){}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var u=this;this.opacityRange.onchange=function(){u._setOpacity(this.value)},this.opacityRange.oninput=function(){u._setOpacity(this.value)},this.brightnessRange.onchange=function(){u._setBrightness(this.value)},this.brightnessRange.oninput=function(){u._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=R(e=this._hide).call(e,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=R(r=this._apply).call(r,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=R(s=this._save).call(s,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=R(a=this._loadLast).call(a,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var e=this;this.drag={},this.pinch={},this.hammer=new Vg(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",function(r){r.isFirst&&e._moveSelector(r)}),this.hammer.on("tap",function(r){e._moveSelector(r)}),this.hammer.on("panstart",function(r){e._moveSelector(r)}),this.hammer.on("panmove",function(r){e._moveSelector(r)}),this.hammer.on("panend",function(r){e._moveSelector(r)})}},{key:"_generateHueCircle",value:function(){if(this.generated===!1){var e=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var r=this.colorPickerCanvas.clientWidth,s=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,r,s);var a,o,l,u;this.centerCoordinates={x:r*.5,y:s*.5},this.r=.49*r;var c=2*Math.PI/360,d=1/360,f=1/this.r,p;for(l=0;l<360;l++)for(u=0;u<this.r;u++)a=this.centerCoordinates.x+u*Math.sin(c*l),o=this.centerCoordinates.y+u*Math.cos(c*l),p=gu(l*d,u*f,1),e.fillStyle="rgb("+p.r+","+p.g+","+p.b+")",e.fillRect(a-.5,o-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,r,s)}this.generated=!0}},{key:"_moveSelector",value:function(e){var r=this.colorPickerDiv.getBoundingClientRect(),s=e.center.x-r.left,a=e.center.y-r.top,o=.5*this.colorPickerDiv.clientHeight,l=.5*this.colorPickerDiv.clientWidth,u=s-l,c=a-o,d=Math.atan2(u,c),f=.98*Math.min(Math.sqrt(u*u+c*c),l),p=Math.cos(d)*f+o,v=Math.sin(d)*f+l;this.colorPickerSelector.style.top=p-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=v-.5*this.colorPickerSelector.clientWidth+"px";var y=d/(2*Math.PI);y=y<0?y+1:y;var _=f/this.r,S=no(this.color.r,this.color.g,this.color.b);S.h=y,S.s=_;var x=gu(S.h,S.s,S.v);x.a=this.color.a,this.color=x,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),t}();p5=function(){function t(n,e,r){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:function(){return!1};Pe(this,t),this.parent=n,this.changedOptions=[],this.container=e,this.allowCreation=!1,this.hideOption=a,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},hn(this.options,this.defaultOptions),this.configureOptions=r,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new Lk(s),this.wrapper=void 0}return Ie(t,[{key:"setOptions",value:function(e){if(e!==void 0){this.popupHistory={},this._removePopup();var r=!0;if(typeof e=="string")this.options.filter=e;else if(pe(e))this.options.filter=e.join();else if(de(e)==="object"){if(e==null)throw new TypeError("options cannot be null");e.container!==void 0&&(this.options.container=e.container),oe(e)!==void 0&&(this.options.filter=oe(e)),e.showButton!==void 0&&(this.options.showButton=e.showButton),e.enabled!==void 0&&(r=e.enabled)}else typeof e=="boolean"?(this.options.filter=!0,r=e):typeof e=="function"&&(this.options.filter=e,r=!0);oe(this.options)===!1&&(r=!1),this.options.enabled=r}this._clean()}},{key:"setModuleOptions",value:function(e){this.moduleOptions=e,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){this._clean(),this.changedOptions=[];var e=oe(this.options),r=0,s=!1;for(var a in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,a)&&(this.allowCreation=!1,s=!1,typeof e=="function"?(s=e(a,[]),s=s||this._handleObject(this.configureOptions[a],[a],!0)):(e===!0||Ze(e).call(e,a)!==-1)&&(s=!0),s!==!1&&(this.allowCreation=!0,r>0&&this._makeItem([]),this._makeHeader(a),this._handleObject(this.configureOptions[a],[a])),r++);this._makeButton(),this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(e){for(var r=this.moduleOptions,s=0;s<e.length;s++)if(r[e[s]]!==void 0)r=r[e[s]];else{r=void 0;break}return r}},{key:"_makeItem",value:function(e){if(this.allowCreation===!0){var r=document.createElement("div");r.className="vis-configuration vis-config-item vis-config-s"+e.length;for(var s=arguments.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];return K(a).call(a,function(l){r.appendChild(l)}),this.domElements.push(r),this.domElements.length}return 0}},{key:"_makeHeader",value:function(e){var r=document.createElement("div");r.className="vis-configuration vis-config-header",r.innerText=e,this._makeItem([],r)}},{key:"_makeLabel",value:function(e,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=document.createElement("div");if(a.className="vis-configuration vis-config-label vis-config-s"+r.length,s===!0){for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(Av("i","b",e))}else a.innerText=e+":";return a}},{key:"_makeDropdown",value:function(e,r,s){var a=document.createElement("select");a.className="vis-configuration vis-config-select";var o=0;r!==void 0&&Ze(e).call(e,r)!==-1&&(o=Ze(e).call(e,r));for(var l=0;l<e.length;l++){var u=document.createElement("option");u.value=e[l],l===o&&(u.selected="selected"),u.innerText=e[l],a.appendChild(u)}var c=this;a.onchange=function(){c._update(this.value,s)};var d=this._makeLabel(s[s.length-1],s);this._makeItem(s,d,a)}},{key:"_makeRange",value:function(e,r,s){var a=e[0],o=e[1],l=e[2],u=e[3],c=document.createElement("input");c.className="vis-configuration vis-config-range";try{c.type="range",c.min=o,c.max=l}catch(x){}c.step=u;var d="",f=0;if(r!==void 0){var p=1.2;r<0&&r*p<o?(c.min=Math.ceil(r*p),f=c.min,d="range increased"):r/p<o&&(c.min=Math.ceil(r/p),f=c.min,d="range increased"),r*p>l&&l!==1&&(c.max=Math.ceil(r*p),f=c.max,d="range increased"),c.value=r}else c.value=a;var v=document.createElement("input");v.className="vis-configuration vis-config-rangeinput",v.value=c.value;var y=this;c.onchange=function(){v.value=this.value,y._update(Number(this.value),s)},c.oninput=function(){v.value=this.value};var _=this._makeLabel(s[s.length-1],s),S=this._makeItem(s,_,c,v);d!==""&&this.popupHistory[S]!==f&&(this.popupHistory[S]=f,this._setupPopup(d,S))}},{key:"_makeButton",value:function(){var e=this;if(this.options.showButton===!0){var r=document.createElement("div");r.className="vis-configuration vis-config-button",r.innerText="generate options",r.onclick=function(){e._printOptions()},r.onmouseover=function(){r.className="vis-configuration vis-config-button hover"},r.onmouseout=function(){r.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(r)}}},{key:"_setupPopup",value:function(e,r){var s=this;if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){var a=document.createElement("div");a.id="vis-configuration-popup",a.className="vis-configuration-popup",a.innerText=e,a.onclick=function(){s._removePopup()},this.popupCounter+=1,this.popupDiv={html:a,index:r}}}},{key:"_removePopup",value:function(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var e=this;if(this.popupDiv.html!==void 0){var r=this.domElements[this.popupDiv.index],s=r.getBoundingClientRect();this.popupDiv.html.style.left=s.left+"px",this.popupDiv.html.style.top=s.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=nr(function(){e.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=nr(function(){e._removePopup()},1800)}}},{key:"_makeCheckbox",value:function(e,r,s){var a=document.createElement("input");a.type="checkbox",a.className="vis-configuration vis-config-checkbox",a.checked=e,r!==void 0&&(a.checked=r,r!==e&&(de(e)==="object"?r!==e.enabled&&this.changedOptions.push({path:s,value:r}):this.changedOptions.push({path:s,value:r})));var o=this;a.onchange=function(){o._update(this.checked,s)};var l=this._makeLabel(s[s.length-1],s);this._makeItem(s,l,a)}},{key:"_makeTextInput",value:function(e,r,s){var a=document.createElement("input");a.type="text",a.className="vis-configuration vis-config-text",a.value=r,r!==e&&this.changedOptions.push({path:s,value:r});var o=this;a.onchange=function(){o._update(this.value,s)};var l=this._makeLabel(s[s.length-1],s);this._makeItem(s,l,a)}},{key:"_makeColorField",value:function(e,r,s){var a=this,o=e[1],l=document.createElement("div");r=r===void 0?o:r,r!=="none"?(l.className="vis-configuration vis-config-colorBlock",l.style.backgroundColor=r):l.className="vis-configuration vis-config-colorBlock none",r=r===void 0?o:r,l.onclick=function(){a._showColorPicker(r,l,s)};var u=this._makeLabel(s[s.length-1],s);this._makeItem(s,u,l)}},{key:"_showColorPicker",value:function(e,r,s){var a=this;r.onclick=function(){},this.colorPicker.insertTo(r),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(function(o){var l="rgba("+o.r+","+o.g+","+o.b+","+o.a+")";r.style.backgroundColor=l,a._update(l,s)}),this.colorPicker.setCloseCallback(function(){r.onclick=function(){a._showColorPicker(e,r,s)}})}},{key:"_handleObject",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=!1,o=oe(this.options),l=!1;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){a=!0;var c=e[u],d=Pu(r,u);if(typeof o=="function"&&(a=o(u,r),a===!1&&!pe(c)&&typeof c!="string"&&typeof c!="boolean"&&c instanceof Object&&(this.allowCreation=!1,a=this._handleObject(c,d,!0),this.allowCreation=s===!1)),a!==!1){l=!0;var f=this._getValue(d);if(pe(c))this._handleArray(c,f,d);else if(typeof c=="string")this._makeTextInput(c,f,d);else if(typeof c=="boolean")this._makeCheckbox(c,f,d);else if(c instanceof Object){if(!this.hideOption(r,u,this.moduleOptions))if(c.enabled!==void 0){var p=Pu(d,"enabled"),v=this._getValue(p);if(v===!0){var y=this._makeLabel(u,d,!0);this._makeItem(d,y),l=this._handleObject(c,d)||l}else this._makeCheckbox(c,v,d)}else{var _=this._makeLabel(u,d,!0);this._makeItem(d,_),l=this._handleObject(c,d)||l}}else console.error("dont know how to handle",c,u,d)}}return l}},{key:"_handleArray",value:function(e,r,s){typeof e[0]=="string"&&e[0]==="color"?(this._makeColorField(e,r,s),e[1]!==r&&this.changedOptions.push({path:s,value:r})):typeof e[0]=="string"?(this._makeDropdown(e,r,s),e[0]!==r&&this.changedOptions.push({path:s,value:r})):typeof e[0]=="number"&&(this._makeRange(e,r,s),e[0]!==r&&this.changedOptions.push({path:s,value:Number(r)}))}},{key:"_update",value:function(e,r){var s=this._constructOptions(e,r);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",s),this.initialized=!0,this.parent.setOptions(s)}},{key:"_constructOptions",value:function(e,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=s;e=e==="true"?!0:e,e=e==="false"?!1:e;for(var o=0;o<r.length;o++)r[o]!=="global"&&(a[r[o]]===void 0&&(a[r[o]]={}),o!==r.length-1?a=a[r[o]]:a[r[o]]=e);return s}},{key:"_printOptions",value:function(){for(var e=this.getOptions();this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(Av("pre","const options = "+br(e,null,2)))}},{key:"getOptions",value:function(){for(var e={},r=0;r<this.changedOptions.length;r++)this._constructOptions(this.changedOptions[r].value,this.changedOptions[r].path,e);return e}}]),t}(),m5=function(){function t(n,e){Pe(this,t),this.container=n,this.overflowMethod=e||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}return Ie(t,[{key:"setPosition",value:function(e,r){this.x=Ar(e),this.y=Ar(r)}},{key:"setText",value:function(e){if(e instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(e)}else this.frame.innerText=e}},{key:"show",value:function(e){if(e===void 0&&(e=!0),e===!0){var r=this.frame.clientHeight,s=this.frame.clientWidth,a=this.frame.parentNode.clientHeight,o=this.frame.parentNode.clientWidth,l=0,u=0;if(this.overflowMethod=="flip"){var c=!1,d=!0;this.y-r<this.padding&&(d=!1),this.x+s>o-this.padding&&(c=!0),c?l=this.x-s:l=this.x,d?u=this.y-r:u=this.y}else u=this.y-r,u+r+this.padding>a&&(u=a-r-this.padding),u<this.padding&&(u=this.padding),l=this.x,l+s+this.padding>o&&(l=o-s-this.padding),l<this.padding&&(l=this.padding);this.frame.style.left=l+"px",this.frame.style.top=u+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}},{key:"destroy",value:function(){this.frame.parentNode.removeChild(this.frame)}}]),t}(),au=!1,Lv="background: #FFeeee; color: #dd0000",v5=function(){function t(){Pe(this,t)}return Ie(t,null,[{key:"validate",value:function(e,r,s){au=!1,hT=r;var a=r;return s!==void 0&&(a=r[s]),t.parse(e,a,[]),au}},{key:"parse",value:function(e,r,s){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.check(a,e,r,s)}},{key:"check",value:function(e,r,s,a){if(s[e]===void 0&&s.__any__===void 0){t.getSuggestion(e,s,a);return}var o=e,l=!0;s[e]===void 0&&s.__any__!==void 0&&(o="__any__",l=t.getType(r[e])==="object");var u=s[o];l&&u.__type__!==void 0&&(u=u.__type__),t.checkFields(e,r,s,o,u,a)}},{key:"checkFields",value:function(e,r,s,a,o,l){var u=function(p){console.error("%c"+p+t.printLocation(l,e),Lv)},c=t.getType(r[e]),d=o[c];d!==void 0?t.getType(d)==="array"&&Ze(d).call(d,r[e])===-1?(u('Invalid option detected in "'+e+'". Allowed values are:'+t.print(d)+' not "'+r[e]+'". '),au=!0):c==="object"&&a!=="__any__"&&(l=Pu(l,e),t.parse(r[e],s[a],l)):o.any===void 0&&(u('Invalid type received for "'+e+'". Expected: '+t.print(kt(o))+". Received ["+c+'] "'+r[e]+'"'),au=!0)}},{key:"getType",value:function(e){var r=de(e);return r==="object"?e===null?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":pe(e)?"array":e instanceof Date?"date":e.nodeType!==void 0?"dom":e._isAMomentObject===!0?"moment":"object":r==="number"?"number":r==="boolean"?"boolean":r==="string"?"string":r===void 0?"undefined":r}},{key:"getSuggestion",value:function(e,r,s){var a=t.findInOptions(e,r,s,!1),o=t.findInOptions(e,hT,[],!0),l=8,u=4,c;a.indexMatch!==void 0?c=" in "+t.printLocation(a.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+a.indexMatch+`"?

`:o.distance<=u&&a.distance>o.distance?c=" in "+t.printLocation(a.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+t.printLocation(o.path,o.closestMatch,""):a.distance<=l?c='. Did you mean "'+a.closestMatch+'"?'+t.printLocation(a.path,e):c=". Did you mean one of these: "+t.print(kt(r))+t.printLocation(s,e),console.error('%cUnknown option detected: "'+e+'"'+c,Lv),au=!0}},{key:"findInOptions",value:function(e,r,s){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=1e9,l="",u=[],c=e.toLowerCase(),d=void 0;for(var f in r){var p=void 0;if(r[f].__type__!==void 0&&a===!0){var v=t.findInOptions(e,r[f],Pu(s,f));o>v.distance&&(l=v.closestMatch,u=v.path,o=v.distance,d=v.indexMatch)}else{var y;Ze(y=f.toLowerCase()).call(y,c)!==-1&&(d=f),p=t.levenshteinDistance(e,f),o>p&&(l=f,u=$k(s),o=p)}}return{closestMatch:l,path:u,distance:o,indexMatch:d}}},{key:"printLocation",value:function(e,r){for(var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`,a=`

`+s+`options = {
`,o=0;o<e.length;o++){for(var l=0;l<o+1;l++)a+="  ";a+=e[o]+`: {
`}for(var u=0;u<e.length+1;u++)a+="  ";a+=r+`
`;for(var c=0;c<e.length+1;c++){for(var d=0;d<e.length-c;d++)a+="  ";a+=`}
`}return a+`

`}},{key:"print",value:function(e){return br(e).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}},{key:"levenshteinDistance",value:function(e,r){if(e.length===0)return r.length;if(r.length===0)return e.length;var s=[],a;for(a=0;a<=r.length;a++)s[a]=[a];var o;for(o=0;o<=e.length;o++)s[0][o]=o;for(a=1;a<=r.length;a++)for(o=1;o<=e.length;o++)r.charAt(a-1)==e.charAt(o-1)?s[a][o]=s[a-1][o-1]:s[a][o]=Math.min(s[a-1][o-1]+1,Math.min(s[a][o-1]+1,s[a-1][o]+1));return s[r.length][e.length]}}]),t}(),g5=Mi,y5=Lk,b5=p5,w5=Vg,S5=m5,_5=Lv,T5=v5,Rk=Object.freeze({__proto__:null,Activator:g5,Alea:Tj,ColorPicker:y5,Configurator:b5,DELETE:Yg,HSVToHex:Nv,HSVToRGB:gu,Hammer:w5,Popup:S5,RGBToHSV:no,RGBToHex:Ug,VALIDATOR_PRINT_STYLE:_5,Validator:T5,addClassName:Yj,addCssText:i5,addEventListener:Xj,binarySearchCustom:l5,binarySearchValue:u5,bridgeObject:Xg,copyAndExtendArray:Pu,copyArray:$k,deepExtend:Du,deepObjectAssign:zg,easingFunctions:c5,equalArray:Bj,extend:Nj,fillIfDefined:Fk,forEach:Vj,getAbsoluteLeft:Gj,getAbsoluteRight:Hj,getAbsoluteTop:Wj,getScrollBarWidth:d5,getTarget:Qj,getType:hu,hasParent:Jj,hexToHSV:Nk,hexToRGB:Bh,insertSort:a5,isDate:$j,isNumber:vu,isObject:$v,isString:Lr,isValidHex:jg,isValidRGB:qg,isValidRGBA:Ak,mergeOptions:o5,option:e5,overrideOpacity:t5,parseColor:r5,preventDefault:Zj,pureDeepObjectAssign:Pk,recursiveDOMDelete:Mk,removeClassName:zj,removeCssText:n5,removeEventListener:Kj,selectiveBridgeObject:s5,selectiveDeepExtend:Lj,selectiveExtend:Aj,selectiveNotDeepExtend:Rj,throttle:qj,toArray:Uj,topMost:h5,updateProperty:jj});x5=Object.freeze({__proto__:null,prepareElements:sn,cleanupElements:$r,resetElements:Bk,getSVGElement:ei,getDOMElement:zd,drawPoint:Ws,drawBar:sh,getNavigatorLanguage:Gk}),Hk={exports:{}},C5=se,E5=Ch,k5=yh,D5=C5.TypeError,Wk=function(t){if(E5(t))return t;throw D5(k5(t)+" is not a constructor")},P5=ue,I5=ri,Nm=js,O5=ME,fT=Wk,M5=Br,pT=Gt,F5=Xs,Yk=Re,Kg=I5("Reflect","construct"),$5=Object.prototype,N5=[].push,zk=Yk(function(){function t(){}return!(Kg(function(){},[],t)instanceof t)}),Vk=!Yk(function(){Kg(function(){})}),mT=zk||Vk;P5({target:"Reflect",stat:!0,forced:mT,sham:mT},{construct:function(n,e){fT(n),M5(e);var r=arguments.length<3?n:fT(arguments[2]);if(Vk&&!zk)return Kg(n,e,r);if(n==r){switch(e.length){case 0:return new n;case 1:return new n(e[0]);case 2:return new n(e[0],e[1]);case 3:return new n(e[0],e[1],e[2]);case 4:return new n(e[0],e[1],e[2],e[3])}var s=[null];return Nm(N5,s,e),new(Nm(O5,n,s))}var a=r.prototype,o=F5(pT(a)?a:$5),l=Nm(n,o,e);return pT(l)?l:o}});A5=Ve,L5=A5.Reflect.construct,R5=L5,B5=R5;(function(t){t.exports=B5})(Hk);ne=re(Hk.exports);Zg={exports:{}},G5=JE,H5=G5,W5=H5,Y5=W5;(function(t){t.exports=Y5})(Zg);z5=re(Zg.exports),Qg={exports:{}},V5=ue,U5=fC;V5({target:"Object",stat:!0},{setPrototypeOf:U5});j5=Ve,q5=j5.Object.setPrototypeOf,X5=q5,K5=X5,Z5=K5,Q5=Z5,J5=Q5,e6=J5;(function(t){t.exports=e6})(Qg);Rv=re(Qg.exports),Uk={exports:{}},t6=FE,r6=t6,i6=r6,n6=i6;(function(t){t.exports=n6})(Uk);jk=re(Uk.exports);Jg={exports:{}},s6=YE,a6=s6,o6=a6,l6=o6;(function(t){t.exports=l6})(Jg);vT=re(Jg.exports);qk={exports:{}},Xk={exports:{}};(function(t){var n=Nh.exports,e=Ig.exports;function r(s){return t.exports=r=typeof n=="function"&&typeof e=="symbol"?function(a){return typeof a}:function(a){return a&&typeof n=="function"&&a.constructor===n&&a!==n.prototype?"symbol":typeof a},t.exports.__esModule=!0,t.exports.default=t.exports,r(s)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports})(Xk);Kk={exports:{}},u6=NE,c6=u6,d6=c6,h6=d6;(function(t){t.exports=h6})(Kk);Zk={exports:{}},gT=Bt,f6=Eg,p6=qs,m6=Tr,v6=function(t,n,e){for(var r=f6(n),s=m6.f,a=p6.f,o=0;o<r.length;o++){var l=r[o];!gT(t,l)&&!(e&&gT(e,l))&&s(t,l,a(n,l))}},g6=Be,y6=g6("".replace),b6=function(t){return String(Error(t).stack)}("zxcasd"),Qk=/\n\s*at [^:]*:[^\n]*/,w6=Qk.test(b6),S6=function(t,n){if(w6&&typeof t=="string")for(;n--;)t=y6(t,Qk,"");return t},_6=Gt,T6=ns,x6=function(t,n){_6(n)&&"cause"in n&&T6(t,"cause",n.cause)},C6=se,E6=ss,k6=Gr,D6=Br,P6=yh,I6=gC,O6=Hr,yT=Qe,M6=bg,F6=Eh,bT=vC,$6=C6.TypeError,Vd=function(t,n){this.stopped=t,this.result=n},wT=Vd.prototype,Po=function(t,n,e){var r=e&&e.that,s=!!(e&&e.AS_ENTRIES),a=!!(e&&e.IS_ITERATOR),o=!!(e&&e.INTERRUPTED),l=E6(n,r),u,c,d,f,p,v,y,_=function(x){return u&&bT(u,"normal",x),new Vd(!0,x)},S=function(x){return s?(D6(x),o?l(x[0],x[1],_):l(x[0],x[1])):o?l(x,_):l(x)};if(a)u=t;else{if(c=F6(t),!c)throw $6(P6(t)+" is not iterable");if(I6(c)){for(d=0,f=O6(t);f>d;d++)if(p=S(t[d]),p&&yT(wT,p))return p;return new Vd(!1)}u=M6(t,c)}for(v=u.next;!(y=k6(v,u)).done;){try{p=S(y.value)}catch(x){bT(u,"throw",x)}if(typeof p=="object"&&p&&yT(wT,p))return p}return new Vd(!1)},N6=Ni,A6=function(t,n){return t===void 0?arguments.length<2?"":n:N6(t)},L6=Re,R6=Us,B6=!L6(function(){var t=Error("a");return"stack"in t?(Object.defineProperty(t,"stack",R6(1,7)),t.stack!==7):!0}),G6=ue,H6=se,W6=Qe,Y6=Th,ah=fC,z6=v6,Jk=Xs,Md=ns,Am=Us,V6=S6,U6=x6,j6=Po,q6=A6,X6=vt,K6=B6,Z6=X6("toStringTag"),oh=H6.Error,Q6=[].push,Iu=function(n,e){var r=arguments.length>2?arguments[2]:void 0,s=W6(Lm,this),a;ah?a=ah(new oh,s?Y6(this):Lm):(a=s?this:Jk(Lm),Md(a,Z6,"Error")),e!==void 0&&Md(a,"message",q6(e)),K6&&Md(a,"stack",V6(a.stack,1)),U6(a,r);var o=[];return j6(n,Q6,{that:o}),Md(a,"errors",o),a};ah?ah(Iu,oh):z6(Iu,oh,{name:!0});Lm=Iu.prototype=Jk(oh.prototype,{constructor:Am(1,Iu),message:Am(1,""),name:Am(1,"AggregateError")});G6({global:!0},{AggregateError:Iu});J6=se,eD=J6.Promise,e8=xh,tD=function(t,n,e){for(var r in n)e&&e.unsafe&&t[r]?t[r]=n[r]:e8(t,r,n[r],e);return t},t8=ri,r8=Tr,i8=vt,n8=Ht,ST=i8("species"),rD=function(t){var n=t8(t),e=r8.f;n8&&n&&!n[ST]&&e(n,ST,{configurable:!0,get:function(){return this}})},s8=se,a8=Qe,o8=s8.TypeError,ey=function(t,n){if(a8(n,t))return t;throw o8("Incorrect invocation")},_T=Br,l8=Wk,u8=vt,c8=u8("species"),iD=function(t,n){var e=_T(t).constructor,r;return e===void 0||(r=_T(e)[c8])==null?n:l8(r)},d8=is,nD=/(?:ipad|iphone|ipod).*applewebkit/i.test(d8),h8=Vs,f8=se,Gh=h8(f8.process)=="process",Rr=se,p8=js,m8=ss,TT=Dt,v8=Bt,g8=Re,xT=aC,y8=ju,CT=dg,b8=rk,w8=nD,S8=Gh,Gv=Rr.setImmediate,Hv=Rr.clearImmediate,_8=Rr.process,Rm=Rr.Dispatch,T8=Rr.Function,ET=Rr.MessageChannel,x8=Rr.String,Bm=0,yu={},kT="onreadystatechange";try{Ou=Rr.location}catch(t){}ty=function(t){if(v8(yu,t)){var n=yu[t];delete yu[t],n()}},Wm=function(t){return function(){ty(t)}},DT=function(t){ty(t.data)},PT=function(t){Rr.postMessage(x8(t),Ou.protocol+"//"+Ou.host)};(!Gv||!Hv)&&(Gv=function(n){b8(arguments.length,1);var e=TT(n)?n:T8(n),r=y8(arguments,1);return yu[++Bm]=function(){p8(e,void 0,r)},Es(Bm),Bm},Hv=function(n){delete yu[n]},S8?Es=function(t){_8.nextTick(Wm(t))}:Rm&&Rm.now?Es=function(t){Rm.now(Wm(t))}:ET&&!w8?(Gm=new ET,Hm=Gm.port2,Gm.port1.onmessage=DT,Es=m8(Hm.postMessage,Hm)):Rr.addEventListener&&TT(Rr.postMessage)&&!Rr.importScripts&&Ou&&Ou.protocol!=="file:"&&!g8(PT)?(Es=PT,Rr.addEventListener("message",DT,!1)):kT in CT("script")?Es=function(t){xT.appendChild(CT("script"))[kT]=function(){xT.removeChild(this),ty(t)}}:Es=function(t){setTimeout(Wm(t),0)});sD={set:Gv,clear:Hv},C8=is,E8=se,k8=/ipad|iphone|ipod/i.test(C8)&&E8.Pebble!==void 0,D8=is,P8=/web0s(?!.*chrome)/i.test(D8),Ys=se,IT=ss,I8=qs.f,Ym=sD.set,O8=nD,M8=k8,F8=P8,zm=Gh,OT=Ys.MutationObserver||Ys.WebKitMutationObserver,MT=Ys.document,FT=Ys.process,Fd=Ys.Promise,$T=I8(Ys,"queueMicrotask"),aD=$T&&$T.value;aD||(ou=function(){var t,n;for(zm&&(t=FT.domain)&&t.exit();Ps;){n=Ps.fn,Ps=Ps.next;try{n()}catch(e){throw Ps?Ja():bu=void 0,e}}bu=void 0,t&&t.enter()},!O8&&!zm&&!F8&&OT&&MT?(Vm=!0,Um=MT.createTextNode(""),new OT(ou).observe(Um,{characterData:!0}),Ja=function(){Um.data=Vm=!Vm}):!M8&&Fd&&Fd.resolve?($d=Fd.resolve(void 0),$d.constructor=Fd,NT=IT($d.then,$d),Ja=function(){NT(ou)}):zm?Ja=function(){FT.nextTick(ou)}:(Ym=IT(Ym,Ys),Ja=function(){Ym(ou)}));$8=aD||function(t){var n={fn:t,next:void 0};bu&&(bu.next=n),Ps||(Ps=n,Ja()),bu=n},Io={},AT=wi,N8=function(t){var n,e;this.promise=new t(function(r,s){if(n!==void 0||e!==void 0)throw TypeError("Bad Promise constructor");n=r,e=s}),this.resolve=AT(n),this.reject=AT(e)};Io.f=function(t){return new N8(t)};A8=Br,L8=Gt,R8=Io,oD=function(t,n){if(A8(t),L8(n)&&n.constructor===t)return n;var e=R8.f(t),r=e.resolve;return r(n),e.promise},B8=se,G8=function(t,n){var e=B8.console;e&&e.error&&(arguments.length==1?e.error(t):e.error(t,n))},Hh=function(t){try{return{error:!1,value:t()}}catch(n){return{error:!0,value:n}}},lD=function(){this.head=null,this.tail=null};lD.prototype={add:function(t){var n={item:t,next:null};this.head?this.tail.next=n:this.head=n,this.tail=n},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}};H8=lD,W8=typeof window=="object",Wh=ue,Y8=PN,fn=se,z8=ri,ts=Gr,Wv=eD,V8=tD,U8=_o,j8=rD,Yv=wi,lh=Dt,q8=Gt,X8=ey,K8=cg,LT=Po,Z8=xC,Q8=iD,uD=sD.set,ry=$8,J8=oD,e9=G8,cD=Io,zv=Hh,t9=H8,iy=So,r9=rC,i9=vt,n9=W8,uh=Gh,RT=wo,s9=i9("species"),Li="Promise",BT=iy.getterFor(Li),a9=iy.set,o9=iy.getterFor(Li),l9=Wv&&Wv.prototype,gi=Wv,Ud=l9,dD=fn.TypeError,Vv=fn.document,ny=fn.process,vo=cD.f,u9=vo,c9=!!(Vv&&Vv.createEvent&&fn.dispatchEvent),hD=lh(fn.PromiseRejectionEvent),fD="unhandledrejection",d9="rejectionhandled",GT=0,pD=1,h9=2,sy=1,mD=2,HT=!1,Yh=r9(Li,function(){var t=K8(gi),n=t!==String(gi);if(!n&&RT===66||!Ud.finally)return!0;if(RT>=51&&/native code/.test(t))return!1;var e=new gi(function(a){a(1)}),r=function(a){a(function(){},function(){})},s=e.constructor={};return s[s9]=r,HT=e.then(function(){})instanceof r,HT?!n&&n9&&!hD:!0}),f9=Yh||!Z8(function(t){gi.all(t).catch(function(){})}),vD=function(t){var n;return q8(t)&&lh(n=t.then)?n:!1},gD=function(t,n){var e=n.value,r=n.state==pD,s=r?t.ok:t.fail,a=t.resolve,o=t.reject,l=t.domain,u,c,d;try{s?(r||(n.rejection===mD&&m9(n),n.rejection=sy),s===!0?u=e:(l&&l.enter(),u=s(e),l&&(l.exit(),d=!0)),u===t.promise?o(dD("Promise-chain cycle")):(c=vD(u))?ts(c,u,a,o):a(u)):o(e)}catch(f){l&&!d&&l.exit(),o(f)}},yD=function(t,n){t.notified||(t.notified=!0,ry(function(){for(var e=t.reactions,r;r=e.get();)gD(r,t);t.notified=!1,n&&!t.rejection&&p9(t)}))},bD=function(t,n,e){var r,s;c9?(r=Vv.createEvent("Event"),r.promise=n,r.reason=e,r.initEvent(t,!1,!0),fn.dispatchEvent(r)):r={promise:n,reason:e},!hD&&(s=fn["on"+t])?s(r):t===fD&&e9("Unhandled promise rejection",e)},p9=function(t){ts(uD,fn,function(){var n=t.facade,e=t.value,r=YT(t),s;if(r&&(s=zv(function(){uh?ny.emit("unhandledRejection",e,n):bD(fD,n,e)}),t.rejection=uh||YT(t)?mD:sy,s.error))throw s.value})},YT=function(t){return t.rejection!==sy&&!t.parent},m9=function(t){ts(uD,fn,function(){var n=t.facade;uh?ny.emit("rejectionHandled",n):bD(d9,n,t.value)})},so=function(t,n,e){return function(r){t(n,r,e)}},oo=function(t,n,e){t.done||(t.done=!0,e&&(t=e),t.value=n,t.state=h9,yD(t,!0))},Uv=function(t,n,e){if(!t.done){t.done=!0,e&&(t=e);try{if(t.facade===n)throw dD("Promise can't be resolved itself");var r=vD(n);r?ry(function(){var s={done:!1};try{ts(r,n,so(Uv,s,t),so(oo,s,t))}catch(a){oo(s,a,t)}}):(t.value=n,t.state=pD,yD(t,!1))}catch(s){oo({done:!1},s,t)}}};Yh&&(gi=function(n){X8(this,Ud),Yv(n),ts(Nd,this);var e=BT(this);try{n(so(Uv,e),so(oo,e))}catch(r){oo(e,r)}},Ud=gi.prototype,Nd=function(n){a9(this,{type:Li,done:!1,notified:!1,parent:!1,reactions:new t9,rejection:!1,state:GT,value:void 0})},Nd.prototype=V8(Ud,{then:function(n,e){var r=o9(this),s=vo(Q8(this,gi));return r.parent=!0,s.ok=lh(n)?n:!0,s.fail=lh(e)&&e,s.domain=uh?ny.domain:void 0,r.state==GT?r.reactions.add(s):ry(function(){gD(s,r)}),s.promise},catch:function(t){return this.then(void 0,t)}}),WT=function(){var t=new Nd,n=BT(t);this.promise=t,this.resolve=so(Uv,n),this.reject=so(oo,n)},cD.f=vo=function(t){return t===gi||t===ay?new WT(t):u9(t)});Wh({global:!0,wrap:!0,forced:Yh},{Promise:gi});U8(gi,Li,!1,!0);j8(Li);ay=z8(Li);Wh({target:Li,stat:!0,forced:Yh},{reject:function(n){var e=vo(this);return ts(e.reject,void 0,n),e.promise}});Wh({target:Li,stat:!0,forced:Y8},{resolve:function(n){return J8(this===ay?gi:this,n)}});Wh({target:Li,stat:!0,forced:f9},{all:function(n){var e=this,r=vo(e),s=r.resolve,a=r.reject,o=zv(function(){var l=Yv(e.resolve),u=[],c=0,d=1;LT(n,function(f){var p=c++,v=!1;d++,ts(l,e,f).then(function(y){v||(v=!0,u[p]=y,--d||s(u))},a)}),--d||s(u)});return o.error&&a(o.value),r.promise},race:function(n){var e=this,r=vo(e),s=r.reject,a=zv(function(){var o=Yv(e.resolve);LT(n,function(l){ts(o,e,l).then(r.resolve,s)})});return a.error&&s(a.value),r.promise}});v9=ue,g9=Gr,y9=wi,b9=Io,w9=Hh,S9=Po;v9({target:"Promise",stat:!0},{allSettled:function(n){var e=this,r=b9.f(e),s=r.resolve,a=r.reject,o=w9(function(){var l=y9(e.resolve),u=[],c=0,d=1;S9(n,function(f){var p=c++,v=!1;d++,g9(l,e,f).then(function(y){v||(v=!0,u[p]={status:"fulfilled",value:y},--d||s(u))},function(y){v||(v=!0,u[p]={status:"rejected",reason:y},--d||s(u))})}),--d||s(u)});return o.error&&a(o.value),r.promise}});_9=ue,T9=wi,x9=ri,C9=Gr,E9=Io,k9=Hh,D9=Po,zT="No one promise resolved";_9({target:"Promise",stat:!0},{any:function(n){var e=this,r=x9("AggregateError"),s=E9.f(e),a=s.resolve,o=s.reject,l=k9(function(){var u=T9(e.resolve),c=[],d=0,f=1,p=!1;D9(n,function(v){var y=d++,_=!1;f++,C9(u,e,v).then(function(S){_||p||(p=!0,a(S))},function(S){_||p||(_=!0,c[y]=S,--f||o(new r(c,zT)))})}),--f||o(new r(c,zT))});return l.error&&o(l.value),s.promise}});P9=ue,VT=eD,I9=Re,O9=ri,M9=Dt,F9=iD,UT=oD,$9=!!VT&&I9(function(){VT.prototype.finally.call({then:function(){}},function(){})});P9({target:"Promise",proto:!0,real:!0,forced:$9},{finally:function(t){var n=F9(this,O9("Promise")),e=M9(t);return this.then(e?function(r){return UT(n,t()).then(function(){return r})}:t,e?function(r){return UT(n,t()).then(function(){throw r})}:t)}});N9=Ve,A9=N9.Promise,L9=A9,R9=L9,B9=R9,G9=B9,H9=ue,W9=Io,Y9=Hh;H9({target:"Promise",stat:!0,forced:!0},{try:function(t){var n=W9.f(this),e=Y9(t);return(e.error?n.reject:n.resolve)(e.value),n.promise}});z9=G9,V9=z9;(function(t){t.exports=V9})(Zk);wD={exports:{}},U9=LE,j9=U9,q9=j9,X9=q9;(function(t){t.exports=X9})(wD);(function(t){var n=Xk.exports.default,e=Nh.exports,r=Dg.exports,s=Zg.exports,a=Jg.exports,o=Kk.exports,l=Qg.exports,u=Zk.exports,c=wD.exports,d=Pg.exports;function f(){t.exports=f=function(){return p},t.exports.__esModule=!0,t.exports.default=t.exports;var p={},v=Object.prototype,y=v.hasOwnProperty,_=typeof e=="function"?e:{},S=_.iterator||"@@iterator",x=_.asyncIterator||"@@asyncIterator",D=_.toStringTag||"@@toStringTag";function E(q,W,ee){return r(q,W,{value:ee,enumerable:!0,configurable:!0,writable:!0}),q[W]}try{E({},"")}catch(q){E=function(ee,G,he){return ee[G]=he}}function P(q,W,ee,G){var he=W&&W.prototype instanceof M?W:M,me=s(he.prototype),we=new Ce(G||[]);return me._invoke=function(ct,Nt,Fe){var At="suspendedStart";return function(Yr,cc){if(At==="executing")throw new Error("Generator is already running");if(At==="completed"){if(Yr==="throw")throw cc;return Ye()}for(Fe.method=Yr,Fe.arg=cc;;){var dc=Fe.delegate;if(dc){var Ao=V(dc,Fe);if(Ao){if(Ao===A)continue;return Ao}}if(Fe.method==="next")Fe.sent=Fe._sent=Fe.arg;else if(Fe.method==="throw"){if(At==="suspendedStart")throw At="completed",Fe.arg;Fe.dispatchException(Fe.arg)}else Fe.method==="return"&&Fe.abrupt("return",Fe.arg);At="executing";var hs=O(ct,Nt,Fe);if(hs.type==="normal"){if(At=Fe.done?"completed":"suspendedYield",hs.arg===A)continue;return{value:hs.arg,done:Fe.done}}hs.type==="throw"&&(At="completed",Fe.method="throw",Fe.arg=hs.arg)}}}(q,ee,we),me}function O(q,W,ee){try{return{type:"normal",arg:q.call(W,ee)}}catch(G){return{type:"throw",arg:G}}}p.wrap=P;var A={};function M(){}function I(){}function H(){}var z={};E(z,S,function(){return this});var U=a,N=U&&U(U(be([])));N&&N!==v&&y.call(N,S)&&(z=N);var $=H.prototype=M.prototype=s(z);function B(q){var W;o(W=["next","throw","return"]).call(W,function(ee){E(q,ee,function(G){return this._invoke(ee,G)})})}function Y(q,W){function ee(he,me,we,ct){var Nt=O(q[he],q,me);if(Nt.type!=="throw"){var Fe=Nt.arg,At=Fe.value;return At&&n(At)=="object"&&y.call(At,"__await")?W.resolve(At.__await).then(function(Yr){ee("next",Yr,we,ct)},function(Yr){ee("throw",Yr,we,ct)}):W.resolve(At).then(function(Yr){Fe.value=Yr,we(Fe)},function(Yr){return ee("throw",Yr,we,ct)})}ct(Nt.arg)}var G;this._invoke=function(he,me){function we(){return new W(function(ct,Nt){ee(he,me,ct,Nt)})}return G=G?G.then(we,we):we()}}function V(q,W){var ee=q.iterator[W.method];if(ee===void 0){if(W.delegate=null,W.method==="throw"){if(q.iterator.return&&(W.method="return",W.arg=void 0,V(q,W),W.method==="throw"))return A;W.method="throw",W.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var G=O(ee,q.iterator,W.arg);if(G.type==="throw")return W.method="throw",W.arg=G.arg,W.delegate=null,A;var he=G.arg;return he?he.done?(W[q.resultName]=he.value,W.next=q.nextLoc,W.method!=="return"&&(W.method="next",W.arg=void 0),W.delegate=null,A):he:(W.method="throw",W.arg=new TypeError("iterator result is not an object"),W.delegate=null,A)}function te(q){var W={tryLoc:q[0]};1 in q&&(W.catchLoc=q[1]),2 in q&&(W.finallyLoc=q[2],W.afterLoc=q[3]),this.tryEntries.push(W)}function ie(q){var W=q.completion||{};W.type="normal",delete W.arg,q.completion=W}function Ce(q){this.tryEntries=[{tryLoc:"root"}],o(q).call(q,te,this),this.reset(!0)}function be(q){if(q){var W=q[S];if(W)return W.call(q);if(typeof q.next=="function")return q;if(!isNaN(q.length)){var ee=-1,G=function he(){for(;++ee<q.length;)if(y.call(q,ee))return he.value=q[ee],he.done=!1,he;return he.value=void 0,he.done=!0,he};return G.next=G}}return{next:Ye}}function Ye(){return{value:void 0,done:!0}}return I.prototype=H,E($,"constructor",H),E(H,"constructor",I),I.displayName=E(H,D,"GeneratorFunction"),p.isGeneratorFunction=function(q){var W=typeof q=="function"&&q.constructor;return!!W&&(W===I||(W.displayName||W.name)==="GeneratorFunction")},p.mark=function(q){return l?l(q,H):(q.__proto__=H,E(q,D,"GeneratorFunction")),q.prototype=s($),q},p.awrap=function(q){return{__await:q}},B(Y.prototype),E(Y.prototype,x,function(){return this}),p.AsyncIterator=Y,p.async=function(q,W,ee,G,he){he===void 0&&(he=u);var me=new Y(P(q,W,ee,G),he);return p.isGeneratorFunction(W)?me:me.next().then(function(we){return we.done?we.value:me.next()})},B($),E($,D,"Generator"),E($,S,function(){return this}),E($,"toString",function(){return"[object Generator]"}),p.keys=function(q){var W=[];for(var ee in q)W.push(ee);return c(W).call(W),function G(){for(;W.length;){var he=W.pop();if(he in q)return G.value=he,G.done=!1,G}return G.done=!0,G}},p.values=be,Ce.prototype={constructor:Ce,reset:function(W){var ee;if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,o(ee=this.tryEntries).call(ee,ie),!W)for(var G in this)G.charAt(0)==="t"&&y.call(this,G)&&!isNaN(+d(G).call(G,1))&&(this[G]=void 0)},stop:function(){this.done=!0;var W=this.tryEntries[0].completion;if(W.type==="throw")throw W.arg;return this.rval},dispatchException:function(W){if(this.done)throw W;var ee=this;function G(Fe,At){return we.type="throw",we.arg=W,ee.next=Fe,At&&(ee.method="next",ee.arg=void 0),!!At}for(var he=this.tryEntries.length-1;he>=0;--he){var me=this.tryEntries[he],we=me.completion;if(me.tryLoc==="root")return G("end");if(me.tryLoc<=this.prev){var ct=y.call(me,"catchLoc"),Nt=y.call(me,"finallyLoc");if(ct&&Nt){if(this.prev<me.catchLoc)return G(me.catchLoc,!0);if(this.prev<me.finallyLoc)return G(me.finallyLoc)}else if(ct){if(this.prev<me.catchLoc)return G(me.catchLoc,!0)}else{if(!Nt)throw new Error("try statement without catch or finally");if(this.prev<me.finallyLoc)return G(me.finallyLoc)}}}},abrupt:function(W,ee){for(var G=this.tryEntries.length-1;G>=0;--G){var he=this.tryEntries[G];if(he.tryLoc<=this.prev&&y.call(he,"finallyLoc")&&this.prev<he.finallyLoc){var me=he;break}}me&&(W==="break"||W==="continue")&&me.tryLoc<=ee&&ee<=me.finallyLoc&&(me=null);var we=me?me.completion:{};return we.type=W,we.arg=ee,me?(this.method="next",this.next=me.finallyLoc,A):this.complete(we)},complete:function(W,ee){if(W.type==="throw")throw W.arg;return W.type==="break"||W.type==="continue"?this.next=W.arg:W.type==="return"?(this.rval=this.arg=W.arg,this.method="return",this.next="end"):W.type==="normal"&&ee&&(this.next=ee),A},finish:function(W){for(var ee=this.tryEntries.length-1;ee>=0;--ee){var G=this.tryEntries[ee];if(G.finallyLoc===W)return this.complete(G.completion,G.afterLoc),ie(G),A}},catch:function(W){for(var ee=this.tryEntries.length-1;ee>=0;--ee){var G=this.tryEntries[ee];if(G.tryLoc===W){var he=G.completion;if(he.type==="throw"){var me=he.arg;ie(G)}return me}}throw new Error("illegal catch attempt")},delegateYield:function(W,ee,G){return this.delegate={iterator:be(W),resultName:ee,nextLoc:G},this.method==="next"&&(this.arg=void 0),A}},p}t.exports=f,t.exports.__esModule=!0,t.exports.default=t.exports})(qk);jd=qk.exports(),vr=jd;try{regeneratorRuntime=jd}catch(t){typeof globalThis=="object"?globalThis.regeneratorRuntime=jd:Function("r","regeneratorRuntime = r")(jd)}SD={exports:{}},K9=se,Z9=wi,Q9=_r,J9=Sh,e7=Hr,t7=K9.TypeError,jT=function(t){return function(n,e,r,s){Z9(e);var a=Q9(n),o=J9(a),l=e7(a),u=t?l-1:0,c=t?-1:1;if(r<2)for(;;){if(u in o){s=o[u],u+=c;break}if(u+=c,t?u<0:l<=u)throw t7("Reduce of empty array with no initial value")}for(;t?u>=0:l>u;u+=c)u in o&&(s=e(s,o[u],u,a));return s}},r7={left:jT(!1),right:jT(!0)},i7=ue,n7=r7.left,s7=ko,qT=wo,a7=Gh,o7=s7("reduce"),l7=!a7&&qT>79&&qT<83;i7({target:"Array",proto:!0,forced:!o7||l7},{reduce:function(n){var e=arguments.length;return n7(this,n,e,e>1?arguments[1]:void 0)}});u7=ut,c7=u7("Array").reduce,d7=Qe,h7=c7,jm=Array.prototype,f7=function(t){var n=t.reduce;return t===jm||d7(jm,t)&&n===jm.reduce?h7:n},p7=f7,m7=p7;(function(t){t.exports=m7})(SD);zh=re(SD.exports),_D={exports:{}},v7=se,g7=Ks,y7=Hr,b7=ss,w7=v7.TypeError,TD=function(t,n,e,r,s,a,o,l){for(var u=s,c=0,d=o?b7(o,l):!1,f,p;c<r;){if(c in e){if(f=d?d(e[c],c,n):e[c],a>0&&g7(f))p=y7(f),u=TD(t,n,f,p,u,a-1)-1;else{if(u>=9007199254740991)throw w7("Exceed the acceptable array length");t[u]=f}u++}c++}return u},S7=TD,_7=ue,T7=S7,x7=wi,C7=_r,E7=Hr,k7=Ph;_7({target:"Array",proto:!0},{flatMap:function(n){var e=C7(this),r=E7(e),s;return x7(n),s=k7(e,0),s.length=T7(s,e,e,r,0,1,n,arguments.length>1?arguments[1]:void 0),s}});D7=ut,P7=D7("Array").flatMap,I7=Qe,O7=P7,qm=Array.prototype,M7=function(t){var n=t.flatMap;return t===qm||I7(qm,t)&&n===qm.flatMap?O7:n},F7=M7,$7=F7;(function(t){t.exports=$7})(_D);N7=re(_D.exports),xD={exports:{}},oy={exports:{}},A7=Re,L7=A7(function(){if(typeof ArrayBuffer=="function"){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}}),R7=Re,B7=Gt,G7=Vs,XT=L7,qd=Object.isExtensible,H7=R7(function(){qd(1)}),W7=H7||XT?function(n){return!B7(n)||XT&&G7(n)=="ArrayBuffer"?!1:qd?qd(n):!0}:qd,Y7=Re,z7=!Y7(function(){return Object.isExtensible(Object.preventExtensions({}))}),V7=ue,U7=Be,j7=Hu,q7=Gt,ly=Bt,X7=Tr.f,KT=Uu,K7=wg,uy=W7,Z7=gh,Q7=z7,CD=!1,pn=Z7("meta"),J7=0,cy=function(t){X7(t,pn,{value:{objectID:"O"+J7++,weakData:{}}})},eq=function(t,n){if(!q7(t))return typeof t=="symbol"?t:(typeof t=="string"?"S":"P")+t;if(!ly(t,pn)){if(!uy(t))return"F";if(!n)return"E";cy(t)}return t[pn].objectID},tq=function(t,n){if(!ly(t,pn)){if(!uy(t))return!0;if(!n)return!1;cy(t)}return t[pn].weakData},rq=function(t){return Q7&&CD&&uy(t)&&!ly(t,pn)&&cy(t),t},iq=function(){nq.enable=function(){},CD=!0;var t=KT.f,n=U7([].splice),e={};e[pn]=1,t(e).length&&(KT.f=function(r){for(var s=t(r),a=0,o=s.length;a<o;a++)if(s[a]===pn){n(s,a,1);break}return s},V7({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:K7.f}))},nq=oy.exports={enable:iq,fastKey:eq,getWeakData:tq,onFreeze:rq};j7[pn]=!0;sq=ue,aq=se,oq=oy.exports,lq=Re,uq=ns,cq=Po,dq=ey,hq=Dt,fq=Gt,pq=_o,mq=Tr.f,vq=gn.forEach,gq=Ht,ED=So,yq=ED.set,bq=ED.getterFor,kD=function(t,n,e){var r=t.indexOf("Map")!==-1,s=t.indexOf("Weak")!==-1,a=r?"set":"add",o=aq[t],l=o&&o.prototype,u={},c;if(!gq||!hq(o)||!(s||l.forEach&&!lq(function(){new o().entries().next()})))c=e.getConstructor(n,t,r,a),oq.enable();else{c=n(function(p,v){yq(dq(p,d),{type:t,collection:new o}),v!=null&&cq(v,p[a],{that:p,AS_ENTRIES:r})});var d=c.prototype,f=bq(t);vq(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(p){var v=p=="add"||p=="set";p in l&&!(s&&p=="clear")&&uq(d,p,function(y,_){var S=f(this).collection;if(!v&&s&&!fq(y))return p=="get"?void 0:!1;var x=S[p](y===0?0:y,_);return v?this:x})}),s||mq(d,"size",{configurable:!0,get:function(){return f(this).collection.size}})}return pq(c,t,!1,!0),u[t]=c,sq({global:!0,forced:!0},u),s||e.setStrong(c,t,r),c},wq=Tr.f,Sq=Xs,ZT=tD,_q=ss,Tq=ey,xq=Po,Cq=gg,Eq=rD,lu=Ht,QT=oy.exports.fastKey,DD=So,JT=DD.set,Xm=DD.getterFor,PD={getConstructor:function(t,n,e,r){var s=t(function(c,d){Tq(c,a),JT(c,{type:n,index:Sq(null),first:void 0,last:void 0,size:0}),lu||(c.size=0),d!=null&&xq(d,c[r],{that:c,AS_ENTRIES:e})}),a=s.prototype,o=Xm(n),l=function(c,d,f){var p=o(c),v=u(c,d),y,_;return v?v.value=f:(p.last=v={index:_=QT(d,!0),key:d,value:f,previous:y=p.last,next:void 0,removed:!1},p.first||(p.first=v),y&&(y.next=v),lu?p.size++:c.size++,_!=="F"&&(p.index[_]=v)),c},u=function(c,d){var f=o(c),p=QT(d),v;if(p!=="F")return f.index[p];for(v=f.first;v;v=v.next)if(v.key==d)return v};return ZT(a,{clear:function(){for(var d=this,f=o(d),p=f.index,v=f.first;v;)v.removed=!0,v.previous&&(v.previous=v.previous.next=void 0),delete p[v.index],v=v.next;f.first=f.last=void 0,lu?f.size=0:d.size=0},delete:function(c){var d=this,f=o(d),p=u(d,c);if(p){var v=p.next,y=p.previous;delete f.index[p.index],p.removed=!0,y&&(y.next=v),v&&(v.previous=y),f.first==p&&(f.first=v),f.last==p&&(f.last=y),lu?f.size--:d.size--}return!!p},forEach:function(d){for(var f=o(this),p=_q(d,arguments.length>1?arguments[1]:void 0),v;v=v?v.next:f.first;)for(p(v.value,v.key,this);v&&v.removed;)v=v.previous},has:function(d){return!!u(this,d)}}),ZT(a,e?{get:function(d){var f=u(this,d);return f&&f.value},set:function(d,f){return l(this,d===0?0:d,f)}}:{add:function(d){return l(this,d=d===0?0:d,d)}}),lu&&wq(a,"size",{get:function(){return o(this).size}}),s},setStrong:function(t,n,e){var r=n+" Iterator",s=Xm(n),a=Xm(r);Cq(t,n,function(o,l){JT(this,{type:r,target:o,state:s(o),kind:l,last:void 0})},function(){for(var o=a(this),l=o.kind,u=o.last;u&&u.removed;)u=u.previous;return!o.target||!(o.last=u=u?u.next:o.state.first)?(o.target=void 0,{value:void 0,done:!0}):l=="keys"?{value:u.key,done:!1}:l=="values"?{value:u.value,done:!1}:{value:[u.key,u.value],done:!1}},e?"entries":"values",!e,!0),Eq(n)}},kq=kD,Dq=PD;kq("Map",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},Dq);Pq=Ve,Iq=Pq.Map,Oq=Iq,Mq=Oq;(function(t){t.exports=Mq})(xD);ID=re(xD.exports),OD={exports:{}},Fq=kD,$q=PD;Fq("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},$q);Nq=Ve,Aq=Nq.Set,Lq=Aq,Rq=Lq;(function(t){t.exports=Rq})(OD);Jn=re(OD.exports),MD={exports:{}};(function(t){t.exports=gE})(MD);$s=re(MD.exports),FD={exports:{}},Bq=bg,Gq=Bq,Hq=Gq,Wq=Hq,Yq=Wq,zq=Yq,Vq=zq,Uq=Vq;(function(t){t.exports=Uq})(FD);Km=re(FD.exports),$D={exports:{}},ex=IC,jq=Math.floor,jv=function(t,n){var e=t.length,r=jq(e/2);return e<8?qq(t,n):Xq(t,jv(ex(t,0,r),n),jv(ex(t,r),n),n)},qq=function(t,n){for(var e=t.length,r=1,s,a;r<e;){for(a=r,s=t[r];a&&n(t[a-1],s)>0;)t[a]=t[--a];a!==r++&&(t[a]=s)}return t},Xq=function(t,n,e,r){for(var s=n.length,a=e.length,o=0,l=0;o<s||l<a;)t[o+l]=o<s&&l<a?r(n[o],e[l])<=0?n[o++]:e[l++]:o<s?n[o++]:e[l++];return t},Kq=jv,Zq=is,tx=Zq.match(/firefox\/(\d+)/i),Qq=!!tx&&+tx[1],Jq=is,eX=/MSIE|Trident/.test(Jq),tX=is,rx=tX.match(/AppleWebKit\/(\d+)\./),rX=!!rx&&+rx[1],iX=ue,ND=Be,nX=wi,sX=_r,aX=Hr,ix=Ni,dy=Re,oX=Kq,lX=ko,nx=Qq,uX=eX,sx=wo,ax=rX,Kn=[],ox=ND(Kn.sort),cX=ND(Kn.push),dX=dy(function(){Kn.sort(void 0)}),hX=dy(function(){Kn.sort(null)}),fX=lX("sort"),AD=!dy(function(){if(sx)return sx<70;if(!(nx&&nx>3)){if(uX)return!0;if(ax)return ax<603;var t="",n,e,r,s;for(n=65;n<76;n++){switch(e=String.fromCharCode(n),n){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(s=0;s<47;s++)Kn.push({k:e+s,v:r})}for(Kn.sort(function(a,o){return o.v-a.v}),s=0;s<Kn.length;s++)e=Kn[s].k.charAt(0),t.charAt(t.length-1)!==e&&(t+=e);return t!=="DGBEFHACIJK"}}),pX=dX||!hX||!fX||!AD,mX=function(t){return function(n,e){return e===void 0?-1:n===void 0?1:t!==void 0?+t(n,e)||0:ix(n)>ix(e)?1:-1}};iX({target:"Array",proto:!0,forced:pX},{sort:function(n){n!==void 0&&nX(n);var e=sX(this);if(AD)return n===void 0?ox(e):ox(e,n);var r=[],s=aX(e),a,o;for(o=0;o<s;o++)o in e&&cX(r,e[o]);for(oX(r,mX(n)),a=r.length,o=0;o<a;)e[o]=r[o++];for(;o<s;)delete e[o++];return e}});vX=ut,gX=vX("Array").sort,yX=Qe,bX=gX,Zm=Array.prototype,wX=function(t){var n=t.sort;return t===Zm||yX(Zm,t)&&n===Zm.sort?bX:n},SX=wX,_X=SX;(function(t){t.exports=_X})($D);bt=re($D.exports),LD={exports:{}},TX=ue,xX=gn.some,CX=ko,EX=CX("some");TX({target:"Array",proto:!0,forced:!EX},{some:function(n){return xX(this,n,arguments.length>1?arguments[1]:void 0)}});kX=ut,DX=kX("Array").some,PX=Qe,IX=DX,Qm=Array.prototype,OX=function(t){var n=t.some;return t===Qm||PX(Qm,t)&&n===Qm.some?IX:n},MX=OX,FX=MX;(function(t){t.exports=FX})(LD);hy=re(LD.exports),RD={exports:{}},$X=ut,NX=$X("Array").keys,AX=NX,LX=AX,RX=vn,BX=Bt,GX=Qe,HX=LX,Jm=Array.prototype,WX={DOMTokenList:!0,NodeList:!0},YX=function(t){var n=t.keys;return t===Jm||GX(Jm,t)&&n===Jm.keys||BX(WX,RX(t))?HX:n};(function(t){t.exports=YX})(RD);Ds=re(RD.exports),BD={exports:{}},zX=ut,VX=zX("Array").values,UX=VX,jX=UX,qX=vn,XX=Bt,KX=Qe,ZX=jX,ev=Array.prototype,QX={DOMTokenList:!0,NodeList:!0},JX=function(t){var n=t.values;return t===ev||KX(ev,t)&&n===ev.values||XX(QX,qX(t))?ZX:n};(function(t){t.exports=JX})(BD);lx=re(BD.exports),GD={exports:{}},eK=ut,tK=eK("Array").entries,rK=tK,iK=rK,nK=vn,sK=Bt,aK=Qe,oK=iK,tv=Array.prototype,lK={DOMTokenList:!0,NodeList:!0},uK=function(t){var n=t.entries;return t===tv||aK(tv,t)&&n===tv.entries||sK(lK,nK(t))?oK:n};(function(t){t.exports=uK})(GD);cK=re(GD.exports),ux=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),dK=new Uint8Array(16);HD=[];for(uu=0;uu<256;++uu)HD[uu]=(uu+256).toString(16).substr(1);mK="6ba7b810-9dad-11d1-80b4-00c04fd430c8",vK="6ba7b811-9dad-11d1-80b4-00c04fd430c8";YD("v3",48,gK);YD("v5",80,TK);kK=function(){function t(n,e,r){var s,a,o;Pe(this,t),De(this,"_source",void 0),De(this,"_transformers",void 0),De(this,"_target",void 0),De(this,"_listeners",{add:R(s=this._add).call(s,this),remove:R(a=this._remove).call(a,this),update:R(o=this._update).call(o,this)}),this._source=n,this._transformers=e,this._target=r}return Ie(t,[{key:"all",value:function(){return this._target.update(this._transformItems(this._source.get())),this}},{key:"start",value:function(){return this._source.on("add",this._listeners.add),this._source.on("remove",this._listeners.remove),this._source.on("update",this._listeners.update),this}},{key:"stop",value:function(){return this._source.off("add",this._listeners.add),this._source.off("remove",this._listeners.remove),this._source.off("update",this._listeners.update),this}},{key:"_transformItems",value:function(e){var r;return zh(r=this._transformers).call(r,function(s,a){return a(s)},e)}},{key:"_add",value:function(e,r){r!=null&&this._target.add(this._transformItems(this._source.get(r.items)))}},{key:"_update",value:function(e,r){r!=null&&this._target.update(this._transformItems(this._source.get(r.items)))}},{key:"_remove",value:function(e,r){r!=null&&this._target.remove(this._transformItems(r.oldData))}}]),t}(),DK=function(){function t(n){Pe(this,t),De(this,"_source",void 0),De(this,"_transformers",[]),this._source=n}return Ie(t,[{key:"filter",value:function(e){return this._transformers.push(function(r){return oe(r).call(r,e)}),this}},{key:"map",value:function(e){return this._transformers.push(function(r){return He(r).call(r,e)}),this}},{key:"flatMap",value:function(e){return this._transformers.push(function(r){return N7(r).call(r,e)}),this}},{key:"to",value:function(e){return new kK(this._source,this._transformers,e)}}]),t}();UD=function(){function t(n){Pe(this,t),De(this,"delay",void 0),De(this,"max",void 0),De(this,"_queue",[]),De(this,"_timeout",null),De(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(n)}return Ie(t,[{key:"setOptions",value:function(e){e&&typeof e.delay!="undefined"&&(this.delay=e.delay),e&&typeof e.max!="undefined"&&(this.max=e.max),this._flushIfNeeded()}},{key:"destroy",value:function(){if(this.flush(),this._extended){for(var e=this._extended.object,r=this._extended.methods,s=0;s<r.length;s++){var a=r[s];a.original?e[a.name]=a.original:delete e[a.name]}this._extended=null}}},{key:"replace",value:function(e,r){var s=this,a=e[r];if(!a)throw new Error("Method "+r+" undefined");e[r]=function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];s.queue({args:l,fn:a,context:this})}}},{key:"queue",value:function(e){typeof e=="function"?this._queue.push({fn:e}):this._queue.push(e),this._flushIfNeeded()}},{key:"_flushIfNeeded",value:function(){var e=this;this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=nr(function(){e.flush()},this.delay))}},{key:"flush",value:function(){var e,r;K(e=cr(r=this._queue).call(r,0)).call(e,function(s){s.fn.apply(s.context||s.fn,s.args||[])})}}],[{key:"extend",value:function(e,r){var s=new t(r);if(e.flush!==void 0)throw new Error("Target object already has a property flush");e.flush=function(){s.flush()};var a=[{name:"flush",original:void 0}];if(r&&r.replace)for(var o=0;o<r.replace.length;o++){var l=r.replace[o];a.push({name:l,original:e[l]}),s.replace(e,l)}return s._extended={object:e,methods:a},s}}]),t}(),jD=function(){function t(){Pe(this,t),De(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),De(this,"subscribe",t.prototype.on),De(this,"unsubscribe",t.prototype.off)}return Ie(t,[{key:"_trigger",value:function(e,r,s){var a,o;if(e==="*")throw new Error("Cannot trigger event *");K(a=rt(o=[]).call(o,lt(this._subscribers[e]),lt(this._subscribers["*"]))).call(a,function(l){l(e,r,s!=null?s:null)})}},{key:"on",value:function(e,r){typeof r=="function"&&this._subscribers[e].push(r)}},{key:"off",value:function(e,r){var s;this._subscribers[e]=oe(s=this._subscribers[e]).call(s,function(a){return a!==r})}}]),t}();zD=$s;fx=function(){function t(n){Pe(this,t),De(this,"_pairs",void 0),this._pairs=n}return Ie(t,[{key:zD,value:vr.mark(function n(){var e,r,s,a,o;return vr.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:e=gr(this._pairs),u.prev=1,e.s();case 3:if((r=e.n()).done){u.next=9;break}return s=ur(r.value,2),a=s[0],o=s[1],u.next=7,[a,o];case 7:u.next=3;break;case 9:u.next=14;break;case 11:u.prev=11,u.t0=u.catch(1),e.e(u.t0);case 14:return u.prev=14,e.f(),u.finish(14);case 17:case"end":return u.stop()}},n,this,[[1,11,14,17]])})},{key:"entries",value:vr.mark(function n(){var e,r,s,a,o;return vr.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:e=gr(this._pairs),u.prev=1,e.s();case 3:if((r=e.n()).done){u.next=9;break}return s=ur(r.value,2),a=s[0],o=s[1],u.next=7,[a,o];case 7:u.next=3;break;case 9:u.next=14;break;case 11:u.prev=11,u.t0=u.catch(1),e.e(u.t0);case 14:return u.prev=14,e.f(),u.finish(14);case 17:case"end":return u.stop()}},n,this,[[1,11,14,17]])})},{key:"keys",value:vr.mark(function n(){var e,r,s,a;return vr.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:e=gr(this._pairs),l.prev=1,e.s();case 3:if((r=e.n()).done){l.next=9;break}return s=ur(r.value,1),a=s[0],l.next=7,a;case 7:l.next=3;break;case 9:l.next=14;break;case 11:l.prev=11,l.t0=l.catch(1),e.e(l.t0);case 14:return l.prev=14,e.f(),l.finish(14);case 17:case"end":return l.stop()}},n,this,[[1,11,14,17]])})},{key:"values",value:vr.mark(function n(){var e,r,s,a;return vr.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:e=gr(this._pairs),l.prev=1,e.s();case 3:if((r=e.n()).done){l.next=9;break}return s=ur(r.value,2),a=s[1],l.next=7,a;case 7:l.next=3;break;case 9:l.next=14;break;case 11:l.prev=11,l.t0=l.catch(1),e.e(l.t0);case 14:return l.prev=14,e.f(),l.finish(14);case 17:case"end":return l.stop()}},n,this,[[1,11,14,17]])})},{key:"toIdArray",value:function(){var e;return He(e=lt(this._pairs)).call(e,function(r){return r[0]})}},{key:"toItemArray",value:function(){var e;return He(e=lt(this._pairs)).call(e,function(r){return r[1]})}},{key:"toEntryArray",value:function(){return lt(this._pairs)}},{key:"toObjectMap",value:function(){var e=Ju(null),r=gr(this._pairs),s;try{for(r.s();!(s=r.n()).done;){var a=ur(s.value,2),o=a[0],l=a[1];e[o]=l}}catch(u){r.e(u)}finally{r.f()}return e}},{key:"toMap",value:function(){return new ID(this._pairs)}},{key:"toIdSet",value:function(){return new Jn(this.toIdArray())}},{key:"toItemSet",value:function(){return new Jn(this.toItemArray())}},{key:"cache",value:function(){return new t(lt(this._pairs))}},{key:"distinct",value:function(e){var r=new Jn,s=gr(this._pairs),a;try{for(s.s();!(a=s.n()).done;){var o=ur(a.value,2),l=o[0],u=o[1];r.add(e(u,l))}}catch(c){s.e(c)}finally{s.f()}return r}},{key:"filter",value:function(e){var r=this._pairs;return new t(De({},$s,vr.mark(function s(){var a,o,l,u,c;return vr.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:a=gr(r),f.prev=1,a.s();case 3:if((o=a.n()).done){f.next=10;break}if(l=ur(o.value,2),u=l[0],c=l[1],!e(c,u)){f.next=8;break}return f.next=8,[u,c];case 8:f.next=3;break;case 10:f.next=15;break;case 12:f.prev=12,f.t0=f.catch(1),a.e(f.t0);case 15:return f.prev=15,a.f(),f.finish(15);case 18:case"end":return f.stop()}},s,null,[[1,12,15,18]])})))}},{key:"forEach",value:function(e){var r=gr(this._pairs),s;try{for(r.s();!(s=r.n()).done;){var a=ur(s.value,2),o=a[0],l=a[1];e(l,o)}}catch(u){r.e(u)}finally{r.f()}}},{key:"map",value:function(e){var r=this._pairs;return new t(De({},$s,vr.mark(function s(){var a,o,l,u,c;return vr.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:a=gr(r),f.prev=1,a.s();case 3:if((o=a.n()).done){f.next=9;break}return l=ur(o.value,2),u=l[0],c=l[1],f.next=7,[u,e(c,u)];case 7:f.next=3;break;case 9:f.next=14;break;case 11:f.prev=11,f.t0=f.catch(1),a.e(f.t0);case 14:return f.prev=14,a.f(),f.finish(14);case 17:case"end":return f.stop()}},s,null,[[1,11,14,17]])})))}},{key:"max",value:function(e){var r=Km(this._pairs),s=r.next();if(s.done)return null;for(var a=s.value[1],o=e(s.value[1],s.value[0]);!(s=r.next()).done;){var l=ur(s.value,2),u=l[0],c=l[1],d=e(c,u);d>o&&(o=d,a=c)}return a}},{key:"min",value:function(e){var r=Km(this._pairs),s=r.next();if(s.done)return null;for(var a=s.value[1],o=e(s.value[1],s.value[0]);!(s=r.next()).done;){var l=ur(s.value,2),u=l[0],c=l[1],d=e(c,u);d<o&&(o=d,a=c)}return a}},{key:"reduce",value:function(e,r){var s=gr(this._pairs),a;try{for(s.s();!(a=s.n()).done;){var o=ur(a.value,2),l=o[0],u=o[1];r=e(r,u,l)}}catch(c){s.e(c)}finally{s.f()}return r}},{key:"sort",value:function(e){var r=this;return new t(De({},$s,function(){var s;return Km(bt(s=lt(r._pairs)).call(s,function(a,o){var l=ur(a,2),u=l[0],c=l[1],d=ur(o,2),f=d[0],p=d[1];return e(c,p,u,f)}))}))}}]),t}();zs=function(t){fr(e,t);var n=VD(e);function e(r,s){var a;return Pe(this,e),a=n.call(this),De(Ke(a),"flush",void 0),De(Ke(a),"length",void 0),De(Ke(a),"_options",void 0),De(Ke(a),"_data",void 0),De(Ke(a),"_idProp",void 0),De(Ke(a),"_queue",null),r&&!pe(r)&&(s=r,r=[]),a._options=s||{},a._data=new ID,a.length=0,a._idProp=a._options.fieldId||"id",r&&r.length&&a.add(r),a.setOptions(s),a}return Ie(e,[{key:"idProp",get:function(){return this._idProp}},{key:"setOptions",value:function(s){s&&s.queue!==void 0&&(s.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=UD.extend(this,{replace:["add","update","remove"]})),s.queue&&de(s.queue)==="object"&&this._queue.setOptions(s.queue)))}},{key:"add",value:function(s,a){var o=this,l=[],u;if(pe(s)){var c=He(s).call(s,function(p){return p[o._idProp]});if(hy(c).call(c,function(p){return o._data.has(p)}))throw new Error("A duplicate id was found in the parameter array.");for(var d=0,f=s.length;d<f;d++)u=this._addItem(s[d]),l.push(u)}else if(s&&de(s)==="object")u=this._addItem(s),l.push(u);else throw new Error("Unknown dataType");return l.length&&this._trigger("add",{items:l},a),l}},{key:"update",value:function(s,a){var o=this,l=[],u=[],c=[],d=[],f=this._idProp,p=function(x){var D=x[f];if(D!=null&&o._data.has(D)){var E=x,P=hn({},o._data.get(D)),O=o._updateItem(E);u.push(O),d.push(E),c.push(P)}else{var A=o._addItem(x);l.push(A)}};if(pe(s))for(var v=0,y=s.length;v<y;v++)s[v]&&de(s[v])==="object"?p(s[v]):console.warn("Ignoring input item, which is not an object at index "+v);else if(s&&de(s)==="object")p(s);else throw new Error("Unknown dataType");if(l.length&&this._trigger("add",{items:l},a),u.length){var _={items:u,oldData:c,data:d};this._trigger("update",_,a)}return rt(l).call(l,u)}},{key:"updateOnly",value:function(s,a){var o,l=this;pe(s)||(s=[s]);var u=He(o=He(s).call(s,function(d){var f=l._data.get(d[l._idProp]);if(f==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:f,update:d}})).call(o,function(d){var f=d.oldData,p=d.update,v=f[l._idProp],y=Pk(f,p);return l._data.set(v,y),{id:v,oldData:f,updatedData:y}});if(u.length){var c={items:He(u).call(u,function(d){return d.id}),oldData:He(u).call(u,function(d){return d.oldData}),data:He(u).call(u,function(d){return d.updatedData})};return this._trigger("update",c,a),c.items}else return[]}},{key:"get",value:function(s,a){var o=void 0,l=void 0,u=void 0;qv(s)?(o=s,u=a):pe(s)?(l=s,u=a):u=s;var c=u&&u.returnType==="Object"?"Object":"Array",d=u&&oe(u),f=[],p=void 0,v=void 0,y=void 0;if(o!=null)p=this._data.get(o),p&&d&&!d(p)&&(p=void 0);else if(l!=null)for(var _=0,S=l.length;_<S;_++)p=this._data.get(l[_]),p!=null&&(!d||d(p))&&f.push(p);else{var x;v=lt(Ds(x=this._data).call(x));for(var D=0,E=v.length;D<E;D++)y=v[D],p=this._data.get(y),p!=null&&(!d||d(p))&&f.push(p)}if(u&&u.order&&o==null&&this._sort(f,u.order),u&&u.fields){var P=u.fields;if(o!=null&&p!=null)p=this._filterFields(p,P);else for(var O=0,A=f.length;O<A;O++)f[O]=this._filterFields(f[O],P)}if(c=="Object"){for(var M={},I=0,H=f.length;I<H;I++){var z=f[I],U=z[this._idProp];M[U]=z}return M}else if(o!=null){var N;return(N=p)!==null&&N!==void 0?N:null}else return f}},{key:"getIds",value:function(s){var a=this._data,o=s&&oe(s),l=s&&s.order,u=lt(Ds(a).call(a)),c=[];if(o)if(l){for(var d=[],f=0,p=u.length;f<p;f++){var v=u[f],y=this._data.get(v);y!=null&&o(y)&&d.push(y)}this._sort(d,l);for(var _=0,S=d.length;_<S;_++)c.push(d[_][this._idProp])}else for(var x=0,D=u.length;x<D;x++){var E=u[x],P=this._data.get(E);P!=null&&o(P)&&c.push(P[this._idProp])}else if(l){for(var O=[],A=0,M=u.length;A<M;A++){var I=u[A];O.push(a.get(I))}this._sort(O,l);for(var H=0,z=O.length;H<z;H++)c.push(O[H][this._idProp])}else for(var U=0,N=u.length;U<N;U++){var $=u[U],B=a.get($);B!=null&&c.push(B[this._idProp])}return c}},{key:"getDataSet",value:function(){return this}},{key:"forEach",value:function(s,a){var o=a&&oe(a),l=this._data,u=lt(Ds(l).call(l));if(a&&a.order)for(var c=this.get(a),d=0,f=c.length;d<f;d++){var p=c[d],v=p[this._idProp];s(p,v)}else for(var y=0,_=u.length;y<_;y++){var S=u[y],x=this._data.get(S);x!=null&&(!o||o(x))&&s(x,S)}}},{key:"map",value:function(s,a){for(var o=a&&oe(a),l=[],u=this._data,c=lt(Ds(u).call(u)),d=0,f=c.length;d<f;d++){var p=c[d],v=this._data.get(p);v!=null&&(!o||o(v))&&l.push(s(v,p))}return a&&a.order&&this._sort(l,a.order),l}},{key:"_filterFields",value:function(s,a){var o;return s&&zh(o=pe(a)?a:kt(a)).call(o,function(l,u){return l[u]=s[u],l},{})}},{key:"_sort",value:function(s,a){if(typeof a=="string"){var o=a;bt(s).call(s,function(l,u){var c=l[o],d=u[o];return c>d?1:c<d?-1:0})}else if(typeof a=="function")bt(s).call(s,a);else throw new TypeError("Order must be a function or a string")}},{key:"remove",value:function(s,a){for(var o=[],l=[],u=pe(s)?s:[s],c=0,d=u.length;c<d;c++){var f=this._remove(u[c]);if(f){var p=f[this._idProp];p!=null&&(o.push(p),l.push(f))}}return o.length&&this._trigger("remove",{items:o,oldData:l},a),o}},{key:"_remove",value:function(s){var a;if(qv(s)?a=s:s&&de(s)==="object"&&(a=s[this._idProp]),a!=null&&this._data.has(a)){var o=this._data.get(a)||null;return this._data.delete(a),--this.length,o}return null}},{key:"clear",value:function(s){for(var a,o=lt(Ds(a=this._data).call(a)),l=[],u=0,c=o.length;u<c;u++)l.push(this._data.get(o[u]));return this._data.clear(),this.length=0,this._trigger("remove",{items:o,oldData:l},s),o}},{key:"max",value:function(s){var a,o=null,l=null,u=gr(lx(a=this._data).call(a)),c;try{for(u.s();!(c=u.n()).done;){var d=c.value,f=d[s];typeof f=="number"&&(l==null||f>l)&&(o=d,l=f)}}catch(p){u.e(p)}finally{u.f()}return o||null}},{key:"min",value:function(s){var a,o=null,l=null,u=gr(lx(a=this._data).call(a)),c;try{for(u.s();!(c=u.n()).done;){var d=c.value,f=d[s];typeof f=="number"&&(l==null||f<l)&&(o=d,l=f)}}catch(p){u.e(p)}finally{u.f()}return o||null}},{key:"distinct",value:function(s){for(var a=this._data,o=lt(Ds(a).call(a)),l=[],u=0,c=0,d=o.length;c<d;c++){for(var f=o[c],p=a.get(f),v=p[s],y=!1,_=0;_<u;_++)if(l[_]==v){y=!0;break}!y&&v!==void 0&&(l[u]=v,u++)}return l}},{key:"_addItem",value:function(s){var a=PK(s,this._idProp),o=a[this._idProp];if(this._data.has(o))throw new Error("Cannot add item: item with id "+o+" already exists");return this._data.set(o,a),++this.length,o}},{key:"_updateItem",value:function(s){var a=s[this._idProp];if(a==null)throw new Error("Cannot update item: item has no id (item: "+br(s)+")");var o=this._data.get(a);if(!o)throw new Error("Cannot update item: no item with id "+a+" found");return this._data.set(a,dx(dx({},o),s)),a}},{key:"stream",value:function(s){if(s){var a=this._data;return new fx(De({},$s,vr.mark(function l(){var u,c,d,f;return vr.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:u=gr(s),v.prev=1,u.s();case 3:if((c=u.n()).done){v.next=11;break}if(d=c.value,f=a.get(d),f==null){v.next=9;break}return v.next=9,[d,f];case 9:v.next=3;break;case 11:v.next=16;break;case 13:v.prev=13,v.t0=v.catch(1),u.e(v.t0);case 16:return v.prev=16,u.f(),v.finish(16);case 19:case"end":return v.stop()}},l,null,[[1,13,16,19]])})))}else{var o;return new fx(De({},$s,R(o=cK(this._data)).call(o,this._data)))}}}]),e}(jD),qD=function(t){fr(e,t);var n=VD(e);function e(r,s){var a,o;return Pe(this,e),o=n.call(this),De(Ke(o),"length",0),De(Ke(o),"_listener",void 0),De(Ke(o),"_data",void 0),De(Ke(o),"_ids",new Jn),De(Ke(o),"_options",void 0),o._options=s||{},o._listener=R(a=o._onEvent).call(a,Ke(o)),o.setData(r),o}return Ie(e,[{key:"idProp",get:function(){return this.getDataSet().idProp}},{key:"setData",value:function(s){if(this._data){this._data.off&&this._data.off("*",this._listener);var a=this._data.getIds({filter:oe(this._options)}),o=this._data.get(a);this._ids.clear(),this.length=0,this._trigger("remove",{items:a,oldData:o})}if(s!=null){this._data=s;for(var l=this._data.getIds({filter:oe(this._options)}),u=0,c=l.length;u<c;u++){var d=l[u];this._ids.add(d)}this.length=l.length,this._trigger("add",{items:l})}else this._data=new zs;this._data.on&&this._data.on("*",this._listener)}},{key:"refresh",value:function(){for(var s=this._data.getIds({filter:oe(this._options)}),a=lt(this._ids),o={},l=[],u=[],c=[],d=0,f=s.length;d<f;d++){var p=s[d];o[p]=!0,this._ids.has(p)||(l.push(p),this._ids.add(p))}for(var v=0,y=a.length;v<y;v++){var _=a[v],S=this._data.get(_);S==null?console.error("If you see this, report it please."):o[_]||(u.push(_),c.push(S),this._ids.delete(_))}this.length+=l.length-u.length,l.length&&this._trigger("add",{items:l}),u.length&&this._trigger("remove",{items:u,oldData:c})}},{key:"get",value:function(s,a){if(this._data==null)return null;var o=null,l;qv(s)||pe(s)?(o=s,l=a):l=s;var u=hn({},this._options,l),c=oe(this._options),d=l&&oe(l);return c&&d&&(u.filter=function(f){return c(f)&&d(f)}),o==null?this._data.get(u):this._data.get(o,u)}},{key:"getIds",value:function(s){if(this._data.length){var a=oe(this._options),o=s!=null?oe(s):null,l;return o?a?l=function(c){return a(c)&&o(c)}:l=o:l=a,this._data.getIds({filter:l,order:s&&s.order})}else return[]}},{key:"forEach",value:function(s,a){if(this._data){var o,l=oe(this._options),u=a&&oe(a),c;u?l?c=function(f){return l(f)&&u(f)}:c=u:c=l,K(o=this._data).call(o,s,{filter:c,order:a&&a.order})}}},{key:"map",value:function(s,a){if(this._data){var o,l=oe(this._options),u=a&&oe(a),c;return u?l?c=function(f){return l(f)&&u(f)}:c=u:c=l,He(o=this._data).call(o,s,{filter:c,order:a&&a.order})}else return[]}},{key:"getDataSet",value:function(){return this._data.getDataSet()}},{key:"stream",value:function(s){var a;return this._data.stream(s||De({},$s,R(a=Ds(this._ids)).call(a,this._ids)))}},{key:"dispose",value:function(){var s;(s=this._data)!==null&&s!==void 0&&s.off&&this._data.off("*",this._listener);var a="This data view has already been disposed of.",o={get:function(){throw new Error(a)},set:function(){throw new Error(a)},configurable:!1},l=gr(_E(e.prototype)),u;try{for(l.s();!(u=l.n()).done;){var c=u.value;Zu(this,c,o)}}catch(d){l.e(d)}finally{l.f()}}},{key:"_onEvent",value:function(s,a,o){if(!(!a||!a.items||!this._data)){var l=a.items,u=[],c=[],d=[],f=[],p=[],v=[];switch(s){case"add":for(var y=0,_=l.length;y<_;y++){var S=l[y],x=this.get(S);x&&(this._ids.add(S),u.push(S))}break;case"update":for(var D=0,E=l.length;D<E;D++){var P=l[D],O=this.get(P);O?this._ids.has(P)?(c.push(P),p.push(a.data[D]),f.push(a.oldData[D])):(this._ids.add(P),u.push(P)):this._ids.has(P)&&(this._ids.delete(P),d.push(P),v.push(a.oldData[D]))}break;case"remove":for(var A=0,M=l.length;A<M;A++){var I=l[A];this._ids.has(I)&&(this._ids.delete(I),d.push(I),v.push(a.oldData[A]))}break}this.length+=u.length-d.length,u.length&&this._trigger("add",{items:u},o),c.length&&this._trigger("update",{items:c,oldData:f,data:p},o),d.length&&this._trigger("remove",{items:d,oldData:v},o)}}}]),e}(jD);ir=typeof window!="undefined"&&window.moment||bi(),fi=bi(),Xv={exports:{}},pt={},Mu={exports:{}},Qs={};$K=/javascript\s*\:/img;Qs.whiteList=XD();Qs.getDefaultWhiteList=XD;Qs.onAttr=MK;Qs.onIgnoreAttr=FK;Qs.safeAttrValue=NK;AK={indexOf:function(t,n){var e,r;if(Array.prototype.indexOf)return t.indexOf(n);for(e=0,r=t.length;e<r;e++)if(t[e]===n)return e;return-1},forEach:function(t,n,e){var r,s;if(Array.prototype.forEach)return t.forEach(n,e);for(r=0,s=t.length;r<s;r++)n.call(e,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},cu=AK;RK=LK,Ad=Qs,BK=RK;KD.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var n=this,e=n.options,r=e.whiteList,s=e.onAttr,a=e.onIgnoreAttr,o=e.safeAttrValue,l=BK(t,function(u,c,d,f,p){var v=r[d],y=!1;if(v===!0?y=v:typeof v=="function"?y=v(f):v instanceof RegExp&&(y=v.test(f)),y!==!0&&(y=!1),f=o(d,f),!!f){var _={position:c,sourcePosition:u,source:p,isWhite:y};if(y){var S=s(d,f,_);return px(S)?d+":"+f:S}else{var S=a(d,f,_);if(!px(S))return S}}});return l};HK=KD;(function(t,n){var e=Qs,r=HK;function s(o,l){var u=new r(l);return u.process(o)}n=t.exports=s,n.FilterCSS=r;for(var a in e)n[a]=e[a];typeof window!="undefined"&&(window.filterCSS=t.exports)})(Mu,Mu.exports);fy={indexOf:function(t,n){var e,r;if(Array.prototype.indexOf)return t.indexOf(n);for(e=0,r=t.length;e<r;e++)if(t[e]===n)return e;return-1},forEach:function(t,n,e){var r,s;if(Array.prototype.forEach)return t.forEach(n,e);for(r=0,s=t.length;r<s;r++)n.call(e,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var n=/\s|\n|\t/,e=n.exec(t);return e?e.index:-1}},WK=Mu.exports.FilterCSS,YK=Mu.exports.getDefaultWhiteList,ch=fy;QD=new WK;XK=/</g,KK=/>/g,ZK=/"/g,QK=/&quot;/g,JK=/&#([a-zA-Z0-9]*);?/gim,eZ=/&colon;?/gim,tZ=/&newline;?/gim,Ld=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,mx=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,vx=/u\s*r\s*l\s*\(.*/gi;pt.whiteList=ZD();pt.getDefaultWhiteList=ZD;pt.onTag=zK;pt.onIgnoreTag=VK;pt.onTagAttr=UK;pt.onIgnoreTagAttr=jK;pt.safeAttrValue=qK;pt.escapeHtml=JD;pt.escapeQuote=e1;pt.unescapeQuote=t1;pt.escapeHtmlEntities=r1;pt.escapeDangerHtml5Entities=i1;pt.clearNonPrintableCharacter=n1;pt.friendlyAttrValue=s1;pt.escapeAttrValue=a1;pt.onIgnoreTagStripAll=rZ;pt.StripTagBody=iZ;pt.stripCommentTag=nZ;pt.stripBlankChar=sZ;pt.cssFilter=QD;pt.getDefaultCSSWhiteList=YK;Uh={},Un=fy;uZ=/[^a-zA-Z0-9\\_:.-]/gim;Uh.parseTag=lZ;Uh.parseAttr=cZ;mZ=Mu.exports.FilterCSS,pi=pt,o1=Uh,vZ=o1.parseTag,gZ=o1.parseAttr,Xd=fy;l1.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var n=this,e=n.options,r=e.whiteList,s=e.onTag,a=e.onIgnoreTag,o=e.onTagAttr,l=e.onIgnoreTagAttr,u=e.safeAttrValue,c=e.escapeHtml,d=n.cssFilter;e.stripBlankChar&&(t=pi.stripBlankChar(t)),e.allowCommentTag||(t=pi.stripCommentTag(t));var f=!1;e.stripIgnoreTagBody&&(f=pi.StripTagBody(e.stripIgnoreTagBody,a),a=f.onIgnoreTag);var p=vZ(t,function(v,y,_,S,x){var D={sourcePosition:v,position:y,isClosing:x,isWhite:Object.prototype.hasOwnProperty.call(r,_)},E=s(_,S,D);if(!Rd(E))return E;if(D.isWhite){if(D.isClosing)return"</"+_+">";var P=yZ(S),O=r[_],A=gZ(P.html,function(M,I){var H=Xd.indexOf(O,M)!==-1,z=o(_,M,I,H);return Rd(z)?H?(I=u(_,M,I,d),I?M+'="'+I+'"':M):(z=l(_,M,I,H),Rd(z)?void 0:z):z});return S="<"+_,A&&(S+=" "+A),P.closing&&(S+=" /"),S+=">",S}else return E=a(_,S,D),Rd(E)?c(S):E},c);return f&&(p=f.remove(p)),p};SZ=l1;(function(t,n){var e=pt,r=Uh,s=SZ;function a(l,u){var c=new s(u);return c.process(l)}n=t.exports=a,n.filterXSS=a,n.FilterXSS=s,function(){for(var l in e)n[l]=e[l];for(var u in r)n[u]=r[u]}(),typeof window!="undefined"&&(window.filterXSS=t.exports);function o(){return typeof self!="undefined"&&typeof DedicatedWorkerGlobalScope!="undefined"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=t.exports)})(Xv,Xv.exports);_Z=Xv.exports;iv=/^\/?Date\((-?\d+)/i,TZ=/^\d+$/;u1=function(n){var e=new _Z.FilterXSS(n);return function(r){return e.process(r)}},xZ=function(n){return n},Kv=u1(),CZ=function(n){n&&(n.disabled===!0?(Kv=xZ,console.warn("You disabled XSS protection for vis-Timeline. I sure hope you know what you're doing!")):n.filterOptions&&(Kv=u1(n.filterOptions)))},C=bx(bx({},Rk),{},{convert:py,setupXSSProtection:CZ});Zu(C,"xss",{get:function(){return Kv}});c1={exports:{}},d1=se,EZ=Re,kZ=Be,DZ=Ni,PZ=Mg.trim,IZ=Ah,OZ=kZ("".charAt),dh=d1.parseFloat,wx=d1.Symbol,Sx=wx&&wx.iterator,MZ=1/dh(IZ+"-0")!==-1/0||Sx&&!EZ(function(){dh(Object(Sx))}),FZ=MZ?function(n){var e=PZ(DZ(n)),r=dh(e);return r===0&&OZ(e,0)=="-"?-0:r}:dh,$Z=ue,_x=FZ;$Z({global:!0,forced:parseFloat!=_x},{parseFloat:_x});NZ=Ve,AZ=NZ.parseFloat,LZ=AZ,RZ=LZ;(function(t){t.exports=RZ})(c1);hh=re(c1.exports),bn=function(){function t(n,e){Pe(this,t),this.options=null,this.props=null}return Ie(t,[{key:"setOptions",value:function(e){e&&C.extend(this.options,e)}},{key:"redraw",value:function(){return!1}},{key:"destroy",value:function(){}},{key:"_isResized",value:function(){var e=this.props._previousWidth!==this.props.width||this.props._previousHeight!==this.props.height;return this.props._previousWidth=this.props.width,this.props._previousHeight=this.props.height,e}}]),t}(),h1={exports:{}},BZ=se,GZ=Gu,HZ=Ni,WZ=bo,YZ=BZ.RangeError,zZ=function(n){var e=HZ(WZ(this)),r="",s=GZ(n);if(s<0||s==1/0)throw YZ("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(e+=e))s&1&&(r+=e);return r},VZ=ue,UZ=zZ;VZ({target:"String",proto:!0},{repeat:UZ});jZ=ut,qZ=jZ("String").repeat,XZ=Qe,KZ=qZ,nv=String.prototype,ZZ=function(t){var n=t.repeat;return typeof t=="string"||t===nv||XZ(nv,t)&&n===nv.repeat?KZ:n},QZ=ZZ,JZ=QZ;(function(t){t.exports=JZ})(h1);eo=re(h1.exports);tQ=Object.freeze({__proto__:null,convertHiddenOptions:jh,updateHiddenDates:Fu,removeDuplicates:f1,printDates:eQ,stepOverHiddenDates:p1,toScreen:Zv,toTime:Qv,getHiddenDurationBetween:lo,getHiddenDurationBeforeStart:m1,correctTimeForHidden:Jv,getHiddenDurationBefore:$u,getAccumulatedHiddenDuration:v1,snapAwayFromHidden:jn,getIsHidden:Nu});my=function(t){fr(e,t);var n=rQ(e);function e(r,s){var a,o,l,u,c,d,f,p;Pe(this,e),p=n.call(this);var v=ir().hours(0).minutes(0).seconds(0).milliseconds(0),y=v.clone().add(-3,"days").valueOf(),_=v.clone().add(3,"days").valueOf();return p.millisecondsPerPixelCache=void 0,s===void 0?(p.start=y,p.end=_):(p.start=s.start||y,p.end=s.end||_),p.rolling=!1,p.body=r,p.deltaDifference=0,p.scaleOffset=0,p.startToFront=!1,p.endToFront=!0,p.defaultOptions={rtl:!1,start:null,end:null,moment:ir,direction:"horizontal",moveable:!0,zoomable:!0,min:null,max:null,zoomMin:10,zoomMax:1e3*60*60*24*365*1e4,rollingMode:{follow:!1,offset:.5}},p.options=C.extend({},p.defaultOptions),p.props={touch:{}},p.animationTimer=null,p.body.emitter.on("panstart",R(a=p._onDragStart).call(a,Ke(p))),p.body.emitter.on("panmove",R(o=p._onDrag).call(o,Ke(p))),p.body.emitter.on("panend",R(l=p._onDragEnd).call(l,Ke(p))),p.body.emitter.on("mousewheel",R(u=p._onMouseWheel).call(u,Ke(p))),p.body.emitter.on("touch",R(c=p._onTouch).call(c,Ke(p))),p.body.emitter.on("pinch",R(d=p._onPinch).call(d,Ke(p))),p.body.dom.rollingModeBtn.addEventListener("click",R(f=p.startRolling).call(f,Ke(p))),p.setOptions(s),p}return Ie(e,[{key:"setOptions",value:function(s){if(s){var a=["animation","direction","min","max","zoomMin","zoomMax","moveable","zoomable","moment","activate","hiddenDates","zoomKey","zoomFriction","rtl","showCurrentTime","rollingMode","horizontalScroll"];C.selectiveExtend(a,this.options,s),s.rollingMode&&s.rollingMode.follow&&this.startRolling(),("start"in s||"end"in s)&&this.setRange(s.start,s.end)}}},{key:"startRolling",value:function(){var s=this;function a(){s.stopRolling(),s.rolling=!0;var o=s.end-s.start,l=C.convert(new Date,"Date").valueOf(),u=s.options.rollingMode&&s.options.rollingMode.offset||.5,c=l-o*u,d=l+o*(1-u),f={animation:!1};s.setRange(c,d,f);var p=s.conversion(s.body.domProps.center.width).scale;o=1/p/10,o<30&&(o=30),o>1e3&&(o=1e3),s.body.dom.rollingModeBtn.style.visibility="hidden",s.currentTimeTimer=nr(a,o)}a()}},{key:"stopRolling",value:function(){this.currentTimeTimer!==void 0&&(clearTimeout(this.currentTimeTimer),this.rolling=!1,this.body.dom.rollingModeBtn.style.visibility="visible")}},{key:"setRange",value:function(s,a,o,l,u){o||(o={}),o.byUser!==!0&&(o.byUser=!1);var c=this,d=s!=null?C.convert(s,"Date").valueOf():null,f=a!=null?C.convert(a,"Date").valueOf():null;if(this._cancelAnimation(),this.millisecondsPerPixelCache=void 0,o.animation){var p=this.start,v=this.end,y=de(o.animation)==="object"&&"duration"in o.animation?o.animation.duration:500,_=de(o.animation)==="object"&&"easingFunction"in o.animation?o.animation.easingFunction:"easeInOutQuad",S=C.easingFunctions[_];if(!S){var x;throw new Error(rt(x="Unknown easing function ".concat(br(_),". Choose from: ")).call(x,kt(C.easingFunctions).join(", ")))}var D=Nr(),E=!1,P=function M(){if(!c.props.touch.dragging){var I=Nr(),H=I-D,z=S(H/y),U=H>y,N=U||d===null?d:p+(d-p)*z,$=U||f===null?f:v+(f-v)*z;O=c._applyRange(N,$),Fu(c.options.moment,c.body,c.options.hiddenDates),E=E||O;var B={start:new Date(c.start),end:new Date(c.end),byUser:o.byUser,event:o.event};if(u&&u(z,O,U),O&&c.body.emitter.emit("rangechange",B),U){if(E&&(c.body.emitter.emit("rangechanged",B),l))return l()}else c.animationTimer=nr(M,20)}};return P()}else{var O=this._applyRange(d,f);if(Fu(this.options.moment,this.body,this.options.hiddenDates),O){var A={start:new Date(this.start),end:new Date(this.end),byUser:o.byUser,event:o.event};if(this.body.emitter.emit("rangechange",A),clearTimeout(c.timeoutID),c.timeoutID=nr(function(){c.body.emitter.emit("rangechanged",A)},200),l)return l()}}}},{key:"getMillisecondsPerPixel",value:function(){return this.millisecondsPerPixelCache===void 0&&(this.millisecondsPerPixelCache=(this.end-this.start)/this.body.dom.center.clientWidth),this.millisecondsPerPixelCache}},{key:"_cancelAnimation",value:function(){this.animationTimer&&(clearTimeout(this.animationTimer),this.animationTimer=null)}},{key:"_applyRange",value:function(s,a){var o=s!=null?C.convert(s,"Date").valueOf():this.start,l=a!=null?C.convert(a,"Date").valueOf():this.end,u=this.options.max!=null?C.convert(this.options.max,"Date").valueOf():null,c=this.options.min!=null?C.convert(this.options.min,"Date").valueOf():null,d;if(isNaN(o)||o===null)throw new Error('Invalid start "'.concat(s,'"'));if(isNaN(l)||l===null)throw new Error('Invalid end "'.concat(a,'"'));if(l<o&&(l=o),c!==null&&o<c&&(d=c-o,o+=d,l+=d,u!=null&&l>u&&(l=u)),u!==null&&l>u&&(d=l-u,o-=d,l-=d,c!=null&&o<c&&(o=c)),this.options.zoomMin!==null){var f=hh(this.options.zoomMin);if(f<0&&(f=0),l-o<f){var p=.5;this.end-this.start===f&&o>=this.start-p&&l<=this.end?(o=this.start,l=this.end):(d=f-(l-o),o-=d/2,l+=d/2)}}if(this.options.zoomMax!==null){var v=hh(this.options.zoomMax);v<0&&(v=0),l-o>v&&(this.end-this.start===v&&o<this.start&&l>this.end?(o=this.start,l=this.end):(d=l-o-v,o+=d/2,l-=d/2))}var y=this.start!=o||this.end!=l;return!(o>=this.start&&o<=this.end||l>=this.start&&l<=this.end)&&!(this.start>=o&&this.start<=l||this.end>=o&&this.end<=l)&&this.body.emitter.emit("checkRangedItems"),this.start=o,this.end=l,y}},{key:"getRange",value:function(){return{start:this.start,end:this.end}}},{key:"conversion",value:function(s,a){return e.conversion(this.start,this.end,s,a)}},{key:"_onDragStart",value:function(s){this.deltaDifference=0,this.previousDelta=0,this.options.moveable&&this._isInsideRange(s)&&this.props.touch.allowDragging&&(this.stopRolling(),this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.dragging=!0,this.body.dom.root&&(this.body.dom.root.style.cursor="move"))}},{key:"_onDrag",value:function(s){if(s&&this.props.touch.dragging&&this.options.moveable&&this.props.touch.allowDragging){var a=this.options.direction;Tx(a);var o=a=="horizontal"?s.deltaX:s.deltaY;o-=this.deltaDifference;var l=this.props.touch.end-this.props.touch.start,u=lo(this.body.hiddenDates,this.start,this.end);l-=u;var c=a=="horizontal"?this.body.domProps.center.width:this.body.domProps.center.height,d;this.options.rtl?d=o/c*l:d=-o/c*l;var f=this.props.touch.start+d,p=this.props.touch.end+d,v=jn(this.body.hiddenDates,f,this.previousDelta-o,!0),y=jn(this.body.hiddenDates,p,this.previousDelta-o,!0);if(v!=f||y!=p){this.deltaDifference+=o,this.props.touch.start=v,this.props.touch.end=y,this._onDrag(s);return}this.previousDelta=o,this._applyRange(f,p);var _=new Date(this.start),S=new Date(this.end);this.body.emitter.emit("rangechange",{start:_,end:S,byUser:!0,event:s}),this.body.emitter.emit("panmove")}}},{key:"_onDragEnd",value:function(s){this.props.touch.dragging&&this.options.moveable&&this.props.touch.allowDragging&&(this.props.touch.dragging=!1,this.body.dom.root&&(this.body.dom.root.style.cursor="auto"),this.body.emitter.emit("rangechanged",{start:new Date(this.start),end:new Date(this.end),byUser:!0,event:s}))}},{key:"_onMouseWheel",value:function(s){var a=0;if(s.wheelDelta?a=s.wheelDelta/120:s.detail?a=-s.detail/3:s.deltaY&&(a=-s.deltaY/3),!(this.options.zoomKey&&!s[this.options.zoomKey]&&this.options.zoomable||!this.options.zoomable&&this.options.moveable)&&this.options.zoomable&&this.options.moveable&&this._isInsideRange(s)&&a){var o=this.options.zoomFriction||5,l;a<0?l=1-a/o:l=1/(1+a/o);var u;if(this.rolling){var c=this.options.rollingMode&&this.options.rollingMode.offset||.5;u=this.start+(this.end-this.start)*c}else{var d=this.getPointer({x:s.clientX,y:s.clientY},this.body.dom.center);u=this._pointerToDate(d)}this.zoom(l,u,a,s),s.preventDefault()}}},{key:"_onTouch",value:function(s){this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.allowDragging=!0,this.props.touch.center=null,this.props.touch.centerDate=null,this.scaleOffset=0,this.deltaDifference=0,C.preventDefault(s)}},{key:"_onPinch",value:function(s){if(this.options.zoomable&&this.options.moveable){C.preventDefault(s),this.props.touch.allowDragging=!1,this.props.touch.center||(this.props.touch.center=this.getPointer(s.center,this.body.dom.center),this.props.touch.centerDate=this._pointerToDate(this.props.touch.center)),this.stopRolling();var a=1/(s.scale+this.scaleOffset),o=this.props.touch.centerDate,l=lo(this.body.hiddenDates,this.start,this.end),u=$u(this.options.moment,this.body.hiddenDates,this,o),c=l-u,d=o-u+(this.props.touch.start-(o-u))*a,f=o+c+(this.props.touch.end-(o+c))*a;this.startToFront=1-a<=0,this.endToFront=a-1<=0;var p=jn(this.body.hiddenDates,d,1-a,!0),v=jn(this.body.hiddenDates,f,a-1,!0);(p!=d||v!=f)&&(this.props.touch.start=p,this.props.touch.end=v,this.scaleOffset=1-s.scale,d=p,f=v);var y={animation:!1,byUser:!0,event:s};this.setRange(d,f,y),this.startToFront=!1,this.endToFront=!0}}},{key:"_isInsideRange",value:function(s){var a=s.center?s.center.x:s.clientX,o=this.body.dom.centerContainer.getBoundingClientRect(),l=this.options.rtl?a-o.left:o.right-a,u=this.body.util.toTime(l);return u>=this.start&&u<=this.end}},{key:"_pointerToDate",value:function(s){var a,o=this.options.direction;if(Tx(o),o=="horizontal")return this.body.util.toTime(s.x).valueOf();var l=this.body.domProps.center.height;return a=this.conversion(l),s.y/a.scale+a.offset}},{key:"getPointer",value:function(s,a){var o=a.getBoundingClientRect();return this.options.rtl?{x:o.right-s.x,y:s.y-o.top}:{x:s.x-o.left,y:s.y-o.top}}},{key:"zoom",value:function(s,a,o,l){a==null&&(a=(this.start+this.end)/2);var u=lo(this.body.hiddenDates,this.start,this.end),c=$u(this.options.moment,this.body.hiddenDates,this,a),d=u-c,f=a-c+(this.start-(a-c))*s,p=a+d+(this.end-(a+d))*s;this.startToFront=!(o>0),this.endToFront=!(-o>0);var v=jn(this.body.hiddenDates,f,o,!0),y=jn(this.body.hiddenDates,p,-o,!0);(v!=f||y!=p)&&(f=v,p=y);var _={animation:!1,byUser:!0,event:l};this.setRange(f,p,_),this.startToFront=!1,this.endToFront=!0}},{key:"move",value:function(s){var a=this.end-this.start,o=this.start+a*s,l=this.end+a*s;this.start=o,this.end=l}},{key:"moveTo",value:function(s){var a=(this.start+this.end)/2,o=a-s,l=this.start-o,u=this.end-o,c={animation:!1,byUser:!0,event:null};this.setRange(l,u,c)}}],[{key:"conversion",value:function(s,a,o,l){return l===void 0&&(l=0),o!=0&&a-s!=0?{offset:s,scale:o/(a-s-l)}:{offset:0,scale:1}}}]),e}(bn);g1={exports:{}},nQ=Ve,sQ=nQ.setInterval;(function(t){t.exports=sQ})(g1);aQ=re(g1.exports),Bd=null;typeof window!="undefined"?(xx=window.Hammer||Hg,tg=eg(xx,{preventDefault:"mouse"})):tg=function(){return oQ()};rr=tg;Au=function(){function t(n,e,r,s,a){Pe(this,t),this.moment=a&&a.moment||ir,this.options=a||{},this.current=this.moment(),this._start=this.moment(),this._end=this.moment(),this.autoScale=!0,this.scale="day",this.step=1,this.setRange(n,e,r),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,pe(s)?this.hiddenDates=s:s!=null?this.hiddenDates=[s]:this.hiddenDates=[],this.format=t.FORMAT}return Ie(t,[{key:"setMoment",value:function(e){this.moment=e,this.current=this.moment(this.current.valueOf()),this._start=this.moment(this._start.valueOf()),this._end=this.moment(this._end.valueOf())}},{key:"setFormat",value:function(e){var r=C.deepExtend({},t.FORMAT);this.format=C.deepExtend(r,e)}},{key:"setRange",value:function(e,r,s){if(!(e instanceof Date)||!(r instanceof Date))throw"No legal start or end date in method setRange";this._start=e!=null?this.moment(e.valueOf()):Nr(),this._end=r!=null?this.moment(r.valueOf()):Nr(),this.autoScale&&this.setMinimumStep(s)}},{key:"start",value:function(){this.current=this._start.clone(),this.roundToMinor()}},{key:"roundToMinor",value:function(){switch(this.scale=="week"&&this.current.weekday(0),this.scale){case"year":this.current.year(this.step*Math.floor(this.current.year()/this.step)),this.current.month(0);case"month":this.current.date(1);case"week":case"day":case"weekday":this.current.hours(0);case"hour":this.current.minutes(0);case"minute":this.current.seconds(0);case"second":this.current.milliseconds(0)}if(this.step!=1){var e=this.current.clone();switch(this.scale){case"millisecond":this.current.subtract(this.current.milliseconds()%this.step,"milliseconds");break;case"second":this.current.subtract(this.current.seconds()%this.step,"seconds");break;case"minute":this.current.subtract(this.current.minutes()%this.step,"minutes");break;case"hour":this.current.subtract(this.current.hours()%this.step,"hours");break;case"weekday":case"day":this.current.subtract((this.current.date()-1)%this.step,"day");break;case"week":this.current.subtract(this.current.week()%this.step,"week");break;case"month":this.current.subtract(this.current.month()%this.step,"month");break;case"year":this.current.subtract(this.current.year()%this.step,"year");break}e.isSame(this.current)||(this.current=this.moment(jn(this.hiddenDates,this.current.valueOf(),-1,!0)))}}},{key:"hasNext",value:function(){return this.current.valueOf()<=this._end.valueOf()}},{key:"next",value:function(){var e=this.current.valueOf();switch(this.scale){case"millisecond":this.current.add(this.step,"millisecond");break;case"second":this.current.add(this.step,"second");break;case"minute":this.current.add(this.step,"minute");break;case"hour":this.current.add(this.step,"hour"),this.current.month()<6?this.current.subtract(this.current.hours()%this.step,"hour"):this.current.hours()%this.step!==0&&this.current.add(this.step-this.current.hours()%this.step,"hour");break;case"weekday":case"day":this.current.add(this.step,"day");break;case"week":if(this.current.weekday()!==0)this.current.weekday(0),this.current.add(this.step,"week");else if(this.options.showMajorLabels===!1)this.current.add(this.step,"week");else{var r=this.current.clone();r.add(1,"week"),r.isSame(this.current,"month")?this.current.add(this.step,"week"):(this.current.add(this.step,"week"),this.current.date(1))}break;case"month":this.current.add(this.step,"month");break;case"year":this.current.add(this.step,"year");break}if(this.step!=1)switch(this.scale){case"millisecond":this.current.milliseconds()>0&&this.current.milliseconds()<this.step&&this.current.milliseconds(0);break;case"second":this.current.seconds()>0&&this.current.seconds()<this.step&&this.current.seconds(0);break;case"minute":this.current.minutes()>0&&this.current.minutes()<this.step&&this.current.minutes(0);break;case"hour":this.current.hours()>0&&this.current.hours()<this.step&&this.current.hours(0);break;case"weekday":case"day":this.current.date()<this.step+1&&this.current.date(1);break;case"week":this.current.week()<this.step&&this.current.week(1);break;case"month":this.current.month()<this.step&&this.current.month(0);break}this.current.valueOf()==e&&(this.current=this._end.clone()),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,p1(this.moment,this,e)}},{key:"getCurrent",value:function(){return this.current.clone()}},{key:"setScale",value:function(e){e&&typeof e.scale=="string"&&(this.scale=e.scale,this.step=e.step>0?e.step:1,this.autoScale=!1)}},{key:"setAutoScale",value:function(e){this.autoScale=e}},{key:"setMinimumStep",value:function(e){if(e!=null){var r=1e3*60*60*24*30*12,s=1e3*60*60*24*30,a=1e3*60*60*24,o=1e3*60*60,l=1e3*60,u=1e3,c=1;r*1e3>e&&(this.scale="year",this.step=1e3),r*500>e&&(this.scale="year",this.step=500),r*100>e&&(this.scale="year",this.step=100),r*50>e&&(this.scale="year",this.step=50),r*10>e&&(this.scale="year",this.step=10),r*5>e&&(this.scale="year",this.step=5),r>e&&(this.scale="year",this.step=1),s*3>e&&(this.scale="month",this.step=3),s>e&&(this.scale="month",this.step=1),a*7>e&&this.options.showWeekScale&&(this.scale="week",this.step=1),a*2>e&&(this.scale="day",this.step=2),a>e&&(this.scale="day",this.step=1),a/2>e&&(this.scale="weekday",this.step=1),o*4>e&&(this.scale="hour",this.step=4),o>e&&(this.scale="hour",this.step=1),l*15>e&&(this.scale="minute",this.step=15),l*10>e&&(this.scale="minute",this.step=10),l*5>e&&(this.scale="minute",this.step=5),l>e&&(this.scale="minute",this.step=1),u*15>e&&(this.scale="second",this.step=15),u*10>e&&(this.scale="second",this.step=10),u*5>e&&(this.scale="second",this.step=5),u>e&&(this.scale="second",this.step=1),c*200>e&&(this.scale="millisecond",this.step=200),c*100>e&&(this.scale="millisecond",this.step=100),c*50>e&&(this.scale="millisecond",this.step=50),c*10>e&&(this.scale="millisecond",this.step=10),c*5>e&&(this.scale="millisecond",this.step=5),c>e&&(this.scale="millisecond",this.step=1)}}},{key:"isMajor",value:function(){if(this.switchedYear==!0)switch(this.scale){case"year":case"month":case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(this.switchedMonth==!0)switch(this.scale){case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(this.switchedDay==!0)switch(this.scale){case"millisecond":case"second":case"minute":case"hour":return!0;default:return!1}var e=this.moment(this.current);switch(this.scale){case"millisecond":return e.milliseconds()==0;case"second":return e.seconds()==0;case"minute":return e.hours()==0&&e.minutes()==0;case"hour":return e.hours()==0;case"weekday":case"day":return this.options.showWeekScale?e.isoWeekday()==1:e.date()==1;case"week":return e.date()==1;case"month":return e.month()==0;case"year":return!1;default:return!1}}},{key:"getLabelMinor",value:function(e){if(e==null&&(e=this.current),e instanceof Date&&(e=this.moment(e)),typeof this.format.minorLabels=="function")return this.format.minorLabels(e,this.scale,this.step);var r=this.format.minorLabels[this.scale];switch(this.scale){case"week":if(e.date()===1&&e.weekday()!==0)return"";default:return r&&r.length>0?this.moment(e).format(r):""}}},{key:"getLabelMajor",value:function(e){if(e==null&&(e=this.current),e instanceof Date&&(e=this.moment(e)),typeof this.format.majorLabels=="function")return this.format.majorLabels(e,this.scale,this.step);var r=this.format.majorLabels[this.scale];return r&&r.length>0?this.moment(e).format(r):""}},{key:"getClassName",value:function(){var e,r=this.moment,s=this.moment(this.current),a=s.locale?s.locale("en"):s.lang("en"),o=this.step,l=[];function u(v){return v/o%2==0?" vis-even":" vis-odd"}function c(v){return v.isSame(Nr(),"day")?" vis-today":v.isSame(r().add(1,"day"),"day")?" vis-tomorrow":v.isSame(r().add(-1,"day"),"day")?" vis-yesterday":""}function d(v){return v.isSame(Nr(),"week")?" vis-current-week":""}function f(v){return v.isSame(Nr(),"month")?" vis-current-month":""}function p(v){return v.isSame(Nr(),"year")?" vis-current-year":""}switch(this.scale){case"millisecond":l.push(c(a)),l.push(u(a.milliseconds()));break;case"second":l.push(c(a)),l.push(u(a.seconds()));break;case"minute":l.push(c(a)),l.push(u(a.minutes()));break;case"hour":l.push(rt(e="vis-h".concat(a.hours())).call(e,this.step==4?"-h"+(a.hours()+4):"")),l.push(c(a)),l.push(u(a.hours()));break;case"weekday":l.push("vis-".concat(a.format("dddd").toLowerCase())),l.push(c(a)),l.push(d(a)),l.push(u(a.date()));break;case"day":l.push("vis-day".concat(a.date())),l.push("vis-".concat(a.format("MMMM").toLowerCase())),l.push(c(a)),l.push(f(a)),l.push(this.step<=2?c(a):""),l.push(this.step<=2?"vis-".concat(a.format("dddd").toLowerCase()):""),l.push(u(a.date()-1));break;case"week":l.push("vis-week".concat(a.format("w"))),l.push(d(a)),l.push(u(a.week()));break;case"month":l.push("vis-".concat(a.format("MMMM").toLowerCase())),l.push(f(a)),l.push(u(a.month()));break;case"year":l.push("vis-year".concat(a.year())),l.push(p(a)),l.push(u(a.year()));break}return oe(l).call(l,String).join(" ")}}],[{key:"snap",value:function(e,r,s){var a=ir(e);if(r=="year"){var o=a.year()+Math.round(a.month()/12);a.year(Math.round(o/s)*s),a.month(0),a.date(0),a.hours(0),a.minutes(0),a.seconds(0),a.milliseconds(0)}else if(r=="month")a.date()>15?(a.date(1),a.add(1,"month")):a.date(1),a.hours(0),a.minutes(0),a.seconds(0),a.milliseconds(0);else if(r=="week")a.weekday()>2?(a.weekday(0),a.add(1,"week")):a.weekday(0),a.hours(0),a.minutes(0),a.seconds(0),a.milliseconds(0);else if(r=="day"){switch(s){case 5:case 2:a.hours(Math.round(a.hours()/24)*24);break;default:a.hours(Math.round(a.hours()/12)*12);break}a.minutes(0),a.seconds(0),a.milliseconds(0)}else if(r=="weekday"){switch(s){case 5:case 2:a.hours(Math.round(a.hours()/12)*12);break;default:a.hours(Math.round(a.hours()/6)*6);break}a.minutes(0),a.seconds(0),a.milliseconds(0)}else if(r=="hour"){switch(s){case 4:a.minutes(Math.round(a.minutes()/60)*60);break;default:a.minutes(Math.round(a.minutes()/30)*30);break}a.seconds(0),a.milliseconds(0)}else if(r=="minute"){switch(s){case 15:case 10:a.minutes(Math.round(a.minutes()/5)*5),a.seconds(0);break;case 5:a.seconds(Math.round(a.seconds()/60)*60);break;default:a.seconds(Math.round(a.seconds()/30)*30);break}a.milliseconds(0)}else if(r=="second")switch(s){case 15:case 10:a.seconds(Math.round(a.seconds()/5)*5),a.milliseconds(0);break;case 5:a.milliseconds(Math.round(a.milliseconds()/1e3)*1e3);break;default:a.milliseconds(Math.round(a.milliseconds()/500)*500);break}else if(r=="millisecond"){var l=s>5?s/2:1;a.milliseconds(Math.round(a.milliseconds()/l)*l)}return a}}]),t}();Au.FORMAT={minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}};cQ=`.vis-time-axis {
  position: relative;
  overflow: hidden;
}

.vis-time-axis.vis-foreground {
  top: 0;
  left: 0;
  width: 100%;
}

.vis-time-axis.vis-background {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.vis-time-axis .vis-text {
  position: absolute;
  color: #4d4d4d;
  padding: 3px;
  overflow: hidden;
  box-sizing: border-box;

  white-space: nowrap;
}

.vis-time-axis .vis-text.vis-measure {
  position: absolute;
  padding-left: 0;
  padding-right: 0;
  margin-left: 0;
  margin-right: 0;
  visibility: hidden;
}

.vis-time-axis .vis-grid.vis-vertical {
  position: absolute;
  border-left: 1px solid;
}

.vis-time-axis .vis-grid.vis-vertical-rtl {
  position: absolute;
  border-right: 1px solid;
}

.vis-time-axis .vis-grid.vis-minor {
  border-color: #e5e5e5;
}

.vis-time-axis .vis-grid.vis-major {
  border-color: #bfbfbf;
}
`;pr(cQ);Lu=function(t){fr(e,t);var n=dQ(e);function e(r,s){var a;return Pe(this,e),a=n.call(this),a.dom={foreground:null,lines:[],majorTexts:[],minorTexts:[],redundant:{lines:[],majorTexts:[],minorTexts:[]}},a.props={range:{start:0,end:0,minimumStep:0},lineTop:0},a.defaultOptions={orientation:{axis:"bottom"},showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,maxMinorChars:7,format:C.extend({},Au.FORMAT),moment:ir,timeAxis:null},a.options=C.extend({},a.defaultOptions),a.body=r,a._create(),a.setOptions(s),a}return Ie(e,[{key:"setOptions",value:function(s){s&&(C.selectiveExtend(["showMinorLabels","showMajorLabels","showWeekScale","maxMinorChars","hiddenDates","timeAxis","moment","rtl"],this.options,s),C.selectiveDeepExtend(["format"],this.options,s),"orientation"in s&&(typeof s.orientation=="string"?this.options.orientation.axis=s.orientation:de(s.orientation)==="object"&&"axis"in s.orientation&&(this.options.orientation.axis=s.orientation.axis)),"locale"in s&&(typeof ir.locale=="function"?ir.locale(s.locale):ir.lang(s.locale)))}},{key:"_create",value:function(){this.dom.foreground=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.foreground.className="vis-time-axis vis-foreground",this.dom.background.className="vis-time-axis vis-background"}},{key:"destroy",value:function(){this.dom.foreground.parentNode&&this.dom.foreground.parentNode.removeChild(this.dom.foreground),this.dom.background.parentNode&&this.dom.background.parentNode.removeChild(this.dom.background),this.body=null}},{key:"redraw",value:function(){var s=this.props,a=this.dom.foreground,o=this.dom.background,l=this.options.orientation.axis=="top"?this.body.dom.top:this.body.dom.bottom,u=a.parentNode!==l;this._calculateCharSize();var c=this.options.showMinorLabels&&this.options.orientation.axis!=="none",d=this.options.showMajorLabels&&this.options.orientation.axis!=="none";s.minorLabelHeight=c?s.minorCharHeight:0,s.majorLabelHeight=d?s.majorCharHeight:0,s.height=s.minorLabelHeight+s.majorLabelHeight,s.width=a.offsetWidth,s.minorLineHeight=this.body.domProps.root.height-s.majorLabelHeight-(this.options.orientation.axis=="top"?this.body.domProps.bottom.height:this.body.domProps.top.height),s.minorLineWidth=1,s.majorLineHeight=s.minorLineHeight+s.majorLabelHeight,s.majorLineWidth=1;var f=a.nextSibling,p=o.nextSibling;return a.parentNode&&a.parentNode.removeChild(a),o.parentNode&&o.parentNode.removeChild(o),a.style.height="".concat(this.props.height,"px"),this._repaintLabels(),f?l.insertBefore(a,f):l.appendChild(a),p?this.body.dom.backgroundVertical.insertBefore(o,p):this.body.dom.backgroundVertical.appendChild(o),this._isResized()||u}},{key:"_repaintLabels",value:function(){var s=this.options.orientation.axis,a=C.convert(this.body.range.start,"Number"),o=C.convert(this.body.range.end,"Number"),l=this.body.util.toTime((this.props.minorCharWidth||10)*this.options.maxMinorChars).valueOf(),u=l-$u(this.options.moment,this.body.hiddenDates,this.body.range,l);u-=this.body.util.toTime(0).valueOf();var c=new Au(new Date(a),new Date(o),u,this.body.hiddenDates,this.options);c.setMoment(this.options.moment),this.options.format&&c.setFormat(this.options.format),this.options.timeAxis&&c.setScale(this.options.timeAxis),this.step=c;var d=this.dom;d.redundant.lines=d.lines,d.redundant.majorTexts=d.majorTexts,d.redundant.minorTexts=d.minorTexts,d.lines=[],d.majorTexts=[],d.minorTexts=[];var f,p,v,y,_,S,x=0,D,E,P=void 0,O=0,A=1e3,M;for(c.start(),p=c.getCurrent(),y=this.body.util.toScreen(p);c.hasNext()&&O<A;){switch(O++,_=c.isMajor(),M=c.getClassName(),f=p,v=y,c.next(),p=c.getCurrent(),y=this.body.util.toScreen(p),D=x,x=y-v,c.scale){case"week":S=!0;break;default:S=x>=D*.4;break}if(this.options.showMinorLabels&&S){var I=this._repaintMinorText(v,c.getLabelMinor(f),s,M);I.style.width="".concat(x,"px")}_&&this.options.showMajorLabels?(v>0&&(P==null&&(P=v),I=this._repaintMajorText(v,c.getLabelMajor(f),s,M)),E=this._repaintMajorLine(v,x,s,M)):S?E=this._repaintMinorLine(v,x,s,M):E&&(E.style.width="".concat(Ar(E.style.width)+x,"px"))}if(O===A&&!Cx&&(console.warn("Something is wrong with the Timeline scale. Limited drawing of grid lines to ".concat(A," lines.")),Cx=!0),this.options.showMajorLabels){var H=this.body.util.toTime(0),z=c.getLabelMajor(H),U=z.length*(this.props.majorCharWidth||10)+10;(P==null||U<P)&&this._repaintMajorText(0,z,s,M)}K(C).call(C,this.dom.redundant,function(N){for(;N.length;){var $=N.pop();$&&$.parentNode&&$.parentNode.removeChild($)}})}},{key:"_repaintMinorText",value:function(s,a,o,l){var u=this.dom.redundant.minorTexts.shift();if(!u){var c=document.createTextNode("");u=document.createElement("div"),u.appendChild(c),this.dom.foreground.appendChild(u)}this.dom.minorTexts.push(u),u.innerHTML=C.xss(a);var d=o=="top"?this.props.majorLabelHeight:0;return this._setXY(u,s,d),u.className="vis-text vis-minor ".concat(l),u}},{key:"_repaintMajorText",value:function(s,a,o,l){var u=this.dom.redundant.majorTexts.shift();if(!u){var c=document.createElement("div");u=document.createElement("div"),u.appendChild(c),this.dom.foreground.appendChild(u)}u.childNodes[0].innerHTML=C.xss(a),u.className="vis-text vis-major ".concat(l);var d=o=="top"?0:this.props.minorLabelHeight;return this._setXY(u,s,d),this.dom.majorTexts.push(u),u}},{key:"_setXY",value:function(s,a,o){var l,u=this.options.rtl?a*-1:a;s.style.transform=rt(l="translate(".concat(u,"px, ")).call(l,o,"px)")}},{key:"_repaintMinorLine",value:function(s,a,o,l){var u,c=this.dom.redundant.lines.shift();c||(c=document.createElement("div"),this.dom.background.appendChild(c)),this.dom.lines.push(c);var d=this.props;c.style.width="".concat(a,"px"),c.style.height="".concat(d.minorLineHeight,"px");var f=o=="top"?d.majorLabelHeight:this.body.domProps.top.height,p=s-d.minorLineWidth/2;return this._setXY(c,p,f),c.className=rt(u="vis-grid ".concat(this.options.rtl?"vis-vertical-rtl":"vis-vertical"," vis-minor ")).call(u,l),c}},{key:"_repaintMajorLine",value:function(s,a,o,l){var u,c=this.dom.redundant.lines.shift();c||(c=document.createElement("div"),this.dom.background.appendChild(c)),this.dom.lines.push(c);var d=this.props;c.style.width="".concat(a,"px"),c.style.height="".concat(d.majorLineHeight,"px");var f=o=="top"?0:this.body.domProps.top.height,p=s-d.majorLineWidth/2;return this._setXY(c,p,f),c.className=rt(u="vis-grid ".concat(this.options.rtl?"vis-vertical-rtl":"vis-vertical"," vis-major ")).call(u,l),c}},{key:"_calculateCharSize",value:function(){this.dom.measureCharMinor||(this.dom.measureCharMinor=document.createElement("DIV"),this.dom.measureCharMinor.className="vis-text vis-minor vis-measure",this.dom.measureCharMinor.style.position="absolute",this.dom.measureCharMinor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMinor)),this.props.minorCharHeight=this.dom.measureCharMinor.clientHeight,this.props.minorCharWidth=this.dom.measureCharMinor.clientWidth,this.dom.measureCharMajor||(this.dom.measureCharMajor=document.createElement("DIV"),this.dom.measureCharMajor.className="vis-text vis-major vis-measure",this.dom.measureCharMajor.style.position="absolute",this.dom.measureCharMajor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMajor)),this.props.majorCharHeight=this.dom.measureCharMajor.clientHeight,this.props.majorCharWidth=this.dom.measureCharMajor.clientWidth}}]),e}(bn),Cx=!1;fQ=`.vis .overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;

  /* Must be displayed above for example selected Timeline items */
  z-index: 10;
}

.vis-active {
  box-shadow: 0 0 10px #86d5f8;
}
`;pr(fQ);Fg(Qr.prototype);Qr.current=null;Qr.prototype.destroy=function(){this.deactivate(),this.dom.overlay.parentNode.removeChild(this.dom.overlay),this.onClick&&document.body.removeEventListener("click",this.onClick),this.keycharm!==void 0&&this.keycharm.destroy(),this.keycharm=null,this.hammer.destroy(),this.hammer=null};Qr.prototype.activate=function(){var t;Qr.current&&Qr.current.deactivate(),Qr.current=this,this.active=!0,this.dom.overlay.style.display="none",C.addClassName(this.dom.container,"vis-active"),this.emit("change"),this.emit("activate"),R(t=this.keycharm).call(t,"esc",this.escListener)};Qr.prototype.deactivate=function(){Qr.current===this&&(Qr.current=null),this.active=!1,this.dom.overlay.style.display="",C.removeClassName(this.dom.container,"vis-active"),this.keycharm.unbind("esc",this.escListener),this.emit("change"),this.emit("deactivate")};Qr.prototype._onTapOverlay=function(t){this.activate(),t.stopPropagation()};vy={current:"current",time:"time",deleteSelected:"Delete selected"},mQ=vy,vQ=vy,gy={current:"attuale",time:"tempo",deleteSelected:"Cancella la selezione"},gQ=gy,yQ=gy,yy={current:"huidige",time:"tijd",deleteSelected:"Selectie verwijderen"},bQ=yy,wQ=yy,w1={current:"Aktuelle",time:"Zeit",deleteSelected:"L\xF6sche Auswahl"},SQ=w1,qh={current:"actuel",time:"heure",deleteSelected:"Effacer la selection"},_Q=qh,TQ=qh,xQ=qh,S1={current:"corriente",time:"hora",deleteSelected:"Eliminar selecci\xF3n"},CQ=S1,_1={current:"\u043F\u043E\u0442\u043E\u0447\u043D\u0438\u0439",time:"\u0447\u0430\u0441",deleteSelected:"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u043E\u0431\u0440\u0430\u043D\u0435"},EQ=_1,T1={current:"\u0442\u0435\u043A\u0443\u0449\u0435\u0435",time:"\u0432\u0440\u0435\u043C\u044F",deleteSelected:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u043E\u0435"},kQ=T1,x1={current:"aktualny",time:"czas",deleteSelected:"Usu\u0144 wybrane"},DQ=x1,by={current:"atual",time:"data",deleteSelected:"Apagar selecionado"},PQ=by,IQ=by,C1={current:"\u73FE\u5728",time:"\u6642\u523B",deleteSelected:"\u9078\u629E\u3055\u308C\u305F\u3082\u306E\u3092\u524A\u9664"},OQ=C1,E1={current:"nuvarande",time:"tid",deleteSelected:"Radera valda"},MQ=E1,Xh={current:"n\xE5v\xE6rende",time:"tid",deleteSelected:"Slett valgte"},FQ=Xh,$Q=Xh,NQ=Xh,k1={current:"einamas",time:"laikas",deleteSelected:"Pa\u0161alinti pasirinkt\u0105"},AQ=k1,yo={en:vy,en_EN:mQ,en_US:vQ,it:gy,it_IT:gQ,it_CH:yQ,nl:yy,nl_NL:bQ,nl_BE:wQ,de:w1,de_DE:SQ,fr:qh,fr_FR:_Q,fr_CA:TQ,fr_BE:xQ,es:S1,es_ES:CQ,uk:_1,uk_UA:EQ,ru:T1,ru_RU:kQ,pl:x1,pl_PL:DQ,pt:by,pt_BR:PQ,pt_PT:IQ,ja:C1,ja_JP:OQ,lt:k1,lt_LT:AQ,sv:E1,sv_SE:MQ,nb:Xh,nn:$Q,nb_NO:FQ,nn_NO:NQ},LQ=`.vis-custom-time {
  background-color: #6E94FF;
  width: 2px;
  cursor: move;
  z-index: 1;
}

.vis-custom-time > .vis-custom-time-marker {
  background-color: inherit;
  color: white;
  font-size: 12px;
  white-space: nowrap;
  padding: 3px 5px;
  top: 0px;
  cursor: initial;
  z-index: inherit;
}`;pr(LQ);Kh=function(t){fr(e,t);var n=RQ(e);function e(r,s){var a,o;Pe(this,e),o=n.call(this),o.body=r,o.defaultOptions={moment:ir,locales:yo,locale:"en",id:void 0,title:void 0},o.options=C.extend({},o.defaultOptions),o.setOptions(s),o.options.locales=C.extend({},yo,o.options.locales);var l=o.defaultOptions.locales[o.defaultOptions.locale];return K(a=kt(o.options.locales)).call(a,function(u){o.options.locales[u]=C.extend({},l,o.options.locales[u])}),s&&s.time!=null?o.customTime=s.time:o.customTime=new Date,o.eventParams={},o._create(),o}return Ie(e,[{key:"setOptions",value:function(s){s&&C.selectiveExtend(["moment","locale","locales","id","title","rtl","snap"],this.options,s)}},{key:"_create",value:function(){var s,a,o,l=document.createElement("div");l["custom-time"]=this,l.className="vis-custom-time ".concat(this.options.id||""),l.style.position="absolute",l.style.top="0px",l.style.height="100%",this.bar=l;var u=document.createElement("div");u.style.position="relative",u.style.top="0px",this.options.rtl?u.style.right="-10px":u.style.left="-10px",u.style.height="100%",u.style.width="20px";function c(d){this.body.range._onMouseWheel(d)}u.addEventListener?(u.addEventListener("mousewheel",R(c).call(c,this),!1),u.addEventListener("DOMMouseScroll",R(c).call(c,this),!1)):u.attachEvent("onmousewheel",R(c).call(c,this)),l.appendChild(u),this.hammer=new rr(u),this.hammer.on("panstart",R(s=this._onDragStart).call(s,this)),this.hammer.on("panmove",R(a=this._onDrag).call(a,this)),this.hammer.on("panend",R(o=this._onDragEnd).call(o,this)),this.hammer.get("pan").set({threshold:5,direction:rr.DIRECTION_ALL}),this.hammer.get("press").set({time:1e4})}},{key:"destroy",value:function(){this.hide(),this.hammer.destroy(),this.hammer=null,this.body=null}},{key:"redraw",value:function(){var s=this.body.dom.backgroundVertical;this.bar.parentNode!=s&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),s.appendChild(this.bar));var a=this.body.util.toScreen(this.customTime),o=this.options.locales[this.options.locale];o||(this.warned||(console.warn("WARNING: options.locales['".concat(this.options.locale,"'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization")),this.warned=!0),o=this.options.locales.en);var l=this.options.title;if(l===void 0){var u;l=rt(u="".concat(o.time,": ")).call(u,this.options.moment(this.customTime).format("dddd, MMMM Do YYYY, H:mm:ss")),l=l.charAt(0).toUpperCase()+l.substring(1)}else typeof l=="function"&&(l=l.call(this,this.customTime));return this.options.rtl?this.bar.style.right="".concat(a,"px"):this.bar.style.left="".concat(a,"px"),this.bar.title=l,!1}},{key:"hide",value:function(){this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar)}},{key:"setCustomTime",value:function(s){this.customTime=C.convert(s,"Date"),this.redraw()}},{key:"getCustomTime",value:function(){return new Date(this.customTime.valueOf())}},{key:"setCustomMarker",value:function(s,a){var o=document.createElement("div");if(o.className="vis-custom-time-marker",o.innerHTML=C.xss(s),o.style.position="absolute",a){var l,u;o.setAttribute("contenteditable","true"),o.addEventListener("pointerdown",function(){o.focus()}),o.addEventListener("input",R(l=this._onMarkerChange).call(l,this)),o.title=s,o.addEventListener("blur",R(u=function(d){this.title!=d.target.innerHTML&&(this._onMarkerChanged(d),this.title=d.target.innerHTML)}).call(u,this))}this.bar.appendChild(o)}},{key:"setCustomTitle",value:function(s){this.options.title=s}},{key:"_onDragStart",value:function(s){this.eventParams.dragging=!0,this.eventParams.customTime=this.customTime,s.stopPropagation()}},{key:"_onDrag",value:function(s){if(this.eventParams.dragging){var a=this.options.rtl?-1*s.deltaX:s.deltaX,o=this.body.util.toScreen(this.eventParams.customTime)+a,l=this.body.util.toTime(o),u=this.body.util.getScale(),c=this.body.util.getStep(),d=this.options.snap,f=d?d(l,u,c):l;this.setCustomTime(f),this.body.emitter.emit("timechange",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:s}),s.stopPropagation()}}},{key:"_onDragEnd",value:function(s){this.eventParams.dragging&&(this.body.emitter.emit("timechanged",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:s}),s.stopPropagation())}},{key:"_onMarkerChange",value:function(s){this.body.emitter.emit("markerchange",{id:this.options.id,title:s.target.innerHTML,event:s}),s.stopPropagation()}},{key:"_onMarkerChanged",value:function(s){this.body.emitter.emit("markerchanged",{id:this.options.id,title:s.target.innerHTML,event:s}),s.stopPropagation()}}],[{key:"customTimeFromTarget",value:function(s){for(var a=s.target;a;){if(a.hasOwnProperty("custom-time"))return a["custom-time"];a=a.parentNode}return null}}]),e}(bn),GQ=`.vis-timeline {
  /*
  -webkit-transition: height .4s ease-in-out;
  transition:         height .4s ease-in-out;
  */
}

.vis-panel {
  /*
  -webkit-transition: height .4s ease-in-out, top .4s ease-in-out;
  transition:         height .4s ease-in-out, top .4s ease-in-out;
  */
}

.vis-axis {
  /*
  -webkit-transition: top .4s ease-in-out;
  transition:         top .4s ease-in-out;
  */
}

/* TODO: get animation working nicely

.vis-item {
  -webkit-transition: top .4s ease-in-out;
  transition:         top .4s ease-in-out;
}

.vis-item.line {
  -webkit-transition: height .4s ease-in-out, top .4s ease-in-out;
  transition:         height .4s ease-in-out, top .4s ease-in-out;
}
/**/`;pr(GQ);HQ=`.vis-current-time {
  background-color: #FF7F6E;
  width: 2px;
  z-index: 1;
  pointer-events: none;
}

.vis-rolling-mode-btn {
  height: 40px;
  width: 40px;
  position: absolute;
  top: 7px;
  right: 20px;
  border-radius: 50%;
  font-size: 28px;
  cursor: pointer;
  opacity: 0.8;
  color: white;
  font-weight: bold;
  text-align: center;
  background: #3876c2;
}
.vis-rolling-mode-btn:before {
  content: "\\26F6";
}

.vis-rolling-mode-btn:hover {
  opacity: 1;
}`;pr(HQ);WQ=`.vis-panel {
  position: absolute;

  padding: 0;
  margin: 0;

  box-sizing: border-box;
}

.vis-panel.vis-center,
.vis-panel.vis-left,
.vis-panel.vis-right,
.vis-panel.vis-top,
.vis-panel.vis-bottom {
  border: 1px #bfbfbf;
}

.vis-panel.vis-center,
.vis-panel.vis-left,
.vis-panel.vis-right {
  border-top-style: solid;
  border-bottom-style: solid;
  overflow: hidden;
}

.vis-left.vis-panel.vis-vertical-scroll, .vis-right.vis-panel.vis-vertical-scroll {
  height: 100%;
  overflow-x: hidden;
  overflow-y: scroll;
} 

.vis-left.vis-panel.vis-vertical-scroll {
  direction: rtl;
}

.vis-left.vis-panel.vis-vertical-scroll .vis-content {
  direction: ltr;
}

.vis-right.vis-panel.vis-vertical-scroll {
  direction: ltr;
}

.vis-right.vis-panel.vis-vertical-scroll .vis-content {
  direction: rtl;
}

.vis-panel.vis-center,
.vis-panel.vis-top,
.vis-panel.vis-bottom {
  border-left-style: solid;
  border-right-style: solid;
}

.vis-background {
  overflow: hidden;
}

.vis-panel > .vis-content {
  position: relative;
}

.vis-panel .vis-shadow {
  position: absolute;
  width: 100%;
  height: 1px;
  box-shadow: 0 0 10px rgba(0,0,0,0.8);
  /* TODO: find a nice way to ensure vis-shadows are drawn on top of items
  z-index: 1;
  */
}

.vis-panel .vis-shadow.vis-top {
  top: -1px;
  left: 0;
}

.vis-panel .vis-shadow.vis-bottom {
  bottom: -1px;
  left: 0;
}`;pr(WQ);YQ=`.vis-graph-group0 {
    fill:#4f81bd;
    fill-opacity:0;
    stroke-width:2px;
    stroke: #4f81bd;
}

.vis-graph-group1 {
    fill:#f79646;
    fill-opacity:0;
    stroke-width:2px;
    stroke: #f79646;
}

.vis-graph-group2 {
    fill: #8c51cf;
    fill-opacity:0;
    stroke-width:2px;
    stroke: #8c51cf;
}

.vis-graph-group3 {
    fill: #75c841;
    fill-opacity:0;
    stroke-width:2px;
    stroke: #75c841;
}

.vis-graph-group4 {
    fill: #ff0100;
    fill-opacity:0;
    stroke-width:2px;
    stroke: #ff0100;
}

.vis-graph-group5 {
    fill: #37d8e6;
    fill-opacity:0;
    stroke-width:2px;
    stroke: #37d8e6;
}

.vis-graph-group6 {
    fill: #042662;
    fill-opacity:0;
    stroke-width:2px;
    stroke: #042662;
}

.vis-graph-group7 {
    fill:#00ff26;
    fill-opacity:0;
    stroke-width:2px;
    stroke: #00ff26;
}

.vis-graph-group8 {
    fill:#ff00ff;
    fill-opacity:0;
    stroke-width:2px;
    stroke: #ff00ff;
}

.vis-graph-group9 {
    fill: #8f3938;
    fill-opacity:0;
    stroke-width:2px;
    stroke: #8f3938;
}

.vis-timeline .vis-fill {
    fill-opacity:0.1;
    stroke: none;
}


.vis-timeline .vis-bar {
    fill-opacity:0.5;
    stroke-width:1px;
}

.vis-timeline .vis-point {
    stroke-width:2px;
    fill-opacity:1.0;
}


.vis-timeline .vis-legend-background {
    stroke-width:1px;
    fill-opacity:0.9;
    fill: #ffffff;
    stroke: #c2c2c2;
}


.vis-timeline .vis-outline {
    stroke-width:1px;
    fill-opacity:1;
    fill: #ffffff;
    stroke: #e5e5e5;
}

.vis-timeline .vis-icon-fill {
    fill-opacity:0.3;
    stroke: none;
}
`;pr(YQ);zQ=`
.vis-timeline {
  position: relative;
  border: 1px solid #bfbfbf;
  overflow: hidden;
  padding: 0;
  margin: 0;
  box-sizing: border-box;
}

.vis-loading-screen {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
}`;pr(zQ);VQ=`/* override some bootstrap styles screwing up the timelines css */

.vis [class*="span"] {
  min-height: 0;
  width: auto;
}
`;pr(VQ);As=function(){function t(){Pe(this,t)}return Ie(t,[{key:"_create",value:function(e){var r=this,s,a,o;this.dom={},this.dom.container=e,this.dom.container.style.position="relative",this.dom.root=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.backgroundVertical=document.createElement("div"),this.dom.backgroundHorizontal=document.createElement("div"),this.dom.centerContainer=document.createElement("div"),this.dom.leftContainer=document.createElement("div"),this.dom.rightContainer=document.createElement("div"),this.dom.center=document.createElement("div"),this.dom.left=document.createElement("div"),this.dom.right=document.createElement("div"),this.dom.top=document.createElement("div"),this.dom.bottom=document.createElement("div"),this.dom.shadowTop=document.createElement("div"),this.dom.shadowBottom=document.createElement("div"),this.dom.shadowTopLeft=document.createElement("div"),this.dom.shadowBottomLeft=document.createElement("div"),this.dom.shadowTopRight=document.createElement("div"),this.dom.shadowBottomRight=document.createElement("div"),this.dom.rollingModeBtn=document.createElement("div"),this.dom.loadingScreen=document.createElement("div"),this.dom.root.className="vis-timeline",this.dom.background.className="vis-panel vis-background",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical",this.dom.backgroundHorizontal.className="vis-panel vis-background vis-horizontal",this.dom.centerContainer.className="vis-panel vis-center",this.dom.leftContainer.className="vis-panel vis-left",this.dom.rightContainer.className="vis-panel vis-right",this.dom.top.className="vis-panel vis-top",this.dom.bottom.className="vis-panel vis-bottom",this.dom.left.className="vis-content",this.dom.center.className="vis-content",this.dom.right.className="vis-content",this.dom.shadowTop.className="vis-shadow vis-top",this.dom.shadowBottom.className="vis-shadow vis-bottom",this.dom.shadowTopLeft.className="vis-shadow vis-top",this.dom.shadowBottomLeft.className="vis-shadow vis-bottom",this.dom.shadowTopRight.className="vis-shadow vis-top",this.dom.shadowBottomRight.className="vis-shadow vis-bottom",this.dom.rollingModeBtn.className="vis-rolling-mode-btn",this.dom.loadingScreen.className="vis-loading-screen",this.dom.root.appendChild(this.dom.background),this.dom.root.appendChild(this.dom.backgroundVertical),this.dom.root.appendChild(this.dom.backgroundHorizontal),this.dom.root.appendChild(this.dom.centerContainer),this.dom.root.appendChild(this.dom.leftContainer),this.dom.root.appendChild(this.dom.rightContainer),this.dom.root.appendChild(this.dom.top),this.dom.root.appendChild(this.dom.bottom),this.dom.root.appendChild(this.dom.rollingModeBtn),this.dom.centerContainer.appendChild(this.dom.center),this.dom.leftContainer.appendChild(this.dom.left),this.dom.rightContainer.appendChild(this.dom.right),this.dom.centerContainer.appendChild(this.dom.shadowTop),this.dom.centerContainer.appendChild(this.dom.shadowBottom),this.dom.leftContainer.appendChild(this.dom.shadowTopLeft),this.dom.leftContainer.appendChild(this.dom.shadowBottomLeft),this.dom.rightContainer.appendChild(this.dom.shadowTopRight),this.dom.rightContainer.appendChild(this.dom.shadowBottomRight),this.props={root:{},background:{},centerContainer:{},leftContainer:{},rightContainer:{},center:{},left:{},right:{},top:{},bottom:{},border:{},scrollTop:0,scrollTopMin:0},this.on("rangechange",function(){r.initialDrawDone===!0&&r._redraw()}),this.on("rangechanged",function(){r.initialRangeChangeDone||(r.initialRangeChangeDone=!0)}),this.on("touch",R(s=this._onTouch).call(s,this)),this.on("panmove",R(a=this._onDrag).call(a,this));var l=this;this._origRedraw=R(o=this._redraw).call(o,this),this._redraw=C.throttle(this._origRedraw),this.on("_change",function(S){l.itemSet&&l.itemSet.initialItemSetDrawn&&S&&S.queue==!0?l._redraw():l._origRedraw()}),this.hammer=new rr(this.dom.root);var u=this.hammer.get("pinch").set({enable:!0});u&&uQ(u),this.hammer.get("pan").set({threshold:5,direction:rr.DIRECTION_ALL}),this.timelineListeners={};var c=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];K(c).call(c,function(S){var x=function(E){l.isActive()&&l.emit(S,E)};l.hammer.on(S,x),l.timelineListeners[S]=x}),y1(this.hammer,function(S){l.emit("touch",S)}),lQ(this.hammer,function(S){l.emit("release",S)});function d(S){var x=40,D=800;this.isActive()&&this.emit("mousewheel",S);var E=0,P=0;if("detail"in S&&(P=S.detail*-1),"wheelDelta"in S&&(P=S.wheelDelta),"wheelDeltaY"in S&&(P=S.wheelDeltaY),"wheelDeltaX"in S&&(E=S.wheelDeltaX*-1),"axis"in S&&S.axis===S.HORIZONTAL_AXIS&&(E=P*-1,P=0),"deltaY"in S&&(P=S.deltaY*-1),"deltaX"in S&&(E=S.deltaX),S.deltaMode&&(S.deltaMode===1?(E*=x,P*=x):(E*=x,P*=D)),this.options.preferZoom){if(!this.options.zoomKey||S[this.options.zoomKey])return}else if(this.options.zoomKey&&S[this.options.zoomKey])return;if(!(!this.options.verticalScroll&&!this.options.horizontalScroll)){if(this.options.verticalScroll&&Math.abs(P)>=Math.abs(E)){var O=this.props.scrollTop,A=O+P;if(this.isActive()){var M=this._setScrollTop(A);M!==O&&(this._redraw(),this.emit("scroll",S),S.preventDefault())}}else if(this.options.horizontalScroll){var I=Math.abs(E)>=Math.abs(P)?E:P,H=I/120*(this.range.end-this.range.start)/20,z=this.range.start+H,U=this.range.end+H,N={animation:!1,byUser:!0,event:S};this.range.setRange(z,U,N),S.preventDefault()}}}var f="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":this.dom.centerContainer.addEventListener?"DOMMouseScroll":"onmousewheel";this.dom.top.addEventListener,this.dom.bottom.addEventListener,this.dom.centerContainer.addEventListener(f,R(d).call(d,this),!1),this.dom.top.addEventListener(f,R(d).call(d,this),!1),this.dom.bottom.addEventListener(f,R(d).call(d,this),!1);function p(S){if(l.options.verticalScroll&&(S.preventDefault(),l.isActive())){var x=-S.target.scrollTop;l._setScrollTop(x),l._redraw(),l.emit("scrollSide",S)}}this.dom.left.parentNode.addEventListener("scroll",R(p).call(p,this)),this.dom.right.parentNode.addEventListener("scroll",R(p).call(p,this));var v=!1;function y(S){var x;if(S.preventDefault&&(l.emit("dragover",l.getEventProperties(S)),S.preventDefault()),Ze(x=S.target.className).call(x,"timeline")>-1&&!v)return S.dataTransfer.dropEffect="move",v=!0,!1}function _(S){S.preventDefault&&S.preventDefault(),S.stopPropagation&&S.stopPropagation();try{var x=JSON.parse(S.dataTransfer.getData("text"));if(!x||!x.content)return}catch(D){return!1}return v=!1,S.center={x:S.clientX,y:S.clientY},x.target!=="item"?l.itemSet._onAddItem(S):l.itemSet._onDropObjectOnItem(S),l.emit("drop",l.getEventProperties(S)),!1}if(this.dom.center.addEventListener("dragover",R(y).call(y,this),!1),this.dom.center.addEventListener("drop",R(_).call(_,this),!1),this.customTimes=[],this.touch={},this.redrawCount=0,this.initialDrawDone=!1,this.initialRangeChangeDone=!1,!e)throw new Error("No container provided");e.appendChild(this.dom.root),e.appendChild(this.dom.loadingScreen)}},{key:"setOptions",value:function(e){var r;if(e){var s=["width","height","minHeight","maxHeight","autoResize","start","end","clickToUse","dataAttributes","hiddenDates","locale","locales","moment","preferZoom","rtl","zoomKey","horizontalScroll","verticalScroll","longSelectPressTime","snap"];if(C.selectiveExtend(s,this.options,e),this.dom.rollingModeBtn.style.visibility="hidden",this.options.rtl&&(this.dom.container.style.direction="rtl",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical-rtl"),this.options.verticalScroll&&(this.options.rtl?this.dom.rightContainer.className="vis-panel vis-right vis-vertical-scroll":this.dom.leftContainer.className="vis-panel vis-left vis-vertical-scroll"),de(this.options.orientation)!=="object"&&(this.options.orientation={item:void 0,axis:void 0}),"orientation"in e&&(typeof e.orientation=="string"?this.options.orientation={item:e.orientation,axis:e.orientation}:de(e.orientation)==="object"&&("item"in e.orientation&&(this.options.orientation.item=e.orientation.item),"axis"in e.orientation&&(this.options.orientation.axis=e.orientation.axis))),this.options.orientation.axis==="both"){if(!this.timeAxis2){var a=this.timeAxis2=new Lu(this.body);a.setOptions=function(f){var p=f?C.extend({},f):{};p.orientation="top",Lu.prototype.setOptions.call(a,p)},this.components.push(a)}}else if(this.timeAxis2){var o,l=Ze(o=this.components).call(o,this.timeAxis2);if(l!==-1){var u;cr(u=this.components).call(u,l,1)}this.timeAxis2.destroy(),this.timeAxis2=null}typeof e.drawPoints=="function"&&(e.drawPoints={onRender:e.drawPoints}),"hiddenDates"in this.options&&jh(this.options.moment,this.body,this.options.hiddenDates),"clickToUse"in e&&(e.clickToUse?this.activator||(this.activator=new Qr(this.dom.root)):this.activator&&(this.activator.destroy(),delete this.activator)),this._initAutoResize()}if(K(r=this.components).call(r,function(f){return f.setOptions(e)}),"configure"in e){var c;this.configurator||(this.configurator=this._createConfigurator()),this.configurator.setOptions(e.configure);var d=C.deepExtend({},this.options);K(c=this.components).call(c,function(f){C.deepExtend(d,f.options)}),this.configurator.setModuleOptions({global:d})}this._redraw()}},{key:"isActive",value:function(){return!this.activator||this.activator.active}},{key:"destroy",value:function(){var e;this.setItems(null),this.setGroups(null),this.off(),this._stopAutoResize(),this.dom.root.parentNode&&this.dom.root.parentNode.removeChild(this.dom.root),this.dom=null,this.activator&&(this.activator.destroy(),delete this.activator);for(var r in this.timelineListeners)this.timelineListeners.hasOwnProperty(r)&&delete this.timelineListeners[r];this.timelineListeners=null,this.hammer&&this.hammer.destroy(),this.hammer=null,K(e=this.components).call(e,function(s){return s.destroy()}),this.body=null}},{key:"setCustomTime",value:function(e,r){var s,a=oe(s=this.customTimes).call(s,function(o){return r===o.options.id});if(a.length===0)throw new Error("No custom time bar found with id ".concat(br(r)));a.length>0&&a[0].setCustomTime(e)}},{key:"getCustomTime",value:function(e){var r,s=oe(r=this.customTimes).call(r,function(a){return a.options.id===e});if(s.length===0)throw new Error("No custom time bar found with id ".concat(br(e)));return s[0].getCustomTime()}},{key:"setCustomTimeMarker",value:function(e,r,s){var a,o=oe(a=this.customTimes).call(a,function(l){return l.options.id===r});if(o.length===0)throw new Error("No custom time bar found with id ".concat(br(r)));o.length>0&&o[0].setCustomMarker(e,s)}},{key:"setCustomTimeTitle",value:function(e,r){var s,a=oe(s=this.customTimes).call(s,function(o){return o.options.id===r});if(a.length===0)throw new Error("No custom time bar found with id ".concat(br(r)));if(a.length>0)return a[0].setCustomTitle(e)}},{key:"getEventProperties",value:function(e){return{event:e}}},{key:"addCustomTime",value:function(e,r){var s,a=e!==void 0?C.convert(e,"Date"):new Date,o=hy(s=this.customTimes).call(s,function(u){return u.options.id===r});if(o)throw new Error("A custom time with id ".concat(br(r)," already exists"));var l=new Kh(this.body,C.extend({},this.options,{time:a,id:r,snap:this.itemSet?this.itemSet.options.snap:this.options.snap}));return this.customTimes.push(l),this.components.push(l),this._redraw(),r}},{key:"removeCustomTime",value:function(e){var r,s=this,a=oe(r=this.customTimes).call(r,function(o){return o.options.id===e});if(a.length===0)throw new Error("No custom time bar found with id ".concat(br(e)));K(a).call(a,function(o){var l,u,c,d;cr(l=s.customTimes).call(l,Ze(u=s.customTimes).call(u,o),1),cr(c=s.components).call(c,Ze(d=s.components).call(d,o),1),o.destroy()})}},{key:"getVisibleItems",value:function(){return this.itemSet&&this.itemSet.getVisibleItems()||[]}},{key:"getItemsAtCurrentTime",value:function(e){return this.time=e,this.itemSet&&this.itemSet.getItemsAtCurrentTime(this.time)||[]}},{key:"getVisibleGroups",value:function(){return this.itemSet&&this.itemSet.getVisibleGroups()||[]}},{key:"fit",value:function(e,r){var s=this.getDataRange();if(!(s.min===null&&s.max===null)){var a=s.max-s.min,o=new Date(s.min.valueOf()-a*.01),l=new Date(s.max.valueOf()+a*.01),u=e&&e.animation!==void 0?e.animation:!0;this.range.setRange(o,l,{animation:u},r)}}},{key:"getDataRange",value:function(){throw new Error("Cannot invoke abstract method getDataRange")}},{key:"setWindow",value:function(e,r,s,a){typeof arguments[2]=="function"&&(a=arguments[2],s={});var o,l;arguments.length==1?(l=arguments[0],o=l.animation!==void 0?l.animation:!0,this.range.setRange(l.start,l.end,{animation:o})):arguments.length==2&&typeof arguments[1]=="function"?(l=arguments[0],a=arguments[1],o=l.animation!==void 0?l.animation:!0,this.range.setRange(l.start,l.end,{animation:o},a)):(o=s&&s.animation!==void 0?s.animation:!0,this.range.setRange(e,r,{animation:o},a))}},{key:"moveTo",value:function(e,r,s){typeof arguments[1]=="function"&&(s=arguments[1],r={});var a=this.range.end-this.range.start,o=C.convert(e,"Date").valueOf(),l=o-a/2,u=o+a/2,c=r&&r.animation!==void 0?r.animation:!0;this.range.setRange(l,u,{animation:c},s)}},{key:"getWindow",value:function(){var e=this.range.getRange();return{start:new Date(e.start),end:new Date(e.end)}}},{key:"zoomIn",value:function(e,r,s){if(!(!e||e<0||e>1)){typeof arguments[1]=="function"&&(s=arguments[1],r={});var a=this.getWindow(),o=a.start.valueOf(),l=a.end.valueOf(),u=l-o,c=u/(1+e),d=(u-c)/2,f=o+d,p=l-d;this.setWindow(f,p,r,s)}}},{key:"zoomOut",value:function(e,r,s){if(!(!e||e<0||e>1)){typeof arguments[1]=="function"&&(s=arguments[1],r={});var a=this.getWindow(),o=a.start.valueOf(),l=a.end.valueOf(),u=l-o,c=o-u*e/2,d=l+u*e/2;this.setWindow(c,d,r,s)}}},{key:"redraw",value:function(){this._redraw()}},{key:"_redraw",value:function(){var e;this.redrawCount++;var r=this.dom;if(!(!r||!r.container||r.root.offsetWidth==0)){var s=!1,a=this.options,o=this.props;Fu(this.options.moment,this.body,this.options.hiddenDates),a.orientation=="top"?(C.addClassName(r.root,"vis-top"),C.removeClassName(r.root,"vis-bottom")):(C.removeClassName(r.root,"vis-top"),C.addClassName(r.root,"vis-bottom")),a.rtl?(C.addClassName(r.root,"vis-rtl"),C.removeClassName(r.root,"vis-ltr")):(C.addClassName(r.root,"vis-ltr"),C.removeClassName(r.root,"vis-rtl")),r.root.style.maxHeight=C.option.asSize(a.maxHeight,""),r.root.style.minHeight=C.option.asSize(a.minHeight,""),r.root.style.width=C.option.asSize(a.width,"");var l=r.root.offsetWidth;o.border.left=1,o.border.right=1,o.border.top=1,o.border.bottom=1,o.center.height=r.center.offsetHeight,o.left.height=r.left.offsetHeight,o.right.height=r.right.offsetHeight,o.top.height=r.top.clientHeight||-o.border.top,o.bottom.height=Math.round(r.bottom.getBoundingClientRect().height)||r.bottom.clientHeight||-o.border.bottom;var u=Math.max(o.left.height,o.center.height,o.right.height),c=o.top.height+u+o.bottom.height+o.border.top+o.border.bottom;r.root.style.height=C.option.asSize(a.height,"".concat(c,"px")),o.root.height=r.root.offsetHeight,o.background.height=o.root.height;var d=o.root.height-o.top.height-o.bottom.height;o.centerContainer.height=d,o.leftContainer.height=d,o.rightContainer.height=o.leftContainer.height,o.root.width=l,o.background.width=o.root.width,this.initialDrawDone||(o.scrollbarWidth=C.getScrollBarWidth());var f=r.leftContainer.clientWidth,p=r.rightContainer.clientWidth;a.verticalScroll?a.rtl?(o.left.width=f||-o.border.left,o.right.width=p+o.scrollbarWidth||-o.border.right):(o.left.width=f+o.scrollbarWidth||-o.border.left,o.right.width=p||-o.border.right):(o.left.width=f||-o.border.left,o.right.width=p||-o.border.right),this._setDOM();var v=this._updateScrollTop();a.orientation.item!="top"&&(v+=Math.max(o.centerContainer.height-o.center.height-o.border.top-o.border.bottom,0)),r.center.style.transform="translateY(".concat(v,"px)");var y=o.scrollTop==0?"hidden":"",_=o.scrollTop==o.scrollTopMin?"hidden":"";r.shadowTop.style.visibility=y,r.shadowBottom.style.visibility=_,r.shadowTopLeft.style.visibility=y,r.shadowBottomLeft.style.visibility=_,r.shadowTopRight.style.visibility=y,r.shadowBottomRight.style.visibility=_,a.verticalScroll&&(r.rightContainer.className="vis-panel vis-right vis-vertical-scroll",r.leftContainer.className="vis-panel vis-left vis-vertical-scroll",r.shadowTopRight.style.visibility="hidden",r.shadowBottomRight.style.visibility="hidden",r.shadowTopLeft.style.visibility="hidden",r.shadowBottomLeft.style.visibility="hidden",r.left.style.top="0px",r.right.style.top="0px"),(!a.verticalScroll||o.center.height<o.centerContainer.height)&&(r.left.style.top="".concat(v,"px"),r.right.style.top="".concat(v,"px"),r.rightContainer.className=r.rightContainer.className.replace(new RegExp("(?:^|\\s)vis-vertical-scroll(?:\\s|$)")," "),r.leftContainer.className=r.leftContainer.className.replace(new RegExp("(?:^|\\s)vis-vertical-scroll(?:\\s|$)")," "),o.left.width=f||-o.border.left,o.right.width=p||-o.border.right,this._setDOM());var S=o.center.height>o.centerContainer.height;this.hammer.get("pan").set({direction:S?rr.DIRECTION_ALL:rr.DIRECTION_HORIZONTAL}),this.hammer.get("press").set({time:this.options.longSelectPressTime}),K(e=this.components).call(e,function(D){s=D.redraw()||s});var x=5;if(s)if(this.redrawCount<x){this.body.emitter.emit("_change");return}else console.log("WARNING: infinite loop in redraw?");else this.redrawCount=0;this.body.emitter.emit("changed")}}},{key:"_setDOM",value:function(){var e=this.props,r=this.dom;e.leftContainer.width=e.left.width,e.rightContainer.width=e.right.width;var s=e.root.width-e.left.width-e.right.width;e.center.width=s,e.centerContainer.width=s,e.top.width=s,e.bottom.width=s,r.background.style.height="".concat(e.background.height,"px"),r.backgroundVertical.style.height="".concat(e.background.height,"px"),r.backgroundHorizontal.style.height="".concat(e.centerContainer.height,"px"),r.centerContainer.style.height="".concat(e.centerContainer.height,"px"),r.leftContainer.style.height="".concat(e.leftContainer.height,"px"),r.rightContainer.style.height="".concat(e.rightContainer.height,"px"),r.background.style.width="".concat(e.background.width,"px"),r.backgroundVertical.style.width="".concat(e.centerContainer.width,"px"),r.backgroundHorizontal.style.width="".concat(e.background.width,"px"),r.centerContainer.style.width="".concat(e.center.width,"px"),r.top.style.width="".concat(e.top.width,"px"),r.bottom.style.width="".concat(e.bottom.width,"px"),r.background.style.left="0",r.background.style.top="0",r.backgroundVertical.style.left="".concat(e.left.width+e.border.left,"px"),r.backgroundVertical.style.top="0",r.backgroundHorizontal.style.left="0",r.backgroundHorizontal.style.top="".concat(e.top.height,"px"),r.centerContainer.style.left="".concat(e.left.width,"px"),r.centerContainer.style.top="".concat(e.top.height,"px"),r.leftContainer.style.left="0",r.leftContainer.style.top="".concat(e.top.height,"px"),r.rightContainer.style.left="".concat(e.left.width+e.center.width,"px"),r.rightContainer.style.top="".concat(e.top.height,"px"),r.top.style.left="".concat(e.left.width,"px"),r.top.style.top="0",r.bottom.style.left="".concat(e.left.width,"px"),r.bottom.style.top="".concat(e.top.height+e.centerContainer.height,"px"),r.center.style.left="0",r.left.style.left="0",r.right.style.left="0"}},{key:"setCurrentTime",value:function(e){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");this.currentTime.setCurrentTime(e)}},{key:"getCurrentTime",value:function(){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");return this.currentTime.getCurrentTime()}},{key:"_toTime",value:function(e){return Qv(this,e,this.props.center.width)}},{key:"_toGlobalTime",value:function(e){return Qv(this,e,this.props.root.width)}},{key:"_toScreen",value:function(e){return Zv(this,e,this.props.center.width)}},{key:"_toGlobalScreen",value:function(e){return Zv(this,e,this.props.root.width)}},{key:"_initAutoResize",value:function(){this.options.autoResize==!0?this._startAutoResize():this._stopAutoResize()}},{key:"_startAutoResize",value:function(){var e=this;this._stopAutoResize(),this._onResize=function(){if(e.options.autoResize!=!0){e._stopAutoResize();return}if(e.dom.root){var r=e.dom.root.offsetHeight,s=e.dom.root.offsetWidth;(s!=e.props.lastWidth||r!=e.props.lastHeight)&&(e.props.lastWidth=s,e.props.lastHeight=r,e.props.scrollbarWidth=C.getScrollBarWidth(),e.body.emitter.emit("_change"))}},C.addEventListener(window,"resize",this._onResize),e.dom.root&&(e.props.lastWidth=e.dom.root.offsetWidth,e.props.lastHeight=e.dom.root.offsetHeight),this.watchTimer=aQ(this._onResize,1e3)}},{key:"_stopAutoResize",value:function(){this.watchTimer&&(clearInterval(this.watchTimer),this.watchTimer=void 0),this._onResize&&(C.removeEventListener(window,"resize",this._onResize),this._onResize=null)}},{key:"_onTouch",value:function(e){this.touch.allowDragging=!0,this.touch.initialScrollTop=this.props.scrollTop}},{key:"_onPinch",value:function(e){this.touch.allowDragging=!1}},{key:"_onDrag",value:function(e){if(e&&this.touch.allowDragging){var r=e.deltaY,s=this._getScrollTop(),a=this._setScrollTop(this.touch.initialScrollTop+r);this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop),a!=s&&this.emit("verticalDrag")}}},{key:"_setScrollTop",value:function(e){return this.props.scrollTop=e,this._updateScrollTop(),this.props.scrollTop}},{key:"_updateScrollTop",value:function(){var e=Math.min(this.props.centerContainer.height-this.props.border.top-this.props.border.bottom-this.props.center.height,0);return e!=this.props.scrollTopMin&&(this.options.orientation.item!="top"&&(this.props.scrollTop+=e-this.props.scrollTopMin),this.props.scrollTopMin=e),this.props.scrollTop>0&&(this.props.scrollTop=0),this.props.scrollTop<e&&(this.props.scrollTop=e),this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop),this.props.scrollTop}},{key:"_getScrollTop",value:function(){return this.props.scrollTop}},{key:"_createConfigurator",value:function(){throw new Error("Cannot invoke abstract method _createConfigurator")}}]),t}();Fg(As.prototype);wy=function(t){fr(e,t);var n=UQ(e);function e(r,s){var a,o;Pe(this,e),o=n.call(this),o.body=r,o.defaultOptions={rtl:!1,showCurrentTime:!0,alignCurrentTime:void 0,moment:ir,locales:yo,locale:"en"},o.options=C.extend({},o.defaultOptions),o.setOptions(s),o.options.locales=C.extend({},yo,o.options.locales);var l=o.defaultOptions.locales[o.defaultOptions.locale];return K(a=kt(o.options.locales)).call(a,function(u){o.options.locales[u]=C.extend({},l,o.options.locales[u])}),o.offset=0,o._create(),o}return Ie(e,[{key:"_create",value:function(){var s=document.createElement("div");s.className="vis-current-time",s.style.position="absolute",s.style.top="0px",s.style.height="100%",this.bar=s}},{key:"destroy",value:function(){this.options.showCurrentTime=!1,this.redraw(),this.body=null}},{key:"setOptions",value:function(s){s&&C.selectiveExtend(["rtl","showCurrentTime","alignCurrentTime","moment","locale","locales"],this.options,s)}},{key:"redraw",value:function(){if(this.options.showCurrentTime){var s,a,o=this.body.dom.backgroundVertical;this.bar.parentNode!=o&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),o.appendChild(this.bar),this.start());var l=this.options.moment(Nr()+this.offset);this.options.alignCurrentTime&&(l=l.startOf(this.options.alignCurrentTime));var u=this.body.util.toScreen(l),c=this.options.locales[this.options.locale];c||(this.warned||(console.warn("WARNING: options.locales['".concat(this.options.locale,"'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization")),this.warned=!0),c=this.options.locales.en);var d=rt(s=rt(a="".concat(c.current," ")).call(a,c.time,": ")).call(s,l.format("dddd, MMMM Do YYYY, H:mm:ss"));d=d.charAt(0).toUpperCase()+d.substring(1),this.options.rtl?this.bar.style.transform="translateX(".concat(u*-1,"px)"):this.bar.style.transform="translateX(".concat(u,"px)"),this.bar.title=d}else this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.stop();return!1}},{key:"start",value:function(){var s=this;function a(){s.stop();var o=s.body.range.conversion(s.body.domProps.center.width).scale,l=1/o/10;l<30&&(l=30),l>1e3&&(l=1e3),s.redraw(),s.body.emitter.emit("currentTimeTick"),s.currentTimeTimer=nr(a,l)}a()}},{key:"stop",value:function(){this.currentTimeTimer!==void 0&&(clearTimeout(this.currentTimeTimer),delete this.currentTimeTimer)}},{key:"setCurrentTime",value:function(s){var a=C.convert(s,"Date").valueOf(),o=Nr();this.offset=a-o,this.redraw()}},{key:"getCurrentTime",value:function(){return new Date(Nr()+this.offset)}}]),e}(bn),D1={exports:{}},qQ=ue,XQ=gn.find,Ex="find",P1=!0;Ex in[]&&Array(1)[Ex](function(){P1=!1});qQ({target:"Array",proto:!0,forced:P1},{find:function(n){return XQ(this,n,arguments.length>1?arguments[1]:void 0)}});KQ=ut,ZQ=KQ("Array").find,QQ=Qe,JQ=ZQ,sv=Array.prototype,eJ=function(t){var n=t.find;return t===sv||QQ(sv,t)&&n===sv.find?JQ:n},tJ=eJ,rJ=tJ;(function(t){t.exports=rJ})(D1);iJ=re(D1.exports),I1={exports:{}},nJ=ue,sJ=gn.findIndex,kx="findIndex",O1=!0;kx in[]&&Array(1)[kx](function(){O1=!1});nJ({target:"Array",proto:!0,forced:O1},{findIndex:function(n){return sJ(this,n,arguments.length>1?arguments[1]:void 0)}});aJ=ut,oJ=aJ("Array").findIndex,lJ=Qe,uJ=oJ,av=Array.prototype,cJ=function(t){var n=t.findIndex;return t===av||lJ(av,t)&&n===av.findIndex?uJ:n},dJ=cJ,hJ=dJ;(function(t){t.exports=hJ})(I1);fJ=re(I1.exports);Fr=.001;yJ=Object.freeze({__proto__:null,orderByStart:M1,orderByEnd:F1,stack:rg,substack:$1,nostack:N1,stackSubgroups:A1,stackSubgroupsWithInnerStack:ig}),bJ="__ungrouped__",wJ="__background__",Px={UNGROUPED:bJ,BACKGROUND:wJ},fh=function(){function t(n,e,r){var s=this;if(Pe(this,t),this.groupId=n,this.subgroups={},this.subgroupStack={},this.subgroupStackAll=!1,this.subgroupVisibility={},this.doInnerStack=!1,this.shouldBailStackItems=!1,this.subgroupIndex=0,this.subgroupOrderer=e&&e.subgroupOrder,this.itemSet=r,this.isVisible=null,this.stackDirty=!0,this._disposeCallbacks=[],e&&e.nestedGroups&&(this.nestedGroups=e.nestedGroups,e.showNested==!1?this.showNested=!1:this.showNested=!0),e&&e.subgroupStack)if(typeof e.subgroupStack=="boolean")this.doInnerStack=e.subgroupStack,this.subgroupStackAll=e.subgroupStack;else for(var a in e.subgroupStack)this.subgroupStack[a]=e.subgroupStack[a],this.doInnerStack=this.doInnerStack||e.subgroupStack[a];e&&e.heightMode?this.heightMode=e.heightMode:this.heightMode=r.options.groupHeightMode,this.nestedInGroup=null,this.dom={},this.props={label:{width:0,height:0}},this.className=null,this.items={},this.visibleItems=[],this.itemsInRange=[],this.orderedItems={byStart:[],byEnd:[]},this.checkRangedItems=!1;var o=function(){s.checkRangedItems=!0};this.itemSet.body.emitter.on("checkRangedItems",o),this._disposeCallbacks.push(function(){s.itemSet.body.emitter.off("checkRangedItems",o)}),this._create(),this.setData(e)}return Ie(t,[{key:"_create",value:function(){var e=document.createElement("div");this.itemSet.options.groupEditable.order?e.className="vis-label draggable":e.className="vis-label",this.dom.label=e;var r=document.createElement("div");r.className="vis-inner",e.appendChild(r),this.dom.inner=r;var s=document.createElement("div");s.className="vis-group",s["vis-group"]=this,this.dom.foreground=s,this.dom.background=document.createElement("div"),this.dom.background.className="vis-group",this.dom.axis=document.createElement("div"),this.dom.axis.className="vis-group",this.dom.marker=document.createElement("div"),this.dom.marker.style.visibility="hidden",this.dom.marker.style.position="absolute",this.dom.marker.innerHTML="",this.dom.background.appendChild(this.dom.marker)}},{key:"setData",value:function(e){if(!this.itemSet.groupTouchParams.isDragging){var r,s;if(e&&e.subgroupVisibility)for(var a in e.subgroupVisibility)this.subgroupVisibility[a]=e.subgroupVisibility[a];if(this.itemSet.options&&this.itemSet.options.groupTemplate){var o;s=R(o=this.itemSet.options.groupTemplate).call(o,this),r=s(e,this.dom.inner)}else r=e&&e.content;if(r instanceof Element){for(;this.dom.inner.firstChild;)this.dom.inner.removeChild(this.dom.inner.firstChild);this.dom.inner.appendChild(r)}else r instanceof Object&&r.isReactComponent||(r instanceof Object?s(e,this.dom.inner):r!=null?this.dom.inner.innerHTML=C.xss(r):this.dom.inner.innerHTML=C.xss(this.groupId||""));this.dom.label.title=e&&e.title||"",this.dom.inner.firstChild?C.removeClassName(this.dom.inner,"vis-hidden"):C.addClassName(this.dom.inner,"vis-hidden"),e&&e.nestedGroups?((!this.nestedGroups||this.nestedGroups!=e.nestedGroups)&&(this.nestedGroups=e.nestedGroups),(e.showNested!==void 0||this.showNested===void 0)&&(e.showNested==!1?this.showNested=!1:this.showNested=!0),C.addClassName(this.dom.label,"vis-nesting-group"),this.showNested?(C.removeClassName(this.dom.label,"collapsed"),C.addClassName(this.dom.label,"expanded")):(C.removeClassName(this.dom.label,"expanded"),C.addClassName(this.dom.label,"collapsed"))):this.nestedGroups&&(this.nestedGroups=null,C.removeClassName(this.dom.label,"collapsed"),C.removeClassName(this.dom.label,"expanded"),C.removeClassName(this.dom.label,"vis-nesting-group")),e&&(e.treeLevel||e.nestedInGroup)?(C.addClassName(this.dom.label,"vis-nested-group"),e.treeLevel?C.addClassName(this.dom.label,"vis-group-level-"+e.treeLevel):C.addClassName(this.dom.label,"vis-group-level-unknown-but-gte1")):C.addClassName(this.dom.label,"vis-group-level-0");var l=e&&e.className||null;l!=this.className&&(this.className&&(C.removeClassName(this.dom.label,this.className),C.removeClassName(this.dom.foreground,this.className),C.removeClassName(this.dom.background,this.className),C.removeClassName(this.dom.axis,this.className)),C.addClassName(this.dom.label,l),C.addClassName(this.dom.foreground,l),C.addClassName(this.dom.background,l),C.addClassName(this.dom.axis,l),this.className=l),this.style&&(C.removeCssText(this.dom.label,this.style),this.style=null),e&&e.style&&(C.addCssText(this.dom.label,e.style),this.style=e.style)}}},{key:"getLabelWidth",value:function(){return this.props.label.width}},{key:"_didMarkerHeightChange",value:function(){var e=this.dom.marker.clientHeight;if(e!=this.lastMarkerHeight){this.lastMarkerHeight=e;var r={},s=0;K(C).call(C,this.items,function(u,c){if(u.dirty=!0,u.displayed){var d=!0;r[c]=u.redraw(d),s=r[c].length}});var a=s>0;if(a)for(var o=function(c){K(C).call(C,r,function(d){d[c]()})},l=0;l<s;l++)o(l);return!0}else return!1}},{key:"_calculateGroupSizeAndPosition",value:function(){var e=this.dom.foreground,r=e.offsetTop,s=e.offsetLeft,a=e.offsetWidth;this.top=r,this.right=s,this.width=a}},{key:"_shouldBailItemsRedraw",value:function(){var e=this,r=this.itemSet.options.onTimeout,s={relativeBailingTime:this.itemSet.itemsSettingTime,bailTimeMs:r&&r.timeoutMs,userBailFunction:r&&r.callback,shouldBailStackItems:this.shouldBailStackItems},a=null;if(!this.itemSet.initialDrawDone){if(s.shouldBailStackItems)return!0;Math.abs(Nr()-new Date(s.relativeBailingTime))>s.bailTimeMs&&(s.userBailFunction&&this.itemSet.userContinueNotBail==null?s.userBailFunction(function(o){e.itemSet.userContinueNotBail=o,a=!o}):e.itemSet.userContinueNotBail==!1?a=!0:a=!1)}return a}},{key:"_redrawItems",value:function(e,r,s,a){var o=this,l=e||this.stackDirty||this.isVisible&&!r;if(l){var u,c,d,f,p,v,y={byEnd:oe(u=this.orderedItems.byEnd).call(u,function(N){return!N.isCluster}),byStart:oe(c=this.orderedItems.byStart).call(c,function(N){return!N.isCluster})},_={byEnd:lt(new Jn(oe(d=He(f=this.orderedItems.byEnd).call(f,function(N){return N.cluster})).call(d,function(N){return!!N}))),byStart:lt(new Jn(oe(p=He(v=this.orderedItems.byStart).call(v,function(N){return N.cluster})).call(p,function(N){return!!N})))},S=function(){var $,B,Y,V=o._updateItemsInRange(y,oe($=o.visibleItems).call($,function(ie){return!ie.isCluster}),a),te=o._updateClustersInRange(_,oe(B=o.visibleItems).call(B,function(ie){return ie.isCluster}),a);return rt(Y=[]).call(Y,lt(V),lt(te))},x=function($){var B={},Y=function(ie){var Ce,be=oe(Ce=o.visibleItems).call(Ce,function(Ye){return Ye.data.subgroup===ie});B[ie]=$?bt(be).call(be,function(Ye,q){return $(Ye.data,q.data)}):be};for(var V in o.subgroups)Y(V);return B};if(typeof this.itemSet.options.order=="function"){var D=this;if(this.doInnerStack&&this.itemSet.options.stackSubgroups){var E=x(this.itemSet.options.order);ig(E,s,this.subgroups),this.visibleItems=S(),this._updateSubGroupHeights(s)}else{var P,O,A,M;this.visibleItems=S(),this._updateSubGroupHeights(s);var I=bt(P=oe(O=sr(A=this.visibleItems).call(A)).call(O,function(N){return N.isCluster||!N.isCluster&&!N.cluster})).call(P,function(N,$){return D.itemSet.options.order(N.data,$.data)});this.shouldBailStackItems=rg(I,s,!0,R(M=this._shouldBailItemsRedraw).call(M,this))}}else if(this.visibleItems=S(),this._updateSubGroupHeights(s),this.itemSet.options.stack)if(this.doInnerStack&&this.itemSet.options.stackSubgroups){var H=x();ig(H,s,this.subgroups)}else{var z;this.shouldBailStackItems=rg(this.visibleItems,s,!0,R(z=this._shouldBailItemsRedraw).call(z,this))}else N1(this.visibleItems,s,this.subgroups,this.itemSet.options.stackSubgroups);for(var U=0;U<this.visibleItems.length;U++)this.visibleItems[U].repositionX(),this.subgroupVisibility[this.visibleItems[U].data.subgroup]!==void 0&&(this.subgroupVisibility[this.visibleItems[U].data.subgroup]||this.visibleItems[U].hide());this.itemSet.options.cluster&&K(C).call(C,this.items,function(N){N.cluster&&N.displayed&&N.hide()}),this.shouldBailStackItems&&this.itemSet.body.emitter.emit("destroyTimeline"),this.stackDirty=!1}}},{key:"_didResize",value:function(e,r){e=C.updateProperty(this,"height",r)||e;var s=this.dom.inner.clientWidth,a=this.dom.inner.clientHeight;return e=C.updateProperty(this.props.label,"width",s)||e,e=C.updateProperty(this.props.label,"height",a)||e,e}},{key:"_applyGroupHeight",value:function(e){this.dom.background.style.height="".concat(e,"px"),this.dom.foreground.style.height="".concat(e,"px"),this.dom.label.style.height="".concat(e,"px")}},{key:"_updateItemsVerticalPosition",value:function(e){for(var r=0,s=this.visibleItems.length;r<s;r++){var a=this.visibleItems[r];a.repositionY(e),!this.isVisible&&this.groupId!=Px.BACKGROUND&&a.displayed&&a.hide()}}},{key:"redraw",value:function(e,r,s,a){var o=this,l,u,c,d,f,p=!1,v=this.isVisible,y,_=[function(){s=o._didMarkerHeightChange.call(o)||s},R(l=this._updateSubGroupHeights).call(l,this,r),R(u=this._calculateGroupSizeAndPosition).call(u,this),function(){var x;o.isVisible=R(x=o._isGroupVisible).call(x,o)(e,r)},function(){var x;R(x=o._redrawItems).call(x,o)(s,v,r,e)},R(c=this._updateSubgroupsSizes).call(c,this),function(){var x;y=R(x=o._calculateHeight).call(x,o)(r)},R(d=this._calculateGroupSizeAndPosition).call(d,this),function(){var x;p=R(x=o._didResize).call(x,o)(p,y)},function(){var x;R(x=o._applyGroupHeight).call(x,o)(y)},function(){var x;R(x=o._updateItemsVerticalPosition).call(x,o)(r)},R(f=function(){return!o.isVisible&&o.height&&(p=!1),p}).call(f,this)];if(a)return _;var S;return K(_).call(_,function(x){S=x()}),S}},{key:"_updateSubGroupHeights",value:function(e){var r=this;if(kt(this.subgroups).length>0){var s=this;this._resetSubgroups(),K(C).call(C,this.visibleItems,function(a){a.data.subgroup!==void 0&&(s.subgroups[a.data.subgroup].height=Math.max(s.subgroups[a.data.subgroup].height,a.height+e.item.vertical),s.subgroups[a.data.subgroup].visible=typeof r.subgroupVisibility[a.data.subgroup]=="undefined"?!0:Boolean(r.subgroupVisibility[a.data.subgroup]))})}}},{key:"_isGroupVisible",value:function(e,r){return this.top<=e.body.domProps.centerContainer.height-e.body.domProps.scrollTop+r.axis&&this.top+this.height+r.axis>=-e.body.domProps.scrollTop}},{key:"_calculateHeight",value:function(e){var r,s;if(this.heightMode==="fixed"?s=C.toArray(this.items):s=this.visibleItems,s.length>0){var a=s[0].top,o=s[0].top+s[0].height;if(K(C).call(C,s,function(u){a=Math.min(a,u.top),o=Math.max(o,u.top+u.height)}),a>e.axis){var l=a-e.axis;o-=l,K(C).call(C,s,function(u){u.top-=l})}r=Math.ceil(o+e.item.vertical/2),this.heightMode!=="fitItems"&&(r=Math.max(r,this.props.label.height))}else r=this.props.label.height;return r}},{key:"show",value:function(){this.dom.label.parentNode||this.itemSet.dom.labelSet.appendChild(this.dom.label),this.dom.foreground.parentNode||this.itemSet.dom.foreground.appendChild(this.dom.foreground),this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background),this.dom.axis.parentNode||this.itemSet.dom.axis.appendChild(this.dom.axis)}},{key:"hide",value:function(){var e=this.dom.label;e.parentNode&&e.parentNode.removeChild(e);var r=this.dom.foreground;r.parentNode&&r.parentNode.removeChild(r);var s=this.dom.background;s.parentNode&&s.parentNode.removeChild(s);var a=this.dom.axis;a.parentNode&&a.parentNode.removeChild(a)}},{key:"add",value:function(e){var r;if(this.items[e.id]=e,e.setParent(this),this.stackDirty=!0,e.data.subgroup!==void 0&&(this._addToSubgroup(e),this.orderSubgroups()),!es(r=this.visibleItems).call(r,e)){var s=this.itemSet.body.range;this._checkIfVisible(e,this.visibleItems,s)}}},{key:"_addToSubgroup",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.data.subgroup;r!=null&&this.subgroups[r]===void 0&&(this.subgroups[r]={height:0,top:0,start:e.data.start,end:e.data.end||e.data.start,visible:!1,index:this.subgroupIndex,items:[],stack:this.subgroupStackAll||this.subgroupStack[r]||!1},this.subgroupIndex++),new Date(e.data.start)<new Date(this.subgroups[r].start)&&(this.subgroups[r].start=e.data.start);var s=e.data.end||e.data.start;new Date(s)>new Date(this.subgroups[r].end)&&(this.subgroups[r].end=s),this.subgroups[r].items.push(e)}},{key:"_updateSubgroupsSizes",value:function(){var e=this;if(e.subgroups){var r=function(o){var l,u=e.subgroups[o].items[0].data.end||e.subgroups[o].items[0].data.start,c=e.subgroups[o].items[0].data.start,d=u-1;K(l=e.subgroups[o].items).call(l,function(f){new Date(f.data.start)<new Date(c)&&(c=f.data.start);var p=f.data.end||f.data.start;new Date(p)>new Date(d)&&(d=p)}),e.subgroups[o].start=c,e.subgroups[o].end=new Date(d-1)};for(var s in e.subgroups)r(s)}}},{key:"orderSubgroups",value:function(){if(this.subgroupOrderer!==void 0){var e=[];if(typeof this.subgroupOrderer=="string"){for(var r in this.subgroups)e.push({subgroup:r,sortField:this.subgroups[r].items[0].data[this.subgroupOrderer]});bt(e).call(e,function(o,l){return o.sortField-l.sortField})}else if(typeof this.subgroupOrderer=="function"){for(var s in this.subgroups)e.push(this.subgroups[s].items[0].data);bt(e).call(e,this.subgroupOrderer)}if(e.length>0)for(var a=0;a<e.length;a++)this.subgroups[e[a].subgroup].index=a}}},{key:"_resetSubgroups",value:function(){for(var e in this.subgroups)this.subgroups.hasOwnProperty(e)&&(this.subgroups[e].visible=!1,this.subgroups[e].height=0)}},{key:"remove",value:function(e){var r,s;delete this.items[e.id],e.setParent(null),this.stackDirty=!0;var a=Ze(r=this.visibleItems).call(r,e);a!=-1&&cr(s=this.visibleItems).call(s,a,1),e.data.subgroup!==void 0&&(this._removeFromSubgroup(e),this.orderSubgroups())}},{key:"_removeFromSubgroup",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.data.subgroup;if(r!=null){var s=this.subgroups[r];if(s){var a,o=Ze(a=s.items).call(a,e);if(o>=0){var l;cr(l=s.items).call(l,o,1),s.items.length?this._updateSubgroupsSizes():delete this.subgroups[r]}}}}},{key:"removeFromDataSet",value:function(e){this.itemSet.removeItem(e.id)}},{key:"order",value:function(){for(var e=C.toArray(this.items),r=[],s=[],a=0;a<e.length;a++)e[a].data.end!==void 0&&s.push(e[a]),r.push(e[a]);this.orderedItems={byStart:r,byEnd:s},M1(this.orderedItems.byStart),F1(this.orderedItems.byEnd)}},{key:"_updateItemsInRange",value:function(e,r,s){var a=[],o={};if(!this.isVisible&&this.groupId!=Px.BACKGROUND){for(var l=0;l<r.length;l++){var u=r[l];u.displayed&&u.hide()}return a}var c=(s.end-s.start)/4,d=s.start-c,f=s.end+c,p=function(N){return N<d?-1:N<=f?0:1},v=function(N){var $=N.start,B=N.end;return B<d?-1:$<=f?0:1};if(r.length>0)for(var y=0;y<r.length;y++)this._checkIfVisibleWithReference(r[y],a,o,s);var _=C.binarySearchCustom(e.byStart,p,"data","start");if(this._traceVisible(_,e.byStart,a,o,function(U){return U.data.start<d||U.data.start>f}),this.checkRangedItems==!0){this.checkRangedItems=!1;for(var S=0;S<e.byEnd.length;S++)this._checkIfVisibleWithReference(e.byEnd[S],a,o,s)}else{var x=C.binarySearchCustom(e.byEnd,v,"data");this._traceVisible(x,e.byEnd,a,o,function(U){return U.data.end<d||U.data.start>f})}for(var D={},E=0,P=0;P<a.length;P++){var O=a[P];if(!O.displayed){var A=!0;D[P]=O.redraw(A),E=D[P].length}}var M=E>0;if(M)for(var I=function(N){K(C).call(C,D,function($){$[N]()})},H=0;H<E;H++)I(H);for(var z=0;z<a.length;z++)a[z].repositionX();return a}},{key:"_traceVisible",value:function(e,r,s,a,o){if(e!=-1){for(var l=e;l>=0;l--){var u=r[l];if(o(u))break;!(u.isCluster&&!u.hasItems())&&!u.cluster&&a[u.id]===void 0&&(a[u.id]=!0,s.push(u))}for(var c=e+1;c<r.length;c++){var d=r[c];if(o(d))break;!(d.isCluster&&!d.hasItems())&&!d.cluster&&a[d.id]===void 0&&(a[d.id]=!0,s.push(d))}}}},{key:"_checkIfVisible",value:function(e,r,s){e.isVisible(s)?(e.displayed||e.show(),e.repositionX(),r.push(e)):e.displayed&&e.hide()}},{key:"_checkIfVisibleWithReference",value:function(e,r,s,a){e.isVisible(a)?s[e.id]===void 0&&(s[e.id]=!0,r.push(e)):e.displayed&&e.hide()}},{key:"_updateClustersInRange",value:function(e,r,s){var a=[],o={};if(r.length>0)for(var l=0;l<r.length;l++)this._checkIfVisibleWithReference(r[l],a,o,s);for(var u=0;u<e.byStart.length;u++)this._checkIfVisibleWithReference(e.byStart[u],a,o,s);for(var c=0;c<e.byEnd.length;c++)this._checkIfVisibleWithReference(e.byEnd[c],a,o,s);for(var d={},f=0,p=0;p<a.length;p++){var v=a[p];if(!v.displayed){var y=!0;d[p]=v.redraw(y),f=d[p].length}}var _=f>0;if(_)for(var S=0;S<f;S++)K(C).call(C,d,function(D){D[S]()});for(var x=0;x<a.length;x++)a[x].repositionX();return a}},{key:"changeSubgroup",value:function(e,r,s){this._removeFromSubgroup(e,r),this._addToSubgroup(e,s),this.orderSubgroups()}},{key:"dispose",value:function(){this.hide();for(var e;e=this._disposeCallbacks.pop();)e()}}]),t}();_y=function(t){fr(e,t);var n=SJ(e);function e(r,s,a){var o;return Pe(this,e),o=n.call(this,r,s,a),o.width=0,o.height=0,o.top=0,o.left=0,o}return Ie(e,[{key:"redraw",value:function(s,a,o){var l=!1;this.visibleItems=this._updateItemsInRange(this.orderedItems,this.visibleItems,s),this.width=this.dom.background.offsetWidth,this.dom.background.style.height="0";for(var u=0,c=this.visibleItems.length;u<c;u++){var d=this.visibleItems[u];d.repositionY(a)}return l}},{key:"show",value:function(){this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background)}}]),e}(fh),TJ=`
.vis-item {
  position: absolute;
  color: #1A1A1A;
  border-color: #97B0F8;
  border-width: 1px;
  background-color: #D5DDF6;
  display: inline-block;
  z-index: 1;
  /*overflow: hidden;*/
}

.vis-item.vis-selected {
  border-color: #FFC200;
  background-color: #FFF785;

  /* z-index must be higher than the z-index of custom time bar and current time bar */
  z-index: 2;
}

.vis-editable.vis-selected {
  cursor: move;
}

.vis-item.vis-point.vis-selected {
  background-color: #FFF785;
}

.vis-item.vis-box {
  text-align: center;
  border-style: solid;
  border-radius: 2px;
}

.vis-item.vis-point {
  background: none;
}

.vis-item.vis-dot {
  position: absolute;
  padding: 0;
  border-width: 4px;
  border-style: solid;
  border-radius: 4px;
}

.vis-item.vis-range {
  border-style: solid;
  border-radius: 2px;
  box-sizing: border-box;
}

.vis-item.vis-background {
  border: none;
  background-color: rgba(213, 221, 246, 0.4);
  box-sizing: border-box;
  padding: 0;
  margin: 0;
}

.vis-item .vis-item-overflow {
  position: relative;
  width: 100%;
  height: 100%;
  padding: 0;
  margin: 0;
  overflow: hidden;
}

.vis-item-visible-frame {
  white-space: nowrap;
}

.vis-item.vis-range .vis-item-content {
  position: relative;
  display: inline-block;
}

.vis-item.vis-background .vis-item-content {
  position: absolute;
  display: inline-block;
}

.vis-item.vis-line {
  padding: 0;
  position: absolute;
  width: 0;
  border-left-width: 1px;
  border-left-style: solid;
}

.vis-item .vis-item-content {
  white-space: nowrap;
  box-sizing: border-box;
  padding: 5px;
}

.vis-item .vis-onUpdateTime-tooltip {
  position: absolute;
  background: #4f81bd;
  color: white;
  width: 200px;
  text-align: center;
  white-space: nowrap;
  padding: 5px;
  border-radius: 1px;
  transition: 0.4s;
  -o-transition: 0.4s;
  -moz-transition: 0.4s;
  -webkit-transition: 0.4s;
}

.vis-item .vis-delete, .vis-item .vis-delete-rtl {
  position: absolute;
  top: 0px;
  width: 24px;
  height: 24px;
  box-sizing: border-box;
  padding: 0px 5px;
  cursor: pointer;

  -webkit-transition: background 0.2s linear;
  -moz-transition: background 0.2s linear;
  -ms-transition: background 0.2s linear;
  -o-transition: background 0.2s linear;
  transition: background 0.2s linear;
}

.vis-item .vis-delete {
  right: -24px;
}

.vis-item .vis-delete-rtl {
  left: -24px;
}

.vis-item .vis-delete:after, .vis-item .vis-delete-rtl:after {
  content: "\\00D7"; /* MULTIPLICATION SIGN */
  color: red;
  font-family: arial, sans-serif;
  font-size: 22px;
  font-weight: bold;

  -webkit-transition: color 0.2s linear;
  -moz-transition: color 0.2s linear;
  -ms-transition: color 0.2s linear;
  -o-transition: color 0.2s linear;
  transition: color 0.2s linear;
}

.vis-item .vis-delete:hover, .vis-item .vis-delete-rtl:hover {
  background: red;
}

.vis-item .vis-delete:hover:after, .vis-item .vis-delete-rtl:hover:after {
  color: white;
}

.vis-item .vis-drag-center {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0px;
  cursor: move;
}

.vis-item.vis-range .vis-drag-left {
  position: absolute;
  width: 24px;
  max-width: 20%;
  min-width: 2px;
  height: 100%;
  top: 0;
  left: -4px;

  cursor: w-resize;
}

.vis-item.vis-range .vis-drag-right {
  position: absolute;
  width: 24px;
  max-width: 20%;
  min-width: 2px;
  height: 100%;
  top: 0;
  right: -4px;

  cursor: e-resize;
}

.vis-range.vis-item.vis-readonly .vis-drag-left,
.vis-range.vis-item.vis-readonly .vis-drag-right {
  cursor: auto;
}

.vis-item.vis-cluster {
  vertical-align: center;
  text-align: center;
  border-style: solid;
  border-radius: 2px;
}

.vis-item.vis-cluster-line {
  padding: 0;
  position: absolute;
  width: 0;
  border-left-width: 1px;
  border-left-style: solid;
}

.vis-item.vis-cluster-dot {
  position: absolute;
  padding: 0;
  border-width: 4px;
  border-style: solid;
  border-radius: 4px;
}`;pr(TJ);Js=function(){function t(n,e,r){var s,a=this;Pe(this,t),this.id=null,this.parent=null,this.data=n,this.dom=null,this.conversion=e||{},this.defaultOptions={locales:yo,locale:"en"},this.options=C.extend({},this.defaultOptions,r),this.options.locales=C.extend({},yo,this.options.locales);var o=this.defaultOptions.locales[this.defaultOptions.locale];K(s=kt(this.options.locales)).call(s,function(l){a.options.locales[l]=C.extend({},o,a.options.locales[l])}),this.selected=!1,this.displayed=!1,this.groupShowing=!0,this.selectable=r&&r.selectable||!1,this.dirty=!0,this.top=null,this.right=null,this.left=null,this.width=null,this.height=null,this.setSelectability(n),this.editable=null,this._updateEditStatus()}return Ie(t,[{key:"select",value:function(){this.selectable&&(this.selected=!0,this.dirty=!0,this.displayed&&this.redraw())}},{key:"unselect",value:function(){this.selected=!1,this.dirty=!0,this.displayed&&this.redraw()}},{key:"setData",value:function(e){var r=e.group!=null&&this.data.group!=e.group;r&&this.parent!=null&&this.parent.itemSet._moveToGroup(this,e.group),this.setSelectability(e),this.parent&&(this.parent.stackDirty=!0);var s=e.subgroup!=null&&this.data.subgroup!=e.subgroup;s&&this.parent!=null&&this.parent.changeSubgroup(this,this.data.subgroup,e.subgroup),this.data=e,this._updateEditStatus(),this.dirty=!0,this.displayed&&this.redraw()}},{key:"setSelectability",value:function(e){e&&(this.selectable=typeof e.selectable=="undefined"?!0:Boolean(e.selectable))}},{key:"setParent",value:function(e){this.displayed?(this.hide(),this.parent=e,this.parent&&this.show()):this.parent=e}},{key:"isVisible",value:function(e){return!1}},{key:"show",value:function(){return!1}},{key:"hide",value:function(){return!1}},{key:"redraw",value:function(){}},{key:"repositionX",value:function(){}},{key:"repositionY",value:function(){}},{key:"_repaintDragCenter",value:function(){if(this.selected&&this.editable.updateTime&&!this.dom.dragCenter){var e,r,s=this,a=document.createElement("div");a.className="vis-drag-center",a.dragCenterItem=this,this.hammerDragCenter=new rr(a),this.hammerDragCenter.on("tap",function(o){s.parent.itemSet.body.emitter.emit("click",{event:o,item:s.id})}),this.hammerDragCenter.on("doubletap",function(o){o.stopPropagation(),s.parent.itemSet._onUpdateItem(s),s.parent.itemSet.body.emitter.emit("doubleClick",{event:o,item:s.id})}),this.hammerDragCenter.on("panstart",function(o){o.stopPropagation(),s.parent.itemSet._onDragStart(o)}),this.hammerDragCenter.on("panmove",R(e=s.parent.itemSet._onDrag).call(e,s.parent.itemSet)),this.hammerDragCenter.on("panend",R(r=s.parent.itemSet._onDragEnd).call(r,s.parent.itemSet)),this.hammerDragCenter.get("press").set({time:1e4}),this.dom.box?this.dom.dragLeft?this.dom.box.insertBefore(a,this.dom.dragLeft):this.dom.box.appendChild(a):this.dom.point&&this.dom.point.appendChild(a),this.dom.dragCenter=a}else!this.selected&&this.dom.dragCenter&&(this.dom.dragCenter.parentNode&&this.dom.dragCenter.parentNode.removeChild(this.dom.dragCenter),this.dom.dragCenter=null,this.hammerDragCenter&&(this.hammerDragCenter.destroy(),this.hammerDragCenter=null))}},{key:"_repaintDeleteButton",value:function(e){var r=(this.options.editable.overrideItems||this.editable==null)&&this.options.editable.remove||!this.options.editable.overrideItems&&this.editable!=null&&this.editable.remove;if(this.selected&&r&&!this.dom.deleteButton){var s=this,a=document.createElement("div");this.options.rtl?a.className="vis-delete-rtl":a.className="vis-delete";var o=this.options.locales[this.options.locale];o||(this.warned||(console.warn("WARNING: options.locales['".concat(this.options.locale,"'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization")),this.warned=!0),o=this.options.locales.en),a.title=o.deleteSelected,this.hammerDeleteButton=new rr(a).on("tap",function(l){l.stopPropagation(),s.parent.removeFromDataSet(s)}),e.appendChild(a),this.dom.deleteButton=a}else(!this.selected||!r)&&this.dom.deleteButton&&(this.dom.deleteButton.parentNode&&this.dom.deleteButton.parentNode.removeChild(this.dom.deleteButton),this.dom.deleteButton=null,this.hammerDeleteButton&&(this.hammerDeleteButton.destroy(),this.hammerDeleteButton=null))}},{key:"_repaintOnItemUpdateTimeTooltip",value:function(e){if(this.options.tooltipOnItemUpdateTime){var r=(this.options.editable.updateTime||this.data.editable===!0)&&this.data.editable!==!1;if(this.selected&&r&&!this.dom.onItemUpdateTimeTooltip){var s=document.createElement("div");s.className="vis-onUpdateTime-tooltip",e.appendChild(s),this.dom.onItemUpdateTimeTooltip=s}else!this.selected&&this.dom.onItemUpdateTimeTooltip&&(this.dom.onItemUpdateTimeTooltip.parentNode&&this.dom.onItemUpdateTimeTooltip.parentNode.removeChild(this.dom.onItemUpdateTimeTooltip),this.dom.onItemUpdateTimeTooltip=null);if(this.dom.onItemUpdateTimeTooltip){this.dom.onItemUpdateTimeTooltip.style.visibility=this.parent.itemSet.touchParams.itemIsDragging?"visible":"hidden",this.dom.onItemUpdateTimeTooltip.style.transform="translateX(-50%)",this.dom.onItemUpdateTimeTooltip.style.left="50%";var a=50,o=this.parent.itemSet.body.domProps.scrollTop,l;this.options.orientation.item=="top"?l=this.top:l=this.parent.height-this.top-this.height;var u=l+this.parent.top-a<-o;u?(this.dom.onItemUpdateTimeTooltip.style.bottom="",this.dom.onItemUpdateTimeTooltip.style.top="".concat(this.height+2,"px")):(this.dom.onItemUpdateTimeTooltip.style.top="",this.dom.onItemUpdateTimeTooltip.style.bottom="".concat(this.height+2,"px"));var c,d;if(this.options.tooltipOnItemUpdateTime&&this.options.tooltipOnItemUpdateTime.template){var f;d=R(f=this.options.tooltipOnItemUpdateTime.template).call(f,this),c=d(this.data)}else c="start: ".concat(ir(this.data.start).format("MM/DD/YYYY hh:mm")),this.data.end&&(c+="<br> end: ".concat(ir(this.data.end).format("MM/DD/YYYY hh:mm")));this.dom.onItemUpdateTimeTooltip.innerHTML=C.xss(c)}}}},{key:"_getItemData",value:function(){return this.parent.itemSet.itemsData.get(this.id)}},{key:"_updateContents",value:function(e){var r,s,a,o,l,u=this._getItemData(),c=this.dom.box||this.dom.point,d=c.getElementsByClassName("vis-item-visible-frame")[0];if(this.options.visibleFrameTemplate){var f;l=R(f=this.options.visibleFrameTemplate).call(f,this),o=C.xss(l(u,d))}else o="";if(d){if(o instanceof Object&&!(o instanceof Element))l(u,d);else if(s=this._contentToString(this.itemVisibleFrameContent)!==this._contentToString(o),s){if(o instanceof Element)d.innerHTML="",d.appendChild(o);else if(o!=null)d.innerHTML=C.xss(o);else if(!(this.data.type=="background"&&this.data.content===void 0))throw new Error('Property "content" missing in item '.concat(this.id));this.itemVisibleFrameContent=o}}if(this.options.template){var p;a=R(p=this.options.template).call(p,this),r=a(u,e,this.data)}else r=this.data.content;if(r instanceof Object&&!(r instanceof Element))a(u,e);else if(s=this._contentToString(this.content)!==this._contentToString(r),s){if(r instanceof Element)e.innerHTML="",e.appendChild(r);else if(r!=null)e.innerHTML=C.xss(r);else if(!(this.data.type=="background"&&this.data.content===void 0))throw new Error('Property "content" missing in item '.concat(this.id));this.content=r}}},{key:"_updateDataAttributes",value:function(e){if(this.options.dataAttributes&&this.options.dataAttributes.length>0){var r=[];if(pe(this.options.dataAttributes))r=this.options.dataAttributes;else if(this.options.dataAttributes=="all")r=kt(this.data);else return;var s=xJ(r),a;try{for(s.s();!(a=s.n()).done;){var o=a.value,l=this.data[o];l!=null?e.setAttribute("data-".concat(o),l):e.removeAttribute("data-".concat(o))}}catch(u){s.e(u)}finally{s.f()}}}},{key:"_updateStyle",value:function(e){this.style&&(C.removeCssText(e,this.style),this.style=null),this.data.style&&(C.addCssText(e,this.data.style),this.style=this.data.style)}},{key:"_contentToString",value:function(e){return typeof e=="string"?e:e&&"outerHTML"in e?e.outerHTML:e}},{key:"_updateEditStatus",value:function(){this.options&&(typeof this.options.editable=="boolean"?this.editable={updateTime:this.options.editable,updateGroup:this.options.editable,remove:this.options.editable}:de(this.options.editable)==="object"&&(this.editable={},C.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.options.editable))),(!this.options||!this.options.editable||this.options.editable.overrideItems!==!0)&&this.data&&(typeof this.data.editable=="boolean"?this.editable={updateTime:this.data.editable,updateGroup:this.data.editable,remove:this.data.editable}:de(this.data.editable)==="object"&&(this.editable={},C.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.data.editable)))}},{key:"getWidthLeft",value:function(){return 0}},{key:"getWidthRight",value:function(){return 0}},{key:"getTitle",value:function(){if(this.options.tooltip&&this.options.tooltip.template){var e,r=R(e=this.options.tooltip.template).call(e,this);return r(this._getItemData(),this.data)}return this.data.title}}]),t}();Js.prototype.stack=!0;L1=function(t){fr(e,t);var n=EJ(e);function e(r,s,a){var o;if(Pe(this,e),o=n.call(this,r,s,a),o.props={dot:{width:0,height:0},line:{width:0,height:0}},r&&r.start==null)throw new Error('Property "start" missing in item '.concat(r));return o}return Ie(e,[{key:"isVisible",value:function(s){if(this.cluster)return!1;var a,o=this.data.align||this.options.align,l=this.width*s.getMillisecondsPerPixel();return o=="right"?a=this.data.start.getTime()>s.start&&this.data.start.getTime()-l<s.end:o=="left"?a=this.data.start.getTime()+l>s.start&&this.data.start.getTime()<s.end:a=this.data.start.getTime()+l/2>s.start&&this.data.start.getTime()-l/2<s.end,a}},{key:"_createDomElement",value:function(){this.dom||(this.dom={},this.dom.box=document.createElement("DIV"),this.dom.content=document.createElement("DIV"),this.dom.content.className="vis-item-content",this.dom.box.appendChild(this.dom.content),this.dom.line=document.createElement("DIV"),this.dom.line.className="vis-line",this.dom.dot=document.createElement("DIV"),this.dom.dot.className="vis-dot",this.dom.box["vis-item"]=this,this.dirty=!0)}},{key:"_appendDomElement",value:function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){var s=this.parent.dom.foreground;if(!s)throw new Error("Cannot redraw item: parent has no foreground container element");s.appendChild(this.dom.box)}if(!this.dom.line.parentNode){var a=this.parent.dom.background;if(!a)throw new Error("Cannot redraw item: parent has no background container element");a.appendChild(this.dom.line)}if(!this.dom.dot.parentNode){var o=this.parent.dom.axis;if(!a)throw new Error("Cannot redraw item: parent has no axis container element");o.appendChild(this.dom.dot)}this.displayed=!0}},{key:"_updateDirtyDomComponents",value:function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var s=this.editable.updateTime||this.editable.updateGroup,a=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(s?" vis-editable":" vis-readonly");this.dom.box.className="vis-item vis-box".concat(a),this.dom.line.className="vis-item vis-line".concat(a),this.dom.dot.className="vis-item vis-dot".concat(a)}}},{key:"_getDomComponentsSizes",value:function(){return{previous:{right:this.dom.box.style.right,left:this.dom.box.style.left},dot:{height:this.dom.dot.offsetHeight,width:this.dom.dot.offsetWidth},line:{width:this.dom.line.offsetWidth},box:{width:this.dom.box.offsetWidth,height:this.dom.box.offsetHeight}}}},{key:"_updateDomComponentsSizes",value:function(s){this.options.rtl?this.dom.box.style.right="0px":this.dom.box.style.left="0px",this.props.dot.height=s.dot.height,this.props.dot.width=s.dot.width,this.props.line.width=s.line.width,this.width=s.box.width,this.height=s.box.height,this.options.rtl?this.dom.box.style.right=s.previous.right:this.dom.box.style.left=s.previous.left,this.dirty=!1}},{key:"_repaintDomAdditionals",value:function(){this._repaintOnItemUpdateTimeTooltip(this.dom.box),this._repaintDragCenter(),this._repaintDeleteButton(this.dom.box)}},{key:"redraw",value:function(s){var a,o,l,u=this,c,d,f=[R(a=this._createDomElement).call(a,this),R(o=this._appendDomElement).call(o,this),R(l=this._updateDirtyDomComponents).call(l,this),function(){u.dirty&&(d=u._getDomComponentsSizes())},function(){if(u.dirty){var v;R(v=u._updateDomComponentsSizes).call(v,u)(d)}},R(c=this._repaintDomAdditionals).call(c,this)];if(s)return f;var p;return K(f).call(f,function(v){p=v()}),p}},{key:"show",value:function(s){if(!this.displayed)return this.redraw(s)}},{key:"hide",value:function(){if(this.displayed){var s=this.dom;s.box.remove?s.box.remove():s.box.parentNode&&s.box.parentNode.removeChild(s.box),s.line.remove?s.line.remove():s.line.parentNode&&s.line.parentNode.removeChild(s.line),s.dot.remove?s.dot.remove():s.dot.parentNode&&s.dot.parentNode.removeChild(s.dot),this.displayed=!1}}},{key:"repositionXY",value:function(){var s=this.options.rtl,a=function(l,u,c){var d,f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!(u===void 0&&c===void 0)){var p=f?u*-1:u;if(c===void 0){l.style.transform="translateX(".concat(p,"px)");return}if(u===void 0){l.style.transform="translateY(".concat(c,"px)");return}l.style.transform=rt(d="translate(".concat(p,"px, ")).call(d,c,"px)")}};a(this.dom.box,this.boxX,this.boxY,s),a(this.dom.dot,this.dotX,this.dotY,s),a(this.dom.line,this.lineX,this.lineY,s)}},{key:"repositionX",value:function(){var s=this.conversion.toScreen(this.data.start),a=this.data.align===void 0?this.options.align:this.data.align,o=this.props.line.width,l=this.props.dot.width;a=="right"?(this.boxX=s-this.width,this.lineX=s-o,this.dotX=s-o/2-l/2):a=="left"?(this.boxX=s,this.lineX=s,this.dotX=s+o/2-l/2):(this.boxX=s-this.width/2,this.lineX=this.options.rtl?s-o:s-o/2,this.dotX=s-l/2),this.options.rtl?this.right=this.boxX:this.left=this.boxX,this.repositionXY()}},{key:"repositionY",value:function(){var s=this.options.orientation.item,a=this.dom.line.style;if(s=="top"){var o=this.parent.top+this.top+1;this.boxY=this.top||0,a.height="".concat(o,"px"),a.bottom="",a.top="0"}else{var l=this.parent.itemSet.props.height,u=l-this.parent.top-this.parent.height+this.top;this.boxY=this.parent.height-this.top-(this.height||0),a.height="".concat(u,"px"),a.top="",a.bottom="0"}this.dotY=-this.props.dot.height/2,this.repositionXY()}},{key:"getWidthLeft",value:function(){return this.width/2}},{key:"getWidthRight",value:function(){return this.width/2}}]),e}(Js);R1=function(t){fr(e,t);var n=DJ(e);function e(r,s,a){var o;if(Pe(this,e),o=n.call(this,r,s,a),o.props={dot:{top:0,width:0,height:0},content:{height:0,marginLeft:0,marginRight:0}},r&&r.start==null)throw new Error('Property "start" missing in item '.concat(r));return o}return Ie(e,[{key:"isVisible",value:function(s){if(this.cluster)return!1;var a=this.width*s.getMillisecondsPerPixel();return this.data.start.getTime()+a>s.start&&this.data.start<s.end}},{key:"_createDomElement",value:function(){this.dom||(this.dom={},this.dom.point=document.createElement("div"),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.point.appendChild(this.dom.content),this.dom.dot=document.createElement("div"),this.dom.point.appendChild(this.dom.dot),this.dom.point["vis-item"]=this,this.dirty=!0)}},{key:"_appendDomElement",value:function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.point.parentNode){var s=this.parent.dom.foreground;if(!s)throw new Error("Cannot redraw item: parent has no foreground container element");s.appendChild(this.dom.point)}this.displayed=!0}},{key:"_updateDirtyDomComponents",value:function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.point),this._updateStyle(this.dom.point);var s=this.editable.updateTime||this.editable.updateGroup,a=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(s?" vis-editable":" vis-readonly");this.dom.point.className="vis-item vis-point".concat(a),this.dom.dot.className="vis-item vis-dot".concat(a)}}},{key:"_getDomComponentsSizes",value:function(){return{dot:{width:this.dom.dot.offsetWidth,height:this.dom.dot.offsetHeight},content:{width:this.dom.content.offsetWidth,height:this.dom.content.offsetHeight},point:{width:this.dom.point.offsetWidth,height:this.dom.point.offsetHeight}}}},{key:"_updateDomComponentsSizes",value:function(s){this.props.dot.width=s.dot.width,this.props.dot.height=s.dot.height,this.props.content.height=s.content.height,this.options.rtl?this.dom.content.style.marginRight="".concat(this.props.dot.width/2,"px"):this.dom.content.style.marginLeft="".concat(this.props.dot.width/2,"px"),this.width=s.point.width,this.height=s.point.height,this.dom.dot.style.top="".concat((this.height-this.props.dot.height)/2,"px");var a=this.props.dot.width,o=this.options.rtl?a/2:a/2*-1;this.dom.dot.style.transform="translateX(".concat(o,"px"),this.dirty=!1}},{key:"_repaintDomAdditionals",value:function(){this._repaintOnItemUpdateTimeTooltip(this.dom.point),this._repaintDragCenter(),this._repaintDeleteButton(this.dom.point)}},{key:"redraw",value:function(s){var a,o,l,u=this,c,d,f=[R(a=this._createDomElement).call(a,this),R(o=this._appendDomElement).call(o,this),R(l=this._updateDirtyDomComponents).call(l,this),function(){u.dirty&&(d=u._getDomComponentsSizes())},function(){if(u.dirty){var v;R(v=u._updateDomComponentsSizes).call(v,u)(d)}},R(c=this._repaintDomAdditionals).call(c,this)];if(s)return f;var p;return K(f).call(f,function(v){p=v()}),p}},{key:"repositionXY",value:function(){var s=this.options.rtl,a=function(l,u,c){var d,f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!(u===void 0&&c===void 0)){var p=f?u*-1:u;if(c===void 0){l.style.transform="translateX(".concat(p,"px)");return}if(u===void 0){l.style.transform="translateY(".concat(c,"px)");return}l.style.transform=rt(d="translate(".concat(p,"px, ")).call(d,c,"px)")}};a(this.dom.point,this.pointX,this.pointY,s)}},{key:"show",value:function(s){if(!this.displayed)return this.redraw(s)}},{key:"hide",value:function(){this.displayed&&(this.dom.point.parentNode&&this.dom.point.parentNode.removeChild(this.dom.point),this.displayed=!1)}},{key:"repositionX",value:function(){var s=this.conversion.toScreen(this.data.start);this.pointX=s,this.options.rtl?this.right=s-this.props.dot.width:this.left=s-this.props.dot.width,this.repositionXY()}},{key:"repositionY",value:function(){var s=this.options.orientation.item;s=="top"?this.pointY=this.top:this.pointY=this.parent.height-this.top-this.height,this.repositionXY()}},{key:"getWidthLeft",value:function(){return this.props.dot.width}},{key:"getWidthRight",value:function(){return this.props.dot.width}}]),e}(Js);rs=function(t){fr(e,t);var n=IJ(e);function e(r,s,a){var o;if(Pe(this,e),o=n.call(this,r,s,a),o.props={content:{width:0}},o.overflow=!1,r){if(r.start==null)throw new Error('Property "start" missing in item '.concat(r.id));if(r.end==null)throw new Error('Property "end" missing in item '.concat(r.id))}return o}return Ie(e,[{key:"isVisible",value:function(s){return this.cluster?!1:this.data.start<s.end&&this.data.end>s.start}},{key:"_createDomElement",value:function(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.visibleFrame=document.createElement("div"),this.dom.visibleFrame.className="vis-item-visible-frame",this.dom.box.appendChild(this.dom.visibleFrame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dom.box["vis-item"]=this,this.dirty=!0)}},{key:"_appendDomElement",value:function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){var s=this.parent.dom.foreground;if(!s)throw new Error("Cannot redraw item: parent has no foreground container element");s.appendChild(this.dom.box)}this.displayed=!0}},{key:"_updateDirtyDomComponents",value:function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var s=this.editable.updateTime||this.editable.updateGroup,a=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(s?" vis-editable":" vis-readonly");this.dom.box.className=this.baseClassName+a,this.dom.content.style.maxWidth="none"}}},{key:"_getDomComponentsSizes",value:function(){return this.overflow=window.getComputedStyle(this.dom.frame).overflow!=="hidden",this.whiteSpace=window.getComputedStyle(this.dom.content).whiteSpace!=="nowrap",{content:{width:this.dom.content.offsetWidth},box:{height:this.dom.box.offsetHeight}}}},{key:"_updateDomComponentsSizes",value:function(s){this.props.content.width=s.content.width,this.height=s.box.height,this.dom.content.style.maxWidth="",this.dirty=!1}},{key:"_repaintDomAdditionals",value:function(){this._repaintOnItemUpdateTimeTooltip(this.dom.box),this._repaintDeleteButton(this.dom.box),this._repaintDragCenter(),this._repaintDragLeft(),this._repaintDragRight()}},{key:"redraw",value:function(s){var a,o,l,u=this,c,d,f=[R(a=this._createDomElement).call(a,this),R(o=this._appendDomElement).call(o,this),R(l=this._updateDirtyDomComponents).call(l,this),function(){if(u.dirty){var v;d=R(v=u._getDomComponentsSizes).call(v,u)()}},function(){if(u.dirty){var v;R(v=u._updateDomComponentsSizes).call(v,u)(d)}},R(c=this._repaintDomAdditionals).call(c,this)];if(s)return f;var p;return K(f).call(f,function(v){p=v()}),p}},{key:"show",value:function(s){if(!this.displayed)return this.redraw(s)}},{key:"hide",value:function(){if(this.displayed){var s=this.dom.box;s.parentNode&&s.parentNode.removeChild(s),this.displayed=!1}}},{key:"repositionX",value:function(s){var a=this.parent.width,o=this.conversion.toScreen(this.data.start),l=this.conversion.toScreen(this.data.end),u=this.data.align===void 0?this.options.align:this.data.align,c,d;this.data.limitSize!==!1&&(s===void 0||s===!0)&&(o<-a&&(o=-a),l>2*a&&(l=2*a));var f=Math.max(Math.round((l-o)*1e3)/1e3,1);switch(this.overflow?(this.options.rtl?this.right=o:this.left=o,this.width=f+this.props.content.width,d=this.props.content.width):(this.options.rtl?this.right=o:this.left=o,this.width=f,d=Math.min(l-o,this.props.content.width)),this.options.rtl?this.dom.box.style.transform="translateX(".concat(this.right*-1,"px)"):this.dom.box.style.transform="translateX(".concat(this.left,"px)"),this.dom.box.style.width="".concat(f,"px"),this.whiteSpace&&(this.height=this.dom.box.offsetHeight),u){case"left":this.dom.content.style.transform="translateX(0)";break;case"right":if(this.options.rtl){var p=Math.max(f-d,0)*-1;this.dom.content.style.transform="translateX(".concat(p,"px)")}else this.dom.content.style.transform="translateX(".concat(Math.max(f-d,0),"px)");break;case"center":if(this.options.rtl){var v=Math.max((f-d)/2,0)*-1;this.dom.content.style.transform="translateX(".concat(v,"px)")}else this.dom.content.style.transform="translateX(".concat(Math.max((f-d)/2,0),"px)");break;default:if(this.overflow?l>0?c=Math.max(-o,0):c=-d:o<0?c=-o:c=0,this.options.rtl){var y=c*-1;this.dom.content.style.transform="translateX(".concat(y,"px)")}else this.dom.content.style.transform="translateX(".concat(c,"px)")}}},{key:"repositionY",value:function(){var s=this.options.orientation.item,a=this.dom.box;s=="top"?a.style.top="".concat(this.top,"px"):a.style.top="".concat(this.parent.height-this.top-this.height,"px")}},{key:"_repaintDragLeft",value:function(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.editable.updateTime&&!this.dom.dragLeft){var s=document.createElement("div");s.className="vis-drag-left",s.dragLeftItem=this,this.dom.box.appendChild(s),this.dom.dragLeft=s}else!this.selected&&!this.options.itemsAlwaysDraggable.range&&this.dom.dragLeft&&(this.dom.dragLeft.parentNode&&this.dom.dragLeft.parentNode.removeChild(this.dom.dragLeft),this.dom.dragLeft=null)}},{key:"_repaintDragRight",value:function(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.editable.updateTime&&!this.dom.dragRight){var s=document.createElement("div");s.className="vis-drag-right",s.dragRightItem=this,this.dom.box.appendChild(s),this.dom.dragRight=s}else!this.selected&&!this.options.itemsAlwaysDraggable.range&&this.dom.dragRight&&(this.dom.dragRight.parentNode&&this.dom.dragRight.parentNode.removeChild(this.dom.dragRight),this.dom.dragRight=null)}}]),e}(Js);rs.prototype.baseClassName="vis-item vis-range";os=function(t){fr(e,t);var n=MJ(e);function e(r,s,a){var o;if(Pe(this,e),o=n.call(this,r,s,a),o.props={content:{width:0}},o.overflow=!1,r){if(r.start==null)throw new Error('Property "start" missing in item '.concat(r.id));if(r.end==null)throw new Error('Property "end" missing in item '.concat(r.id))}return o}return Ie(e,[{key:"isVisible",value:function(s){return this.data.start<s.end&&this.data.end>s.start}},{key:"_createDomElement",value:function(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dirty=!0)}},{key:"_appendDomElement",value:function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){var s=this.parent.dom.background;if(!s)throw new Error("Cannot redraw item: parent has no background container element");s.appendChild(this.dom.box)}this.displayed=!0}},{key:"_updateDirtyDomComponents",value:function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.content),this._updateStyle(this.dom.box);var s=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"");this.dom.box.className=this.baseClassName+s}}},{key:"_getDomComponentsSizes",value:function(){return this.overflow=window.getComputedStyle(this.dom.content).overflow!=="hidden",{content:{width:this.dom.content.offsetWidth}}}},{key:"_updateDomComponentsSizes",value:function(s){this.props.content.width=s.content.width,this.height=0,this.dirty=!1}},{key:"_repaintDomAdditionals",value:function(){}},{key:"redraw",value:function(s){var a,o,l,u=this,c,d,f=[R(a=this._createDomElement).call(a,this),R(o=this._appendDomElement).call(o,this),R(l=this._updateDirtyDomComponents).call(l,this),function(){if(u.dirty){var v;d=R(v=u._getDomComponentsSizes).call(v,u)()}},function(){if(u.dirty){var v;R(v=u._updateDomComponentsSizes).call(v,u)(d)}},R(c=this._repaintDomAdditionals).call(c,this)];if(s)return f;var p;return K(f).call(f,function(v){p=v()}),p}},{key:"repositionY",value:function(s){var a,o=this.options.orientation.item;if(this.data.subgroup!==void 0){var l=this.data.subgroup;this.dom.box.style.height="".concat(this.parent.subgroups[l].height,"px"),o=="top"?this.dom.box.style.top="".concat(this.parent.top+this.parent.subgroups[l].top,"px"):this.dom.box.style.top="".concat(this.parent.top+this.parent.height-this.parent.subgroups[l].top-this.parent.subgroups[l].height,"px"),this.dom.box.style.bottom=""}else this.parent instanceof _y?(a=Math.max(this.parent.height,this.parent.itemSet.body.domProps.center.height,this.parent.itemSet.body.domProps.centerContainer.height),this.dom.box.style.bottom=o=="bottom"?"0":"",this.dom.box.style.top=o=="top"?"0":""):(a=this.parent.height,this.dom.box.style.top="".concat(this.parent.top,"px"),this.dom.box.style.bottom="");this.dom.box.style.height="".concat(a,"px")}}]),e}(Js);os.prototype.baseClassName="vis-item vis-background";os.prototype.stack=!1;os.prototype.show=rs.prototype.show;os.prototype.hide=rs.prototype.hide;os.prototype.repositionX=rs.prototype.repositionX;$J=`div.vis-tooltip {
  position: absolute;
  visibility: hidden;
  padding: 5px;
  white-space: nowrap;

  font-family: verdana;
  font-size:14px;
  color:#000000;
  background-color: #f5f4ed;

  -moz-border-radius: 3px;
  -webkit-border-radius: 3px;
  border-radius: 3px;
  border: 1px solid #808074;

  box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);
  pointer-events: none;

  z-index: 5;
}
`;pr($J);NJ=function(){function t(n,e){Pe(this,t),this.container=n,this.overflowMethod=e||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}return Ie(t,[{key:"setPosition",value:function(e,r){this.x=Ar(e),this.y=Ar(r)}},{key:"setText",value:function(e){e instanceof Element?(this.frame.innerHTML="",this.frame.appendChild(e)):this.frame.innerHTML=C.xss(e)}},{key:"show",value:function(e){if(e===void 0&&(e=!0),e===!0){var r=this.frame.clientHeight,s=this.frame.clientWidth,a=this.frame.parentNode.clientHeight,o=this.frame.parentNode.clientWidth,l=0,u=0;if(this.overflowMethod=="flip"||this.overflowMethod=="none"){var c=!1,d=!0;this.overflowMethod=="flip"&&(this.y-r<this.padding&&(d=!1),this.x+s>o-this.padding&&(c=!0)),c?l=this.x-s:l=this.x,d?u=this.y-r:u=this.y}else u=this.y-r,u+r+this.padding>a&&(u=a-r-this.padding),u<this.padding&&(u=this.padding),l=this.x,l+s+this.padding>o&&(l=o-s-this.padding),l<this.padding&&(l=this.padding);this.frame.style.left=l+"px",this.frame.style.top=u+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}},{key:"destroy",value:function(){this.frame.parentNode.removeChild(this.frame)}}]),t}(),B1={exports:{}},AJ=ue,LJ=gn.every,RJ=ko,BJ=RJ("every");AJ({target:"Array",proto:!0,forced:!BJ},{every:function(n){return LJ(this,n,arguments.length>1?arguments[1]:void 0)}});GJ=ut,HJ=GJ("Array").every,WJ=Qe,YJ=HJ,ov=Array.prototype,zJ=function(t){var n=t.every;return t===ov||WJ(ov,t)&&n===ov.every?YJ:n},VJ=zJ,UJ=VJ;(function(t){t.exports=UJ})(B1);jJ=re(B1.exports);Ty=function(t){fr(e,t);var n=XJ(e);function e(r,s,a){var o;Pe(this,e);var l=hn({},{fitOnDoubleClick:!0},a,{editable:!1});if(o=n.call(this,r,s,l),o.props={content:{width:0,height:0}},!r||r.uiItems==null)throw new Error('Property "uiItems" missing in item '+r.id);return o.id=Ns(),o.group=r.group,o._setupRange(),o.emitter=o.data.eventEmitter,o.range=o.data.range,o.attached=!1,o.isCluster=!0,o.data.isCluster=!0,o}return Ie(e,[{key:"hasItems",value:function(){return this.data.uiItems&&this.data.uiItems.length&&this.attached}},{key:"setUiItems",value:function(s){this.detach(),this.data.uiItems=s,this._setupRange(),this.attach()}},{key:"isVisible",value:function(s){var a=this.data.end?this.data.end-this.data.start:0,o=this.width*s.getMillisecondsPerPixel(),l=Math.max(this.data.start.getTime()+a,this.data.start.getTime()+o);return this.data.start<s.end&&l>s.start&&this.hasItems()}},{key:"getData",value:function(){return{isCluster:!0,id:this.id,items:this.data.items||[],data:this.data}}},{key:"redraw",value:function(s){var a,o,l,u,c,d,f,p=[R(a=this._createDomElement).call(a,this),R(o=this._appendDomElement).call(o,this),R(l=this._updateDirtyDomComponents).call(l,this),R(u=function(){this.dirty&&(f=this._getDomComponentsSizes())}).call(u,this),R(c=function(){if(this.dirty){var _;R(_=this._updateDomComponentsSizes).call(_,this)(f)}}).call(c,this),R(d=this._repaintDomAdditionals).call(d,this)];if(s)return p;var v;return K(p).call(p,function(y){v=y()}),v}},{key:"show",value:function(){this.displayed||this.redraw()}},{key:"hide",value:function(){if(this.displayed){var s=this.dom;s.box.parentNode&&s.box.parentNode.removeChild(s.box),this.options.showStipes&&(s.line.parentNode&&s.line.parentNode.removeChild(s.line),s.dot.parentNode&&s.dot.parentNode.removeChild(s.dot)),this.displayed=!1}}},{key:"repositionX",value:function(){var s=this.conversion.toScreen(this.data.start),a=this.data.end?this.conversion.toScreen(this.data.end):0;if(a)this.repositionXWithRanges(s,a);else{var o=this.data.align===void 0?this.options.align:this.data.align;this.repositionXWithoutRanges(s,o)}this.options.showStipes&&(this.dom.line.style.display=this._isStipeVisible()?"block":"none",this.dom.dot.style.display=this._isStipeVisible()?"block":"none",this._isStipeVisible()&&this.repositionStype(s,a))}},{key:"repositionStype",value:function(s,a){this.dom.line.style.display="block",this.dom.dot.style.display="block";var o=this.dom.line.offsetWidth,l=this.dom.dot.offsetWidth;if(a){var u=o+s+(a-s)/2,c=u-l/2,d=this.options.rtl?u*-1:u,f=this.options.rtl?c*-1:c;this.dom.line.style.transform="translateX(".concat(d,"px)"),this.dom.dot.style.transform="translateX(".concat(f,"px)")}else{var p=this.options.rtl?s*-1:s,v=this.options.rtl?(s-l/2)*-1:s-l/2;this.dom.line.style.transform="translateX(".concat(p,"px)"),this.dom.dot.style.transform="translateX(".concat(v,"px)")}}},{key:"repositionXWithoutRanges",value:function(s,a){a=="right"?this.options.rtl?(this.right=s-this.width,this.dom.box.style.right=this.right+"px"):(this.left=s-this.width,this.dom.box.style.left=this.left+"px"):a=="left"?this.options.rtl?(this.right=s,this.dom.box.style.right=this.right+"px"):(this.left=s,this.dom.box.style.left=this.left+"px"):this.options.rtl?(this.right=s-this.width/2,this.dom.box.style.right=this.right+"px"):(this.left=s-this.width/2,this.dom.box.style.left=this.left+"px")}},{key:"repositionXWithRanges",value:function(s,a){var o=Math.round(Math.max(a-s+.5,1));this.options.rtl?this.right=s:this.left=s,this.width=Math.max(o,this.minWidth||0),this.options.rtl?this.dom.box.style.right=this.right+"px":this.dom.box.style.left=this.left+"px",this.dom.box.style.width=o+"px"}},{key:"repositionY",value:function(){var s=this.options.orientation.item,a=this.dom.box;if(s=="top"?a.style.top=(this.top||0)+"px":a.style.top=(this.parent.height-this.top-this.height||0)+"px",this.options.showStipes){if(s=="top")this.dom.line.style.top="0",this.dom.line.style.height=this.parent.top+this.top+1+"px",this.dom.line.style.bottom="";else{var o=this.parent.itemSet.props.height,l=o-this.parent.top-this.parent.height+this.top;this.dom.line.style.top=o-l+"px",this.dom.line.style.bottom="0"}this.dom.dot.style.top=-this.dom.dot.offsetHeight/2+"px"}}},{key:"getWidthLeft",value:function(){return this.width/2}},{key:"getWidthRight",value:function(){return this.width/2}},{key:"move",value:function(){this.repositionX(),this.repositionY()}},{key:"attach",value:function(){var s,a=Ox(this.data.uiItems),o;try{for(a.s();!(o=a.n()).done;){var l=o.value;l.cluster=this}}catch(u){a.e(u)}finally{a.f()}this.data.items=He(s=this.data.uiItems).call(s,function(u){return u.data}),this.attached=!0,this.dirty=!0}},{key:"detach",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.hasItems()){var a=Ox(this.data.uiItems),o;try{for(a.s();!(o=a.n()).done;){var l=o.value;delete l.cluster}}catch(u){a.e(u)}finally{a.f()}this.attached=!1,s&&this.group&&(this.group.remove(this),this.group=null),this.data.items=[],this.dirty=!0}}},{key:"_onDoubleClick",value:function(){this._fit()}},{key:"_setupRange",value:function(){var s,a,o,l=He(s=this.data.uiItems).call(s,function(d){return{start:d.data.start.valueOf(),end:d.data.end?d.data.end.valueOf():d.data.start.valueOf()}});this.data.min=Math.min.apply(Math,lt(He(l).call(l,function(d){return Math.min(d.start,d.end||d.start)}))),this.data.max=Math.max.apply(Math,lt(He(l).call(l,function(d){return Math.max(d.start,d.end||d.start)})));var u=He(a=this.data.uiItems).call(a,function(d){return d.center}),c=zh(u).call(u,function(d,f){return d+f},0)/this.data.uiItems.length;hy(o=this.data.uiItems).call(o,function(d){return d.data.end})?(this.data.start=new Date(this.data.min),this.data.end=new Date(this.data.max)):(this.data.start=new Date(c),this.data.end=null)}},{key:"_getUiItems",value:function(){var s=this;if(this.data.uiItems&&this.data.uiItems.length){var a;return oe(a=this.data.uiItems).call(a,function(o){return o.cluster===s})}return[]}},{key:"_createDomElement",value:function(){if(!this.dom){if(this.dom={},this.dom.box=document.createElement("DIV"),this.dom.content=document.createElement("DIV"),this.dom.content.className="vis-item-content",this.dom.box.appendChild(this.dom.content),this.options.showStipes&&(this.dom.line=document.createElement("DIV"),this.dom.line.className="vis-cluster-line",this.dom.line.style.display="none",this.dom.dot=document.createElement("DIV"),this.dom.dot.className="vis-cluster-dot",this.dom.dot.style.display="none"),this.options.fitOnDoubleClick){var s;this.dom.box.ondblclick=R(s=e.prototype._onDoubleClick).call(s,this)}this.dom.box["vis-item"]=this,this.dirty=!0}}},{key:"_appendDomElement",value:function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){var s=this.parent.dom.foreground;if(!s)throw new Error("Cannot redraw item: parent has no foreground container element");s.appendChild(this.dom.box)}var a=this.parent.dom.background;if(this.options.showStipes){if(!this.dom.line.parentNode){if(!a)throw new Error("Cannot redraw item: parent has no background container element");a.appendChild(this.dom.line)}if(!this.dom.dot.parentNode){var o=this.parent.dom.axis;if(!a)throw new Error("Cannot redraw item: parent has no axis container element");o.appendChild(this.dom.dot)}}this.displayed=!0}},{key:"_updateDirtyDomComponents",value:function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var s=this.baseClassName+" "+(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+" vis-readonly";this.dom.box.className="vis-item "+s,this.options.showStipes&&(this.dom.line.className="vis-item vis-cluster-line "+(this.selected?" vis-selected":""),this.dom.dot.className="vis-item vis-cluster-dot "+(this.selected?" vis-selected":"")),this.data.end&&(this.dom.content.style.maxWidth="none")}}},{key:"_getDomComponentsSizes",value:function(){var s={previous:{right:this.dom.box.style.right,left:this.dom.box.style.left},box:{width:this.dom.box.offsetWidth,height:this.dom.box.offsetHeight}};return this.options.showStipes&&(s.dot={height:this.dom.dot.offsetHeight,width:this.dom.dot.offsetWidth},s.line={width:this.dom.line.offsetWidth}),s}},{key:"_updateDomComponentsSizes",value:function(s){this.options.rtl?this.dom.box.style.right="0px":this.dom.box.style.left="0px",this.data.end?this.minWidth=s.box.width:this.width=s.box.width,this.height=s.box.height,this.options.rtl?this.dom.box.style.right=s.previous.right:this.dom.box.style.left=s.previous.left,this.dirty=!1}},{key:"_repaintDomAdditionals",value:function(){this._repaintOnItemUpdateTimeTooltip(this.dom.box)}},{key:"_isStipeVisible",value:function(){return this.minWidth>=this.width||!this.data.end}},{key:"_getFitRange",value:function(){var s=.05*(this.data.max-this.data.min)/2;return{fitStart:this.data.min-s,fitEnd:this.data.max+s}}},{key:"_fit",value:function(){if(this.emitter){var s=this._getFitRange(),a=s.fitStart,o=s.fitEnd,l={start:new Date(a),end:new Date(o),animation:!0};this.emitter.emit("fit",l)}}},{key:"_getItemData",value:function(){return this.data}}]),e}(Js);Ty.prototype.baseClassName="vis-item vis-range vis-cluster";JJ="__ungrouped__",eee="__background__",tee={UNGROUPED:JJ,BACKGROUND:eee},ree=function(){function t(n){Pe(this,t),this.itemSet=n,this.groups={},this.cache={},this.cache[-1]=[]}return Ie(t,[{key:"createClusterItem",value:function(e,r,s){var a=new Ty(e,r,s);return a}},{key:"setItems",value:function(e,r){this.items=e||[],this.dataChanged=!0,this.applyOnChangedLevel=!1,r&&r.applyOnChangedLevel&&(this.applyOnChangedLevel=r.applyOnChangedLevel)}},{key:"updateData",value:function(){this.dataChanged=!0,this.applyOnChangedLevel=!1}},{key:"getClusters",value:function(e,r,s){var a=typeof s=="boolean"?{}:s,o=a.maxItems,l=a.clusterCriteria;l||(l=function(){return!0}),o=o||1;var u=-1,c=2,d=0;if(r>0){if(r>=1)return[];u=Math.abs(Math.round(Math.log(100/r)/Math.log(c))),d=Math.abs(Math.pow(c,u))}if(this.dataChanged){var f=u!=this.cacheLevel,p=this.applyOnChangedLevel?f:!0;p&&(this._dropLevelsCache(),this._filterData())}this.cacheLevel=u;var v=this.cache[u];if(!v){v=[];for(var y in this.groups)if(this.groups.hasOwnProperty(y))for(var _=this.groups[y],S=_.length,x=0;x<S;){for(var D=_[x],E=1,P=x-1;P>=0&&D.center-_[P].center<d/2;)!_[P].cluster&&l(D.data,_[P].data)&&E++,P--;for(var O=x+1;O<_.length&&_[O].center-D.center<d/2;)l(D.data,_[O].data)&&E++,O++;for(var A=v.length-1;A>=0&&D.center-v[A].center<d;)D.group==v[A].group&&l(D.data,v[A].data)&&E++,A--;if(E>o){for(var M=E-o+1,I=[],H=x;I.length<M&&H<_.length;)l(_[x].data,_[H].data)&&I.push(_[H]),H++;var z=this.itemSet.getGroupId(D.data),U=this.itemSet.groups[z]||this.itemSet.groups[tee.UNGROUPED],N=this._getClusterForItems(I,U,e,s);v.push(N),x+=M}else delete D.cluster,x+=1}this.cache[u]=v}return v}},{key:"_filterData",value:function(){var e={};this.groups=e;for(var r=0,s=Og(this.items);r<s.length;r++){var a=s[r],o=a.parent?a.parent.groupId:"",l=e[o];l||(l=[],e[o]=l),l.push(a),a.data.start&&(a.data.end?a.center=(a.data.start.valueOf()+a.data.end.valueOf())/2:a.center=a.data.start.valueOf())}for(var u in e)if(e.hasOwnProperty(u)){var c;bt(c=e[u]).call(c,function(d,f){return d.center-f.center})}this.dataChanged=!1}},{key:"_getClusterForItems",value:function(e,r,s,a){var o,l=He(o=s||[]).call(o,function(E){var P;return{cluster:E,itemsIds:new Jn(He(P=E.data.uiItems).call(P,function(O){return O.id}))}}),u;if(l.length){var c=ZJ(l),d;try{var f=function(){var P=d.value;if(P.itemsIds.size===e.length&&jJ(e).call(e,function(O){return P.itemsIds.has(O.id)}))return u=P.cluster,"break"};for(c.s();!(d=c.n()).done;){var p=f();if(p==="break")break}}catch(E){c.e(E)}finally{c.f()}}if(u)return u.setUiItems(e),u.group!==r&&(u.group&&u.group.remove(u),r&&(r.add(u),u.group=r)),u;var v=a.titleTemplate||"",y={toScreen:this.itemSet.body.util.toScreen,toTime:this.itemSet.body.util.toTime},_=v.replace(/{count}/,e.length),S='<div title="'+_+'">'+e.length+"</div>",x=hn({},a,this.itemSet.options),D={content:S,title:_,group:r,uiItems:e,eventEmitter:this.itemSet.body.emitter,range:this.itemSet.body.range};return u=this.createClusterItem(D,y,x),r&&(r.add(u),u.group=r),u.attach(),u}},{key:"_dropLevelsCache",value:function(){this.cache={},this.cacheLevel=-1,this.cache[this.cacheLevel]=[]}}]),t}(),iee=`
.vis-itemset {
  position: relative;
  padding: 0;
  margin: 0;

  box-sizing: border-box;
}

.vis-itemset .vis-background,
.vis-itemset .vis-foreground {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: visible;
}

.vis-axis {
  position: absolute;
  width: 100%;
  height: 0;
  left: 0;
  z-index: 1;
}

.vis-foreground .vis-group {
  position: relative;
  box-sizing: border-box;
  border-bottom: 1px solid #bfbfbf;
}

.vis-foreground .vis-group:last-child {
  border-bottom: none;
}

.vis-nesting-group {
  cursor: pointer;
}

.vis-label.vis-nested-group.vis-group-level-unknown-but-gte1 {
  background: #f5f5f5;
}
.vis-label.vis-nested-group.vis-group-level-0 {
  background-color: #ffffff;
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-0 .vis-inner {
  padding-left: 0;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-0 .vis-inner {
  padding-right: 0;
}
.vis-label.vis-nested-group.vis-group-level-1 {
  background-color: rgba(0, 0, 0, 0.05);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-1 .vis-inner {
  padding-left: 15px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-1 .vis-inner {
  padding-right: 15px;
}
.vis-label.vis-nested-group.vis-group-level-2 {
  background-color: rgba(0, 0, 0, 0.1);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-2 .vis-inner {
  padding-left: 30px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-2 .vis-inner {
  padding-right: 30px;
}
.vis-label.vis-nested-group.vis-group-level-3 {
  background-color: rgba(0, 0, 0, 0.15);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-3 .vis-inner {
  padding-left: 45px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-3 .vis-inner {
  padding-right: 45px;
}
.vis-label.vis-nested-group.vis-group-level-4 {
  background-color: rgba(0, 0, 0, 0.2);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-4 .vis-inner {
  padding-left: 60px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-4 .vis-inner {
  padding-right: 60px;
}
.vis-label.vis-nested-group.vis-group-level-5 {
  background-color: rgba(0, 0, 0, 0.25);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-5 .vis-inner {
  padding-left: 75px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-5 .vis-inner {
  padding-right: 75px;
}
.vis-label.vis-nested-group.vis-group-level-6 {
  background-color: rgba(0, 0, 0, 0.3);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-6 .vis-inner {
  padding-left: 90px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-6 .vis-inner {
  padding-right: 90px;
}
.vis-label.vis-nested-group.vis-group-level-7 {
  background-color: rgba(0, 0, 0, 0.35);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-7 .vis-inner {
  padding-left: 105px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-7 .vis-inner {
  padding-right: 105px;
}
.vis-label.vis-nested-group.vis-group-level-8 {
  background-color: rgba(0, 0, 0, 0.4);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-8 .vis-inner {
  padding-left: 120px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-8 .vis-inner {
  padding-right: 120px;
}
.vis-label.vis-nested-group.vis-group-level-9 {
  background-color: rgba(0, 0, 0, 0.45);
}
.vis-ltr .vis-label.vis-nested-group.vis-group-level-9 .vis-inner {
  padding-left: 135px;
}
.vis-rtl .vis-label.vis-nested-group.vis-group-level-9 .vis-inner {
  padding-right: 135px;
}
/* default takes over beginning with level-10 (thats why we add .vis-nested-group
  to the selectors above, to have higher specifity than these rules for the defaults) */
.vis-label.vis-nested-group {
  background-color: rgba(0, 0, 0, 0.5);
}
.vis-ltr .vis-label.vis-nested-group .vis-inner {
  padding-left: 150px;
}
.vis-rtl .vis-label.vis-nested-group .vis-inner {
  padding-right: 150px;
}

.vis-group-level-unknown-but-gte1 {
  border: 1px solid red;
}

/* expanded/collapsed indicators */
.vis-label.vis-nesting-group:before,
.vis-label.vis-nesting-group:before {
  display: inline-block;
  width: 15px;
}
.vis-label.vis-nesting-group.expanded:before {
  content: "\\25BC";
}
.vis-label.vis-nesting-group.collapsed:before {
  content: "\\25B6";
}
.vis-rtl .vis-label.vis-nesting-group.collapsed:before {
  content: "\\25C0";
}
/* compensate missing expanded/collapsed indicator, but only at levels > 0 */
.vis-ltr .vis-label:not(.vis-nesting-group):not(.vis-group-level-0) {
  padding-left: 15px;
}
.vis-rtl .vis-label:not(.vis-nesting-group):not(.vis-group-level-0) {
  padding-right: 15px;
}

.vis-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 10;
}`;pr(iee);nee=`
.vis-labelset {
  position: relative;

  overflow: hidden;

  box-sizing: border-box;
}

.vis-labelset .vis-label {
  position: relative;
  left: 0;
  top: 0;
  width: 100%;
  color: #4d4d4d;

  box-sizing: border-box;
}

.vis-labelset .vis-label {
  border-bottom: 1px solid #bfbfbf;
}

.vis-labelset .vis-label.draggable {
  cursor: pointer;
}

.vis-group-is-dragging {
  background: rgba(0, 0, 0, .1);
}

.vis-labelset .vis-label:last-child {
  border-bottom: none;
}

.vis-labelset .vis-label .vis-inner {
  display: inline-block;
  padding: 5px;
}

.vis-labelset .vis-label .vis-inner.vis-hidden {
  padding: 0;
}
`;pr(nee);qa="__ungrouped__",Vn="__background__",Ru=function(t){fr(e,t);var n=aee(e);function e(r,s){var a;Pe(this,e),a=n.call(this),a.body=r,a.defaultOptions={type:null,orientation:{item:"bottom"},align:"auto",stack:!0,stackSubgroups:!0,groupOrderSwap:function(u,c,d){var f=c.order;c.order=u.order,u.order=f},groupOrder:"order",selectable:!0,multiselect:!1,longSelectPressTime:251,itemsAlwaysDraggable:{item:!1,range:!1},editable:{updateTime:!1,updateGroup:!1,add:!1,remove:!1,overrideItems:!1},groupEditable:{order:!1,add:!1,remove:!1},snap:Au.snap,onDropObjectOnItem:function(u,c,d){d(c)},onAdd:function(u,c){c(u)},onUpdate:function(u,c){c(u)},onMove:function(u,c){c(u)},onRemove:function(u,c){c(u)},onMoving:function(u,c){c(u)},onAddGroup:function(u,c){c(u)},onMoveGroup:function(u,c){c(u)},onRemoveGroup:function(u,c){c(u)},margin:{item:{horizontal:10,vertical:10},axis:20},showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip",delay:500},tooltipOnItemUpdateTime:!1},a.options=C.extend({},a.defaultOptions),a.options.rtl=s.rtl,a.options.onTimeout=s.onTimeout,a.conversion={toScreen:r.util.toScreen,toTime:r.util.toTime},a.dom={},a.props={},a.hammer=null;var o=Ke(a);return a.itemsData=null,a.groupsData=null,a.itemsSettingTime=null,a.initialItemSetDrawn=!1,a.userContinueNotBail=null,a.sequentialSelection=!1,a.itemListeners={add:function(u,c,d){o._onAdd(c.items),o.options.cluster&&o.clusterGenerator.setItems(o.items,{applyOnChangedLevel:!1}),o.redraw()},update:function(u,c,d){o._onUpdate(c.items),o.options.cluster&&o.clusterGenerator.setItems(o.items,{applyOnChangedLevel:!1}),o.redraw()},remove:function(u,c,d){o._onRemove(c.items),o.options.cluster&&o.clusterGenerator.setItems(o.items,{applyOnChangedLevel:!1}),o.redraw()}},a.groupListeners={add:function(u,c,d){if(o._onAddGroups(c.items),o.groupsData&&o.groupsData.length>0){var f,p=o.groupsData.getDataSet();K(f=p.get()).call(f,function(v){if(v.nestedGroups){var y;v.showNested!=!1&&(v.showNested=!0);var _=[];K(y=v.nestedGroups).call(y,function(S){var x=p.get(S);x&&(x.nestedInGroup=v.id,v.showNested==!1&&(x.visible=!1),_=rt(_).call(_,x))}),p.update(_,d)}})}},update:function(u,c,d){o._onUpdateGroups(c.items)},remove:function(u,c,d){o._onRemoveGroups(c.items)}},a.items={},a.groups={},a.groupIds=[],a.selection=[],a.popup=null,a.popupTimer=null,a.touchParams={},a.groupTouchParams={group:null,isDragging:!1},a._create(),a.setOptions(s),a.clusters=[],a}return Ie(e,[{key:"_create",value:function(){var s=this,a,o,l,u,c,d,f,p,v,y,_,S,x,D,E,P=document.createElement("div");P.className="vis-itemset",P["vis-itemset"]=this,this.dom.frame=P;var O=document.createElement("div");O.className="vis-background",P.appendChild(O),this.dom.background=O;var A=document.createElement("div");A.className="vis-foreground",P.appendChild(A),this.dom.foreground=A;var M=document.createElement("div");M.className="vis-axis",this.dom.axis=M;var I=document.createElement("div");I.className="vis-labelset",this.dom.labelSet=I,this._updateUngrouped();var H=new _y(Vn,null,this);H.show(),this.groups[Vn]=H,this.hammer=new rr(this.body.dom.centerContainer),this.hammer.on("hammer.input",function(z){z.isFirst&&s._onTouch(z)}),this.hammer.on("panstart",R(a=this._onDragStart).call(a,this)),this.hammer.on("panmove",R(o=this._onDrag).call(o,this)),this.hammer.on("panend",R(l=this._onDragEnd).call(l,this)),this.hammer.get("pan").set({threshold:5,direction:rr.ALL}),this.hammer.get("press").set({time:1e4}),this.hammer.on("tap",R(u=this._onSelectItem).call(u,this)),this.hammer.on("press",R(c=this._onMultiSelectItem).call(c,this)),this.hammer.get("press").set({time:1e4}),this.hammer.on("doubletap",R(d=this._onAddItem).call(d,this)),this.options.rtl?this.groupHammer=new rr(this.body.dom.rightContainer):this.groupHammer=new rr(this.body.dom.leftContainer),this.groupHammer.on("tap",R(f=this._onGroupClick).call(f,this)),this.groupHammer.on("panstart",R(p=this._onGroupDragStart).call(p,this)),this.groupHammer.on("panmove",R(v=this._onGroupDrag).call(v,this)),this.groupHammer.on("panend",R(y=this._onGroupDragEnd).call(y,this)),this.groupHammer.get("pan").set({threshold:5,direction:rr.DIRECTION_VERTICAL}),this.body.dom.centerContainer.addEventListener("mouseover",R(_=this._onMouseOver).call(_,this)),this.body.dom.centerContainer.addEventListener("mouseout",R(S=this._onMouseOut).call(S,this)),this.body.dom.centerContainer.addEventListener("mousemove",R(x=this._onMouseMove).call(x,this)),this.body.dom.centerContainer.addEventListener("contextmenu",R(D=this._onDragEnd).call(D,this)),this.body.dom.centerContainer.addEventListener("mousewheel",R(E=this._onMouseWheel).call(E,this)),this.show()}},{key:"setOptions",value:function(s){var a=this;if(s){var o,l,u=["type","rtl","align","order","stack","stackSubgroups","selectable","multiselect","sequentialSelection","multiselectPerGroup","longSelectPressTime","groupOrder","dataAttributes","template","groupTemplate","visibleFrameTemplate","hide","snap","groupOrderSwap","showTooltips","tooltip","tooltipOnItemUpdateTime","groupHeightMode","onTimeout"];C.selectiveExtend(u,this.options,s),"itemsAlwaysDraggable"in s&&(typeof s.itemsAlwaysDraggable=="boolean"?(this.options.itemsAlwaysDraggable.item=s.itemsAlwaysDraggable,this.options.itemsAlwaysDraggable.range=!1):de(s.itemsAlwaysDraggable)==="object"&&(C.selectiveExtend(["item","range"],this.options.itemsAlwaysDraggable,s.itemsAlwaysDraggable),this.options.itemsAlwaysDraggable.item||(this.options.itemsAlwaysDraggable.range=!1))),"sequentialSelection"in s&&typeof s.sequentialSelection=="boolean"&&(this.options.sequentialSelection=s.sequentialSelection),"orientation"in s&&(typeof s.orientation=="string"?this.options.orientation.item=s.orientation==="top"?"top":"bottom":de(s.orientation)==="object"&&"item"in s.orientation&&(this.options.orientation.item=s.orientation.item)),"margin"in s&&(typeof s.margin=="number"?(this.options.margin.axis=s.margin,this.options.margin.item.horizontal=s.margin,this.options.margin.item.vertical=s.margin):de(s.margin)==="object"&&(C.selectiveExtend(["axis"],this.options.margin,s.margin),"item"in s.margin&&(typeof s.margin.item=="number"?(this.options.margin.item.horizontal=s.margin.item,this.options.margin.item.vertical=s.margin.item):de(s.margin.item)==="object"&&C.selectiveExtend(["horizontal","vertical"],this.options.margin.item,s.margin.item)))),K(o=["locale","locales"]).call(o,function(d){d in s&&(a.options[d]=s[d])}),"editable"in s&&(typeof s.editable=="boolean"?(this.options.editable.updateTime=s.editable,this.options.editable.updateGroup=s.editable,this.options.editable.add=s.editable,this.options.editable.remove=s.editable,this.options.editable.overrideItems=!1):de(s.editable)==="object"&&C.selectiveExtend(["updateTime","updateGroup","add","remove","overrideItems"],this.options.editable,s.editable)),"groupEditable"in s&&(typeof s.groupEditable=="boolean"?(this.options.groupEditable.order=s.groupEditable,this.options.groupEditable.add=s.groupEditable,this.options.groupEditable.remove=s.groupEditable):de(s.groupEditable)==="object"&&C.selectiveExtend(["order","add","remove"],this.options.groupEditable,s.groupEditable));var c=function(f){var p=s[f];if(p){if(typeof p!="function"){var v;throw new Error(rt(v="option ".concat(f," must be a function ")).call(v,f,"(item, callback)"))}a.options[f]=p}};K(l=["onDropObjectOnItem","onAdd","onUpdate","onRemove","onMove","onMoving","onAddGroup","onMoveGroup","onRemoveGroup"]).call(l,c),s.cluster?(hn(this.options,{cluster:s.cluster}),this.clusterGenerator||(this.clusterGenerator=new ree(this)),this.clusterGenerator.setItems(this.items,{applyOnChangedLevel:!1}),this.markDirty({refreshItems:!0,restackGroups:!0}),this.redraw()):this.clusterGenerator?(this._detachAllClusters(),this.clusters=[],this.clusterGenerator=null,this.options.cluster=void 0,this.markDirty({refreshItems:!0,restackGroups:!0}),this.redraw()):this.markDirty()}}},{key:"markDirty",value:function(s){this.groupIds=[],s&&(s.refreshItems&&K(C).call(C,this.items,function(a){a.dirty=!0,a.displayed&&a.redraw()}),s.restackGroups&&K(C).call(C,this.groups,function(a,o){o!==Vn&&(a.stackDirty=!0)}))}},{key:"destroy",value:function(){this.clearPopupTimer(),this.hide(),this.setItems(null),this.setGroups(null),this.hammer&&this.hammer.destroy(),this.groupHammer&&this.groupHammer.destroy(),this.hammer=null,this.body=null,this.conversion=null}},{key:"hide",value:function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.axis.parentNode&&this.dom.axis.parentNode.removeChild(this.dom.axis),this.dom.labelSet.parentNode&&this.dom.labelSet.parentNode.removeChild(this.dom.labelSet)}},{key:"show",value:function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame),this.dom.axis.parentNode||this.body.dom.backgroundVertical.appendChild(this.dom.axis),this.dom.labelSet.parentNode||(this.options.rtl?this.body.dom.right.appendChild(this.dom.labelSet):this.body.dom.left.appendChild(this.dom.labelSet))}},{key:"setPopupTimer",value:function(s){if(this.clearPopupTimer(),s){var a=this.options.tooltip.delay||typeof this.options.tooltip.delay=="number"?this.options.tooltip.delay:500;this.popupTimer=nr(function(){s.show()},a)}}},{key:"clearPopupTimer",value:function(){this.popupTimer!=null&&(clearTimeout(this.popupTimer),this.popupTimer=null)}},{key:"setSelection",value:function(s){var a;s==null&&(s=[]),pe(s)||(s=[s]);var o=oe(a=this.selection).call(a,function(_){return Ze(s).call(s,_)===-1}),l=ks(o),u;try{for(l.s();!(u=l.n()).done;){var c=u.value,d=this.getItemById(c);d&&d.unselect()}}catch(_){l.e(_)}finally{l.f()}this.selection=lt(s);var f=ks(s),p;try{for(f.s();!(p=f.n()).done;){var v=p.value,y=this.getItemById(v);y&&y.select()}}catch(_){f.e(_)}finally{f.f()}}},{key:"getSelection",value:function(){var s;return rt(s=this.selection).call(s,[])}},{key:"getVisibleItems",value:function(){var s=this.body.range.getRange(),a,o;this.options.rtl?(a=this.body.util.toScreen(s.start),o=this.body.util.toScreen(s.end)):(o=this.body.util.toScreen(s.start),a=this.body.util.toScreen(s.end));var l=[];for(var u in this.groups)if(this.groups.hasOwnProperty(u)){var c=this.groups[u],d=c.isVisible?c.visibleItems:[],f=ks(d),p;try{for(f.s();!(p=f.n()).done;){var v=p.value;this.options.rtl?v.right<o&&v.right+v.width>a&&l.push(v.id):v.left<a&&v.left+v.width>o&&l.push(v.id)}}catch(y){f.e(y)}finally{f.f()}}return l}},{key:"getItemsAtCurrentTime",value:function(s){var a,o;this.options.rtl?(a=this.body.util.toScreen(s),o=this.body.util.toScreen(s)):(o=this.body.util.toScreen(s),a=this.body.util.toScreen(s));var l=[];for(var u in this.groups)if(this.groups.hasOwnProperty(u)){var c=this.groups[u],d=c.isVisible?c.visibleItems:[],f=ks(d),p;try{for(f.s();!(p=f.n()).done;){var v=p.value;this.options.rtl?v.right<o&&v.right+v.width>a&&l.push(v.id):v.left<a&&v.left+v.width>o&&l.push(v.id)}}catch(y){f.e(y)}finally{f.f()}}return l}},{key:"getVisibleGroups",value:function(){var s=[];for(var a in this.groups)if(this.groups.hasOwnProperty(a)){var o=this.groups[a];o.isVisible&&s.push(a)}return s}},{key:"getItemById",value:function(s){var a;return this.items[s]||iJ(a=this.clusters).call(a,function(o){return o.id===s})}},{key:"_deselect",value:function(s){for(var a=this.selection,o=0,l=a.length;o<l;o++)if(a[o]==s){cr(a).call(a,o,1);break}}},{key:"redraw",value:function(){var s=this,a=this.options.margin,o=this.body.range,l=C.option.asSize,u=this.options,c=u.orientation.item,d=!1,f=this.dom.frame;this.props.top=this.body.domProps.top.height+this.body.domProps.border.top,this.options.rtl?this.props.right=this.body.domProps.right.width+this.body.domProps.border.right:this.props.left=this.body.domProps.left.width+this.body.domProps.border.left,f.className="vis-itemset",this.options.cluster&&this._clusterItems(),d=this._orderGroups()||d;var p=o.end-o.start,v=p!=this.lastVisibleInterval||this.props.width!=this.props.lastWidth,y=o.start!=this.lastRangeStart,_=u.stack!=this.lastStack,S=u.stackSubgroups!=this.lastStackSubgroups,x=v||y||_||S;this.lastVisibleInterval=p,this.lastRangeStart=o.start,this.lastStack=u.stack,this.lastStackSubgroups=u.stackSubgroups,this.props.lastWidth=this.props.width;var D=this._firstGroup(),E={item:a.item,axis:a.axis},P={item:a.item,axis:a.item.vertical/2},O=0,A=a.axis+a.item.vertical;this.groups[Vn].redraw(o,P,x);var M={},I=0;K(C).call(C,this.groups,function(z,U){if(U!==Vn){var N=z==D?E:P,$=!0;M[U]=z.redraw(o,N,x,$),I=M[U].length}});var H=I>0;return H&&function(){for(var z={},U=function(B){K(C).call(C,M,function(Y,V){z[V]=Y[B]()})},N=0;N<I;N++)U(N);K(C).call(C,s.groups,function($,B){if(B!==Vn){var Y=z[B];d=Y||d,O+=$.height}}),O=Math.max(O,A)}(),O=Math.max(O,A),f.style.height=l(O),this.props.width=f.offsetWidth,this.props.height=O,this.dom.axis.style.top=l(c=="top"?this.body.domProps.top.height+this.body.domProps.border.top:this.body.domProps.top.height+this.body.domProps.centerContainer.height),this.options.rtl?this.dom.axis.style.right="0":this.dom.axis.style.left="0",this.hammer.get("press").set({time:this.options.longSelectPressTime}),this.initialItemSetDrawn=!0,d=this._isResized()||d,d}},{key:"_firstGroup",value:function(){var s=this.options.orientation.item=="top"?0:this.groupIds.length-1,a=this.groupIds[s],o=this.groups[a]||this.groups[qa];return o||null}},{key:"_updateUngrouped",value:function(){var s=this.groups[qa],a,o;if(this.groupsData){if(s){s.dispose(),delete this.groups[qa];for(o in this.items)if(this.items.hasOwnProperty(o)){a=this.items[o],a.parent&&a.parent.remove(a);var l=this.getGroupId(a.data),u=this.groups[l];u&&u.add(a)||a.hide()}}}else if(!s){var c=null,d=null;s=new fh(c,d,this),this.groups[qa]=s;for(o in this.items)this.items.hasOwnProperty(o)&&(a=this.items[o],s.add(a));s.show()}}},{key:"getLabelSet",value:function(){return this.dom.labelSet}},{key:"setItems",value:function(s){this.itemsSettingTime=new Date;var a=this,o,l=this.itemsData;if(!s)this.itemsData=null;else if(mn(s))this.itemsData=go(s);else throw new TypeError("Data must implement the interface of DataSet or DataView");if(l&&(K(C).call(C,this.itemListeners,function(c,d){l.off(d,c)}),l.dispose(),o=l.getIds(),this._onRemove(o)),this.itemsData){var u=this.id;K(C).call(C,this.itemListeners,function(c,d){a.itemsData.on(d,c,u)}),o=this.itemsData.getIds(),this._onAdd(o),this._updateUngrouped()}this.body.emitter.emit("_change",{queue:!0})}},{key:"getItems",value:function(){return this.itemsData!=null?this.itemsData.rawDS:null}},{key:"setGroups",value:function(s){var a=this,o;if(this.groupsData&&(K(C).call(C,this.groupListeners,function(d,f){a.groupsData.off(f,d)}),o=this.groupsData.getIds(),this.groupsData=null,this._onRemoveGroups(o)),!s)this.groupsData=null;else if(mn(s))this.groupsData=s;else throw new TypeError("Data must implement the interface of DataSet or DataView");if(this.groupsData){var l,u=this.groupsData.getDataSet();K(l=u.get()).call(l,function(d){if(d.nestedGroups){var f;K(f=d.nestedGroups).call(f,function(p){var v=u.get(p);v.nestedInGroup=d.id,d.showNested==!1&&(v.visible=!1),u.update(v)})}});var c=this.id;K(C).call(C,this.groupListeners,function(d,f){a.groupsData.on(f,d,c)}),o=this.groupsData.getIds(),this._onAddGroups(o)}this._updateUngrouped(),this._order(),this.options.cluster&&(this.clusterGenerator.updateData(),this._clusterItems(),this.markDirty({refreshItems:!0,restackGroups:!0})),this.body.emitter.emit("_change",{queue:!0})}},{key:"getGroups",value:function(){return this.groupsData}},{key:"removeItem",value:function(s){var a=this,o=this.itemsData.get(s);o&&this.options.onRemove(o,function(l){l&&a.itemsData.remove(s)})}},{key:"_getType",value:function(s){return s.type||this.options.type||(s.end?"range":"box")}},{key:"getGroupId",value:function(s){var a=this._getType(s);return a=="background"&&s.group==null?Vn:this.groupsData?s.group:qa}},{key:"_onUpdate",value:function(s){var a=this,o=this;K(s).call(s,function(l){var u=o.itemsData.get(l),c=o.items[l],d=u?o._getType(u):null,f=e.types[d],p;if(c&&(!f||!(c instanceof f)?(p=c.selected,o._removeItem(c),c=null):o._updateItem(c,u)),!c&&u)if(f)c=new f(u,o.conversion,o.options),c.id=l,o._addItem(c),p&&(a.selection.push(l),c.select());else throw new TypeError('Unknown item type "'.concat(d,'"'))}),this._order(),this.options.cluster&&(this.clusterGenerator.setItems(this.items,{applyOnChangedLevel:!1}),this._clusterItems()),this.body.emitter.emit("_change",{queue:!0})}},{key:"_onRemove",value:function(s){var a=0,o=this;K(s).call(s,function(l){var u=o.items[l];u&&(a++,o._removeItem(u))}),a&&(this._order(),this.body.emitter.emit("_change",{queue:!0}))}},{key:"_order",value:function(){K(C).call(C,this.groups,function(s){s.order()})}},{key:"_onUpdateGroups",value:function(s){this._onAddGroups(s)}},{key:"_onAddGroups",value:function(s){var a=this;K(s).call(s,function(o){var l=a.groupsData.get(o),u=a.groups[o];if(u)u.setData(l);else{if(o==qa||o==Vn)throw new Error("Illegal group id. ".concat(o," is a reserved id."));var c=Ju(a.options);C.extend(c,{height:null}),u=new fh(o,l,a),a.groups[o]=u;for(var d in a.items)if(a.items.hasOwnProperty(d)){var f=a.items[d];f.data.group==o&&u.add(f)}u.order(),u.show()}}),this.body.emitter.emit("_change",{queue:!0})}},{key:"_onRemoveGroups",value:function(s){var a=this;K(s).call(s,function(o){var l=a.groups[o];l&&(l.dispose(),delete a.groups[o])}),this.options.cluster&&(this.clusterGenerator.updateData(),this._clusterItems()),this.markDirty({restackGroups:!!this.options.cluster}),this.body.emitter.emit("_change",{queue:!0})}},{key:"_orderGroups",value:function(){if(this.groupsData){var s=this.groupsData.getIds({order:this.options.groupOrder});s=this._orderNestedGroups(s);var a=!C.equalArray(s,this.groupIds);if(a){var o=this.groups;K(s).call(s,function(l){o[l].hide()}),K(s).call(s,function(l){o[l].show()}),this.groupIds=s}return a}else return!1}},{key:"_orderNestedGroups",value:function(s){var a=this;function o(u,c){var d=[];return K(c).call(c,function(f){d.push(f);var p=u.groupsData.get(f);if(p.nestedGroups){var v,y=He(v=u.groupsData.get({filter:function(S){return S.nestedInGroup==f},order:u.options.groupOrder})).call(v,function(_){return _.id});d=rt(d).call(d,o(u,y))}}),d}var l=oe(s).call(s,function(u){return!a.groupsData.get(u).nestedInGroup});return o(this,l)}},{key:"_addItem",value:function(s){this.items[s.id]=s;var a=this.getGroupId(s.data),o=this.groups[a];o?o&&o.data&&o.data.showNested&&(s.groupShowing=!0):s.groupShowing=!1,o&&o.add(s)}},{key:"_updateItem",value:function(s,a){s.setData(a);var o=this.getGroupId(s.data),l=this.groups[o];l?l&&l.data&&l.data.showNested&&(s.groupShowing=!0):s.groupShowing=!1}},{key:"_removeItem",value:function(s){var a,o;s.hide(),delete this.items[s.id];var l=Ze(a=this.selection).call(a,s.id);l!=-1&&cr(o=this.selection).call(o,l,1),s.parent&&s.parent.remove(s),this.popup!=null&&this.popup.hide()}},{key:"_constructByEndArray",value:function(s){for(var a=[],o=0;o<s.length;o++)s[o]instanceof rs&&a.push(s[o]);return a}},{key:"_onTouch",value:function(s){this.touchParams.item=this.itemFromTarget(s),this.touchParams.dragLeftItem=s.target.dragLeftItem||!1,this.touchParams.dragRightItem=s.target.dragRightItem||!1,this.touchParams.itemProps=null}},{key:"_getGroupIndex",value:function(s){for(var a=0;a<this.groupIds.length;a++)if(s==this.groupIds[a])return a}},{key:"_onDragStart",value:function(s){var a=this;if(!this.touchParams.itemIsDragging){var o=this.touchParams.item||null,l=this,u;if(o&&(o.selected||this.options.itemsAlwaysDraggable.item)){if(this.options.editable.overrideItems&&!this.options.editable.updateTime&&!this.options.editable.updateGroup||o.editable!=null&&!o.editable.updateTime&&!o.editable.updateGroup&&!this.options.editable.overrideItems)return;var c=this.touchParams.dragLeftItem,d=this.touchParams.dragRightItem;if(this.touchParams.itemIsDragging=!0,this.touchParams.selectedItem=o,c)u={item:c,initialX:s.center.x,dragLeft:!0,data:this._cloneItemData(o.data)},this.touchParams.itemProps=[u];else if(d)u={item:d,initialX:s.center.x,dragRight:!0,data:this._cloneItemData(o.data)},this.touchParams.itemProps=[u];else if(this.options.editable.add&&(s.srcEvent.ctrlKey||s.srcEvent.metaKey))this._onDragStartAddItem(s);else{this.groupIds.length<1&&this.redraw();var f=this._getGroupIndex(o.data.group),p=this.options.itemsAlwaysDraggable.item&&!o.selected?[o.id]:this.getSelection();this.touchParams.itemProps=He(p).call(p,function(v){var y=l.items[v],_=l._getGroupIndex(y.data.group);return{item:y,initialX:s.center.x,groupOffset:f-_,data:a._cloneItemData(y.data)}})}s.stopPropagation()}else this.options.editable.add&&(s.srcEvent.ctrlKey||s.srcEvent.metaKey)&&this._onDragStartAddItem(s)}}},{key:"_onDragStartAddItem",value:function(s){var a=this.options.snap||null,o=this.dom.frame.getBoundingClientRect(),l=this.options.rtl?o.right-s.center.x+10:s.center.x-o.left-10,u=this.body.util.toTime(l),c=this.body.util.getScale(),d=this.body.util.getStep(),f=a?a(u,c,d):u,p=f,v={type:"range",start:f,end:p,content:"new item"},y=Ns();v[this.itemsData.idProp]=y;var _=this.groupFromTarget(s);_&&(v.group=_.groupId);var S=new rs(v,this.conversion,this.options);S.id=y,S.data=this._cloneItemData(v),this._addItem(S),this.touchParams.selectedItem=S;var x={item:S,initialX:s.center.x,data:S.data};this.options.rtl?x.dragLeft=!0:x.dragRight=!0,this.touchParams.itemProps=[x],s.stopPropagation()}},{key:"_onDrag",value:function(s){var a=this;if(this.popup!=null&&this.options.showTooltips&&!this.popup.hidden){var o=this.body.dom.centerContainer,l=o.getBoundingClientRect();this.popup.setPosition(s.center.x-l.left+o.offsetLeft,s.center.y-l.top+o.offsetTop),this.popup.show()}if(this.touchParams.itemProps){var u;s.stopPropagation();var c=this,d=this.options.snap||null,f=this.body.dom.root.offsetLeft,p=this.options.rtl?f+this.body.domProps.right.width:f+this.body.domProps.left.width,v=this.body.util.getScale(),y=this.body.util.getStep(),_=this.touchParams.selectedItem,S=(this.options.editable.overrideItems||_.editable==null)&&this.options.editable.updateGroup||!this.options.editable.overrideItems&&_.editable!=null&&_.editable.updateGroup,x=null;if(S&&_&&_.data.group!=null){var D=c.groupFromTarget(s);D&&(x=this._getGroupIndex(D.groupId))}K(u=this.touchParams.itemProps).call(u,function(E){var P=c.body.util.toTime(s.center.x-p),O=c.body.util.toTime(E.initialX-p),A,M,I,H,z;a.options.rtl?A=-(P-O):A=P-O;var U=a._cloneItemData(E.item.data);if(!(E.item.editable!=null&&!E.item.editable.updateTime&&!E.item.editable.updateGroup&&!c.options.editable.overrideItems)){var N=(a.options.editable.overrideItems||_.editable==null)&&a.options.editable.updateTime||!a.options.editable.overrideItems&&_.editable!=null&&_.editable.updateTime;if(N){if(E.dragLeft)a.options.rtl?U.end!=null&&(I=C.convert(E.data.end,"Date"),z=new Date(I.valueOf()+A),U.end=d?d(z,v,y):z):U.start!=null&&(M=C.convert(E.data.start,"Date"),H=new Date(M.valueOf()+A),U.start=d?d(H,v,y):H);else if(E.dragRight)a.options.rtl?U.start!=null&&(M=C.convert(E.data.start,"Date"),H=new Date(M.valueOf()+A),U.start=d?d(H,v,y):H):U.end!=null&&(I=C.convert(E.data.end,"Date"),z=new Date(I.valueOf()+A),U.end=d?d(z,v,y):z);else if(U.start!=null)if(M=C.convert(E.data.start,"Date").valueOf(),H=new Date(M+A),U.end!=null){I=C.convert(E.data.end,"Date");var $=I.valueOf()-M.valueOf();U.start=d?d(H,v,y):H,U.end=new Date(U.start.valueOf()+$)}else U.start=d?d(H,v,y):H}if(S&&!E.dragLeft&&!E.dragRight&&x!=null&&U.group!=null){var B=x-E.groupOffset;B=Math.max(0,B),B=Math.min(c.groupIds.length-1,B),U.group=c.groupIds[B]}U=a._cloneItemData(U),c.options.onMoving(U,function(Y){Y&&E.item.setData(a._cloneItemData(Y,"Date"))})}}),this.body.emitter.emit("_change")}}},{key:"_moveToGroup",value:function(s,a){var o=this.groups[a];if(o&&o.groupId!=s.data.group){var l=s.parent;l.remove(s),l.order(),s.data.group=o.groupId,o.add(s),o.order()}}},{key:"_onDragEnd",value:function(s){var a=this;if(this.touchParams.itemIsDragging=!1,this.touchParams.itemProps){s.stopPropagation();var o=this,l=this.touchParams.itemProps;this.touchParams.itemProps=null,K(l).call(l,function(u){var c=u.item.id,d=o.itemsData.get(c)!=null;if(!d)o.options.onAdd(u.item.data,function(p){o._removeItem(u.item),p&&o.itemsData.add(p),o.body.emitter.emit("_change")});else{var f=a._cloneItemData(u.item.data);o.options.onMove(f,function(p){p?(p[a.itemsData.idProp]=c,a.itemsData.update(p)):(u.item.setData(u.data),o.body.emitter.emit("_change"))})}})}}},{key:"_onGroupClick",value:function(s){var a=this,o=this.groupFromTarget(s);nr(function(){a.toggleGroupShowNested(o)},1)}},{key:"toggleGroupShowNested",value:function(s){var a,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(!(!s||!s.nestedGroups)){var l=this.groupsData.getDataSet();o!=null?s.showNested=!!o:s.showNested=!s.showNested;var u=l.get(s.groupId);u.showNested=s.showNested;for(var c=s.nestedGroups,d=c;d.length>0;){var f=d;d=[];for(var p=0;p<f.length;p++){var v=l.get(f[p]);v.nestedGroups&&(d=rt(d).call(d,v.nestedGroups))}d.length>0&&(c=rt(c).call(c,d))}var y=He(a=l.get(c)).call(a,function(_){return _.visible==null&&(_.visible=!0),_.visible=!!u.showNested,_});l.update(rt(y).call(y,u)),u.showNested?(C.removeClassName(s.dom.label,"collapsed"),C.addClassName(s.dom.label,"expanded")):(C.removeClassName(s.dom.label,"expanded"),C.addClassName(s.dom.label,"collapsed"))}}},{key:"toggleGroupDragClassName",value:function(s){s.dom.label.classList.toggle("vis-group-is-dragging"),s.dom.foreground.classList.toggle("vis-group-is-dragging")}},{key:"_onGroupDragStart",value:function(s){this.groupTouchParams.isDragging||this.options.groupEditable.order&&(this.groupTouchParams.group=this.groupFromTarget(s),this.groupTouchParams.group&&(s.stopPropagation(),this.groupTouchParams.isDragging=!0,this.toggleGroupDragClassName(this.groupTouchParams.group),this.groupTouchParams.originalOrder=this.groupsData.getIds({order:this.options.groupOrder})))}},{key:"_onGroupDrag",value:function(s){if(this.options.groupEditable.order&&this.groupTouchParams.group){s.stopPropagation();var a=this.groupsData.getDataSet(),o=this.groupFromTarget(s);if(o&&o.height!=this.groupTouchParams.group.height){var l=o.top<this.groupTouchParams.group.top,u=s.center?s.center.y:s.clientY,c=o.dom.foreground.getBoundingClientRect(),d=this.groupTouchParams.group.height;if(l){if(c.top+d<u)return}else{var f=o.height;if(c.top+f-d>u)return}}if(o&&o!=this.groupTouchParams.group){var p=a.get(o.groupId),v=a.get(this.groupTouchParams.group.groupId);v&&p&&(this.options.groupOrderSwap(v,p,a),a.update(v),a.update(p));var y=a.getIds({order:this.options.groupOrder});if(!C.equalArray(y,this.groupTouchParams.originalOrder))for(var _=this.groupTouchParams.originalOrder,S=this.groupTouchParams.group.groupId,x=Math.min(_.length,y.length),D=0,E=0,P=0;D<x;){for(;D+E<x&&D+P<x&&y[D+E]==_[D+P];)D++;if(D+E>=x)break;if(y[D+E]==S)E=1;else if(_[D+P]==S)P=1;else{var O=Ze(y).call(y,_[D+P]),A=a.get(y[D+E]),M=a.get(_[D+P]);this.options.groupOrderSwap(A,M,a),a.update(A),a.update(M);var I=y[D+E];y[D+E]=_[D+P],y[O]=I,D++}}}}}},{key:"_onGroupDragEnd",value:function(s){if(this.groupTouchParams.isDragging=!1,this.options.groupEditable.order&&this.groupTouchParams.group){s.stopPropagation();var a=this,o=a.groupTouchParams.group.groupId,l=a.groupsData.getDataSet(),u=C.extend({},l.get(o));a.options.onMoveGroup(u,function(c){if(c)c[l._idProp]=o,l.update(c);else{var d=l.getIds({order:a.options.groupOrder});if(!C.equalArray(d,a.groupTouchParams.originalOrder))for(var f=a.groupTouchParams.originalOrder,p=Math.min(f.length,d.length),v=0;v<p;){for(;v<p&&d[v]==f[v];)v++;if(v>=p)break;var y=Ze(d).call(d,f[v]),_=l.get(d[v]),S=l.get(f[v]);a.options.groupOrderSwap(_,S,l),l.update(_),l.update(S);var x=d[v];d[v]=f[v],d[y]=x,v++}}}),a.body.emitter.emit("groupDragged",{groupId:o}),this.toggleGroupDragClassName(this.groupTouchParams.group),this.groupTouchParams.group=null}}},{key:"_onSelectItem",value:function(s){if(this.options.selectable){var a=s.srcEvent&&(s.srcEvent.ctrlKey||s.srcEvent.metaKey),o=s.srcEvent&&s.srcEvent.shiftKey;if(a||o){this._onMultiSelectItem(s);return}var l=this.getSelection(),u=this.itemFromTarget(s),c=u&&u.selectable?[u.id]:[];this.setSelection(c);var d=this.getSelection();(d.length>0||l.length>0)&&this.body.emitter.emit("select",{items:d,event:s})}}},{key:"_onMouseOver",value:function(s){var a=this.itemFromTarget(s);if(a){var o=this.itemFromRelatedTarget(s);if(a!==o){var l=a.getTitle();if(this.options.showTooltips&&l){this.popup==null&&(this.popup=new NJ(this.body.dom.root,this.options.tooltip.overflowMethod||"flip")),this.popup.setText(l);var u=this.body.dom.centerContainer,c=u.getBoundingClientRect();this.popup.setPosition(s.clientX-c.left+u.offsetLeft,s.clientY-c.top+u.offsetTop),this.setPopupTimer(this.popup)}else this.clearPopupTimer(),this.popup!=null&&this.popup.hide();this.body.emitter.emit("itemover",{item:a.id,event:s})}}}},{key:"_onMouseOut",value:function(s){var a=this.itemFromTarget(s);if(a){var o=this.itemFromRelatedTarget(s);a!==o&&(this.clearPopupTimer(),this.popup!=null&&this.popup.hide(),this.body.emitter.emit("itemout",{item:a.id,event:s}))}}},{key:"_onMouseMove",value:function(s){var a=this.itemFromTarget(s);if(a&&(this.popupTimer!=null&&this.setPopupTimer(this.popup),this.options.showTooltips&&this.options.tooltip.followMouse&&this.popup&&!this.popup.hidden)){var o=this.body.dom.centerContainer,l=o.getBoundingClientRect();this.popup.setPosition(s.clientX-l.left+o.offsetLeft,s.clientY-l.top+o.offsetTop),this.popup.show()}}},{key:"_onMouseWheel",value:function(s){this.touchParams.itemIsDragging&&this._onDragEnd(s)}},{key:"_onUpdateItem",value:function(s){if(this.options.selectable&&!(!this.options.editable.updateTime&&!this.options.editable.updateGroup)){var a=this;if(s){var o=a.itemsData.get(s.id);this.options.onUpdate(o,function(l){l&&a.itemsData.update(l)})}}}},{key:"_onDropObjectOnItem",value:function(s){var a=this.itemFromTarget(s),o=JSON.parse(s.dataTransfer.getData("text"));this.options.onDropObjectOnItem(o,a)}},{key:"_onAddItem",value:function(s){if(this.options.selectable&&this.options.editable.add){var a=this,o=this.options.snap||null,l=this.dom.frame.getBoundingClientRect(),u=this.options.rtl?l.right-s.center.x:s.center.x-l.left,c=this.body.util.toTime(u),d=this.body.util.getScale(),f=this.body.util.getStep(),p,v;s.type=="drop"?(v=JSON.parse(s.dataTransfer.getData("text")),v.content=v.content?v.content:"new item",v.start=v.start?v.start:o?o(c,d,f):c,v.type=v.type||"box",v[this.itemsData.idProp]=v.id||Ns(),v.type=="range"&&!v.end&&(p=this.body.util.toTime(u+this.props.width/5),v.end=o?o(p,d,f):p)):(v={start:o?o(c,d,f):c,content:"new item"},v[this.itemsData.idProp]=Ns(),this.options.type==="range"&&(p=this.body.util.toTime(u+this.props.width/5),v.end=o?o(p,d,f):p));var y=this.groupFromTarget(s);y&&(v.group=y.groupId),v=this._cloneItemData(v),this.options.onAdd(v,function(_){_&&(a.itemsData.add(_),s.type=="drop"&&a.setSelection([_.id]))})}}},{key:"_onMultiSelectItem",value:function(s){var a=this;if(this.options.selectable){var o=this.itemFromTarget(s);if(o){var l=this.options.multiselect?this.getSelection():[],u=s.srcEvent&&s.srcEvent.shiftKey||!1;if((u||this.options.sequentialSelection)&&this.options.multiselect){var c=this.itemsData.get(o.id).group,d=void 0;this.options.multiselectPerGroup&&l.length>0&&(d=this.itemsData.get(l[0]).group),(!this.options.multiselectPerGroup||d==null||d==c)&&l.push(o.id);var f=e._getItemRange(this.itemsData.get(l));if(!this.options.multiselectPerGroup||d==c){l=[];for(var p in this.items)if(this.items.hasOwnProperty(p)){var v=this.items[p],y=v.data.start,_=v.data.end!==void 0?v.data.end:y;y>=f.min&&_<=f.max&&(!this.options.multiselectPerGroup||d==this.itemsData.get(v.id).group)&&!(v instanceof os)&&l.push(v.id)}}}else{var S=Ze(l).call(l,o.id);S==-1?l.push(o.id):cr(l).call(l,S,1)}var x=oe(l).call(l,function(D){return a.getItemById(D).selectable});this.setSelection(x),this.body.emitter.emit("select",{items:this.getSelection(),event:s})}}}},{key:"itemFromElement",value:function(s){for(var a=s;a;){if(a.hasOwnProperty("vis-item"))return a["vis-item"];a=a.parentNode}return null}},{key:"itemFromTarget",value:function(s){return this.itemFromElement(s.target)}},{key:"itemFromRelatedTarget",value:function(s){return this.itemFromElement(s.relatedTarget)}},{key:"groupFromTarget",value:function(s){var a=s.center?s.center.y:s.clientY,o=this.groupIds;o.length<=0&&this.groupsData&&(o=this.groupsData.getIds({order:this.options.groupOrder}));for(var l=0;l<o.length;l++){var u=o[l],c=this.groups[u],d=c.dom.foreground,f=d.getBoundingClientRect();if(a>=f.top&&a<f.top+d.offsetHeight)return c;if(this.options.orientation.item==="top"){if(l===this.groupIds.length-1&&a>f.top)return c}else if(l===0&&a<f.top+d.offset)return c}return null}},{key:"_cloneItemData",value:function(s,a){var o=C.extend({},s);return a||(a=this.itemsData.type),o.start!=null&&(o.start=C.convert(o.start,a&&a.start||"Date")),o.end!=null&&(o.end=C.convert(o.end,a&&a.end||"Date")),o}},{key:"_clusterItems",value:function(){if(this.options.cluster){var s=this.body.range.conversion(this.body.domProps.center.width),a=s.scale,o=this.clusterGenerator.getClusters(this.clusters,a,this.options.cluster);if(this.clusters!=o){if(this._detachAllClusters(),o){var l=ks(o),u;try{for(l.s();!(u=l.n()).done;){var c=u.value;c.attach()}}catch(d){l.e(d)}finally{l.f()}this.clusters=o}this._updateClusters(o)}}}},{key:"_detachAllClusters",value:function(){if(this.options.cluster&&this.clusters&&this.clusters.length){var s=ks(this.clusters),a;try{for(s.s();!(a=s.n()).done;){var o=a.value;o.detach()}}catch(l){s.e(l)}finally{s.f()}}}},{key:"_updateClusters",value:function(s){if(this.clusters&&this.clusters.length){var a,o=new Jn(He(s).call(s,function(S){return S.id})),l=oe(a=this.clusters).call(a,function(S){return!o.has(S.id)}),u=!1,c=ks(l),d;try{for(c.s();!(d=c.n()).done;){var f,p=d.value,v=Ze(f=this.selection).call(f,p.id);if(v!==-1){var y;p.unselect(),cr(y=this.selection).call(y,v,1),u=!0}}}catch(S){c.e(S)}finally{c.f()}if(u){var _=this.getSelection();this.body.emitter.emit("select",{items:_,event})}}this.clusters=s||[]}}],[{key:"_getItemRange",value:function(s){var a=null,o=null;return K(s).call(s,function(l){(o==null||l.start<o)&&(o=l.start),l.end!=null?(a==null||l.end>a)&&(a=l.end):(a==null||l.start>a)&&(a=l.start)}),{min:o,max:a}}},{key:"itemSetFromTarget",value:function(s){for(var a=s.target;a;){if(a.hasOwnProperty("vis-itemset"))return a["vis-itemset"];a=a.parentNode}return null}}]),e}(bn);Ru.types={background:os,box:L1,range:rs,point:R1};Ru.prototype._onAdd=Ru.prototype._onUpdate;du=!1,ph="background: #FFeeee; color: #dd0000",G1=function(){function t(){Pe(this,t)}return Ie(t,null,[{key:"validate",value:function(e,r,s){du=!1,Nx=r;var a=r;return s!==void 0&&(a=r[s]),t.parse(e,a,[]),du}},{key:"parse",value:function(e,r,s){for(var a in e)e.hasOwnProperty(a)&&t.check(a,e,r,s)}},{key:"check",value:function(e,r,s,a){if(s[e]===void 0&&s.__any__===void 0){t.getSuggestion(e,s,a);return}var o=e,l=!0;s[e]===void 0&&s.__any__!==void 0&&(o="__any__",l=t.getType(r[e])==="object");var u=s[o];l&&u.__type__!==void 0&&(u=u.__type__),t.checkFields(e,r,s,o,u,a)}},{key:"checkFields",value:function(e,r,s,a,o,l){var u=function(p){console.log("%c"+p+t.printLocation(l,e),ph)},c=t.getType(r[e]),d=o[c];d!==void 0?t.getType(d)==="array"&&Ze(d).call(d,r[e])===-1?(u('Invalid option detected in "'+e+'". Allowed values are:'+t.print(d)+' not "'+r[e]+'". '),du=!0):c==="object"&&a!=="__any__"&&(l=C.copyAndExtendArray(l,e),t.parse(r[e],s[a],l)):o.any===void 0&&(u('Invalid type received for "'+e+'". Expected: '+t.print(kt(o))+". Received ["+c+'] "'+r[e]+'"'),du=!0)}},{key:"getType",value:function(e){var r=de(e);return r==="object"?e===null?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":pe(e)?"array":e instanceof Date?"date":e.nodeType!==void 0?"dom":e._isAMomentObject===!0?"moment":"object":r==="number"?"number":r==="boolean"?"boolean":r==="string"?"string":r===void 0?"undefined":r}},{key:"getSuggestion",value:function(e,r,s){var a=t.findInOptions(e,r,s,!1),o=t.findInOptions(e,Nx,[],!0),l=8,u=4,c;a.indexMatch!==void 0?c=" in "+t.printLocation(a.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+a.indexMatch+`"?

`:o.distance<=u&&a.distance>o.distance?c=" in "+t.printLocation(a.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+t.printLocation(o.path,o.closestMatch,""):a.distance<=l?c='. Did you mean "'+a.closestMatch+'"?'+t.printLocation(a.path,e):c=". Did you mean one of these: "+t.print(kt(r))+t.printLocation(s,e),console.log('%cUnknown option detected: "'+e+'"'+c,ph),du=!0}},{key:"findInOptions",value:function(e,r,s){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=1e9,l="",u=[],c=e.toLowerCase(),d=void 0;for(var f in r){var p=void 0;if(r[f].__type__!==void 0&&a===!0){var v=t.findInOptions(e,r[f],C.copyAndExtendArray(s,f));o>v.distance&&(l=v.closestMatch,u=v.path,o=v.distance,d=v.indexMatch)}else{var y;Ze(y=f.toLowerCase()).call(y,c)!==-1&&(d=f),p=t.levenshteinDistance(e,f),o>p&&(l=f,u=C.copyArray(s),o=p)}}return{closestMatch:l,path:u,distance:o,indexMatch:d}}},{key:"printLocation",value:function(e,r){for(var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`,a=`

`+s+`options = {
`,o=0;o<e.length;o++){for(var l=0;l<o+1;l++)a+="  ";a+=e[o]+`: {
`}for(var u=0;u<e.length+1;u++)a+="  ";a+=r+`
`;for(var c=0;c<e.length+1;c++){for(var d=0;d<e.length-c;d++)a+="  ";a+=`}
`}return a+`

`}},{key:"print",value:function(e){return br(e).replace(/(\")|(\[)|(\])|(,"__type__")/g,"").replace(/(\,)/g,", ")}},{key:"levenshteinDistance",value:function(e,r){if(e.length===0)return r.length;if(r.length===0)return e.length;var s=[],a;for(a=0;a<=r.length;a++)s[a]=[a];var o;for(o=0;o<=e.length;o++)s[0][o]=o;for(a=1;a<=r.length;a++)for(o=1;o<=e.length;o++)r.charAt(a-1)==e.charAt(o-1)?s[a][o]=s[a-1][o-1]:s[a][o]=Math.min(s[a-1][o-1]+1,Math.min(s[a][o-1]+1,s[a-1][o]+1));return s[r.length][e.length]}}]),t}(),ge="string",ve="boolean",tt="number",Ax="array",Xa="date",yt="object",lee="dom",Ka="moment",Lx="any",uee={configure:{enabled:{boolean:ve},filter:{boolean:ve,function:"function"},container:{dom:lee},__type__:{object:yt,boolean:ve,function:"function"}},align:{string:ge},alignCurrentTime:{string:ge,undefined:"undefined"},rtl:{boolean:ve,undefined:"undefined"},rollingMode:{follow:{boolean:ve},offset:{number:tt,undefined:"undefined"},__type__:{object:yt}},onTimeout:{timeoutMs:{number:tt},callback:{function:"function"},__type__:{object:yt}},verticalScroll:{boolean:ve,undefined:"undefined"},horizontalScroll:{boolean:ve,undefined:"undefined"},autoResize:{boolean:ve},throttleRedraw:{number:tt},clickToUse:{boolean:ve},dataAttributes:{string:ge,array:Ax},editable:{add:{boolean:ve,undefined:"undefined"},remove:{boolean:ve,undefined:"undefined"},updateGroup:{boolean:ve,undefined:"undefined"},updateTime:{boolean:ve,undefined:"undefined"},overrideItems:{boolean:ve,undefined:"undefined"},__type__:{boolean:ve,object:yt}},end:{number:tt,date:Xa,string:ge,moment:Ka},format:{minorLabels:{millisecond:{string:ge,undefined:"undefined"},second:{string:ge,undefined:"undefined"},minute:{string:ge,undefined:"undefined"},hour:{string:ge,undefined:"undefined"},weekday:{string:ge,undefined:"undefined"},day:{string:ge,undefined:"undefined"},week:{string:ge,undefined:"undefined"},month:{string:ge,undefined:"undefined"},year:{string:ge,undefined:"undefined"},__type__:{object:yt,function:"function"}},majorLabels:{millisecond:{string:ge,undefined:"undefined"},second:{string:ge,undefined:"undefined"},minute:{string:ge,undefined:"undefined"},hour:{string:ge,undefined:"undefined"},weekday:{string:ge,undefined:"undefined"},day:{string:ge,undefined:"undefined"},week:{string:ge,undefined:"undefined"},month:{string:ge,undefined:"undefined"},year:{string:ge,undefined:"undefined"},__type__:{object:yt,function:"function"}},__type__:{object:yt}},moment:{function:"function"},groupHeightMode:{string:ge},groupOrder:{string:ge,function:"function"},groupEditable:{add:{boolean:ve,undefined:"undefined"},remove:{boolean:ve,undefined:"undefined"},order:{boolean:ve,undefined:"undefined"},__type__:{boolean:ve,object:yt}},groupOrderSwap:{function:"function"},height:{string:ge,number:tt},hiddenDates:{start:{date:Xa,number:tt,string:ge,moment:Ka},end:{date:Xa,number:tt,string:ge,moment:Ka},repeat:{string:ge},__type__:{object:yt,array:Ax}},itemsAlwaysDraggable:{item:{boolean:ve,undefined:"undefined"},range:{boolean:ve,undefined:"undefined"},__type__:{boolean:ve,object:yt}},limitSize:{boolean:ve},locale:{string:ge},locales:{__any__:{any:Lx},__type__:{object:yt}},longSelectPressTime:{number:tt},margin:{axis:{number:tt},item:{horizontal:{number:tt,undefined:"undefined"},vertical:{number:tt,undefined:"undefined"},__type__:{object:yt,number:tt}},__type__:{object:yt,number:tt}},max:{date:Xa,number:tt,string:ge,moment:Ka},maxHeight:{number:tt,string:ge},maxMinorChars:{number:tt},min:{date:Xa,number:tt,string:ge,moment:Ka},minHeight:{number:tt,string:ge},moveable:{boolean:ve},multiselect:{boolean:ve},multiselectPerGroup:{boolean:ve},onAdd:{function:"function"},onDropObjectOnItem:{function:"function"},onUpdate:{function:"function"},onMove:{function:"function"},onMoving:{function:"function"},onRemove:{function:"function"},onAddGroup:{function:"function"},onMoveGroup:{function:"function"},onRemoveGroup:{function:"function"},onInitialDrawComplete:{function:"function"},order:{function:"function"},orientation:{axis:{string:ge,undefined:"undefined"},item:{string:ge,undefined:"undefined"},__type__:{string:ge,object:yt}},selectable:{boolean:ve},sequentialSelection:{boolean:ve},showCurrentTime:{boolean:ve},showMajorLabels:{boolean:ve},showMinorLabels:{boolean:ve},showWeekScale:{boolean:ve},stack:{boolean:ve},stackSubgroups:{boolean:ve},cluster:{maxItems:{number:tt,undefined:"undefined"},titleTemplate:{string:ge,undefined:"undefined"},clusterCriteria:{function:"function",undefined:"undefined"},showStipes:{boolean:ve,undefined:"undefined"},fitOnDoubleClick:{boolean:ve,undefined:"undefined"},__type__:{boolean:ve,object:yt}},snap:{function:"function",null:"null"},start:{date:Xa,number:tt,string:ge,moment:Ka},template:{function:"function"},loadingScreenTemplate:{function:"function"},groupTemplate:{function:"function"},visibleFrameTemplate:{string:ge,function:"function"},showTooltips:{boolean:ve},tooltip:{followMouse:{boolean:ve},overflowMethod:{string:["cap","flip","none"]},delay:{number:tt},template:{function:"function"},__type__:{object:yt}},tooltipOnItemUpdateTime:{template:{function:"function"},__type__:{boolean:ve,object:yt}},timeAxis:{scale:{string:ge,undefined:"undefined"},step:{number:tt,undefined:"undefined"},__type__:{object:yt}},type:{string:ge},width:{string:ge,number:tt},preferZoom:{boolean:ve},zoomable:{boolean:ve},zoomKey:{string:["ctrlKey","altKey","shiftKey","metaKey",""]},zoomFriction:{number:tt},zoomMax:{number:tt},zoomMin:{number:tt},xss:{disabled:{boolean:ve},filterOptions:{__any__:{any:Lx},__type__:{object:yt}},__type__:{object:yt}},__type__:{object:yt}},cee={global:{align:["center","left","right"],alignCurrentTime:["none","year","month","quarter","week","isoWeek","day","date","hour","minute","second"],direction:!1,autoResize:!0,clickToUse:!1,editable:{add:!1,remove:!1,updateGroup:!1,updateTime:!1},end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}},groupHeightMode:["auto","fixed","fitItems"],groupsDraggable:!1,height:"",locale:"",longSelectPressTime:251,margin:{axis:[20,0,100,1],item:{horizontal:[10,0,100,1],vertical:[10,0,100,1]}},max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!1,multiselect:!1,multiselectPerGroup:!1,orientation:{axis:["both","bottom","top"],item:["bottom","top"]},preferZoom:!1,selectable:!0,showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,stack:!0,stackSubgroups:!0,cluster:!1,start:"",showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip",delay:[500,0,99999,100]},tooltipOnItemUpdateTime:!1,type:["box","point","range","background"],width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","shiftKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],xss:{disabled:!1}}},dee={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"},hee=function(){function t(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;Pe(this,t),this.pixelRatio=n,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}return Ie(t,[{key:"insertTo",value:function(e){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(e){if(typeof e=="function")this.updateCallback=e;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}},{key:"setCloseCallback",value:function(e){if(typeof e=="function")this.closeCallback=e;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}},{key:"_isColorString",value:function(e){if(typeof e=="string")return dee[e]}},{key:"setColor",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e!=="none"){var s,a=this._isColorString(e);if(a!==void 0&&(e=a),C.isString(e)===!0){if(C.isValidRGB(e)===!0){var o=e.substr(4).substr(0,e.length-5).split(",");s={r:o[0],g:o[1],b:o[2],a:1}}else if(C.isValidRGBA(e)===!0){var l=e.substr(5).substr(0,e.length-6).split(",");s={r:l[0],g:l[1],b:l[2],a:l[3]}}else if(C.isValidHex(e)===!0){var u=C.hexToRGB(e);s={r:u.r,g:u.g,b:u.b,a:1}}}else if(e instanceof Object&&e.r!==void 0&&e.g!==void 0&&e.b!==void 0){var c=e.a!==void 0?e.a:"1.0";s={r:e.r,g:e.g,b:e.b,a:c}}if(s===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+br(e));this._setColor(s,r)}}},{key:"show",value:function(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var e=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;r===!0&&(this.previousColor=C.extend({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",nr(function(){e.closeCallback!==void 0&&(e.closeCallback(),e.closeCallback=void 0)},0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;r===!0&&(this.initialColor=C.extend({},e)),this.color=e;var s=C.RGBToHSV(e.r,e.g,e.b),a=2*Math.PI,o=this.r*s.s,l=this.centerCoordinates.x+o*Math.sin(a*s.h),u=this.centerCoordinates.y+o*Math.cos(a*s.h);this.colorPickerSelector.style.left=l-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=u-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}},{key:"_setOpacity",value:function(e){this.color.a=e/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(e){var r=C.RGBToHSV(this.color.r,this.color.g,this.color.b);r.v=e/100;var s=C.HSVToRGB(r.h,r.s,r.v);s.a=this.color.a,this.color=s,this._updatePicker()}},{key:"_updatePicker",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color,r=C.RGBToHSV(e.r,e.g,e.b),s=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(s.webkitBackingStorePixelRatio||s.mozBackingStorePixelRatio||s.msBackingStorePixelRatio||s.oBackingStorePixelRatio||s.backingStorePixelRatio||1)),s.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var a=this.colorPickerCanvas.clientWidth,o=this.colorPickerCanvas.clientHeight;s.clearRect(0,0,a,o),s.putImageData(this.hueCircle,0,0),s.fillStyle="rgba(0,0,0,"+(1-r.v)+")",s.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),nk(s).call(s),this.brightnessRange.value=100*r.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){var e,r,s,a;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var l=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(l.webkitBackingStorePixelRatio||l.mozBackingStorePixelRatio||l.msBackingStorePixelRatio||l.oBackingStorePixelRatio||l.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerHTML="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch(c){}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch(c){}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var u=this;this.opacityRange.onchange=function(){u._setOpacity(this.value)},this.opacityRange.oninput=function(){u._setOpacity(this.value)},this.brightnessRange.onchange=function(){u._setBrightness(this.value)},this.brightnessRange.oninput=function(){u._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerHTML="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerHTML="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerHTML="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerHTML="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerHTML="cancel",this.cancelButton.onclick=R(e=this._hide).call(e,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerHTML="apply",this.applyButton.onclick=R(r=this._apply).call(r,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerHTML="save",this.saveButton.onclick=R(s=this._save).call(s,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerHTML="load last",this.loadButton.onclick=R(a=this._loadLast).call(a,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var e=this;this.drag={},this.pinch={},this.hammer=new rr(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),y1(this.hammer,function(r){e._moveSelector(r)}),this.hammer.on("tap",function(r){e._moveSelector(r)}),this.hammer.on("panstart",function(r){e._moveSelector(r)}),this.hammer.on("panmove",function(r){e._moveSelector(r)}),this.hammer.on("panend",function(r){e._moveSelector(r)})}},{key:"_generateHueCircle",value:function(){if(this.generated===!1){var e=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var r=this.colorPickerCanvas.clientWidth,s=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,r,s);var a,o,l,u;this.centerCoordinates={x:r*.5,y:s*.5},this.r=.49*r;var c=2*Math.PI/360,d=1/360,f=1/this.r,p;for(l=0;l<360;l++)for(u=0;u<this.r;u++)a=this.centerCoordinates.x+u*Math.sin(c*l),o=this.centerCoordinates.y+u*Math.cos(c*l),p=C.HSVToRGB(l*d,u*f,1),e.fillStyle="rgb("+p.r+","+p.g+","+p.b+")",e.fillRect(a-.5,o-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,r,s)}this.generated=!0}},{key:"_moveSelector",value:function(e){var r=this.colorPickerDiv.getBoundingClientRect(),s=e.center.x-r.left,a=e.center.y-r.top,o=.5*this.colorPickerDiv.clientHeight,l=.5*this.colorPickerDiv.clientWidth,u=s-l,c=a-o,d=Math.atan2(u,c),f=.98*Math.min(Math.sqrt(u*u+c*c),l),p=Math.cos(d)*f+o,v=Math.sin(d)*f+l;this.colorPickerSelector.style.top=p-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=v-.5*this.colorPickerSelector.clientWidth+"px";var y=d/(2*Math.PI);y=y<0?y+1:y;var _=f/this.r,S=C.RGBToHSV(this.color.r,this.color.g,this.color.b);S.h=y,S.s=_;var x=C.HSVToRGB(S.h,S.s,S.v);x.a=this.color.a,this.color=x,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),t}(),fee=`div.vis-configuration {
    position:relative;
    display:block;
    float:left;
    font-size:12px;
}

div.vis-configuration-wrapper {
    display:block;
    width:700px;
}

div.vis-configuration-wrapper::after {
  clear: both;
  content: "";
  display: block;
}

div.vis-configuration.vis-config-option-container{
    display:block;
    width:495px;
    background-color: #ffffff;
    border:2px solid #f7f8fa;
    border-radius:4px;
    margin-top:20px;
    left:10px;
    padding-left:5px;
}

div.vis-configuration.vis-config-button{
    display:block;
    width:495px;
    height:25px;
    vertical-align: middle;
    line-height:25px;
    background-color: #f7f8fa;
    border:2px solid #ceced0;
    border-radius:4px;
    margin-top:20px;
    left:10px;
    padding-left:5px;
    cursor: pointer;
    margin-bottom:30px;
}

div.vis-configuration.vis-config-button.hover{
    background-color: #4588e6;
    border:2px solid #214373;
    color:#ffffff;
}

div.vis-configuration.vis-config-item{
    display:block;
    float:left;
    width:495px;
    height:25px;
    vertical-align: middle;
    line-height:25px;
}


div.vis-configuration.vis-config-item.vis-config-s2{
    left:10px;
    background-color: #f7f8fa;
    padding-left:5px;
    border-radius:3px;
}
div.vis-configuration.vis-config-item.vis-config-s3{
    left:20px;
    background-color: #e4e9f0;
    padding-left:5px;
    border-radius:3px;
}
div.vis-configuration.vis-config-item.vis-config-s4{
    left:30px;
    background-color: #cfd8e6;
    padding-left:5px;
    border-radius:3px;
}

div.vis-configuration.vis-config-header{
    font-size:18px;
    font-weight: bold;
}

div.vis-configuration.vis-config-label{
    width:120px;
    height:25px;
    line-height: 25px;
}

div.vis-configuration.vis-config-label.vis-config-s3{
    width:110px;
}
div.vis-configuration.vis-config-label.vis-config-s4{
    width:100px;
}

div.vis-configuration.vis-config-colorBlock{
    top:1px;
    width:30px;
    height:19px;
    border:1px solid #444444;
    border-radius:2px;
    padding:0px;
    margin:0px;
    cursor:pointer;
}

input.vis-configuration.vis-config-checkbox {
    left:-5px;
}


input.vis-configuration.vis-config-rangeinput{
    position:relative;
    top:-5px;
    width:60px;
    /*height:13px;*/
    padding:1px;
    margin:0;
    pointer-events:none;
}

input.vis-configuration.vis-config-range{
    /*removes default webkit styles*/
    -webkit-appearance: none;

    /*fix for FF unable to apply focus style bug */
    border: 0px solid white;
    background-color:rgba(0,0,0,0);

    /*required for proper track sizing in FF*/
    width: 300px;
    height:20px;
}
input.vis-configuration.vis-config-range::-webkit-slider-runnable-track {
    width: 300px;
    height: 5px;
    background: #dedede; /* Old browsers */
    background: -moz-linear-gradient(top,  #dedede 0%, #c8c8c8 99%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#dedede), color-stop(99%,#c8c8c8)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #dedede 0%,#c8c8c8 99%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #dedede 0%, #c8c8c8 99%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #dedede 0%,#c8c8c8 99%); /* IE10+ */
    background: linear-gradient(to bottom,  #dedede 0%,#c8c8c8 99%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#dedede', endColorstr='#c8c8c8',GradientType=0 ); /* IE6-9 */

    border: 1px solid #999999;
    box-shadow: #aaaaaa 0px 0px 3px 0px;
    border-radius: 3px;
}
input.vis-configuration.vis-config-range::-webkit-slider-thumb {
    -webkit-appearance: none;
    border: 1px solid #14334b;
    height: 17px;
    width: 17px;
    border-radius: 50%;
    background: #3876c2; /* Old browsers */
    background: -moz-linear-gradient(top,  #3876c2 0%, #385380 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#3876c2), color-stop(100%,#385380)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #3876c2 0%,#385380 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #3876c2 0%,#385380 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #3876c2 0%,#385380 100%); /* IE10+ */
    background: linear-gradient(to bottom,  #3876c2 0%,#385380 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#3876c2', endColorstr='#385380',GradientType=0 ); /* IE6-9 */
    box-shadow: #111927 0px 0px 1px 0px;
    margin-top: -7px;
}
input.vis-configuration.vis-config-range:focus {
    outline: none;
}
input.vis-configuration.vis-config-range:focus::-webkit-slider-runnable-track {
    background: #9d9d9d; /* Old browsers */
    background: -moz-linear-gradient(top, #9d9d9d 0%, #c8c8c8 99%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#9d9d9d), color-stop(99%,#c8c8c8)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #9d9d9d 0%,#c8c8c8 99%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #9d9d9d 0%,#c8c8c8 99%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #9d9d9d 0%,#c8c8c8 99%); /* IE10+ */
    background: linear-gradient(to bottom,  #9d9d9d 0%,#c8c8c8 99%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#9d9d9d', endColorstr='#c8c8c8',GradientType=0 ); /* IE6-9 */
}

input.vis-configuration.vis-config-range::-moz-range-track {
    width: 300px;
    height: 10px;
    background: #dedede; /* Old browsers */
    background: -moz-linear-gradient(top,  #dedede 0%, #c8c8c8 99%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#dedede), color-stop(99%,#c8c8c8)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #dedede 0%,#c8c8c8 99%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #dedede 0%, #c8c8c8 99%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #dedede 0%,#c8c8c8 99%); /* IE10+ */
    background: linear-gradient(to bottom,  #dedede 0%,#c8c8c8 99%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#dedede', endColorstr='#c8c8c8',GradientType=0 ); /* IE6-9 */

    border: 1px solid #999999;
    box-shadow: #aaaaaa 0px 0px 3px 0px;
    border-radius: 3px;
}
input.vis-configuration.vis-config-range::-moz-range-thumb {
    border: none;
    height: 16px;
    width: 16px;

    border-radius: 50%;
    background:  #385380;
}

/*hide the outline behind the border*/
input.vis-configuration.vis-config-range:-moz-focusring{
    outline: 1px solid white;
    outline-offset: -1px;
}

input.vis-configuration.vis-config-range::-ms-track {
    width: 300px;
    height: 5px;

    /*remove bg colour from the track, we'll use ms-fill-lower and ms-fill-upper instead */
    background: transparent;

    /*leave room for the larger thumb to overflow with a transparent border */
    border-color: transparent;
    border-width: 6px 0;

    /*remove default tick marks*/
    color: transparent;
}
input.vis-configuration.vis-config-range::-ms-fill-lower {
    background: #777;
    border-radius: 10px;
}
input.vis-configuration.vis-config-range::-ms-fill-upper {
    background: #ddd;
    border-radius: 10px;
}
input.vis-configuration.vis-config-range::-ms-thumb {
    border: none;
    height: 16px;
    width: 16px;
    border-radius: 50%;
    background:  #385380;
}
input.vis-configuration.vis-config-range:focus::-ms-fill-lower {
    background: #888;
}
input.vis-configuration.vis-config-range:focus::-ms-fill-upper {
    background: #ccc;
}

.vis-configuration-popup {
    position: absolute;
    background: rgba(57, 76, 89, 0.85);
    border: 2px solid #f2faff;
    line-height:30px;
    height:30px;
    width:150px;
    text-align:center;
    color: #ffffff;
    font-size:14px;
    border-radius:4px;
    -webkit-transition: opacity 0.3s ease-in-out;
    -moz-transition: opacity 0.3s ease-in-out;
    transition: opacity 0.3s ease-in-out;
}
.vis-configuration-popup:after, .vis-configuration-popup:before {
    left: 100%;
    top: 50%;
    border: solid transparent;
    content: " ";
    height: 0;
    width: 0;
    position: absolute;
    pointer-events: none;
}

.vis-configuration-popup:after {
    border-color: rgba(136, 183, 213, 0);
    border-left-color: rgba(57, 76, 89, 0.85);
    border-width: 8px;
    margin-top: -8px;
}
.vis-configuration-popup:before {
    border-color: rgba(194, 225, 245, 0);
    border-left-color: #f2faff;
    border-width: 12px;
    margin-top: -12px;
}`;pr(fee);H1=function(){function t(n,e,r){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;Pe(this,t),this.parent=n,this.changedOptions=[],this.container=e,this.allowCreation=!1,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},C.extend(this.options,this.defaultOptions),this.configureOptions=r,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new hee(s),this.wrapper=void 0}return Ie(t,[{key:"setOptions",value:function(e){if(e!==void 0){this.popupHistory={},this._removePopup();var r=!0;if(typeof e=="string")this.options.filter=e;else if(pe(e))this.options.filter=e.join();else if(de(e)==="object"){if(e==null)throw new TypeError("options cannot be null");e.container!==void 0&&(this.options.container=e.container),oe(e)!==void 0&&(this.options.filter=oe(e)),e.showButton!==void 0&&(this.options.showButton=e.showButton),e.enabled!==void 0&&(r=e.enabled)}else typeof e=="boolean"?(this.options.filter=!0,r=e):typeof e=="function"&&(this.options.filter=e,r=!0);oe(this.options)===!1&&(r=!1),this.options.enabled=r}this._clean()}},{key:"setModuleOptions",value:function(e){this.moduleOptions=e,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){this._clean(),this.changedOptions=[];var e=oe(this.options),r=0,s=!1;for(var a in this.configureOptions)this.configureOptions.hasOwnProperty(a)&&(this.allowCreation=!1,s=!1,typeof e=="function"?(s=e(a,[]),s=s||this._handleObject(this.configureOptions[a],[a],!0)):(e===!0||Ze(e).call(e,a)!==-1)&&(s=!0),s!==!1&&(this.allowCreation=!0,r>0&&this._makeItem([]),this._makeHeader(a),this._handleObject(this.configureOptions[a],[a])),r++);this._makeButton(),this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(e){for(var r=this.moduleOptions,s=0;s<e.length;s++)if(r[e[s]]!==void 0)r=r[e[s]];else{r=void 0;break}return r}},{key:"_makeItem",value:function(e){if(this.allowCreation===!0){var r=document.createElement("div");r.className="vis-configuration vis-config-item vis-config-s"+e.length;for(var s=arguments.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];return K(a).call(a,function(l){r.appendChild(l)}),this.domElements.push(r),this.domElements.length}return 0}},{key:"_makeHeader",value:function(e){var r=document.createElement("div");r.className="vis-configuration vis-config-header",r.innerHTML=C.xss(e),this._makeItem([],r)}},{key:"_makeLabel",value:function(e,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=document.createElement("div");return a.className="vis-configuration vis-config-label vis-config-s"+r.length,s===!0?a.innerHTML=C.xss("<i><b>"+e+":</b></i>"):a.innerHTML=C.xss(e+":"),a}},{key:"_makeDropdown",value:function(e,r,s){var a=document.createElement("select");a.className="vis-configuration vis-config-select";var o=0;r!==void 0&&Ze(e).call(e,r)!==-1&&(o=Ze(e).call(e,r));for(var l=0;l<e.length;l++){var u=document.createElement("option");u.value=e[l],l===o&&(u.selected="selected"),u.innerHTML=e[l],a.appendChild(u)}var c=this;a.onchange=function(){c._update(this.value,s)};var d=this._makeLabel(s[s.length-1],s);this._makeItem(s,d,a)}},{key:"_makeRange",value:function(e,r,s){var a=e[0],o=e[1],l=e[2],u=e[3],c=document.createElement("input");c.className="vis-configuration vis-config-range";try{c.type="range",c.min=o,c.max=l}catch(x){}c.step=u;var d="",f=0;if(r!==void 0){var p=1.2;r<0&&r*p<o?(c.min=Math.ceil(r*p),f=c.min,d="range increased"):r/p<o&&(c.min=Math.ceil(r/p),f=c.min,d="range increased"),r*p>l&&l!==1&&(c.max=Math.ceil(r*p),f=c.max,d="range increased"),c.value=r}else c.value=a;var v=document.createElement("input");v.className="vis-configuration vis-config-rangeinput",v.value=Number(c.value);var y=this;c.onchange=function(){v.value=this.value,y._update(Number(this.value),s)},c.oninput=function(){v.value=this.value};var _=this._makeLabel(s[s.length-1],s),S=this._makeItem(s,_,c,v);d!==""&&this.popupHistory[S]!==f&&(this.popupHistory[S]=f,this._setupPopup(d,S))}},{key:"_makeButton",value:function(){var e=this;if(this.options.showButton===!0){var r=document.createElement("div");r.className="vis-configuration vis-config-button",r.innerHTML="generate options",r.onclick=function(){e._printOptions()},r.onmouseover=function(){r.className="vis-configuration vis-config-button hover"},r.onmouseout=function(){r.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(r)}}},{key:"_setupPopup",value:function(e,r){var s=this;if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){var a=document.createElement("div");a.id="vis-configuration-popup",a.className="vis-configuration-popup",a.innerHTML=C.xss(e),a.onclick=function(){s._removePopup()},this.popupCounter+=1,this.popupDiv={html:a,index:r}}}},{key:"_removePopup",value:function(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var e=this;if(this.popupDiv.html!==void 0){var r=this.domElements[this.popupDiv.index],s=r.getBoundingClientRect();this.popupDiv.html.style.left=s.left+"px",this.popupDiv.html.style.top=s.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=nr(function(){e.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=nr(function(){e._removePopup()},1800)}}},{key:"_makeCheckbox",value:function(e,r,s){var a=document.createElement("input");a.type="checkbox",a.className="vis-configuration vis-config-checkbox",a.checked=e,r!==void 0&&(a.checked=r,r!==e&&(de(e)==="object"?r!==e.enabled&&this.changedOptions.push({path:s,value:r}):this.changedOptions.push({path:s,value:r})));var o=this;a.onchange=function(){o._update(this.checked,s)};var l=this._makeLabel(s[s.length-1],s);this._makeItem(s,l,a)}},{key:"_makeTextInput",value:function(e,r,s){var a=document.createElement("input");a.type="text",a.className="vis-configuration vis-config-text",a.value=r,r!==e&&this.changedOptions.push({path:s,value:r});var o=this;a.onchange=function(){o._update(this.value,s)};var l=this._makeLabel(s[s.length-1],s);this._makeItem(s,l,a)}},{key:"_makeColorField",value:function(e,r,s){var a=this,o=e[1],l=document.createElement("div");r=r===void 0?o:r,r!=="none"?(l.className="vis-configuration vis-config-colorBlock",l.style.backgroundColor=r):l.className="vis-configuration vis-config-colorBlock none",r=r===void 0?o:r,l.onclick=function(){a._showColorPicker(r,l,s)};var u=this._makeLabel(s[s.length-1],s);this._makeItem(s,u,l)}},{key:"_showColorPicker",value:function(e,r,s){var a=this;r.onclick=function(){},this.colorPicker.insertTo(r),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(function(o){var l="rgba("+o.r+","+o.g+","+o.b+","+o.a+")";r.style.backgroundColor=l,a._update(l,s)}),this.colorPicker.setCloseCallback(function(){r.onclick=function(){a._showColorPicker(e,r,s)}})}},{key:"_handleObject",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=!1,o=oe(this.options),l=!1;for(var u in e)if(e.hasOwnProperty(u)){a=!0;var c=e[u],d=C.copyAndExtendArray(r,u);if(typeof o=="function"&&(a=o(u,r),a===!1&&!pe(c)&&typeof c!="string"&&typeof c!="boolean"&&c instanceof Object&&(this.allowCreation=!1,a=this._handleObject(c,d,!0),this.allowCreation=s===!1)),a!==!1){l=!0;var f=this._getValue(d);if(pe(c))this._handleArray(c,f,d);else if(typeof c=="string")this._makeTextInput(c,f,d);else if(typeof c=="boolean")this._makeCheckbox(c,f,d);else if(c instanceof Object){var p=!0;if(Ze(r).call(r,"physics")!==-1&&this.moduleOptions.physics.solver!==u&&(p=!1),p===!0)if(c.enabled!==void 0){var v=C.copyAndExtendArray(d,"enabled"),y=this._getValue(v);if(y===!0){var _=this._makeLabel(u,d,!0);this._makeItem(d,_),l=this._handleObject(c,d)||l}else this._makeCheckbox(c,y,d)}else{var S=this._makeLabel(u,d,!0);this._makeItem(d,S),l=this._handleObject(c,d)||l}}else console.error("dont know how to handle",c,u,d)}}return l}},{key:"_handleArray",value:function(e,r,s){typeof e[0]=="string"&&e[0]==="color"?(this._makeColorField(e,r,s),e[1]!==r&&this.changedOptions.push({path:s,value:r})):typeof e[0]=="string"?(this._makeDropdown(e,r,s),e[0]!==r&&this.changedOptions.push({path:s,value:r})):typeof e[0]=="number"&&(this._makeRange(e,r,s),e[0]!==r&&this.changedOptions.push({path:s,value:Number(r)}))}},{key:"_update",value:function(e,r){var s=this._constructOptions(e,r);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",s),this.initialized=!0,this.parent.setOptions(s)}},{key:"_constructOptions",value:function(e,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=s;e=e==="true"?!0:e,e=e==="false"?!1:e;for(var o=0;o<r.length;o++)r[o]!=="global"&&(a[r[o]]===void 0&&(a[r[o]]={}),o!==r.length-1?a=a[r[o]]:a[r[o]]=e);return s}},{key:"_printOptions",value:function(){var e=this.getOptions();this.optionsContainer.innerHTML="<pre>var options = "+br(e,null,2)+"</pre>"}},{key:"getOptions",value:function(){for(var e={},r=0;r<this.changedOptions.length;r++)this._constructOptions(this.changedOptions[r].value,this.changedOptions[r].path,e);return e}}]),t}();vee=function(t){fr(e,t);var n=pee(e);function e(r,s,a,o){var l,u,c,d,f,p,v,y;if(Pe(this,e),y=n.call(this),y.initTime=new Date,y.itemsDone=!1,!(Ke(y)instanceof e))throw new SyntaxError("Constructor must be called with the new operator");if(!(pe(a)||mn(a))&&a instanceof Object){var _=o;o=a,a=_}o&&o.throttleRedraw&&console.warn('Timeline option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');var S=Ke(y);if(y.defaultOptions={autoResize:!0,longSelectPressTime:251,orientation:{axis:"bottom",item:"bottom"},moment:ir},y.options=C.deepExtend({},y.defaultOptions),o&&C.setupXSSProtection(o.xss),y._create(r),!o||o&&typeof o.rtl=="undefined"){y.dom.root.style.visibility="hidden";for(var x,D=y.dom.root;!x&&D;)x=window.getComputedStyle(D,null).direction,D=D.parentElement;y.options.rtl=x&&x.toLowerCase()=="rtl"}else y.options.rtl=o.rtl;o&&(o.rollingMode&&(y.options.rollingMode=o.rollingMode),o.onInitialDrawComplete&&(y.options.onInitialDrawComplete=o.onInitialDrawComplete),o.onTimeout&&(y.options.onTimeout=o.onTimeout),o.loadingScreenTemplate&&(y.options.loadingScreenTemplate=o.loadingScreenTemplate));var E=document.createElement("div");if(y.options.loadingScreenTemplate){var P,O=R(P=y.options.loadingScreenTemplate).call(P,Ke(y)),A=O(y.dom.loadingScreen);A instanceof Object&&!(A instanceof Element)?O(E):A instanceof Element?(E.innerHTML="",E.appendChild(A)):A!=null&&(E.innerHTML=C.xss(A))}y.dom.loadingScreen.appendChild(E),y.components=[],y.body={dom:y.dom,domProps:y.props,emitter:{on:R(l=y.on).call(l,Ke(y)),off:R(u=y.off).call(u,Ke(y)),emit:R(c=y.emit).call(c,Ke(y))},hiddenDates:[],util:{getScale:function(){return S.timeAxis.step.scale},getStep:function(){return S.timeAxis.step.step},toScreen:R(d=S._toScreen).call(d,S),toGlobalScreen:R(f=S._toGlobalScreen).call(f,S),toTime:R(p=S._toTime).call(p,S),toGlobalTime:R(v=S._toGlobalTime).call(v,S)}},y.range=new my(y.body,y.options),y.components.push(y.range),y.body.range=y.range,y.timeAxis=new Lu(y.body,y.options),y.timeAxis2=null,y.components.push(y.timeAxis),y.currentTime=new wy(y.body,y.options),y.components.push(y.currentTime),y.itemSet=new Ru(y.body,y.options),y.components.push(y.itemSet),y.itemsData=null,y.groupsData=null;function M(I,H){S.hasListeners(I)&&S.emit(I,S.getEventProperties(H))}return y.dom.root.onclick=function(I){M("click",I)},y.dom.root.ondblclick=function(I){M("doubleClick",I)},y.dom.root.oncontextmenu=function(I){M("contextmenu",I)},y.dom.root.onmouseover=function(I){M("mouseOver",I)},window.PointerEvent?(y.dom.root.onpointerdown=function(I){M("mouseDown",I)},y.dom.root.onpointermove=function(I){M("mouseMove",I)},y.dom.root.onpointerup=function(I){M("mouseUp",I)}):(y.dom.root.onmousemove=function(I){M("mouseMove",I)},y.dom.root.onmousedown=function(I){M("mouseDown",I)},y.dom.root.onmouseup=function(I){M("mouseUp",I)}),y.initialFitDone=!1,y.on("changed",function(){if(S.itemsData!=null){if(!S.initialFitDone&&!S.options.rollingMode)if(S.initialFitDone=!0,S.options.start!=null||S.options.end!=null){if(S.options.start==null||S.options.end==null)var I=S.getItemRange();var H=S.options.start!=null?S.options.start:I.min,z=S.options.end!=null?S.options.end:I.max;S.setWindow(H,z,{animation:!1})}else S.fit({animation:!1});!S.initialDrawDone&&(S.initialRangeChangeDone||!S.options.start&&!S.options.end||S.options.rollingMode)&&(S.initialDrawDone=!0,S.itemSet.initialDrawDone=!0,S.dom.root.style.visibility="visible",S.dom.loadingScreen.parentNode.removeChild(S.dom.loadingScreen),S.options.onInitialDrawComplete&&nr(function(){return S.options.onInitialDrawComplete()},0))}}),y.on("destroyTimeline",function(){S.destroy()}),o&&y.setOptions(o),y.body.emitter.on("fit",function(I){y._onFit(I),y.redraw()}),a&&y.setGroups(a),s&&y.setItems(s),y._redraw(),y}return Ie(e,[{key:"_createConfigurator",value:function(){return new H1(this,this.dom.container,cee)}},{key:"redraw",value:function(){this.itemSet&&this.itemSet.markDirty({refreshItems:!0}),this._redraw()}},{key:"setOptions",value:function(s){var a=G1.validate(s,uee);if(a===!0&&console.log("%cErrors have been found in the supplied options object.",ph),As.prototype.setOptions.call(this,s),"type"in s&&s.type!==this.options.type){this.options.type=s.type;var o=this.itemsData;if(o){var l=this.getSelection();this.setItems(null),this.setItems(o.rawDS),this.setSelection(l)}}}},{key:"setItems",value:function(s){this.itemsDone=!1;var a;s?mn(s)?a=go(s):a=go(new zs(s)):a=null,this.itemsData&&this.itemsData.dispose(),this.itemsData=a,this.itemSet&&this.itemSet.setItems(a!=null?a.rawDS:null)}},{key:"setGroups",value:function(s){var a,o=function(u){return u.visible!==!1};s?(pe(s)&&(s=new zs(s)),a=new qD(s,{filter:o})):a=null,this.groupsData!=null&&typeof this.groupsData.setData=="function"&&this.groupsData.setData(null),this.groupsData=a,this.itemSet.setGroups(a)}},{key:"setData",value:function(s){s&&s.groups&&this.setGroups(s.groups),s&&s.items&&this.setItems(s.items)}},{key:"setSelection",value:function(s,a){this.itemSet&&this.itemSet.setSelection(s),a&&a.focus&&this.focus(s,a)}},{key:"getSelection",value:function(){return this.itemSet&&this.itemSet.getSelection()||[]}},{key:"focus",value:function(s,a){if(!(!this.itemsData||s==null)){var o=pe(s)?s:[s],l=this.itemsData.get(o),u=null,c=null;if(K(l).call(l,function(O){var A=O.start.valueOf(),M="end"in O?O.end.valueOf():O.start.valueOf();(u===null||A<u)&&(u=A),(c===null||M>c)&&(c=M)}),u!==null&&c!==null){var d=this,f=this.itemSet.items[o[0]],p=this._getScrollTop()*-1,v=null,y=function(A,M,I){var H=Rx(d,f);if(H!==!1&&(v||(v=H),!(v.itemTop==H.itemTop&&!v.shouldScroll))){v.itemTop!=H.itemTop&&H.shouldScroll&&(v=H,p=d._getScrollTop()*-1);var z=p,U=v.scrollOffset,N=I?U:z+(U-z)*A;d._setScrollTop(-N),M||d._redraw()}},_=function(){var A=Rx(d,f);A.shouldScroll&&A.itemTop!=v.itemTop&&(d._setScrollTop(-A.scrollOffset),d._redraw())},S=function(){_(),nr(_,100)},x=a&&a.zoom!==void 0?a.zoom:!0,D=(u+c)/2,E=x?(c-u)*1.1:Math.max(this.range.end-this.range.start,(c-u)*1.1),P=a&&a.animation!==void 0?a.animation:!0;P||(v={shouldScroll:!1,scrollOffset:-1,itemTop:-1}),this.range.setRange(D-E/2,D+E/2,{animation:P},S,y)}}}},{key:"fit",value:function(s,a){var o=s&&s.animation!==void 0?s.animation:!0,l;this.itemsData.length===1&&this.itemsData.get()[0].end===void 0?(l=this.getDataRange(),this.moveTo(l.min.valueOf(),{animation:o},a)):(l=this.getItemRange(),this.range.setRange(l.min,l.max,{animation:o},a))}},{key:"getItemRange",value:function(){var s=this,a=this.getDataRange(),o=a.min!==null?a.min.valueOf():null,l=a.max!==null?a.max.valueOf():null,u=null,c=null;if(o!=null&&l!=null){var d=l-o;d<=0&&(d=10);var f=d/this.props.center.width,p={},v=0;K(C).call(C,this.itemSet.items,function(P,O){if(P.groupShowing){var A=!0;p[O]=P.redraw(A),v=p[O].length}});var y=v>0;if(y)for(var _=function(O){K(C).call(C,p,function(A){A[O]()})},S=0;S<v;S++)_(S);if(K(C).call(C,this.itemSet.items,function(P){var O=lv(P),A=uv(P),M,I;s.options.rtl?(M=O-(P.getWidthRight()+10)*f,I=A+(P.getWidthLeft()+10)*f):(M=O-(P.getWidthLeft()+10)*f,I=A+(P.getWidthRight()+10)*f),M<o&&(o=M,u=P),I>l&&(l=I,c=P)}),u&&c){var x=u.getWidthLeft()+10,D=c.getWidthRight()+10,E=this.props.center.width-x-D;E>0&&(this.options.rtl?(o=lv(u)-D*d/E,l=uv(c)+x*d/E):(o=lv(u)-x*d/E,l=uv(c)+D*d/E))}}return{min:o!=null?new Date(o):null,max:l!=null?new Date(l):null}}},{key:"getDataRange",value:function(){var s=null,a=null;if(this.itemsData){var o;K(o=this.itemsData).call(o,function(l){var u=C.convert(l.start,"Date").valueOf(),c=C.convert(l.end!=null?l.end:l.start,"Date").valueOf();(s===null||u<s)&&(s=u),(a===null||c>a)&&(a=c)})}return{min:s!=null?new Date(s):null,max:a!=null?new Date(a):null}}},{key:"getEventProperties",value:function(s){var a=s.center?s.center.x:s.clientX,o=s.center?s.center.y:s.clientY,l=this.dom.centerContainer.getBoundingClientRect(),u=this.options.rtl?l.right-a:a-l.left,c=o-l.top,d=this.itemSet.itemFromTarget(s),f=this.itemSet.groupFromTarget(s),p=Kh.customTimeFromTarget(s),v=this.itemSet.options.snap||null,y=this.body.util.getScale(),_=this.body.util.getStep(),S=this._toTime(u),x=v?v(S,y,_):S,D=C.getTarget(s),E=null;return d!=null?E="item":p!=null?E="custom-time":C.hasParent(D,this.timeAxis.dom.foreground)||this.timeAxis2&&C.hasParent(D,this.timeAxis2.dom.foreground)?E="axis":C.hasParent(D,this.itemSet.dom.labelSet)?E="group-label":C.hasParent(D,this.currentTime.bar)?E="current-time":C.hasParent(D,this.dom.center)&&(E="background"),{event:s,item:d?d.id:null,isCluster:d?!!d.isCluster:!1,items:d?d.items||[]:null,group:f?f.groupId:null,customTime:p?p.options.id:null,what:E,pageX:s.srcEvent?s.srcEvent.pageX:s.pageX,pageY:s.srcEvent?s.srcEvent.pageY:s.pageY,x:u,y:c,time:S,snappedTime:x}}},{key:"toggleRollingMode",value:function(){this.range.rolling?this.range.stopRolling():(this.options.rollingMode==null&&this.setOptions(this.options),this.range.startRolling())}},{key:"_redraw",value:function(){As.prototype._redraw.call(this)}},{key:"_onFit",value:function(s){var a=s.start,o=s.end,l=s.animation;o?this.range.setRange(a,o,{animation:l}):this.moveTo(a.valueOf(),{animation:l})}}]),e}(As);W1=function(){function t(n,e,r,s,a,o){var l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1,u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1;if(Pe(this,t),this.majorSteps=[1,2,5,10],this.minorSteps=[.25,.5,1,2],this.customLines=null,this.containerHeight=a,this.majorCharHeight=o,this._start=n,this._end=e,this.scale=1,this.minorStepIdx=-1,this.magnitudefactor=1,this.determineScale(),this.zeroAlign=l,this.autoScaleStart=r,this.autoScaleEnd=s,this.formattingFunction=u,r||s){var c=this,d=function(p){var v=p-p%(c.magnitudefactor*c.minorSteps[c.minorStepIdx]);return p%(c.magnitudefactor*c.minorSteps[c.minorStepIdx])>.5*(c.magnitudefactor*c.minorSteps[c.minorStepIdx])?v+c.magnitudefactor*c.minorSteps[c.minorStepIdx]:v};r&&(this._start-=this.magnitudefactor*2*this.minorSteps[this.minorStepIdx],this._start=d(this._start)),s&&(this._end+=this.magnitudefactor*this.minorSteps[this.minorStepIdx],this._end=d(this._end)),this.determineScale()}}return Ie(t,[{key:"setCharHeight",value:function(e){this.majorCharHeight=e}},{key:"setHeight",value:function(e){this.containerHeight=e}},{key:"determineScale",value:function(){var e=this._end-this._start;this.scale=this.containerHeight/e;var r=this.majorCharHeight/this.scale,s=e>0?Math.round(Math.log(e)/Math.LN10):0;this.minorStepIdx=-1,this.magnitudefactor=Math.pow(10,s);var a=0;s<0&&(a=s);for(var o=!1,l=a;Math.abs(l)<=Math.abs(s);l++){this.magnitudefactor=Math.pow(10,l);for(var u=0;u<this.minorSteps.length;u++){var c=this.magnitudefactor*this.minorSteps[u];if(c>=r){o=!0,this.minorStepIdx=u;break}}if(o===!0)break}}},{key:"is_major",value:function(e){return e%(this.magnitudefactor*this.majorSteps[this.minorStepIdx])===0}},{key:"getStep",value:function(){return this.magnitudefactor*this.minorSteps[this.minorStepIdx]}},{key:"getFirstMajor",value:function(){var e=this.magnitudefactor*this.majorSteps[this.minorStepIdx];return this.convertValue(this._start+(e-this._start%e)%e)}},{key:"formatValue",value:function(e){var r=e.toPrecision(5);return typeof this.formattingFunction=="function"&&(r=this.formattingFunction(e)),typeof r=="number"?"".concat(r):typeof r=="string"?r:e.toPrecision(5)}},{key:"getLines",value:function(){for(var e=[],r=this.getStep(),s=(r-this._start%r)%r,a=this._start+s;this._end-a>1e-5;a+=r)a!=this._start&&e.push({major:this.is_major(a),y:this.convertValue(a),val:this.formatValue(a)});return e}},{key:"followScale",value:function(e){var r=this.minorStepIdx,s=this._start,a=this._end,o=this,l=function(){o.magnitudefactor*=2},u=function(){o.magnitudefactor/=2};e.minorStepIdx<=1&&this.minorStepIdx<=1||e.minorStepIdx>1&&this.minorStepIdx>1||(e.minorStepIdx<this.minorStepIdx?(this.minorStepIdx=1,r==2||l(),l()):(this.minorStepIdx=2,r==1||u(),u()));for(var c=e.convertValue(0),d=e.getStep()*e.scale,f=!1,p=0;!f&&p++<5;){this.scale=d/(this.minorSteps[this.minorStepIdx]*this.magnitudefactor);var v=this.containerHeight/this.scale;this._start=s,this._end=this._start+v;var y=this._end*this.scale,_=this.magnitudefactor*this.majorSteps[this.minorStepIdx],S=this.getFirstMajor()-e.getFirstMajor();if(this.zeroAlign){var x=c-y;this._end+=x/this.scale,this._start=this._end-v}else this.autoScaleStart?(this._start-=S/this.scale,this._end=this._start+v):(this._start+=_-S/this.scale,this._end=this._start+v);if(!this.autoScaleEnd&&this._end>a+1e-5){u(),f=!1;continue}if(!this.autoScaleStart&&this._start<s-1e-5)if(this.zeroAlign&&s>=0)console.warn("Can't adhere to given 'min' range, due to zeroalign");else{u(),f=!1;continue}if(this.autoScaleStart&&this.autoScaleEnd&&v<a-s){l(),f=!1;continue}f=!0}}},{key:"convertValue",value:function(e){return this.containerHeight-(e-this._start)*this.scale}},{key:"screenToValue",value:function(e){return(this.containerHeight-e)/this.scale+this._start}}]),t}(),gee=`
.vis-panel.vis-background.vis-horizontal .vis-grid.vis-horizontal {
  position: absolute;
  width: 100%;
  height: 0;
  border-bottom: 1px solid;
}

.vis-panel.vis-background.vis-horizontal .vis-grid.vis-minor {
  border-color: #e5e5e5;
}

.vis-panel.vis-background.vis-horizontal .vis-grid.vis-major {
  border-color: #bfbfbf;
}


.vis-data-axis .vis-y-axis.vis-major {
  width: 100%;
  position: absolute;
  color: #4d4d4d;
  white-space: nowrap;
}

.vis-data-axis .vis-y-axis.vis-major.vis-measure {
  padding: 0;
  margin: 0;
  border: 0;
  visibility: hidden;
  width: auto;
}


.vis-data-axis .vis-y-axis.vis-minor {
  position: absolute;
  width: 100%;
  color: #bebebe;
  white-space: nowrap;
}

.vis-data-axis .vis-y-axis.vis-minor.vis-measure {
  padding: 0;
  margin: 0;
  border: 0;
  visibility: hidden;
  width: auto;
}

.vis-data-axis .vis-y-axis.vis-title {
  position: absolute;
  color: #4d4d4d;
  white-space: nowrap;
  bottom: 20px;
  text-align: center;
}

.vis-data-axis .vis-y-axis.vis-title.vis-measure {
  padding: 0;
  margin: 0;
  visibility: hidden;
  width: auto;
}

.vis-data-axis .vis-y-axis.vis-title.vis-left {
  bottom: 0;
  -webkit-transform-origin: left top;
  -moz-transform-origin: left top;
  -ms-transform-origin: left top;
  -o-transform-origin: left top;
  transform-origin: left bottom;
  -webkit-transform: rotate(-90deg);
  -moz-transform: rotate(-90deg);
  -ms-transform: rotate(-90deg);
  -o-transform: rotate(-90deg);
  transform: rotate(-90deg);
}

.vis-data-axis .vis-y-axis.vis-title.vis-right {
  bottom: 0;
  -webkit-transform-origin: right bottom;
  -moz-transform-origin: right bottom;
  -ms-transform-origin: right bottom;
  -o-transform-origin: right bottom;
  transform-origin: right bottom;
  -webkit-transform: rotate(90deg);
  -moz-transform: rotate(90deg);
  -ms-transform: rotate(90deg);
  -o-transform: rotate(90deg);
  transform: rotate(90deg);
}

.vis-legend {
  background-color: rgba(247, 252, 255, 0.65);
  padding: 5px;
  border: 1px solid #b3b3b3;
  box-shadow: 2px 2px 10px rgba(154, 154, 154, 0.55);
}

.vis-legend-text {
  /*font-size: 10px;*/
  white-space: nowrap;
  display: inline-block
}`;pr(gee);ng=function(t){fr(e,t);var n=wee(e);function e(r,s,a,o){var l;Pe(this,e),l=n.call(this),l.id=Ns(),l.body=r,l.defaultOptions={orientation:"left",showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,icons:!1,majorLinesOffset:7,minorLinesOffset:4,labelOffsetX:10,labelOffsetY:2,iconWidth:20,width:"40px",visible:!0,alignZeros:!0,left:{range:{min:void 0,max:void 0},format:function(d){return"".concat(hh(d.toPrecision(3)))},title:{text:void 0,style:void 0}},right:{range:{min:void 0,max:void 0},format:function(d){return"".concat(hh(d.toPrecision(3)))},title:{text:void 0,style:void 0}}},l.linegraphOptions=o,l.linegraphSVG=a,l.props={},l.DOMelements={lines:{},labels:{},title:{}},l.dom={},l.scale=void 0,l.range={start:0,end:0},l.options=C.extend({},l.defaultOptions),l.conversionFactor=1,l.setOptions(s),l.width=Number("".concat(l.options.width).replace("px","")),l.minWidth=l.width,l.height=l.linegraphSVG.getBoundingClientRect().height,l.hidden=!1,l.stepPixels=25,l.zeroCrossing=-1,l.amountOfSteps=-1,l.lineOffset=0,l.master=!0,l.masterAxis=null,l.svgElements={},l.iconsRemoved=!1,l.groups={},l.amountOfGroups=0,l._create(),l.scale==null&&l._redrawLabels(),l.framework={svg:l.svg,svgElements:l.svgElements,options:l.options,groups:l.groups};var u=Ke(l);return l.body.emitter.on("verticalDrag",function(){u.dom.lineContainer.style.top="".concat(u.body.domProps.scrollTop,"px")}),l}return Ie(e,[{key:"addGroup",value:function(s,a){this.groups.hasOwnProperty(s)||(this.groups[s]=a),this.amountOfGroups+=1}},{key:"updateGroup",value:function(s,a){this.groups.hasOwnProperty(s)||(this.amountOfGroups+=1),this.groups[s]=a}},{key:"removeGroup",value:function(s){this.groups.hasOwnProperty(s)&&(delete this.groups[s],this.amountOfGroups-=1)}},{key:"setOptions",value:function(s){if(s){var a=!1;this.options.orientation!=s.orientation&&s.orientation!==void 0&&(a=!0);var o=["orientation","showMinorLabels","showMajorLabels","icons","majorLinesOffset","minorLinesOffset","labelOffsetX","labelOffsetY","iconWidth","width","visible","left","right","alignZeros"];C.selectiveDeepExtend(o,this.options,s),this.minWidth=Number("".concat(this.options.width).replace("px","")),a===!0&&this.dom.frame&&(this.hide(),this.show())}}},{key:"_create",value:function(){this.dom.frame=document.createElement("div"),this.dom.frame.style.width=this.options.width,this.dom.frame.style.height=this.height,this.dom.lineContainer=document.createElement("div"),this.dom.lineContainer.style.width="100%",this.dom.lineContainer.style.height=this.height,this.dom.lineContainer.style.position="relative",this.dom.lineContainer.style.visibility="visible",this.dom.lineContainer.style.display="block",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.height="100%",this.svg.style.width="100%",this.svg.style.display="block",this.dom.frame.appendChild(this.svg)}},{key:"_redrawGroupIcons",value:function(){sn(this.svgElements);var s,a=this.options.iconWidth,o=15,l=4,u=l+.5*o;this.options.orientation==="left"?s=l:s=this.width-a-l;var c=kt(this.groups);bt(c).call(c,function(v,y){return v<y?-1:1});var d=yee(c),f;try{for(d.s();!(f=d.n()).done;){var p=f.value;this.groups[p].visible===!0&&(this.linegraphOptions.visibility[p]===void 0||this.linegraphOptions.visibility[p]===!0)&&(this.groups[p].getLegend(a,o,this.framework,s,u),u+=o+l)}}catch(v){d.e(v)}finally{d.f()}$r(this.svgElements),this.iconsRemoved=!1}},{key:"_cleanupIcons",value:function(){this.iconsRemoved===!1&&(sn(this.svgElements),$r(this.svgElements),this.iconsRemoved=!0)}},{key:"show",value:function(){this.hidden=!1,this.dom.frame.parentNode||(this.options.orientation==="left"?this.body.dom.left.appendChild(this.dom.frame):this.body.dom.right.appendChild(this.dom.frame)),this.dom.lineContainer.parentNode||this.body.dom.backgroundHorizontal.appendChild(this.dom.lineContainer),this.dom.lineContainer.style.display="block"}},{key:"hide",value:function(){this.hidden=!0,this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.lineContainer.style.display="none"}},{key:"setRange",value:function(s,a){this.range.start=s,this.range.end=a}},{key:"redraw",value:function(){var s=!1,a=0;this.dom.lineContainer.style.top="".concat(this.body.domProps.scrollTop,"px");for(var o in this.groups)this.groups.hasOwnProperty(o)&&this.groups[o].visible===!0&&(this.linegraphOptions.visibility[o]===void 0||this.linegraphOptions.visibility[o]===!0)&&a++;if(this.amountOfGroups===0||a===0)this.hide();else{this.show(),this.height=Number(this.linegraphSVG.style.height.replace("px","")),this.dom.lineContainer.style.height="".concat(this.height,"px"),this.width=this.options.visible===!0?Number("".concat(this.options.width).replace("px","")):0;var l=this.props,u=this.dom.frame;u.className="vis-data-axis",this._calculateCharSize();var c=this.options.orientation,d=this.options.showMinorLabels,f=this.options.showMajorLabels,p=this.body.dom.backgroundHorizontal.offsetWidth;l.minorLabelHeight=d?l.minorCharHeight:0,l.majorLabelHeight=f?l.majorCharHeight:0,l.minorLineWidth=p-this.lineOffset-this.width+2*this.options.minorLinesOffset,l.minorLineHeight=1,l.majorLineWidth=p-this.lineOffset-this.width+2*this.options.majorLinesOffset,l.majorLineHeight=1,c==="left"?(u.style.top="0",u.style.left="0",u.style.bottom="",u.style.width="".concat(this.width,"px"),u.style.height="".concat(this.height,"px"),this.props.width=this.body.domProps.left.width,this.props.height=this.body.domProps.left.height):(u.style.top="",u.style.bottom="0",u.style.left="0",u.style.width="".concat(this.width,"px"),u.style.height="".concat(this.height,"px"),this.props.width=this.body.domProps.right.width,this.props.height=this.body.domProps.right.height),s=this._redrawLabels(),s=this._isResized()||s,this.options.icons===!0?this._redrawGroupIcons():this._cleanupIcons(),this._redrawTitle(c)}return s}},{key:"_redrawLabels",value:function(){var s=this,a=!1;sn(this.DOMelements.lines),sn(this.DOMelements.labels);var o=this.options.orientation,l=this.options[o].range!=null?this.options[o].range:{},u=!0;l.max!=null&&(this.range.end=l.max,u=!1);var c=!0;l.min!=null&&(this.range.start=l.min,c=!1),this.scale=new W1(this.range.start,this.range.end,c,u,this.dom.frame.offsetHeight,this.props.majorCharHeight,this.options.alignZeros,this.options[o].format),this.master===!1&&this.masterAxis!=null?(this.scale.followScale(this.masterAxis.scale),this.dom.lineContainer.style.display="none"):this.dom.lineContainer.style.display="block",this.maxLabelSize=0;var d=this.scale.getLines();K(d).call(d,function(v){var y=v.y,_=v.major;s.options.showMinorLabels&&_===!1&&s._redrawLabel(y-2,v.val,o,"vis-y-axis vis-minor",s.props.minorCharHeight),_&&y>=0&&s._redrawLabel(y-2,v.val,o,"vis-y-axis vis-major",s.props.majorCharHeight),s.master===!0&&(_?s._redrawLine(y,o,"vis-grid vis-horizontal vis-major",s.options.majorLinesOffset,s.props.majorLineWidth):s._redrawLine(y,o,"vis-grid vis-horizontal vis-minor",s.options.minorLinesOffset,s.props.minorLineWidth))});var f=0;this.options[o].title!==void 0&&this.options[o].title.text!==void 0&&(f=this.props.titleCharHeight);var p=this.options.icons===!0?Math.max(this.options.iconWidth,f)+this.options.labelOffsetX+15:f+this.options.labelOffsetX+15;return this.maxLabelSize>this.width-p&&this.options.visible===!0?(this.width=this.maxLabelSize+p,this.options.width="".concat(this.width,"px"),$r(this.DOMelements.lines),$r(this.DOMelements.labels),this.redraw(),a=!0):this.maxLabelSize<this.width-p&&this.options.visible===!0&&this.width>this.minWidth?(this.width=Math.max(this.minWidth,this.maxLabelSize+p),this.options.width="".concat(this.width,"px"),$r(this.DOMelements.lines),$r(this.DOMelements.labels),this.redraw(),a=!0):($r(this.DOMelements.lines),$r(this.DOMelements.labels),a=!1),a}},{key:"convertValue",value:function(s){return this.scale.convertValue(s)}},{key:"screenToValue",value:function(s){return this.scale.screenToValue(s)}},{key:"_redrawLabel",value:function(s,a,o,l,u){var c=zd("div",this.DOMelements.labels,this.dom.frame);c.className=l,c.innerHTML=C.xss(a),o==="left"?(c.style.left="-".concat(this.options.labelOffsetX,"px"),c.style.textAlign="right"):(c.style.right="-".concat(this.options.labelOffsetX,"px"),c.style.textAlign="left"),c.style.top="".concat(s-.5*u+this.options.labelOffsetY,"px"),a+="";var d=Math.max(this.props.majorCharWidth,this.props.minorCharWidth);this.maxLabelSize<a.length*d&&(this.maxLabelSize=a.length*d)}},{key:"_redrawLine",value:function(s,a,o,l,u){if(this.master===!0){var c=zd("div",this.DOMelements.lines,this.dom.lineContainer);c.className=o,c.innerHTML="",a==="left"?c.style.left="".concat(this.width-l,"px"):c.style.right="".concat(this.width-l,"px"),c.style.width="".concat(u,"px"),c.style.top="".concat(s,"px")}}},{key:"_redrawTitle",value:function(s){if(sn(this.DOMelements.title),this.options[s].title!==void 0&&this.options[s].title.text!==void 0){var a=zd("div",this.DOMelements.title,this.dom.frame);a.className="vis-y-axis vis-title vis-".concat(s),a.innerHTML=C.xss(this.options[s].title.text),this.options[s].title.style!==void 0&&C.addCssText(a,this.options[s].title.style),s==="left"?a.style.left="".concat(this.props.titleCharHeight,"px"):a.style.right="".concat(this.props.titleCharHeight,"px"),a.style.width="".concat(this.height,"px")}$r(this.DOMelements.title)}},{key:"_calculateCharSize",value:function(){if(!("minorCharHeight"in this.props)){var s=document.createTextNode("0"),a=document.createElement("div");a.className="vis-y-axis vis-minor vis-measure",a.appendChild(s),this.dom.frame.appendChild(a),this.props.minorCharHeight=a.clientHeight,this.props.minorCharWidth=a.clientWidth,this.dom.frame.removeChild(a)}if(!("majorCharHeight"in this.props)){var o=document.createTextNode("0"),l=document.createElement("div");l.className="vis-y-axis vis-major vis-measure",l.appendChild(o),this.dom.frame.appendChild(l),this.props.majorCharHeight=l.clientHeight,this.props.majorCharWidth=l.clientWidth,this.dom.frame.removeChild(l)}if(!("titleCharHeight"in this.props)){var u=document.createTextNode("0"),c=document.createElement("div");c.className="vis-y-axis vis-title vis-measure",c.appendChild(u),this.dom.frame.appendChild(c),this.props.titleCharHeight=c.clientHeight,this.props.titleCharWidth=c.clientWidth,this.dom.frame.removeChild(c)}}}]),e}(bn);ac.draw=function(t,n,e,r){r=r||0;for(var s=_ee(e,n),a=0;a<t.length;a++)if(!s)Ws(t[a].screen_x+r,t[a].screen_y,sg(n),e.svgElements,e.svg,t[a].label);else{var o=s(t[a],n);(o===!0||de(o)==="object")&&Ws(t[a].screen_x+r,t[a].screen_y,sg(n,o),e.svgElements,e.svg,t[a].label)}};ac.drawIcon=function(t,n,e,r,s,a){var o=s*.5,l=ei("rect",a.svgElements,a.svg);l.setAttributeNS(null,"x",n),l.setAttributeNS(null,"y",e-o),l.setAttributeNS(null,"width",r),l.setAttributeNS(null,"height",2*o),l.setAttributeNS(null,"class","vis-outline"),Ws(n+.5*r,e,sg(t),a.svgElements,a.svg)};dr.drawIcon=function(t,n,e,r,s,a){var o=s*.5,l=ei("rect",a.svgElements,a.svg);l.setAttributeNS(null,"x",n),l.setAttributeNS(null,"y",e-o),l.setAttributeNS(null,"width",r),l.setAttributeNS(null,"height",2*o),l.setAttributeNS(null,"class","vis-outline");var u=Math.round(.3*r),c=t.options.barChart.width,d=c/u,f=Math.round(.4*s),p=Math.round(.75*s),v=Math.round((r-2*u)/3);if(sh(n+.5*u+v,e+o-f-1,u,f,t.className+" vis-bar",a.svgElements,a.svg,t.style),sh(n+1.5*u+v+2,e+o-p-1,u,p,t.className+" vis-bar",a.svgElements,a.svg,t.style),t.options.drawPoints.enabled==!0){var y={style:t.options.drawPoints.style,styles:t.options.drawPoints.styles,size:t.options.drawPoints.size/d,className:t.className};Ws(n+.5*u+v,e+o-f-1,y,a.svgElements,a.svg),Ws(n+1.5*u+v+2,e+o-p-1,y,a.svgElements,a.svg)}};dr.draw=function(t,n,e){var r=[],s={},a,o,l,u,c,d,f=0;for(c=0;c<t.length;c++)if(u=e.groups[t[c]],u.options.style==="bar"&&u.visible===!0&&(e.options.groups.visibility[t[c]]===void 0||e.options.groups.visibility[t[c]]===!0))for(d=0;d<n[t[c]].length;d++)r.push({screen_x:n[t[c]][d].screen_x,screen_end:n[t[c]][d].screen_end,screen_y:n[t[c]][d].screen_y,x:n[t[c]][d].x,end:n[t[c]][d].end,y:n[t[c]][d].y,groupId:t[c],label:n[t[c]][d].label}),f+=1;if(f!==0)for(bt(r).call(r,function(D,E){return D.screen_x===E.screen_x?D.groupId<E.groupId?-1:1:D.screen_x-E.screen_x}),dr._getDataIntersections(s,r),c=0;c<r.length;c++){u=e.groups[r[c].groupId];var p=u.options.barChart.minWidth!=null?u.options.barChart.minWidth:.1*u.options.barChart.width;o=r[c].screen_x;var v=0;if(s[o]===void 0)c+1<r.length&&(a=Math.abs(r[c+1].screen_x-o)),l=dr._getSafeDrawData(a,u,p);else{var y=c+(s[o].amount-s[o].resolved);y<r.length&&(a=Math.abs(r[y].screen_x-o)),l=dr._getSafeDrawData(a,u,p),s[o].resolved+=1,u.options.stack===!0&&u.options.excludeFromStacking!==!0?r[c].screen_y<u.zeroPosition?(v=s[o].accumulatedNegative,s[o].accumulatedNegative+=u.zeroPosition-r[c].screen_y):(v=s[o].accumulatedPositive,s[o].accumulatedPositive+=u.zeroPosition-r[c].screen_y):u.options.barChart.sideBySide===!0&&(l.width=l.width/s[o].amount,l.offset+=s[o].resolved*l.width-.5*l.width*(s[o].amount+1))}var _=l.width,S=r[c].screen_x;if(r[c].screen_end!=null?(_=r[c].screen_end-r[c].screen_x,S+=_*.5):S+=l.offset,sh(S,r[c].screen_y-v,_,u.zeroPosition-r[c].screen_y,u.className+" vis-bar",e.svgElements,e.svg,u.style),u.options.drawPoints.enabled===!0){var x={screen_x:r[c].screen_x,screen_y:r[c].screen_y-v,x:r[c].x,y:r[c].y,groupId:r[c].groupId,label:r[c].label};ac.draw([x],u,e,l.offset)}}};dr._getDataIntersections=function(t,n){for(var e,r=0;r<n.length;r++)r+1<n.length&&(e=Math.abs(n[r+1].screen_x-n[r].screen_x)),r>0&&(e=Math.min(e,Math.abs(n[r-1].screen_x-n[r].screen_x))),e===0&&(t[n[r].screen_x]===void 0&&(t[n[r].screen_x]={amount:0,resolved:0,accumulatedPositive:0,accumulatedNegative:0}),t[n[r].screen_x].amount+=1)};dr._getSafeDrawData=function(t,n,e){var r,s;return t<n.options.barChart.width&&t>0?(r=t<e?e:t,s=0,n.options.barChart.align==="left"?s-=.5*t:n.options.barChart.align==="right"&&(s+=.5*t)):(r=n.options.barChart.width,s=0,n.options.barChart.align==="left"?s-=.5*n.options.barChart.width:n.options.barChart.align==="right"&&(s+=.5*n.options.barChart.width)),{width:r,offset:s}};dr.getStackedYRange=function(t,n,e,r,s){if(t.length>0){bt(t).call(t,function(o,l){return o.screen_x===l.screen_x?o.groupId<l.groupId?-1:1:o.screen_x-l.screen_x});var a={};dr._getDataIntersections(a,t),n[r]=dr._getStackedYRange(a,t),n[r].yAxisOrientation=s,e.push(r)}};dr._getStackedYRange=function(t,n){for(var e,r=n[0].screen_y,s=n[0].screen_y,a=0;a<n.length;a++)e=n[a].screen_x,t[e]===void 0?(r=r>n[a].screen_y?n[a].screen_y:r,s=s<n[a].screen_y?n[a].screen_y:s):n[a].screen_y<0?t[e].accumulatedNegative+=n[a].screen_y:t[e].accumulatedPositive+=n[a].screen_y;for(var o in t)t.hasOwnProperty(o)&&(r=r>t[o].accumulatedNegative?t[o].accumulatedNegative:r,r=r>t[o].accumulatedPositive?t[o].accumulatedPositive:r,s=s<t[o].accumulatedNegative?t[o].accumulatedNegative:s,s=s<t[o].accumulatedPositive?t[o].accumulatedPositive:s);return{min:r,max:s}};Ut.calcPath=function(t,n){if(t!=null&&t.length>0){var e=[];return n.options.interpolation.enabled==!0?e=Ut._catmullRom(t,n):e=Ut._linear(t),e}};Ut.drawIcon=function(t,n,e,r,s,a){var o=s*.5,l,u,c=ei("rect",a.svgElements,a.svg);if(c.setAttributeNS(null,"x",n),c.setAttributeNS(null,"y",e-o),c.setAttributeNS(null,"width",r),c.setAttributeNS(null,"height",2*o),c.setAttributeNS(null,"class","vis-outline"),l=ei("path",a.svgElements,a.svg),l.setAttributeNS(null,"class",t.className),t.style!==void 0&&l.setAttributeNS(null,"style",t.style),l.setAttributeNS(null,"d","M"+n+","+e+" L"+(n+r)+","+e),t.options.shaded.enabled==!0&&(u=ei("path",a.svgElements,a.svg),t.options.shaded.orientation=="top"?u.setAttributeNS(null,"d","M"+n+", "+(e-o)+"L"+n+","+e+" L"+(n+r)+","+e+" L"+(n+r)+","+(e-o)):u.setAttributeNS(null,"d","M"+n+","+e+" L"+n+","+(e+o)+" L"+(n+r)+","+(e+o)+"L"+(n+r)+","+e),u.setAttributeNS(null,"class",t.className+" vis-icon-fill"),t.options.shaded.style!==void 0&&t.options.shaded.style!==""&&u.setAttributeNS(null,"style",t.options.shaded.style)),t.options.drawPoints.enabled==!0){var d={style:t.options.drawPoints.style,styles:t.options.drawPoints.styles,size:t.options.drawPoints.size,className:t.className};Ws(n+.5*r,e,d,a.svgElements,a.svg)}};Ut.drawShading=function(t,n,e,r){if(n.options.shaded.enabled==!0){var s=Number(r.svg.style.height.replace("px","")),a=ei("path",r.svgElements,r.svg),o="L";n.options.interpolation.enabled==!0&&(o="C");var l,u=0;n.options.shaded.orientation=="top"?u=0:n.options.shaded.orientation=="bottom"?u=s:u=Math.min(Math.max(0,n.zeroPosition),s),n.options.shaded.orientation=="group"&&e!=null&&e!=null?l="M"+t[0][0]+","+t[0][1]+" "+this.serializePath(t,o,!1)+" L"+e[e.length-1][0]+","+e[e.length-1][1]+" "+this.serializePath(e,o,!0)+e[0][0]+","+e[0][1]+" Z":l="M"+t[0][0]+","+t[0][1]+" "+this.serializePath(t,o,!1)+" V"+u+" H"+t[0][0]+" Z",a.setAttributeNS(null,"class",n.className+" vis-fill"),n.options.shaded.style!==void 0&&a.setAttributeNS(null,"style",n.options.shaded.style),a.setAttributeNS(null,"d",l)}};Ut.draw=function(t,n,e){if(t!=null&&t!=null){var r=ei("path",e.svgElements,e.svg);r.setAttributeNS(null,"class",n.className),n.style!==void 0&&r.setAttributeNS(null,"style",n.style);var s="L";n.options.interpolation.enabled==!0&&(s="C"),r.setAttributeNS(null,"d","M"+t[0][0]+","+t[0][1]+" "+this.serializePath(t,s,!1))}};Ut.serializePath=function(t,n,e){if(t.length<2)return"";var r=n,s;if(e)for(s=t.length-2;s>0;s--)r+=t[s][0]+","+t[s][1]+" ";else for(s=1;s<t.length;s++)r+=t[s][0]+","+t[s][1]+" ";return r};Ut._catmullRomUniform=function(t){var n,e,r,s,a,o,l=[];l.push([Math.round(t[0].screen_x),Math.round(t[0].screen_y)]);for(var u=1/6,c=t.length,d=0;d<c-1;d++)n=d==0?t[0]:t[d-1],e=t[d],r=t[d+1],s=d+2<c?t[d+2]:r,a={screen_x:(-n.screen_x+6*e.screen_x+r.screen_x)*u,screen_y:(-n.screen_y+6*e.screen_y+r.screen_y)*u},o={screen_x:(e.screen_x+6*r.screen_x-s.screen_x)*u,screen_y:(e.screen_y+6*r.screen_y-s.screen_y)*u},l.push([a.screen_x,a.screen_y]),l.push([o.screen_x,o.screen_y]),l.push([r.screen_x,r.screen_y]);return l};Ut._catmullRom=function(t,n){var e=n.options.interpolation.alpha;if(e==0||e===void 0)return this._catmullRomUniform(t);var r,s,a,o,l,u,c,d,f,p,v,y,_,S,x,D,E,P,O,A=[];A.push([Math.round(t[0].screen_x),Math.round(t[0].screen_y)]);for(var M=t.length,I=0;I<M-1;I++)r=I==0?t[0]:t[I-1],s=t[I],a=t[I+1],o=I+2<M?t[I+2]:a,c=Math.sqrt(Math.pow(r.screen_x-s.screen_x,2)+Math.pow(r.screen_y-s.screen_y,2)),d=Math.sqrt(Math.pow(s.screen_x-a.screen_x,2)+Math.pow(s.screen_y-a.screen_y,2)),f=Math.sqrt(Math.pow(a.screen_x-o.screen_x,2)+Math.pow(a.screen_y-o.screen_y,2)),S=Math.pow(f,e),D=Math.pow(f,2*e),x=Math.pow(d,e),E=Math.pow(d,2*e),O=Math.pow(c,e),P=Math.pow(c,2*e),p=2*P+3*O*x+E,v=2*D+3*S*x+E,y=3*O*(O+x),y>0&&(y=1/y),_=3*S*(S+x),_>0&&(_=1/_),l={screen_x:(-E*r.screen_x+p*s.screen_x+P*a.screen_x)*y,screen_y:(-E*r.screen_y+p*s.screen_y+P*a.screen_y)*y},u={screen_x:(D*s.screen_x+v*a.screen_x-E*o.screen_x)*_,screen_y:(D*s.screen_y+v*a.screen_y-E*o.screen_y)*_},l.screen_x==0&&l.screen_y==0&&(l=s),u.screen_x==0&&u.screen_y==0&&(u=a),A.push([l.screen_x,l.screen_y]),A.push([u.screen_x,u.screen_y]),A.push([a.screen_x,a.screen_y]);return A};Ut._linear=function(t){for(var n=[],e=0;e<t.length;e++)n.push([t[e].screen_x,t[e].screen_y]);return n};wn.prototype.setItems=function(t){t!=null?(this.itemsData=t,bt(this.options)==!0&&C.insertSort(this.itemsData,function(n,e){return n.x>e.x?1:-1})):this.itemsData=[]};wn.prototype.getItems=function(){return this.itemsData};wn.prototype.setZeroPosition=function(t){this.zeroPosition=t};wn.prototype.setOptions=function(t){if(t!==void 0){var n=["sampling","style","sort","yAxisOrientation","barChart","zIndex","excludeFromStacking","excludeFromLegend"];C.selectiveDeepExtend(n,this.options,t),typeof t.drawPoints=="function"&&(t.drawPoints={onRender:t.drawPoints}),C.mergeOptions(this.options,t,"interpolation"),C.mergeOptions(this.options,t,"drawPoints"),C.mergeOptions(this.options,t,"shaded"),t.interpolation&&de(t.interpolation)=="object"&&t.interpolation.parametrization&&(t.interpolation.parametrization=="uniform"?this.options.interpolation.alpha=0:t.interpolation.parametrization=="chordal"?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5))}};wn.prototype.update=function(t){this.group=t,this.content=t.content||"graph",this.className=t.className||this.className||"vis-graph-group"+this.groupsUsingDefaultStyles[0]%10,this.visible=t.visible===void 0?!0:t.visible,this.style=t.style,this.setOptions(t.options)};wn.prototype.getLegend=function(t,n,e,r,s){if(e==null||e==null){var a=document.createElementNS("http://www.w3.org/2000/svg","svg");e={svg:a,svgElements:{},options:this.options,groups:[this]}}switch((r==null||r==null)&&(r=0),(s==null||s==null)&&(s=.5*n),this.options.style){case"line":Ut.drawIcon(this,r,s,t,n,e);break;case"points":case"point":ac.drawIcon(this,r,s,t,n,e);break;case"bar":dr.drawIcon(this,r,s,t,n,e);break}return{icon:e.svg,label:this.content,orientation:this.options.yAxisOrientation}};wn.prototype.getYRange=function(t){for(var n=t[0].y,e=t[0].y,r=0;r<t.length;r++)n=n>t[r].y?t[r].y:n,e=e<t[r].y?t[r].y:e;return{min:n,max:e,yAxisOrientation:this.options.yAxisOrientation}};Sr.prototype=new bn;Sr.prototype.clear=function(){this.groups={},this.amountOfGroups=0};Sr.prototype.addGroup=function(t,n){n.options.excludeFromLegend!=!0&&(this.groups.hasOwnProperty(t)||(this.groups[t]=n),this.amountOfGroups+=1)};Sr.prototype.updateGroup=function(t,n){this.groups[t]=n};Sr.prototype.removeGroup=function(t){this.groups.hasOwnProperty(t)&&(delete this.groups[t],this.amountOfGroups-=1)};Sr.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-legend",this.dom.frame.style.position="absolute",this.dom.frame.style.top="10px",this.dom.frame.style.display="block",this.dom.textArea=document.createElement("div"),this.dom.textArea.className="vis-legend-text",this.dom.textArea.style.position="relative",this.dom.textArea.style.top="0px",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top=0+"px",this.svg.style.width=this.options.iconSize+5+"px",this.svg.style.height="100%",this.dom.frame.appendChild(this.svg),this.dom.frame.appendChild(this.dom.textArea)};Sr.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)};Sr.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)};Sr.prototype.setOptions=function(t){var n=["enabled","orientation","icons","left","right"];C.selectiveDeepExtend(n,this.options,t)};Sr.prototype.redraw=function(){var t=0,n=kt(this.groups);bt(n).call(n,function(o,l){return o<l?-1:1});for(var e=0;e<n.length;e++){var r=n[e];this.groups[r].visible==!0&&(this.linegraphOptions.visibility[r]===void 0||this.linegraphOptions.visibility[r]==!0)&&t++}if(this.options[this.side].visible==!1||this.amountOfGroups==0||this.options.enabled==!1||t==0)this.hide();else{if(this.show(),this.options[this.side].position=="top-left"||this.options[this.side].position=="bottom-left"?(this.dom.frame.style.left="4px",this.dom.frame.style.textAlign="left",this.dom.textArea.style.textAlign="left",this.dom.textArea.style.left=this.options.iconSize+15+"px",this.dom.textArea.style.right="",this.svg.style.left=0+"px",this.svg.style.right=""):(this.dom.frame.style.right="4px",this.dom.frame.style.textAlign="right",this.dom.textArea.style.textAlign="right",this.dom.textArea.style.right=this.options.iconSize+15+"px",this.dom.textArea.style.left="",this.svg.style.right=0+"px",this.svg.style.left=""),this.options[this.side].position=="top-left"||this.options[this.side].position=="top-right")this.dom.frame.style.top=4-Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.bottom="";else{var s=this.body.domProps.center.height-this.body.domProps.centerContainer.height;this.dom.frame.style.bottom=4+s+Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.top=""}this.options.icons==!1?(this.dom.frame.style.width=this.dom.textArea.offsetWidth+10+"px",this.dom.textArea.style.right="",this.dom.textArea.style.left="",this.svg.style.width="0px"):(this.dom.frame.style.width=this.options.iconSize+15+this.dom.textArea.offsetWidth+10+"px",this.drawLegendIcons());var a="";for(e=0;e<n.length;e++)r=n[e],this.groups[r].visible==!0&&(this.linegraphOptions.visibility[r]===void 0||this.linegraphOptions.visibility[r]==!0)&&(a+=this.groups[r].content+"<br />");this.dom.textArea.innerHTML=C.xss(a),this.dom.textArea.style.lineHeight=.75*this.options.iconSize+this.options.iconSpacing+"px"}};Sr.prototype.drawLegendIcons=function(){if(this.dom.frame.parentNode){var t=kt(this.groups);bt(t).call(t,function(c,d){return c<d?-1:1}),Bk(this.svgElements);var n=window.getComputedStyle(this.dom.frame).paddingTop,e=Number(n.replace("px","")),r=e,s=this.options.iconSize,a=.75*this.options.iconSize,o=e+.5*a+3;this.svg.style.width=s+5+e+"px";for(var l=0;l<t.length;l++){var u=t[l];this.groups[u].visible==!0&&(this.linegraphOptions.visibility[u]===void 0||this.linegraphOptions.visibility[u]==!0)&&(this.groups[u].getLegend(s,a,this.framework,r,o),o+=a+this.options.iconSpacing)}}};mh="__ungrouped__";Ue.prototype=new bn;Ue.prototype._create=function(){var t=document.createElement("div");t.className="vis-line-graph",this.dom.frame=t,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="relative",this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",this.svg.style.display="block",t.appendChild(this.svg),this.options.dataAxis.orientation="left",this.yAxisLeft=new ng(this.body,this.options.dataAxis,this.svg,this.options.groups),this.options.dataAxis.orientation="right",this.yAxisRight=new ng(this.body,this.options.dataAxis,this.svg,this.options.groups),delete this.options.dataAxis.orientation,this.legendLeft=new Sr(this.body,this.options.legend,"left",this.options.groups),this.legendRight=new Sr(this.body,this.options.legend,"right",this.options.groups),this.show()};Ue.prototype.setOptions=function(t){if(t){var n=["sampling","defaultGroup","stack","height","graphHeight","yAxisOrientation","style","barChart","dataAxis","sort","groups"];t.graphHeight===void 0&&t.height!==void 0?(this.updateSVGheight=!0,this.updateSVGheightOnResize=!0):this.body.domProps.centerContainer.height!==void 0&&t.graphHeight!==void 0&&Ar((t.graphHeight+"").replace("px",""))<this.body.domProps.centerContainer.height&&(this.updateSVGheight=!0),C.selectiveDeepExtend(n,this.options,t),C.mergeOptions(this.options,t,"interpolation"),C.mergeOptions(this.options,t,"drawPoints"),C.mergeOptions(this.options,t,"shaded"),C.mergeOptions(this.options,t,"legend"),t.interpolation&&de(t.interpolation)=="object"&&t.interpolation.parametrization&&(t.interpolation.parametrization=="uniform"?this.options.interpolation.alpha=0:t.interpolation.parametrization=="chordal"?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5)),this.yAxisLeft&&t.dataAxis!==void 0&&(this.yAxisLeft.setOptions(this.options.dataAxis),this.yAxisRight.setOptions(this.options.dataAxis)),this.legendLeft&&t.legend!==void 0&&(this.legendLeft.setOptions(this.options.legend),this.legendRight.setOptions(this.options.legend)),this.groups.hasOwnProperty(mh)&&this.groups[mh].setOptions(t)}this.dom.frame&&(this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0}))};Ue.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)};Ue.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)};Ue.prototype.setItems=function(t){var n=this,e,r=this.itemsData;if(!t)this.itemsData=null;else if(mn(t))this.itemsData=go(t);else throw new TypeError("Data must implement the interface of DataSet or DataView");if(r&&(K(C).call(C,this.itemListeners,function(a,o){r.off(o,a)}),r.dispose(),e=r.getIds(),this._onRemove(e)),this.itemsData){var s=this.id;K(C).call(C,this.itemListeners,function(a,o){n.itemsData.on(o,a,s)}),e=this.itemsData.getIds(),this._onAdd(e)}};Ue.prototype.setGroups=function(t){var n=this,e;if(this.groupsData){K(C).call(C,this.groupListeners,function(a,o){n.groupsData.off(o,a)}),e=this.groupsData.getIds(),this.groupsData=null;for(var r=0;r<e.length;r++)this._removeGroup(e[r])}if(!t)this.groupsData=null;else if(mn(t))this.groupsData=t;else throw new TypeError("Data must implement the interface of DataSet or DataView");if(this.groupsData){var s=this.id;K(C).call(C,this.groupListeners,function(a,o){n.groupsData.on(o,a,s)}),e=this.groupsData.getIds(),this._onAddGroups(e)}};Ue.prototype._onUpdate=function(t){this._updateAllGroupData(t)};Ue.prototype._onAdd=function(t){this._onUpdate(t)};Ue.prototype._onRemove=function(t){this._onUpdate(t)};Ue.prototype._onUpdateGroups=function(t){this._updateAllGroupData(null,t)};Ue.prototype._onAddGroups=function(t){this._onUpdateGroups(t)};Ue.prototype._onRemoveGroups=function(t){for(var n=0;n<t.length;n++)this._removeGroup(t[n]);this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})};Ue.prototype._removeGroup=function(t){this.groups.hasOwnProperty(t)&&(this.groups[t].options.yAxisOrientation=="right"?(this.yAxisRight.removeGroup(t),this.legendRight.removeGroup(t),this.legendRight.redraw()):(this.yAxisLeft.removeGroup(t),this.legendLeft.removeGroup(t),this.legendLeft.redraw()),delete this.groups[t])};Ue.prototype._updateGroup=function(t,n){this.groups.hasOwnProperty(n)?(this.groups[n].update(t),this.groups[n].options.yAxisOrientation=="right"?(this.yAxisRight.updateGroup(n,this.groups[n]),this.legendRight.updateGroup(n,this.groups[n]),this.yAxisLeft.removeGroup(n),this.legendLeft.removeGroup(n)):(this.yAxisLeft.updateGroup(n,this.groups[n]),this.legendLeft.updateGroup(n,this.groups[n]),this.yAxisRight.removeGroup(n),this.legendRight.removeGroup(n))):(this.groups[n]=new wn(t,n,this.options,this.groupsUsingDefaultStyles),this.groups[n].options.yAxisOrientation=="right"?(this.yAxisRight.addGroup(n,this.groups[n]),this.legendRight.addGroup(n,this.groups[n])):(this.yAxisLeft.addGroup(n,this.groups[n]),this.legendLeft.addGroup(n,this.groups[n]))),this.legendLeft.redraw(),this.legendRight.redraw()};Ue.prototype._updateAllGroupData=function(t,n){if(this.itemsData!=null){var e={},r=this.itemsData.get(),s=this.itemsData.idProp,a={};t&&He(t).call(t,function(S){a[S]=S});for(var o={},l=0;l<r.length;l++){var u=r[l],c=u.group;c==null&&(c=mh),o.hasOwnProperty(c)?o[c]++:o[c]=1}var d={};if(!n&&t){for(c in this.groups)if(this.groups.hasOwnProperty(c)){_=this.groups[c];var f=_.getItems();e[c]=oe(f).call(f,function(S){return d[S[s]]=S[s],S[s]!==a[S[s]]});var p=o[c];o[c]-=e[c].length,e[c].length<p&&(e[c][p-1]={})}}for(l=0;l<r.length;l++)if(u=r[l],c=u.group,c==null&&(c=mh),!(!n&&t&&u[s]!==a[u[s]]&&d.hasOwnProperty(u[s]))){e.hasOwnProperty(c)||(e[c]=new Array(o[c]));var v=C.bridgeObject(u);v.x=C.convert(u.x,"Date"),v.end=C.convert(u.end,"Date"),v.orginalY=u.y,v.y=Number(u.y),v[s]=u[s];var y=e[c].length-o[c]--;e[c][y]=v}for(c in this.groups)this.groups.hasOwnProperty(c)&&(e.hasOwnProperty(c)||(e[c]=new Array(0)));for(c in e)if(e.hasOwnProperty(c))if(e[c].length==0)this.groups.hasOwnProperty(c)&&this._removeGroup(c);else{var _=void 0;this.groupsData!=null&&(_=this.groupsData.get(c)),_==null&&(_={id:c,content:this.options.defaultGroup+c}),this._updateGroup(_,c),this.groups[c].setItems(e[c])}this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})}};Ue.prototype.redraw=function(){var t=!1;this.props.width=this.dom.frame.offsetWidth,this.props.height=this.body.domProps.centerContainer.height-this.body.domProps.border.top-this.body.domProps.border.bottom,t=this._isResized()||t;var n=this.body.range.end-this.body.range.start,e=n!=this.lastVisibleInterval;if(this.lastVisibleInterval=n,t==!0){var r;this.svg.style.width=C.option.asSize(3*this.props.width),this.svg.style.left=C.option.asSize(-this.props.width),(Ze(r=this.options.height+"").call(r,"%")!=-1||this.updateSVGheightOnResize==!0)&&(this.updateSVGheight=!0)}if(this.updateSVGheight==!0?(this.options.graphHeight!=this.props.height+"px"&&(this.options.graphHeight=this.props.height+"px",this.svg.style.height=this.props.height+"px"),this.updateSVGheight=!1):this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",t==!0||e==!0||this.abortedGraphUpdate==!0||this.forceGraphUpdate==!0)t=this._updateGraph()||t,this.forceGraphUpdate=!1,this.lastStart=this.body.range.start,this.svg.style.left=-this.props.width+"px";else if(this.lastStart!=0){var s=this.body.range.start-this.lastStart,a=this.body.range.end-this.body.range.start;if(this.props.width!=0){var o=this.props.width/a,l=s*o;this.svg.style.left=-this.props.width-l+"px"}}return this.legendLeft.redraw(),this.legendRight.redraw(),t};Ue.prototype._getSortedGroupIds=function(){var t=[];for(var n in this.groups)if(this.groups.hasOwnProperty(n)){var e=this.groups[n];e.visible==!0&&(this.options.groups.visibility[n]===void 0||this.options.groups.visibility[n]==!0)&&t.push({id:n,zIndex:e.options.zIndex})}C.insertSort(t,function(a,o){var l=a.zIndex,u=o.zIndex;return l===void 0&&(l=0),u===void 0&&(u=0),l==u?0:l<u?-1:1});for(var r=new Array(t.length),s=0;s<t.length;s++)r[s]=t[s].id;return r};Ue.prototype._updateGraph=function(){if(sn(this.svgElements),this.props.width!=0&&this.itemsData!=null){var t,n,e={},r=!1,s=this.body.util.toGlobalTime(-this.body.domProps.root.width),a=this.body.util.toGlobalTime(2*this.body.domProps.root.width),o=this._getSortedGroupIds();if(o.length>0){var l={};for(this._getRelevantData(o,l,s,a),this._applySampling(o,l),n=0;n<o.length;n++)this._convertXcoordinates(l[o[n]]);if(this._getYRanges(o,l,e),r=this._updateYAxis(o,e),r==!0)return $r(this.svgElements),this.abortedGraphUpdate=!0,!0;this.abortedGraphUpdate=!1;var u=void 0;for(n=0;n<o.length;n++)t=this.groups[o[n]],this.options.stack===!0&&this.options.style==="line"&&(t.options.excludeFromStacking==null||!t.options.excludeFromStacking)&&(u!=null&&(this._stack(l[t.id],l[u.id]),t.options.shaded.enabled==!0&&t.options.shaded.orientation!=="group"&&(t.options.shaded.orientation=="top"&&u.options.shaded.orientation!=="group"?(u.options.shaded.orientation="group",u.options.shaded.groupId=t.id):(t.options.shaded.orientation="group",t.options.shaded.groupId=u.id))),u=t),this._convertYcoordinates(l[o[n]],t);var c={};for(n=0;n<o.length;n++)if(t=this.groups[o[n]],t.options.style==="line"&&t.options.shaded.enabled==!0){var d=l[o[n]];if(d==null||d.length==0)continue;if(c.hasOwnProperty(o[n])||(c[o[n]]=Ut.calcPath(d,t)),t.options.shaded.orientation==="group"){var f=t.options.shaded.groupId;if(Ze(o).call(o,f)===-1){console.log(t.id+": Unknown shading group target given:"+f);continue}c.hasOwnProperty(f)||(c[f]=Ut.calcPath(l[f],this.groups[f])),Ut.drawShading(c[o[n]],t,c[f],this.framework)}else Ut.drawShading(c[o[n]],t,void 0,this.framework)}for(dr.draw(o,l,this.framework),n=0;n<o.length;n++)if(t=this.groups[o[n]],l[o[n]].length>0)switch(t.options.style){case"line":c.hasOwnProperty(o[n])||(c[o[n]]=Ut.calcPath(l[o[n]],t)),Ut.draw(c[o[n]],t,this.framework);case"point":case"points":(t.options.style=="point"||t.options.style=="points"||t.options.drawPoints.enabled==!0)&&ac.draw(l[o[n]],t,this.framework);break}}}return $r(this.svgElements),!1};Ue.prototype._stack=function(t,n){var e,r,s,a,o;e=0;for(var l=0;l<t.length;l++){a=void 0,o=void 0;for(var u=e;u<n.length;u++)if(n[u].x===t[l].x){a=n[u],o=n[u],e=u;break}else if(n[u].x>t[l].x){o=n[u],u==0?a=o:a=n[u-1],e=u;break}o===void 0&&(a=n[n.length-1],o=n[n.length-1]),r=o.x-a.x,s=o.y-a.y,r==0?t[l].y=t[l].orginalY+o.y:t[l].y=t[l].orginalY+s/r*(t[l].x-a.x)+a.y}};Ue.prototype._getRelevantData=function(t,n,e,r){var s,a,o,l;if(t.length>0)for(a=0;a<t.length;a++){s=this.groups[t[a]];var u=s.getItems();if(bt(s.options)==!0){var c=function(y,_){return y.getTime()==_.getTime()?0:y<_?-1:1},d=Math.max(0,C.binarySearchValue(u,e,"x","before",c)),f=Math.min(u.length,C.binarySearchValue(u,r,"x","after",c)+1);f<=0&&(f=u.length);var p=new Array(f-d);for(o=d;o<f;o++)l=s.itemsData[o],p[o-d]=l;n[t[a]]=p}else n[t[a]]=s.itemsData}};Ue.prototype._applySampling=function(t,n){var e;if(t.length>0){for(var r=0;r<t.length;r++)if(e=this.groups[t[r]],e.options.sampling==!0){var s=n[t[r]];if(s.length>0){var a=1,o=s.length,l=this.body.util.toGlobalScreen(s[s.length-1].x)-this.body.util.toGlobalScreen(s[0].x),u=o/l;a=Math.min(Math.ceil(.2*o),Math.max(1,Math.round(u)));for(var c=new Array(o),d=0;d<o;d+=a){var f=Math.round(d/a);c[f]=s[d]}n[t[r]]=cr(c).call(c,0,Math.round(o/a))}}}};Ue.prototype._getYRanges=function(t,n,e){var r,s,a,o=[],l=[],u;if(t.length>0){for(a=0;a<t.length;a++)r=n[t[a]],u=this.groups[t[a]].options,r.length>0&&(s=this.groups[t[a]],u.stack===!0&&u.style==="bar"?u.yAxisOrientation==="left"?o=rt(o).call(o,r):l=rt(l).call(l,r):e[t[a]]=s.getYRange(r,t[a]));dr.getStackedYRange(o,e,t,"__barStackLeft","left"),dr.getStackedYRange(l,e,t,"__barStackRight","right")}};Ue.prototype._updateYAxis=function(t,n){var e=!1,r=!1,s=!1,a=1e9,o=1e9,l=-1e9,u=-1e9,c,d;if(t.length>0){for(var f=0;f<t.length;f++){var p=this.groups[t[f]];p&&p.options.yAxisOrientation!="right"?(r=!0,a=1e9,l=-1e9):p&&p.options.yAxisOrientation&&(s=!0,o=1e9,u=-1e9)}for(f=0;f<t.length;f++)n.hasOwnProperty(t[f])&&n[t[f]].ignore!==!0&&(c=n[t[f]].min,d=n[t[f]].max,n[t[f]].yAxisOrientation!="right"?(r=!0,a=a>c?c:a,l=l<d?d:l):(s=!0,o=o>c?c:o,u=u<d?d:u));r==!0&&this.yAxisLeft.setRange(a,l),s==!0&&this.yAxisRight.setRange(o,u)}e=this._toggleAxisVisiblity(r,this.yAxisLeft)||e,e=this._toggleAxisVisiblity(s,this.yAxisRight)||e,s==!0&&r==!0?(this.yAxisLeft.drawIcons=!0,this.yAxisRight.drawIcons=!0):(this.yAxisLeft.drawIcons=!1,this.yAxisRight.drawIcons=!1),this.yAxisRight.master=!r,this.yAxisRight.masterAxis=this.yAxisLeft,this.yAxisRight.master==!1?(s==!0?this.yAxisLeft.lineOffset=this.yAxisRight.width:this.yAxisLeft.lineOffset=0,e=this.yAxisLeft.redraw()||e,e=this.yAxisRight.redraw()||e):e=this.yAxisRight.redraw()||e;var v=["__barStackLeft","__barStackRight","__lineStackLeft","__lineStackRight"];for(f=0;f<v.length;f++)Ze(t).call(t,v[f])!=-1&&cr(t).call(t,Ze(t).call(t,v[f]),1);return e};Ue.prototype._toggleAxisVisiblity=function(t,n){var e=!1;return t==!1?n.dom.frame.parentNode&&n.hidden==!1&&(n.hide(),e=!0):!n.dom.frame.parentNode&&n.hidden==!0&&(n.show(),e=!0),e};Ue.prototype._convertXcoordinates=function(t){for(var n=this.body.util.toScreen,e=0;e<t.length;e++)t[e].screen_x=n(t[e].x)+this.props.width,t[e].screen_y=t[e].y,t[e].end!=null?t[e].screen_end=n(t[e].end)+this.props.width:t[e].screen_end=void 0};Ue.prototype._convertYcoordinates=function(t,n){var e=this.yAxisLeft,r=Number(this.svg.style.height.replace("px",""));n.options.yAxisOrientation=="right"&&(e=this.yAxisRight);for(var s=0;s<t.length;s++)t[s].screen_y=Math.round(e.convertValue(t[s].y));n.setZeroPosition(Math.min(r,e.convertValue(0)))};ye="string",$e="boolean",Xe="number",Tee="array",Za="date",ot="object",xee="dom",Qa="moment",Gx="any",Cee={configure:{enabled:{boolean:$e},filter:{boolean:$e,function:"function"},container:{dom:xee},__type__:{object:ot,boolean:$e,function:"function"}},alignCurrentTime:{string:ye,undefined:"undefined"},yAxisOrientation:{string:["left","right"]},defaultGroup:{string:ye},sort:{boolean:$e},sampling:{boolean:$e},stack:{boolean:$e},graphHeight:{string:ye,number:Xe},shaded:{enabled:{boolean:$e},orientation:{string:["bottom","top","zero","group"]},groupId:{object:ot},__type__:{boolean:$e,object:ot}},style:{string:["line","bar","points"]},barChart:{width:{number:Xe},minWidth:{number:Xe},sideBySide:{boolean:$e},align:{string:["left","center","right"]},__type__:{object:ot}},interpolation:{enabled:{boolean:$e},parametrization:{string:["centripetal","chordal","uniform"]},alpha:{number:Xe},__type__:{object:ot,boolean:$e}},drawPoints:{enabled:{boolean:$e},onRender:{function:"function"},size:{number:Xe},style:{string:["square","circle"]},__type__:{object:ot,boolean:$e,function:"function"}},dataAxis:{showMinorLabels:{boolean:$e},showMajorLabels:{boolean:$e},showWeekScale:{boolean:$e},icons:{boolean:$e},width:{string:ye,number:Xe},visible:{boolean:$e},alignZeros:{boolean:$e},left:{range:{min:{number:Xe,undefined:"undefined"},max:{number:Xe,undefined:"undefined"},__type__:{object:ot}},format:{function:"function"},title:{text:{string:ye,number:Xe,undefined:"undefined"},style:{string:ye,undefined:"undefined"},__type__:{object:ot}},__type__:{object:ot}},right:{range:{min:{number:Xe,undefined:"undefined"},max:{number:Xe,undefined:"undefined"},__type__:{object:ot}},format:{function:"function"},title:{text:{string:ye,number:Xe,undefined:"undefined"},style:{string:ye,undefined:"undefined"},__type__:{object:ot}},__type__:{object:ot}},__type__:{object:ot}},legend:{enabled:{boolean:$e},icons:{boolean:$e},left:{visible:{boolean:$e},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:ot}},right:{visible:{boolean:$e},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:ot}},__type__:{object:ot,boolean:$e}},groups:{visibility:{any:Gx},__type__:{object:ot}},autoResize:{boolean:$e},throttleRedraw:{number:Xe},clickToUse:{boolean:$e},end:{number:Xe,date:Za,string:ye,moment:Qa},format:{minorLabels:{millisecond:{string:ye,undefined:"undefined"},second:{string:ye,undefined:"undefined"},minute:{string:ye,undefined:"undefined"},hour:{string:ye,undefined:"undefined"},weekday:{string:ye,undefined:"undefined"},day:{string:ye,undefined:"undefined"},week:{string:ye,undefined:"undefined"},month:{string:ye,undefined:"undefined"},quarter:{string:ye,undefined:"undefined"},year:{string:ye,undefined:"undefined"},__type__:{object:ot}},majorLabels:{millisecond:{string:ye,undefined:"undefined"},second:{string:ye,undefined:"undefined"},minute:{string:ye,undefined:"undefined"},hour:{string:ye,undefined:"undefined"},weekday:{string:ye,undefined:"undefined"},day:{string:ye,undefined:"undefined"},week:{string:ye,undefined:"undefined"},month:{string:ye,undefined:"undefined"},quarter:{string:ye,undefined:"undefined"},year:{string:ye,undefined:"undefined"},__type__:{object:ot}},__type__:{object:ot}},moment:{function:"function"},height:{string:ye,number:Xe},hiddenDates:{start:{date:Za,number:Xe,string:ye,moment:Qa},end:{date:Za,number:Xe,string:ye,moment:Qa},repeat:{string:ye},__type__:{object:ot,array:Tee}},locale:{string:ye},locales:{__any__:{any:Gx},__type__:{object:ot}},max:{date:Za,number:Xe,string:ye,moment:Qa},maxHeight:{number:Xe,string:ye},maxMinorChars:{number:Xe},min:{date:Za,number:Xe,string:ye,moment:Qa},minHeight:{number:Xe,string:ye},moveable:{boolean:$e},multiselect:{boolean:$e},orientation:{string:ye},showCurrentTime:{boolean:$e},showMajorLabels:{boolean:$e},showMinorLabels:{boolean:$e},showWeekScale:{boolean:$e},snap:{function:"function",null:"null"},start:{date:Za,number:Xe,string:ye,moment:Qa},timeAxis:{scale:{string:ye,undefined:"undefined"},step:{number:Xe,undefined:"undefined"},__type__:{object:ot}},width:{string:ye,number:Xe},zoomable:{boolean:$e},zoomKey:{string:["ctrlKey","altKey","metaKey",""]},zoomMax:{number:Xe},zoomMin:{number:Xe},zIndex:{number:Xe},__type__:{object:ot}},Eee={global:{alignCurrentTime:["none","year","month","quarter","week","isoWeek","day","date","hour","minute","second"],sort:!0,sampling:!0,stack:!1,shaded:{enabled:!1,orientation:["zero","top","bottom","group"]},style:["line","bar","points"],barChart:{width:[50,5,100,5],minWidth:[50,5,100,5],sideBySide:!1,align:["left","center","right"]},interpolation:{enabled:!0,parametrization:["centripetal","chordal","uniform"]},drawPoints:{enabled:!0,size:[6,2,30,1],style:["square","circle"]},dataAxis:{showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,icons:!1,width:[40,0,200,1],visible:!0,alignZeros:!0,left:{title:{text:"",style:""}},right:{title:{text:"",style:""}}},legend:{enabled:!1,icons:!0,left:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]},right:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]}},autoResize:!0,clickToUse:!1,end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",quarter:"[Q]Q",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",quarter:"YYYY",year:""}},height:"",locale:"",max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!0,orientation:["both","bottom","top"],showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,showWeekScale:!1,start:"",width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],zIndex:0}};Ri.prototype=new As;Ri.prototype.setOptions=function(t){var n=G1.validate(t,Cee);n===!0&&console.log("%cErrors have been found in the supplied options object.",ph),As.prototype.setOptions.call(this,t)};Ri.prototype.setItems=function(t){var n=this.itemsData==null,e;if(t?mn(t)?e=go(t):e=go(new zs(t)):e=null,this.itemsData&&this.itemsData.dispose(),this.itemsData=e,this.linegraph&&this.linegraph.setItems(e!=null?e.rawDS:null),n)if(this.options.start!=null||this.options.end!=null){var r=this.options.start!=null?this.options.start:null,s=this.options.end!=null?this.options.end:null;this.setWindow(r,s,{animation:!1})}else this.fit({animation:!1})};Ri.prototype.setGroups=function(t){var n;t?mn(t)?n=t:n=new zs(t):n=null,this.groupsData=n,this.linegraph.setGroups(n)};Ri.prototype.getLegend=function(t,n,e){return n===void 0&&(n=15),e===void 0&&(e=15),this.linegraph.groups[t]!==void 0?this.linegraph.groups[t].getLegend(n,e):"cannot find group:'"+t+"'"};Ri.prototype.isGroupVisible=function(t){return this.linegraph.groups[t]!==void 0?this.linegraph.groups[t].visible&&(this.linegraph.options.groups.visibility[t]===void 0||this.linegraph.options.groups.visibility[t]==!0):!1};Ri.prototype.getDataRange=function(){var t=null,n=null;for(var e in this.linegraph.groups)if(this.linegraph.groups.hasOwnProperty(e)&&this.linegraph.groups[e].visible==!0)for(var r=0;r<this.linegraph.groups[e].itemsData.length;r++){var s=this.linegraph.groups[e].itemsData[r],a=C.convert(s.x,"Date").valueOf();t=t==null||t>a?a:t,n=n==null||n<a?a:n}return{min:t!=null?new Date(t):null,max:n!=null?new Date(n):null}};Ri.prototype.getEventProperties=function(t){var n=t.center?t.center.x:t.clientX,e=t.center?t.center.y:t.clientY,r=n-C.getAbsoluteLeft(this.dom.centerContainer),s=e-C.getAbsoluteTop(this.dom.centerContainer),a=this._toTime(r),o=Kh.customTimeFromTarget(t),l=C.getTarget(t),u=null;C.hasParent(l,this.timeAxis.dom.foreground)||this.timeAxis2&&C.hasParent(l,this.timeAxis2.dom.foreground)?u="axis":C.hasParent(l,this.linegraph.yAxisLeft.dom.frame)||C.hasParent(l,this.linegraph.yAxisRight.dom.frame)?u="data-axis":C.hasParent(l,this.linegraph.legendLeft.dom.frame)||C.hasParent(l,this.linegraph.legendRight.dom.frame)?u="legend":o!=null?u="custom-time":C.hasParent(l,this.currentTime.bar)?u="current-time":C.hasParent(l,this.dom.center)&&(u="background");var c=[],d=this.linegraph.yAxisLeft,f=this.linegraph.yAxisRight;return!d.hidden&&this.itemsData.length>0&&c.push(d.screenToValue(s)),!f.hidden&&this.itemsData.length>0&&c.push(f.screenToValue(s)),{event:t,customTime:o?o.options.id:null,what:u,pageX:t.srcEvent?t.srcEvent.pageX:t.pageX,pageY:t.srcEvent?t.srcEvent.pageY:t.pageY,x:r,y:s,time:a,value:c}};Ri.prototype._createConfigurator=function(){return new H1(this,this.dom.container,Eee)};kee=Gk();ir.locale(kee);Dee={Core:As,DateUtil:tQ,Range:my,stack:yJ,TimeStep:Au,components:{items:{Item:Js,BackgroundItem:os,BoxItem:L1,ClusterItem:Ty,PointItem:R1,RangeItem:rs},BackgroundGroup:_y,Component:bn,CurrentTime:wy,CustomTime:Kh,DataAxis:ng,DataScale:W1,GraphGroup:wn,Group:fh,ItemSet:Ru,Legend:Sr,LineGraph:Ue,TimeAxis:Lu}}});var z1=X(()=>{Y1()});var V1={};Cn(V1,{DOMutil:()=>x5,DataSet:()=>zs,DataView:()=>qD,Graph2d:()=>Ri,Hammer:()=>rr,Queue:()=>UD,Timeline:()=>vee,keycharm:()=>b1,moment:()=>ir,timeline:()=>Dee,util:()=>Rk});var U1=X(()=>{z1()});var K1={};Cn(K1,{TimelineModal:()=>oc});var jt,X1,j1,q1,oc,xy=X(()=>{jt=require("obsidian");ze();yd();Yp();X1=(U1(),_b(V1)),j1=X1.Timeline,q1=X1.DataSet,oc=class extends jt.Modal{constructor(e,r,s){var a,o;super(e);this.groupMode="none";this.stackEnabled=!0;this.density=50;this.palette=["#7C3AED","#2563EB","#059669","#CA8A04","#DC2626","#EA580C","#0EA5E9","#22C55E","#D946EF","#F59E0B"];this.plugin=r,this.events=s,this.modalEl.addClass("storyteller-list-modal"),this.modalEl.addClass("storyteller-timeline-modal"),this.groupMode=r.settings.defaultTimelineGroupMode||"none",this.stackEnabled=(a=r.settings.defaultTimelineStack)!=null?a:!0,this.density=(o=r.settings.defaultTimelineDensity)!=null?o:50}onOpen(){let{contentEl:e}=this;e.empty(),e.createEl("h2",{text:g("timeline")});let r=new jt.Setting(e).setName("").setClass("storyteller-timeline-toolbar").addDropdown(a=>(a.addOption("none","No grouping"),a.addOption("location","By location"),a.addOption("group","By group"),a.setValue(this.groupMode),a.onChange(o=>{this.groupMode=o,this.renderTimeline()}),a)).addButton(a=>a.setButtonText(g("fit")||"Fit").onClick(()=>{this.timeline&&this.timeline.fit()})).addButton(a=>a.setButtonText(g("decade")||"Decade").onClick(()=>this.zoomPresetYears(10))).addButton(a=>a.setButtonText(g("century")||"Century").onClick(()=>this.zoomPresetYears(100))).addButton(a=>a.setButtonText(g("today")||"Today").onClick(()=>{if(this.timeline){let o=this.plugin.getReferenceTodayDate();this.timeline.moveTo(o)}})).addToggle(a=>a.setTooltip("Stack items").setValue(this.stackEnabled).onChange(o=>{this.stackEnabled=o,this.renderTimeline()})).addButton(a=>a.setButtonText(g("copyRange")||"Copy range").onClick(()=>this.copyVisibleRange()));this.timelineContainer=e.createDiv(),this.timelineContainer.style.height="380px",this.timelineContainer.style.marginBottom="0.75rem",this.legendEl=e.createDiv("storyteller-timeline-legend"),this.detailsEl=e.createDiv("storyteller-timeline-details"),this.renderTimeline();let s=this.plugin.settings.defaultTimelineZoomPreset||"none";s==="fit"&&this.timeline?this.timeline.fit():s==="decade"?this.zoomPresetYears(10):s==="century"&&this.zoomPresetYears(100),new jt.Setting(e).addButton(a=>{let o=!!this.plugin.getActiveStory();a.setButtonText(g("createNewEvent")).setCta().onClick(()=>{if(!this.plugin.getActiveStory()){new jt.Notice(g("selectOrCreateStoryFirst"));return}this.close(),new hi(this.app,this.plugin,null,async l=>{await this.plugin.saveEvent(l),new jt.Notice(g("created",g("event"),l.name))}).open()}),o||a.setDisabled(!0).setTooltip("Select or create a story first.")})}renderTimeline(){var d;if(this.timeline){try{this.timeline.destroy()}catch(f){}this.timeline=null}let e=this.plugin.getReferenceTodayDate(),r=this.buildDatasets(e),s=r.items,a=r.groups;this.legendEl&&(this.legendEl.empty(),((d=this.plugin.settings.showTimelineLegend)==null||d)&&r.legend&&r.legend.length>0&&r.legend.forEach(p=>{let v=this.legendEl.createDiv("storyteller-legend-chip");v.createSpan("storyteller-legend-swatch").setAttr("style",`background:${p.color};border-color:${p.color}`),v.createSpan({text:p.label})}));let o=4+Math.round(this.density/6),l=24*60*60*1e3,u=365.25*l,c={stack:this.stackEnabled,stackSubgroups:!0,margin:{item:o,axis:20},zoomable:!0,zoomMin:l,zoomMax:1e3*u,multiselect:!0,orientation:"bottom"};if(this.timeline=a?new j1(this.timelineContainer,s,a,c):new j1(this.timelineContainer,s,c),this.timeline&&e)try{typeof this.timeline.setCurrentTime=="function"&&this.timeline.setCurrentTime(e)}catch(f){}this.timeline.on("doubleClick",f=>{if(f.item!=null){let p=f.item,v=this.events[p];this.close(),new hi(this.app,this.plugin,v,async y=>{await this.plugin.saveEvent(y),new jt.Notice(g("updated",g("event"),y.name))}).open()}}),this.timeline.on("select",f=>{if(!this.detailsEl)return;this.detailsEl.empty();let p=f.items&&f.items[0];if(p==null)return;let v=this.events[p],y=this.detailsEl.createDiv("storyteller-timeline-detail-row"),_=y.createDiv("storyteller-timeline-detail-info");if(_.createEl("strong",{text:v.name}),v.location&&_.createSpan({text:`  @ ${v.location}`}),v.dateTime){let x=Aa(v.dateTime),D=x.start?Wp(x.start,void 0,x.isBCE,x.originalYear):v.dateTime;_.createSpan({text:`  \u2022 ${D}`})}let S=y.createDiv("storyteller-timeline-detail-actions");new jt.ButtonComponent(S).setButtonText(g("editBtn")).onClick(()=>{this.close(),new hi(this.app,this.plugin,v,async x=>{await this.plugin.saveEvent(x),new jt.Notice(g("updated",g("event"),x.name))}).open()}),new jt.ButtonComponent(S).setButtonText(g("openNoteBtn")).onClick(()=>{if(!v.filePath)return;let x=this.app.vault.getAbstractFileByPath(v.filePath);x instanceof jt.TFile&&(this.app.workspace.getLeaf(!1).openFile(x),this.close())})})}buildDatasets(e){let r=new q1,s=[],a,o=new Map,l=new Map;if(this.groupMode!=="none")if(a=new q1,this.groupMode==="group"){this.plugin.getGroups().forEach((d,f)=>{let p=d.color||this.palette[f%this.palette.length];o.set(d.id,p),l.set(d.id,d.name),a.add({id:d.id,content:d.name}),s.push({key:d.id,label:d.name,color:p})});let c="#64748B";o.set("__ungrouped__",c),l.set("__ungrouped__","Ungrouped"),a.add({id:"__ungrouped__",content:"Ungrouped"}),s.push({key:"__ungrouped__",label:"Ungrouped",color:c})}else this.groupMode==="location"&&Array.from(new Set(this.events.map(c=>c.location||"Unspecified"))).forEach((c,d)=>{let f=c||"Unspecified",p=this.palette[d%this.palette.length];o.set(f,p),l.set(f,c||"Unspecified"),a.add({id:f,content:c||"Unspecified"}),s.push({key:f,label:c||"Unspecified",color:p})});return this.events.forEach((u,c)=>{let d=u.dateTime?Aa(u.dateTime,{referenceDate:e}):{error:"empty"},f=La(d.start),p=La(d.end);if(f==null){d.error==="unparsed"&&u.dateTime&&/\b\d+\s*(?:BC|bce|BCE|B\.C\.|b\.c\.|b\.c\.e\.)\b/i.test(u.dateTime)&&console.warn(`Failed to parse BCE date: ${u.dateTime} for event: ${u.name}`);return}let v,y;this.groupMode==="group"?(v=u.groups&&u.groups.length>0?u.groups[0]:"__ungrouped__",y=o.get(v)):this.groupMode==="location"&&(v=u.location||"Unspecified",y=o.get(v));let _=!!d.approximate,S=y?`background-color:${this.hexWithAlpha(y,.18)};border-color:${y};`:"";r.add({id:c,content:u.name,start:new Date(f),end:p!=null?new Date(p):void 0,title:this.makeTooltip(u,d),type:p!=null?"range":"box",className:_?"is-approx":void 0,group:v,style:S})}),{items:r,groups:a,legend:s}}makeTooltip(e,r){let s=[e.name],a=r!=null&&r.start?Wp(r.start,void 0,r.isBCE,r.originalYear):e.dateTime||"";return a&&s.push(a),e.location&&s.push(`@ ${e.location}`),e.description&&s.push(e.description.length>120?e.description.slice(0,120)+"\u2026":e.description),s.filter(Boolean).join(` 
`)}zoomPresetYears(e){if(!this.timeline)return;let r=this.plugin.getReferenceTodayDate().getTime(),s=e*365.25*24*60*60*1e3/2;this.timeline.setWindow(new Date(r-s),new Date(r+s))}copyVisibleRange(){var e;if(this.timeline)try{let r=this.timeline.getWindow(),s=`Timeline range: ${new Date(r.start).toISOString()} \u2014 ${new Date(r.end).toISOString()}`;(e=navigator.clipboard)==null||e.writeText(s),new jt.Notice(g("copyRange"))}catch(r){new jt.Notice("Could not copy timeline range")}}hexWithAlpha(e,r){let s=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(!s)return e;let a=parseInt(s[1],16),o=parseInt(s[2],16),l=parseInt(s[3],16);return`rgba(${a}, ${o}, ${l}, ${r})`}onClose(){this.contentEl.empty()}}});var Mo,cs,Qh=X(()=>{Mo=require("obsidian");ze();cs=class extends Mo.FuzzySuggestModal{constructor(e,r,s){super(e);this.events=[];this.plugin=r,this.onChoose=s,this.setPlaceholder(g("selectEventPh"))}getSuggestions(e){let r=this.getItems();if(!e)return r.map(a=>({item:a,match:{score:0,matches:[]}}));let s=(0,Mo.prepareFuzzySearch)(e);return r.map(a=>{let o=s(this.getItemText(a));return o?{item:a,match:o}:null}).filter(a=>!!a)}async onOpen(){super.onOpen();try{this.events=await this.plugin.listEvents()}catch(e){console.error("Storyteller Suite: Error fetching events for suggester:",e),new Mo.Notice(g("errorLoadingEvents")),this.events=[]}setTimeout(()=>{var e,r;if(this.inputEl){try{(e=this.setQuery)==null||e.call(this,"")}catch(s){}try{this.inputEl.dispatchEvent(new window.Event("input"))}catch(s){}}try{(r=this.onInputChanged)==null||r.call(this)}catch(s){}},0),setTimeout(()=>{var e,r;if(this.inputEl){try{(e=this.setQuery)==null||e.call(this,"")}catch(s){}try{this.inputEl.dispatchEvent(new window.Event("input"))}catch(s){}}try{(r=this.onInputChanged)==null||r.call(this)}catch(s){}},50)}getItems(){return this.events}getItemText(e){return e.name||"Unnamed event"}onChooseItem(e,r){this.onChoose(e)}}});var Ey={};Cn(Ey,{PlotItemSuggestModal:()=>lc});var Fo,lc,Jh=X(()=>{Fo=require("obsidian");ze();lc=class extends Fo.FuzzySuggestModal{constructor(e,r,s){super(e);this.items=[];this.plugin=r,this.onChoose=s,this.setPlaceholder(g("selectItemPh"))}async onOpen(){super.onOpen();try{this.items=await this.plugin.listPlotItems()}catch(e){console.error("Storyteller Suite: Error fetching items for suggester:",e),new Fo.Notice(g("errorLoadingItems")),this.items=[]}setTimeout(()=>{var e,r;if(this.inputEl){try{(e=this.setQuery)==null||e.call(this,"")}catch(s){}try{this.inputEl.dispatchEvent(new window.Event("input"))}catch(s){}}try{(r=this.onInputChanged)==null||r.call(this)}catch(s){}},0),setTimeout(()=>{var e,r;if(this.inputEl){try{(e=this.setQuery)==null||e.call(this,"")}catch(s){}try{this.inputEl.dispatchEvent(new window.Event("input"))}catch(s){}}try{(r=this.onInputChanged)==null||r.call(this)}catch(s){}},50)}getSuggestions(e){let r=this.getItems();if(!e)return r.map(a=>({item:a,match:{score:0,matches:[]}}));let s=(0,Fo.prepareFuzzySearch)(e);return r.map(a=>{let o=s(this.getItemText(a));return o?{item:a,match:o}:null}).filter(a=>!!a)}getItems(){return this.items}getItemText(e){return e.name||"Unnamed item"}onChooseItem(e,r){this.onChoose(e)}}});var ef={};Cn(ef,{ReferenceModal:()=>ky});var Er,ky,tf=X(()=>{Er=require("obsidian");ze();nn();Wn();rn();ky=class extends Er.Modal{constructor(e,r,s,a,o){super(e);this.plugin=r,this.isNew=s==null,this.refData=s?{...s}:{name:"",category:"Misc",tags:[]},this.refData.tags||(this.refData.tags=[]),this.onSubmit=a,this.onDelete=o,this.modalEl.addClass("storyteller-reference-modal")}onOpen(){let{contentEl:e}=this;e.empty(),e.createEl("h2",{text:this.isNew?g("createReference"):`${g("editReference")} ${this.refData.name}`}),new Er.Setting(e).setName(g("name")).addText(a=>a.setPlaceholder(g("title")).setValue(this.refData.name||"").onChange(o=>this.refData.name=o)),new Er.Setting(e).setName(g("category")||"Category").addText(a=>a.setPlaceholder(g("categoryPh")).setValue(this.refData.category||"").onChange(o=>this.refData.category=o||void 0)),new Er.Setting(e).setName(g("tags")||"Tags").setDesc(g("traitsPlaceholder")).addText(a=>a.setPlaceholder(g("tagsPh")).setValue((this.refData.tags||[]).join(", ")).onChange(o=>{let l=o.split(",").map(u=>u.trim()).filter(Boolean);this.refData.tags=l.length?l:void 0}));let r=null;new Er.Setting(e).setName(g("profileImage")).then(a=>{r=a.descEl.createEl("small",{text:g("currentValue",this.refData.profileImagePath||g("none"))}),a.descEl.addClass("storyteller-modal-setting-vertical")}).addButton(a=>a.setButtonText(g("select")).setTooltip(g("selectFromGallery")).onClick(()=>{new Ot(this.app,this.plugin,o=>{this.refData.profileImagePath=o==null?void 0:o.filePath,r&&r.setText(`Current: ${this.refData.profileImagePath||"None"}`)}).open()})).addButton(a=>a.setButtonText(g("upload")).setTooltip(g("uploadImage")).onClick(async()=>{let o=document.createElement("input");o.type="file",o.accept="image/*",o.onchange=async()=>{var u;let l=(u=o.files)==null?void 0:u[0];if(l)try{let c=this.plugin.settings.galleryUploadFolder;await this.plugin.ensureFolder(c);let d=Date.now(),f=l.name.replace(/[^\w\s.-]/g,"").replace(/\s+/g,"_"),p=`${d}_${f}`,v=`${c}/${p}`,y=await l.arrayBuffer();await this.app.vault.createBinary(v,y),this.refData.profileImagePath=v,r&&r.setText(`Current: ${v}`),new Er.Notice(g("imageUploaded",p))}catch(c){console.error("Upload failed",c),new Er.Notice(g("errorUploadingImage"))}},o.click()})).addButton(a=>a.setIcon("cross").setClass("mod-warning").setTooltip(g("clearImage")).onClick(()=>{this.refData.profileImagePath=void 0,r&&r.setText(`${g("current")}: ${g("none")}`)})),new Er.Setting(e).setName(g("content")||"Content").setClass("storyteller-modal-setting-vertical").addTextArea(a=>{a.setPlaceholder(g("content")).setValue(this.refData.content||"").onChange(o=>this.refData.content=o||void 0),a.inputEl.rows=12}),e.createEl("h3",{text:g("customFields")}),new Er.Setting(e).addButton(a=>a.setButtonText(g("addCustomField")).setIcon("plus").onClick(()=>{let o=new Set([...Rt("reference"),"customFields","filePath","id","sections"]),l=this.refData;l.customFields||(l.customFields={});let u=l.customFields,c=d=>{new at(this.app,{title:g("customFieldValueTitle"),label:g("valueForX",d),defaultValue:"",onSubmit:f=>{u[d]=f}}).open()};new at(this.app,{title:g("newCustomFieldTitle"),label:g("fieldName"),defaultValue:"",validator:d=>{let f=d.trim();return f?o.has(f)?g("thatNameIsReserved"):Object.keys(u).some(v=>v.toLowerCase()===f.toLowerCase())?g("fieldAlreadyExists"):null:g("fieldNameCannotBeEmpty")},onSubmit:d=>c(d.trim())}).open()}));let s=new Er.Setting(e).setClass("storyteller-modal-buttons");!this.isNew&&this.onDelete&&s.addButton(a=>a.setButtonText(g("delete")).setClass("mod-warning").onClick(async()=>{confirm(g("confirmDeleteReference",this.refData.name))&&(await this.onDelete(this.refData),this.close())})),s.controlEl.createDiv({cls:"storyteller-modal-button-spacer"}),s.addButton(a=>a.setButtonText(g("cancel")).onClick(()=>this.close())),s.addButton(a=>a.setButtonText(this.isNew?g("createReferenceBtn"):g("saveChanges")).setCta().onClick(async()=>{if(!this.refData.name||!this.refData.name.trim()){new Er.Notice(g("title"));return}this.refData.content=this.refData.content||"",await this.onSubmit(this.refData),this.close()}))}onClose(){this.contentEl.empty()}}});var rf,$o,Dy=X(()=>{rf=require("obsidian");ze();$o=class extends rf.FuzzySuggestModal{constructor(e,r,s){super(e);this.groups=[];this.plugin=r,this.onChoose=s,this.setPlaceholder(g("selectGroupPh"))}onOpen(){super.onOpen();try{this.groups=this.plugin.getGroups()}catch(e){this.groups=[]}setTimeout(()=>{var e,r,s;try{(e=this.setQuery)==null||e.call(this,"")}catch(a){}try{(r=this.inputEl)==null||r.dispatchEvent(new window.Event("input"))}catch(a){}try{(s=this.onInputChanged)==null||s.call(this)}catch(a){}},0)}getItems(){return this.groups}getItemText(e){return e.name||"Unnamed group"}getSuggestions(e){let r=this.getItems();if(!e)return r.map(a=>({item:a,match:{score:0,matches:[]}}));let s=(0,rf.prepareFuzzySearch)(e);return r.map(a=>{let o=s(this.getItemText(a));return o?{item:a,match:o}:null}).filter(a=>!!a)}onChooseItem(e,r){this.onChoose(e)}}});var nf={};Cn(nf,{ChapterModal:()=>Py});var $t,Py,sf=X(()=>{$t=require("obsidian");ze();Ha();Ya();Qh();nn();Dy();Wn();rn();Py=class extends $t.Modal{constructor(e,r,s,a,o){super(e);this.plugin=r,this.isNew=s==null,this.chapter=s?{...s}:{name:"",tags:[],linkedCharacters:[],linkedLocations:[],linkedEvents:[],linkedItems:[],linkedGroups:[]},this.onSubmit=a,this.onDelete=o,this.modalEl.addClass("storyteller-chapter-modal")}onOpen(){let{contentEl:e}=this;e.empty(),e.createEl("h2",{text:this.isNew?g("createNewChapter"):`${g("editChapter")} ${this.chapter.name}`}),new $t.Setting(e).setName(g("name")).addText(a=>a.setPlaceholder(g("chapterTitlePh")).setValue(this.chapter.name||"").onChange(o=>this.chapter.name=o)),new $t.Setting(e).setName(g("number")||"Number").setDesc(g("orderingNumber")||"Ordering number (optional)").addText(a=>a.setPlaceholder(g("numberEg")).setValue(this.chapter.number!=null?String(this.chapter.number):"").onChange(o=>{let l=parseInt(o,10);this.chapter.number=Number.isFinite(l)?l:void 0})),new $t.Setting(e).setName(g("tags")||"Tags").addText(a=>a.setPlaceholder(g("tagsPh")).setValue((this.chapter.tags||[]).join(", ")).onChange(o=>{let l=o.split(",").map(u=>u.trim()).filter(Boolean);this.chapter.tags=l.length?l:void 0}));let r=null;new $t.Setting(e).setName(g("profileImage")).then(a=>{r=a.descEl.createEl("small",{text:g("currentValue",this.chapter.profileImagePath||g("none"))}),a.descEl.addClass("storyteller-modal-setting-vertical")}).addButton(a=>a.setButtonText(g("select")).setTooltip(g("selectFromGallery")).onClick(()=>{new Ot(this.app,this.plugin,o=>{this.chapter.profileImagePath=o==null?void 0:o.filePath,r&&r.setText(`Current: ${this.chapter.profileImagePath||"None"}`)}).open()})).addButton(a=>a.setButtonText(g("upload")).setTooltip(g("uploadImage")).onClick(async()=>{let o=document.createElement("input");o.type="file",o.accept="image/*",o.onchange=async()=>{var u;let l=(u=o.files)==null?void 0:u[0];if(l)try{let c=this.plugin.settings.galleryUploadFolder;await this.plugin.ensureFolder(c);let d=Date.now(),f=l.name.replace(/[^\w\s.-]/g,"").replace(/\s+/g,"_"),p=`${d}_${f}`,v=`${c}/${p}`,y=await l.arrayBuffer();await this.app.vault.createBinary(v,y),this.chapter.profileImagePath=v,r&&r.setText(`Current: ${v}`),new $t.Notice(g("imageUploaded",p))}catch(c){console.error("Error uploading image:",c),new $t.Notice(g("errorUploadingImage"))}},o.click()})).addButton(a=>a.setIcon("cross").setClass("mod-warning").setTooltip(g("clearImage")).onClick(()=>{this.chapter.profileImagePath=void 0,r&&r.setText(`${g("current")}: ${g("none")}`)})),new $t.Setting(e).setName(g("summary")||"Summary").setClass("storyteller-modal-setting-vertical").addTextArea(a=>{a.setPlaceholder(g("briefChapterSummaryPh")).setValue(this.chapter.summary||"").onChange(o=>this.chapter.summary=o||void 0),a.inputEl.rows=10}),e.createEl("h3",{text:g("customFields")}),new $t.Setting(e).addButton(a=>a.setButtonText(g("addCustomField")).setIcon("plus").onClick(()=>{let o=new Set([...Rt("chapter"),"customFields","filePath","id","sections"]),l=this.chapter.customFields||(this.chapter.customFields={}),u=c=>{new at(this.app,{title:g("customFieldValueTitle"),label:g("valueForX",c),defaultValue:"",onSubmit:d=>{l[c]=d}}).open()};new at(this.app,{title:g("newCustomFieldTitle"),label:g("fieldName"),defaultValue:"",validator:c=>{let d=c.trim();return d?o.has(d)?g("thatNameIsReserved"):Object.keys(l).some(p=>p.toLowerCase()===d.toLowerCase())?g("fieldAlreadyExists"):null:g("fieldNameCannotBeEmpty")},onSubmit:c=>u(c.trim())}).open()})),e.createEl("h3",{text:g("links")}),new $t.Setting(e).setName(g("characters")).setDesc((this.chapter.linkedCharacters||[]).length?(this.chapter.linkedCharacters||[]).join(", "):g("none")).addButton(a=>a.setButtonText(g("add")).onClick(()=>{new Kr(this.app,this.plugin,o=>{this.chapter.linkedCharacters||(this.chapter.linkedCharacters=[]),this.chapter.linkedCharacters.includes(o.name)||this.chapter.linkedCharacters.push(o.name),this.onOpen()}).open()})).addButton(a=>a.setButtonText(g("clear")).onClick(()=>{this.chapter.linkedCharacters=[],this.onOpen()})),new $t.Setting(e).setName(g("locations")).setDesc((this.chapter.linkedLocations||[]).length?(this.chapter.linkedLocations||[]).join(", "):g("none")).addButton(a=>a.setButtonText(g("add")).onClick(()=>{new Zr(this.app,this.plugin,o=>{o&&(this.chapter.linkedLocations||(this.chapter.linkedLocations=[]),this.chapter.linkedLocations.includes(o.name)||this.chapter.linkedLocations.push(o.name),this.onOpen())}).open()})).addButton(a=>a.setButtonText(g("clear")).onClick(()=>{this.chapter.linkedLocations=[],this.onOpen()})),new $t.Setting(e).setName(g("events")).setDesc((this.chapter.linkedEvents||[]).length?(this.chapter.linkedEvents||[]).join(", "):g("none")).addButton(a=>a.setButtonText(g("add")).onClick(()=>{new cs(this.app,this.plugin,o=>{this.chapter.linkedEvents||(this.chapter.linkedEvents=[]),this.chapter.linkedEvents.includes(o.name)||this.chapter.linkedEvents.push(o.name),this.onOpen()}).open()})).addButton(a=>a.setButtonText(g("clear")).onClick(()=>{this.chapter.linkedEvents=[],this.onOpen()})),new $t.Setting(e).setName(g("items")).setDesc((this.chapter.linkedItems||[]).length?(this.chapter.linkedItems||[]).join(", "):g("none")).addButton(a=>a.setButtonText(g("add")).onClick(async()=>{let{PlotItemSuggestModal:o}=await Promise.resolve().then(()=>(Jh(),Ey));new o(this.app,this.plugin,l=>{this.chapter.linkedItems||(this.chapter.linkedItems=[]),this.chapter.linkedItems.includes(l.name)||this.chapter.linkedItems.push(l.name),this.onOpen()}).open()})).addButton(a=>a.setButtonText(g("clear")).onClick(()=>{this.chapter.linkedItems=[],this.onOpen()})),new $t.Setting(e).setName(g("groups")).setDesc((this.chapter.linkedGroups||[]).length?(this.chapter.linkedGroups||[]).join(", "):g("none")).addButton(a=>a.setButtonText(g("add")).onClick(()=>{new $o(this.app,this.plugin,o=>{this.chapter.linkedGroups||(this.chapter.linkedGroups=[]),this.chapter.linkedGroups.includes(o.id)||this.chapter.linkedGroups.push(o.id),this.onOpen()}).open()})).addButton(a=>a.setButtonText(g("clear")).onClick(()=>{this.chapter.linkedGroups=[],this.onOpen()}));let s=new $t.Setting(e).setClass("storyteller-modal-buttons");!this.isNew&&this.onDelete&&s.addButton(a=>a.setButtonText(g("delete")).setClass("mod-warning").onClick(async()=>{this.chapter.filePath&&confirm(g("confirmDeleteChapter",this.chapter.name))&&(await this.onDelete(this.chapter),this.close())})),s.controlEl.createDiv({cls:"storyteller-modal-button-spacer"}),s.addButton(a=>a.setButtonText(g("cancel")).onClick(()=>this.close())),s.addButton(a=>a.setButtonText(this.isNew?g("createChapterBtn"):g("saveChanges")).setCta().onClick(async()=>{if(!this.chapter.name||!this.chapter.name.trim()){new $t.Notice(g("chapterNameRequired"));return}this.chapter.summary=this.chapter.summary||"",await this.onSubmit(this.chapter),this.close()}))}onClose(){this.contentEl.empty()}}});var af={};Cn(af,{SceneModal:()=>Iy});var St,Iy,of=X(()=>{St=require("obsidian");ze();Ha();Ya();Qh();nn();Dy();Iy=class extends St.Modal{constructor(e,r,s,a,o){super(e);this.plugin=r,this.isNew=s==null,this.scene=s?{...s}:{name:"",status:"Draft",tags:[],linkedCharacters:[],linkedLocations:[],linkedEvents:[],linkedItems:[],linkedGroups:[]},this.onSubmit=a,this.onDelete=o,this.modalEl.addClass("storyteller-scene-modal")}onOpen(){let{contentEl:e}=this;e.empty(),e.createEl("h2",{text:this.isNew?g("createNewScene"):`${g("editScene")} ${this.scene.name}`}),new St.Setting(e).setName(g("name")).addText(a=>a.setPlaceholder(g("sceneTitlePh")).setValue(this.scene.name||"").onChange(o=>this.scene.name=o)),new St.Setting(e).setName(g("chapter")).setDesc(this.scene.chapterName||g("none")).addDropdown(async a=>{a.addOption("","Unassigned");let o=await this.plugin.listChapters();o.forEach(l=>a.addOption(l.id||l.name,l.number!=null?`${l.number}. ${l.name}`:l.name)),a.setValue(this.scene.chapterId||""),a.onChange(l=>{if(!l)this.scene.chapterId=void 0,this.scene.chapterName=void 0;else{let u=o.find(c=>c.id&&c.id===l||!c.id&&c.name===l);this.scene.chapterId=u==null?void 0:u.id,this.scene.chapterName=u==null?void 0:u.name}this.onOpen()})}),new St.Setting(e).setName(g("status")).addDropdown(a=>a.addOptions({Draft:"Draft",Outline:"Outline",WIP:"WIP",Revised:"Revised",Final:"Final"}).setValue(this.scene.status||"Draft").onChange(o=>this.scene.status=o)),new St.Setting(e).setName(g("priorityInChapter")).addText(a=>a.setPlaceholder(g("priorityEg")).setValue(this.scene.priority!=null?String(this.scene.priority):"").onChange(o=>{let l=parseInt(o,10);this.scene.priority=Number.isFinite(l)?l:void 0})),new St.Setting(e).setName(g("tags")||"Tags").addText(a=>a.setPlaceholder(g("tagsPh")).setValue((this.scene.tags||[]).join(", ")).onChange(o=>{let l=o.split(",").map(u=>u.trim()).filter(Boolean);this.scene.tags=l.length?l:void 0}));let r=null;new St.Setting(e).setName(g("profileImage")).then(a=>{r=a.descEl.createEl("small",{text:g("currentValue",this.scene.profileImagePath||g("none"))}),a.descEl.addClass("storyteller-modal-setting-vertical")}).addButton(a=>a.setButtonText(g("select")).setTooltip("Select from gallery").onClick(()=>{new Ot(this.app,this.plugin,o=>{this.scene.profileImagePath=o==null?void 0:o.filePath,r&&r.setText(`Current: ${this.scene.profileImagePath||"None"}`)}).open()})).addButton(a=>a.setButtonText(g("upload")).setTooltip(g("uploadImage")).onClick(async()=>{let o=document.createElement("input");o.type="file",o.accept="image/*",o.onchange=async()=>{var u;let l=(u=o.files)==null?void 0:u[0];if(l)try{let c=this.plugin.settings.galleryUploadFolder;await this.plugin.ensureFolder(c);let d=Date.now(),f=l.name.replace(/[^\w\s.-]/g,"").replace(/\s+/g,"_"),p=`${d}_${f}`,v=`${c}/${p}`,y=await l.arrayBuffer();await this.app.vault.createBinary(v,y),this.scene.profileImagePath=v,r&&r.setText(`Current: ${v}`),new St.Notice(g("imageUploaded",p))}catch(c){console.error("Error uploading image:",c),new St.Notice(g("errorUploadingImage"))}},o.click()})).addButton(a=>a.setIcon("cross").setClass("mod-warning").setTooltip("Clear image").onClick(()=>{this.scene.profileImagePath=void 0,r&&r.setText("Current: None")})),new St.Setting(e).setName(g("content")||"Content").setClass("storyteller-modal-setting-vertical").addTextArea(a=>{a.setPlaceholder(g("writeScenePh")).setValue(this.scene.content||"").onChange(o=>this.scene.content=o||void 0),a.inputEl.rows=10}),new St.Setting(e).setName(g("beatSheetOneLine")).setClass("storyteller-modal-setting-vertical").addTextArea(a=>{let o=(this.scene.beats||[]).join(`
`);a.setPlaceholder(g("beatSheetPh")).setValue(o).onChange(l=>{let u=l.split(`
`).map(c=>c.trim()).filter(Boolean);this.scene.beats=u.length?u:void 0}),a.inputEl.rows=6}),e.createEl("h3",{text:g("links")}),new St.Setting(e).setName(g("characters")).setDesc((this.scene.linkedCharacters||[]).length?(this.scene.linkedCharacters||[]).join(", "):g("none")).addButton(a=>a.setButtonText(g("add")).onClick(()=>{new Kr(this.app,this.plugin,o=>{this.scene.linkedCharacters||(this.scene.linkedCharacters=[]),this.scene.linkedCharacters.includes(o.name)||this.scene.linkedCharacters.push(o.name),this.onOpen()}).open()})).addButton(a=>a.setButtonText(g("clear")).onClick(()=>{this.scene.linkedCharacters=[],this.onOpen()})),new St.Setting(e).setName(g("locations")).setDesc((this.scene.linkedLocations||[]).length?(this.scene.linkedLocations||[]).join(", "):g("none")).addButton(a=>a.setButtonText(g("add")).onClick(()=>{new Zr(this.app,this.plugin,o=>{o&&(this.scene.linkedLocations||(this.scene.linkedLocations=[]),this.scene.linkedLocations.includes(o.name)||this.scene.linkedLocations.push(o.name),this.onOpen())}).open()})).addButton(a=>a.setButtonText(g("clear")).onClick(()=>{this.scene.linkedLocations=[],this.onOpen()})),new St.Setting(e).setName(g("events")).setDesc((this.scene.linkedEvents||[]).length?(this.scene.linkedEvents||[]).join(", "):g("none")).addButton(a=>a.setButtonText(g("add")).onClick(()=>{new cs(this.app,this.plugin,o=>{this.scene.linkedEvents||(this.scene.linkedEvents=[]),this.scene.linkedEvents.includes(o.name)||this.scene.linkedEvents.push(o.name),this.onOpen()}).open()})).addButton(a=>a.setButtonText(g("clear")).onClick(()=>{this.scene.linkedEvents=[],this.onOpen()})),new St.Setting(e).setName(g("items")).setDesc((this.scene.linkedItems||[]).length?(this.scene.linkedItems||[]).join(", "):g("none")).addButton(a=>a.setButtonText(g("add")).onClick(async()=>{let{PlotItemSuggestModal:o}=await Promise.resolve().then(()=>(Jh(),Ey));new o(this.app,this.plugin,l=>{this.scene.linkedItems||(this.scene.linkedItems=[]),this.scene.linkedItems.includes(l.name)||this.scene.linkedItems.push(l.name),this.onOpen()}).open()})).addButton(a=>a.setButtonText(g("clear")).onClick(()=>{this.scene.linkedItems=[],this.onOpen()})),new St.Setting(e).setName(g("groups")).setDesc((this.scene.linkedGroups||[]).length?(this.scene.linkedGroups||[]).join(", "):g("none")).addButton(a=>a.setButtonText(g("add")).onClick(()=>{new $o(this.app,this.plugin,o=>{this.scene.linkedGroups||(this.scene.linkedGroups=[]),this.scene.linkedGroups.includes(o.id)||this.scene.linkedGroups.push(o.id),this.onOpen()}).open()})).addButton(a=>a.setButtonText(g("clear")).onClick(()=>{this.scene.linkedGroups=[],this.onOpen()}));let s=new St.Setting(e).setClass("storyteller-modal-buttons");!this.isNew&&this.onDelete&&s.addButton(a=>a.setButtonText(g("delete")).setClass("mod-warning").onClick(async()=>{this.scene.filePath&&confirm(g("confirmDeleteScene",this.scene.name))&&(await this.onDelete(this.scene),this.close())})),s.controlEl.createDiv({cls:"storyteller-modal-button-spacer"}),s.addButton(a=>a.setButtonText(g("cancel")).onClick(()=>this.close())),s.addButton(a=>a.setButtonText(this.isNew?g("createSceneBtn"):g("saveChanges")).setCta().onClick(async()=>{if(!this.scene.name||!this.scene.name.trim()){new St.Notice(g("sceneNameRequired"));return}this.scene.content=this.scene.content||"",this.scene.beats=this.scene.beats||[],await this.onSubmit(this.scene),this.close()}))}onClose(){this.contentEl.empty()}}});var Pee={};Cn(Pee,{default:()=>ff});module.exports=_b(Pee);var F=require("obsidian");Yp();rn();ze();var dd=require("obsidian"),hd=class{constructor(n,e){this.opts=n;this.getActiveStory=e}resolveTemplatePath(n){var u,c;let e=this.getActiveStory();if((n.includes("{storyName}")||n.includes("{storySlug}")||n.includes("{storyId}"))&&!e)throw new Error("No active story selected for template resolution.");let s=(u=e==null?void 0:e.name)!=null?u:"",a=(c=e==null?void 0:e.id)!=null?c:"",o=this.slugifyFolderName(s),l=n.split("{storyName}").join(s);return l=l.split("{storyId}").join(a),l=l.split("{storySlug}").join(o),(0,dd.normalizePath)(l)}sanitizeBaseFolderPath(n){if(!n)return"";let e=n.trim();if(e==="/"||e==="\\")return"";let r=e.replace(/^[\\/]+/,"").replace(/[\\/]+$/,"");return r?(0,dd.normalizePath)(r):""}slugifyFolderName(n){return n?n.replace(/[\\/:"*?<>|#^\[\]{}]+/g,"").trim().replace(/\s+/g," ").replace(/\s/g,"_"):""}getEntityFolder(n){let e=this.opts;if(e.enableCustomEntityFolders){let a=e.storyRootFolderTemplate?this.resolveTemplatePath(e.storyRootFolderTemplate):"",o=(l,u)=>{if(l&&l.trim())return this.resolveTemplatePath(l);if(a&&u)return(0,dd.normalizePath)(`${a}/${u}`)};if(n==="character"){let l=o(e.characterFolderPath,"Characters");if(l)return l}if(n==="location"){let l=o(e.locationFolderPath,"Locations");if(l)return l}if(n==="event"){let l=o(e.eventFolderPath,"Events");if(l)return l}if(n==="item"){let l=o(e.itemFolderPath,"Items");if(l)return l}if(n==="reference"){let l=o(e.referenceFolderPath,"References");if(l)return l}if(n==="chapter"){let l=o(e.chapterFolderPath,"Chapters");if(l)return l}if(n==="scene"){let l=o(e.sceneFolderPath,"Scenes");if(l)return l}}if(e.enableOneStoryMode){let a=this.sanitizeBaseFolderPath(e.oneStoryBaseFolder||"StorytellerSuite"),o=a?`${a}/`:"";if(n==="character")return`${o}Characters`;if(n==="location")return`${o}Locations`;if(n==="event")return`${o}Events`;if(n==="item")return`${o}Items`;if(n==="reference")return`${o}References`;if(n==="chapter")return`${o}Chapters`;if(n==="scene")return`${o}Scenes`}let r=this.getActiveStory();if(!r)throw new Error("No active story selected.");let s=`StorytellerSuite/Stories/${r.name}`;if(n==="character")return`${s}/Characters`;if(n==="location")return`${s}/Locations`;if(n==="event")return`${s}/Events`;if(n==="item")return`${s}/Items`;if(n==="reference")return`${s}/References`;if(n==="chapter")return`${s}/Chapters`;if(n==="scene")return`${s}/Scenes`;throw new Error("Unknown entity type")}tryGetEntityFolder(n){try{return{path:this.getEntityFolder(n)}}catch(e){return{error:e!=null&&e.message?String(e.message):"Unknown error resolving folder"}}}resolveAll(){let n=["character","location","event","item","reference","chapter","scene"],e={};for(let r of n)e[r]=this.tryGetEntityFolder(r);return e}};Wn();var pd=require("obsidian");ze();var fd=class extends pd.Modal{constructor(e,r){var s;super(e);this.titleText=r.title,this.bodyText=r.body,this.confirmText=(s=r.confirmText)!=null?s:g("confirm"),this.onConfirm=r.onConfirm}onOpen(){let{contentEl:e}=this;e.empty(),e.createEl("h3",{text:this.titleText}),e.createEl("p",{text:this.bodyText});let r=new pd.Setting(e);r.addButton(s=>s.setButtonText(this.confirmText).setCta().onClick(()=>{this.onConfirm(),this.close()})),r.addButton(s=>s.setButtonText(g("cancel")).onClick(()=>this.close()))}};var mt=require("obsidian");rn();ze();nn();var Ba=require("obsidian");var iu=require("obsidian"),fe=class{static isMobile(){return iu.Platform.isAndroidApp||iu.Platform.isIosApp}static isIOS(){return iu.Platform.isIosApp}static isAndroid(){return iu.Platform.isAndroidApp}static isDesktop(){return!this.isMobile()}static getTouchTargetSize(){return this.isMobile()?44:32}static getModalPadding(){return this.isMobile()?"0.5rem":"1rem"}static getFontScaling(){return this.isMobile()?1.1:1}static shouldUseFullScreenModals(){return this.isMobile()}static getSearchDebounceDelay(){return this.isMobile()?300:150}static getMaxDisplayItems(){return this.isMobile()?50:100}static getMobileCssClasses(){let n=[];return this.isMobile()&&n.push("is-mobile"),this.isIOS()&&n.push("is-ios"),this.isAndroid()&&n.push("is-android"),this.isDesktop()&&n.push("is-desktop"),n}static isTablet(){if(!this.isMobile())return!1;let n=window.innerWidth*(window.devicePixelRatio||1),e=window.innerHeight*(window.devicePixelRatio||1),r=Math.min(n,e),s=Math.max(n,e),a=window.devicePixelRatio||1,l=768*Math.max(1,a*.8),u=r>l,c=s/r,d=c>=1.2&&c<=1.8,f=window.innerWidth,p=window.innerHeight,y=Math.min(f,p)>=600;return u&&(d||y)}static getGridColumns(){return this.isMobile()?this.isTablet()?2:1:3}static shouldUseSimplifiedUI(){return this.isMobile()&&!this.isTablet()}static getAnimationDuration(){return this.isMobile()?200:300}static shouldUseHapticFeedback(){return this.isMobile()}static allowRemoteImages(n){return!!n()}};var Ra=class extends Ba.Modal{constructor(e){super(e);this.isFullScreen=!1;this.setupMobileAdaptations()}setupMobileAdaptations(){fe.getMobileCssClasses().forEach(r=>{this.modalEl.addClass(r)}),this.modalEl.addClass("storyteller-responsive-modal"),fe.shouldUseFullScreenModals()&&(this.isFullScreen=!0,this.modalEl.addClass("mobile-fullscreen")),fe.isMobile()&&this.modalEl.addClass("mobile-optimized"),fe.isTablet()&&this.modalEl.addClass("tablet-optimized")}onOpen(){this.setupMobileLayout(),super.onOpen()}setupMobileLayout(){let{contentEl:e}=this;fe.isMobile()&&(e.style.padding=fe.getModalPadding()),fe.isMobile()&&(e.style.overflowY="auto"),fe.isIOS()&&(e.style.paddingTop="env(safe-area-inset-top, 0)",e.style.paddingBottom="env(safe-area-inset-bottom, 0)")}createMobileSetting(e,r,s){let a=new Ba.Setting(e).setName(r).setDesc(s);if(fe.isMobile()){a.settingEl.addClass("mobile-setting");let o=fe.getTouchTargetSize();a.settingEl.style.minHeight=`${o}px`}return a}createMobileButton(e,r,s=!1){let a=new Ba.ButtonComponent(document.createElement("button")).setButtonText(e).onClick(r);if(fe.isMobile()){let o=fe.getTouchTargetSize();a.buttonEl.style.minHeight=`${o}px`,a.buttonEl.style.minWidth=`${o}px`,a.buttonEl.style.fontSize=`${1.1*fe.getFontScaling()}rem`,a.buttonEl.addClass("mobile-button"),s&&a.buttonEl.addClass("mobile-button-primary")}return a}createMobileTextArea(e,r,s,a){let o=e.createEl("textarea",{attr:{placeholder:r},value:s});return fe.isMobile()&&(o.addClass("mobile-textarea"),o.style.fontSize=`${1.1*fe.getFontScaling()}rem`,o.style.minHeight="120px",o.style.padding="12px",o.setAttribute("autocapitalize","sentences"),o.setAttribute("spellcheck","true")),o.addEventListener("input",()=>a(o.value)),o}createMobileInput(e,r,s,a,o){let l=e.createEl("input",{type:r,attr:{placeholder:s},value:a});if(fe.isMobile()){l.addClass("mobile-input");let u=fe.getTouchTargetSize();l.style.minHeight=`${u}px`,l.style.fontSize=`${1.1*fe.getFontScaling()}rem`,l.style.padding="12px"}return l.addEventListener("input",()=>o(l.value)),l}createMobileButtonBar(e){let r=this.contentEl.createEl("div",{cls:"mobile-button-bar"});return fe.isMobile()&&!fe.isTablet()?r.addClass("vertical-button-bar"):r.addClass("horizontal-button-bar"),e.forEach(s=>{let a=this.createMobileButton(s.text,s.callback,s.isPrimary);s.isDestructive&&a.buttonEl.addClass("mod-warning"),r.appendChild(a.buttonEl)}),r}triggerHapticFeedback(e="light"){if(fe.shouldUseHapticFeedback()&&"vibrate"in navigator&&typeof navigator.vibrate=="function"){let r=e==="light"?10:e==="medium"?20:50;navigator.vibrate(r)}}handleMobileKeyboard(e){if(fe.isMobile()&&e.key==="Enter"){if(e.target instanceof HTMLTextAreaElement)return;this.triggerHapticFeedback("light")}}showMobileLoading(e){e?this.contentEl.addClass("mobile-loading"):this.contentEl.removeClass("mobile-loading")}};Wn();var Pi=class extends Ra{constructor(e,r,s,a,o){super(e);this._groupRefreshInterval=null;this.groupSelectorContainer=null;this.workingCustomFields={};this.plugin=r,this.isNew=s===null;let l=s?{...s}:{name:"",description:"",backstory:"",profileImagePath:void 0,relationships:[],associatedLocations:[],associatedEvents:[],customFields:{},filePath:void 0};l.customFields||(l.customFields={}),l.relationships||(l.relationships=[]),s&&s.filePath&&(l.filePath=s.filePath),this.character=l,this.onSubmit=a,this.onDelete=o,this.modalEl.addClass("storyteller-character-modal")}onOpen(){super.onOpen();let{contentEl:e}=this;e.empty(),e.createEl("h2",{text:this.isNew?g("createNewCharacter"):`${g("edit")} ${this.character.name}`}),new mt.Setting(e).setName(g("name")).setDesc(g("name")).addText(o=>o.setPlaceholder(g("enterCharacterName")).setValue(this.character.name).onChange(l=>{this.character.name=l}).inputEl.addClass("storyteller-modal-input-large"));let r;new mt.Setting(e).setName(g("profileImage")).setDesc("").then(o=>{r=o.descEl.createEl("small",{text:g("currentValue",this.character.profileImagePath||g("none"))}),o.descEl.addClass("storyteller-modal-setting-vertical")}).addButton(o=>o.setButtonText(g("select")).setTooltip(g("selectFromGallery")).onClick(()=>{new Ot(this.app,this.plugin,l=>{let u=l?l.filePath:"";this.character.profileImagePath=u||void 0,r.setText(`Current: ${this.character.profileImagePath||"None"}`)}).open()})).addButton(o=>o.setButtonText(g("upload")).setTooltip(g("uploadImage")).onClick(async()=>{let l=document.createElement("input");l.type="file",l.accept="image/*",l.onchange=async()=>{var c;let u=(c=l.files)==null?void 0:c[0];if(u)try{await this.plugin.ensureFolder(this.plugin.settings.galleryUploadFolder);let d=Date.now(),f=u.name.replace(/[^\w\s.-]/g,"").replace(/\s+/g,"_"),p=`${d}_${f}`,v=`${this.plugin.settings.galleryUploadFolder}/${p}`,y=await u.arrayBuffer();await this.app.vault.createBinary(v,y),this.character.profileImagePath=v,r.setText(`Current: ${v}`),new mt.Notice(g("imageUploaded",p))}catch(d){console.error("Error uploading image:",d),new mt.Notice(g("errorUploadingImage"))}},l.click()})).addButton(o=>o.setIcon("cross").setTooltip(g("clearImage")).setClass("mod-warning").onClick(()=>{this.character.profileImagePath=void 0,r.setText(`Current: ${this.character.profileImagePath||"None"}`)})),new mt.Setting(e).setName(g("description")).setClass("storyteller-modal-setting-vertical").addTextArea(o=>{o.setPlaceholder(g("characterDescriptionPh")).setValue(this.character.description||"").onChange(l=>{this.character.description=l}),o.inputEl.rows=4,o.inputEl.addClass("storyteller-modal-textarea")}),new mt.Setting(e).setName(g("traits")).setDesc(g("traitsPlaceholder")).addText(o=>o.setPlaceholder(g("traitsPlaceholder")).setValue((this.character.traits||[]).join(", ")).onChange(l=>{this.character.traits=l.split(",").map(u=>u.trim()).filter(u=>u.length>0)})),new mt.Setting(e).setName(g("backstory")).setClass("storyteller-modal-setting-vertical").addTextArea(o=>{o.setPlaceholder(g("characterHistoryPh")).setValue(this.character.backstory||"").onChange(l=>{this.character.backstory=l}),o.inputEl.rows=6,o.inputEl.addClass("storyteller-modal-textarea")}),new mt.Setting(e).setName(g("status")).setDesc(g("statusPlaceholderCharacter")).addText(o=>o.setValue(this.character.status||"").onChange(l=>{this.character.status=l||void 0})),new mt.Setting(e).setName(g("affiliation")).setDesc(g("affiliation")).addText(o=>o.setValue(this.character.affiliation||"").onChange(l=>{this.character.affiliation=l||void 0})),this.groupSelectorContainer=e.createDiv("storyteller-group-selector-container"),this.renderGroupSelector(this.groupSelectorContainer),this.workingCustomFields={...this.character.customFields||{}},e.createEl("h3",{text:g("customFields")});let s=e.createDiv("storyteller-custom-fields-container");this._groupRefreshInterval=window.setInterval(()=>{this.modalEl.isShown()&&this.groupSelectorContainer&&this.renderGroupSelector(this.groupSelectorContainer)},2e3),new mt.Setting(e).addButton(o=>o.setButtonText(g("addCustomField")).setIcon("plus").onClick(()=>{this.workingCustomFields||(this.workingCustomFields={});let l=this.workingCustomFields,u=new Set([...Rt("character"),"customFields","filePath","id","sections"]),c=d=>{new at(this.app,{title:g("customFieldValueTitle"),label:g("valueForX",d),defaultValue:"",onSubmit:f=>{l[d]=f}}).open()};new at(this.app,{title:g("newCustomFieldTitle"),label:g("fieldName"),defaultValue:"",validator:d=>{let f=d.trim();return f?u.has(f)?g("thatNameIsReserved"):Object.keys(l).some(v=>v.toLowerCase()===f.toLowerCase())?g("fieldAlreadyExists"):null:g("fieldNameCannotBeEmpty")},onSubmit:d=>c(d.trim())}).open()}));let a=new mt.Setting(e).setClass("storyteller-modal-buttons");!this.isNew&&this.onDelete&&a.addButton(o=>o.setButtonText(g("deleteCharacter")).setClass("mod-warning").onClick(async()=>{if(confirm(g("confirmDeleteCharacter",this.character.name))&&this.onDelete)try{await this.onDelete(this.character),new mt.Notice(g("characterDeleted",this.character.name)),this.close()}catch(l){console.error("Error deleting character:",l),new mt.Notice(g("failedToDelete",g("character")))}})),a.controlEl.createDiv({cls:"storyteller-modal-button-spacer"}),a.addButton(o=>o.setButtonText(g("cancel")).onClick(()=>{this.close()})),a.addButton(o=>o.setButtonText(this.isNew?g("createCharacter"):g("saveChanges")).setCta().onClick(async()=>{var l;if(!((l=this.character.name)!=null&&l.trim())){new mt.Notice(g("characterNameRequired"));return}try{this.character.customFields=this.workingCustomFields,await this.onSubmit(this.character),this.close()}catch(u){console.error("Error saving character:",u),new mt.Notice(g("failedToSave",g("character")))}}))}renderList(e,r,s){if(e.empty(),!r||r.length===0){e.createEl("span",{text:g("none"),cls:"storyteller-modal-list-empty"});return}r.forEach((a,o)=>{let l=a,u=e.createDiv("storyteller-modal-list-item");u.createSpan({text:l}),new mt.ButtonComponent(u).setClass("storyteller-modal-list-remove").setTooltip(g("removeX",l)).setIcon("cross").onClick(()=>{var c;s==="relationship"&&((c=this.character.relationships)==null||c.splice(o,1)),this.renderList(e,r,s)})})}renderCustomFields(e,r){e.empty(),r=r||{};let s=Object.keys(r);if(s.length===0){e.createEl("p",{text:g("noCustomFields"),cls:"storyteller-modal-list-empty"});return}let a=new Set([...Rt("character"),"customFields","filePath","id","sections"]);s.forEach(o=>{let l=o;new mt.Setting(e).addText(c=>c.setValue(l).setPlaceholder(g("fieldName")).onChange(d=>{let f=d.trim(),p=!Object.keys(r).some(y=>y.toLowerCase()===f.toLowerCase()),v=a.has(f);f&&f!==l&&p&&!v?(r[f]=r[l],delete r[l],l=f):f!==l&&(c.setValue(l),new mt.Notice(g("fieldNameCannotBeEmpty")))})).addText(c=>{var d;return c.setValue(((d=r[l])==null?void 0:d.toString())||"").setPlaceholder(g("fieldValue")).onChange(f=>{r[l]=f})}).addButton(c=>c.setIcon("trash").setTooltip(g("removeFieldX",l)).setClass("mod-warning").onClick(()=>{delete r[l],this.renderCustomFields(e,r)})).controlEl.addClass("storyteller-custom-field-row")})}renderGroupSelector(e){e.empty();let r=this.plugin.getGroups(),s=async()=>{let a=this.character.id||this.character.name,l=(await this.plugin.listCharacters()).find(c=>(c.id||c.name)===a),u=new Set((l==null?void 0:l.groups)||this.character.groups||[]);return this.character.groups=Array.from(u),u};(async()=>{let a=await s();if(new mt.Setting(e).setName(g("groups")).setDesc(g("groupsHelpCharacter")).addDropdown(o=>{o.addOption("",g("selectGroupPlaceholder")),r.forEach(l=>{o.addOption(l.id,l.name)}),o.setValue(""),o.onChange(async l=>{l&&!a.has(l)&&(a.add(l),this.character.groups=Array.from(a),await this.plugin.addMemberToGroup(l,"character",this.character.id||this.character.name),this.renderGroupSelector(e))})}),a.size>0){let o=e.createDiv("selected-groups");r.filter(l=>a.has(l.id)).forEach(l=>{let c=o.createSpan({text:l.name,cls:"group-tag"}).createSpan({text:" \xD7",cls:"remove-group-btn"});c.onclick=async()=>{a.delete(l.id),this.character.groups=Array.from(a),await this.plugin.removeMemberFromGroup(l.id,"character",this.character.id||this.character.name),this.renderGroupSelector(e)}})}})()}onClose(){this.contentEl.empty(),this._groupRefreshInterval&&clearInterval(this._groupRefreshInterval)}};var Mt=require("obsidian");ze();var vd=class extends Mt.Modal{constructor(e,r,s){super(e);this.plugin=r,this.characters=s,this.modalEl.addClass("storyteller-list-modal")}onOpen(){let{contentEl:e}=this;e.empty(),e.createEl("h2",{text:g("characters")}),this.listContainer=e.createDiv("storyteller-list-container");let r=new Mt.Setting(e).setName(g("search")).addText(s=>{s.setPlaceholder(g("searchX",g("characters"))).onChange(a=>this.renderList(a.toLowerCase(),this.listContainer))});this.renderList("",this.listContainer),new Mt.Setting(e).addButton(s=>{let a=!!this.plugin.getActiveStory();s.setButtonText(g("createCharacter")).setCta().onClick(()=>{if(!this.plugin.getActiveStory()){new Mt.Notice(g("selectOrCreateStoryFirst"));return}this.close(),new Pi(this.app,this.plugin,null,async o=>{await this.plugin.saveCharacter(o),new Mt.Notice(g("created",g("character"),o.name)),new Mt.Notice(g("noteCreatedWithSections"))}).open()}),a||s.setDisabled(!0).setTooltip(g("selectOrCreateStoryFirst"))})}renderList(e,r){r.empty();let s=this.characters.filter(a=>a.name.toLowerCase().includes(e)||(a.description||"").toLowerCase().includes(e)||(a.traits||[]).join(" ").toLowerCase().includes(e));if(s.length===0){r.createEl("p",{text:g("noCharactersFound")+(e?g("matchingFilter"):"")});return}s.forEach(a=>{let o=r.createDiv("storyteller-list-item"),l=o.createDiv("storyteller-list-item-info");if(l.createEl("strong",{text:a.name}),a.description){let c=a.description.substring(0,100),d=a.description.length>100?c+"...":c;l.createEl("p",{text:d})}let u=o.createDiv("storyteller-list-item-actions");new Mt.ButtonComponent(u).setIcon("pencil").setTooltip(g("edit")).onClick(()=>{this.close(),new Pi(this.app,this.plugin,a,async c=>{await this.plugin.saveCharacter(c),new Mt.Notice(g("updated",g("character"),c.name))}).open()}),new Mt.ButtonComponent(u).setIcon("trash").setTooltip(g("delete")).setClass("mod-warning").onClick(async()=>{confirm(g("confirmDeleteCharacterTrash",a.name))&&(a.filePath?(await this.plugin.deleteCharacter(a.filePath),this.characters=this.characters.filter(c=>c.filePath!==a.filePath),this.renderList(e,r)):new Mt.Notice(g("errorCannotDeleteWithoutFilePath",g("character"))))}),new Mt.ButtonComponent(u).setIcon("go-to-file").setTooltip(g("openNote")).onClick(()=>{if(!a.filePath){new Mt.Notice(g("errorCannotOpenNoteWithoutFilePath",g("character")));return}let c=this.app.vault.getAbstractFileByPath(a.filePath);c instanceof Mt.TFile?(this.app.workspace.getLeaf(!1).openFile(c),this.close()):new Mt.Notice(g("workspaceLeafRevealError"))})})}onClose(){this.contentEl.empty()}};var xt=require("obsidian");rn();ze();nn();Wn();var Ii=class extends Ra{constructor(e,r,s,a,o){super(e);this._groupRefreshInterval=null;this.groupSelectorContainer=null;this.plugin=r,this.isNew=s===null;let l=s?{...s}:{name:"",description:"",history:"",locationType:void 0,region:void 0,status:void 0,profileImagePath:void 0,customFields:{},filePath:void 0};l.customFields||(l.customFields={}),s&&s.filePath&&(l.filePath=s.filePath),this.location=l,this.onSubmit=a,this.onDelete=o,this.modalEl.addClass("storyteller-location-modal")}onOpen(){super.onOpen();let{contentEl:e}=this;e.empty(),e.createEl("h2",{text:this.isNew?g("createNewLocation"):`${g("edit")} ${this.location.name}`}),new xt.Setting(e).setName(g("name")).setDesc(g("locationNameDesc")).addText(o=>o.setPlaceholder(g("enterLocationName")).setValue(this.location.name).onChange(l=>{this.location.name=l}).inputEl.addClass("storyteller-modal-input-large")),new xt.Setting(e).setName(g("description")).setClass("storyteller-modal-setting-vertical").addTextArea(o=>{o.setPlaceholder(g("locationDescriptionPh")).setValue(this.location.description||"").onChange(l=>{this.location.description=l||void 0}),o.inputEl.rows=4,o.inputEl.addClass("storyteller-modal-textarea")}),new xt.Setting(e).setName(g("history")).setClass("storyteller-modal-setting-vertical").addTextArea(o=>{o.setPlaceholder(g("locationHistoryPh")).setValue(this.location.history||"").onChange(l=>{this.location.history=l||void 0}),o.inputEl.rows=4,o.inputEl.addClass("storyteller-modal-textarea")}),new xt.Setting(e).setName(g("type")).setDesc(g("locationTypeDesc")).addText(o=>o.setValue(this.location.locationType||"").onChange(l=>{this.location.locationType=l||void 0})),new xt.Setting(e).setName(g("region")).setDesc(g("locationRegionDesc")).addText(o=>o.setValue(this.location.region||"").onChange(l=>{this.location.region=l||void 0})),new xt.Setting(e).setName(g("status")).setDesc(g("locationStatusDesc")).addText(o=>o.setValue(this.location.status||"").onChange(l=>{this.location.status=l||void 0}));let r;new xt.Setting(e).setName(g("image")).setDesc("").then(o=>{r=o.descEl.createEl("small",{text:g("currentValue",this.location.profileImagePath||g("none"))}),o.descEl.addClass("storyteller-modal-setting-vertical")}).addButton(o=>o.setButtonText(g("selectBtn")).setTooltip("Select from gallery").onClick(()=>{new Ot(this.app,this.plugin,l=>{let u=l?l.filePath:"";this.location.profileImagePath=u||void 0,r.setText(`Current: ${this.location.profileImagePath||"None"}`)}).open()})).addButton(o=>o.setButtonText(g("upload")).setTooltip(g("uploadImage")).onClick(async()=>{let l=document.createElement("input");l.type="file",l.accept="image/*",l.onchange=async()=>{var c;let u=(c=l.files)==null?void 0:c[0];if(u)try{await this.plugin.ensureFolder(this.plugin.settings.galleryUploadFolder);let d=Date.now(),f=u.name.replace(/[^\w\s.-]/g,"").replace(/\s+/g,"_"),p=`${d}_${f}`,v=`${this.plugin.settings.galleryUploadFolder}/${p}`,y=await u.arrayBuffer();await this.app.vault.createBinary(v,y),this.location.profileImagePath=v,r.setText(`Current: ${v}`),new xt.Notice(g("imageUploaded",p))}catch(d){console.error("Error uploading image:",d),new xt.Notice(g("errorUploadingImage"))}},l.click()})).addButton(o=>o.setIcon("cross").setTooltip("Clear image").setClass("mod-warning").onClick(()=>{this.location.profileImagePath=void 0,r.setText(`Current: ${this.location.profileImagePath||"None"}`)})),e.createEl("h3",{text:g("customFields")});let s=e.createDiv("storyteller-custom-fields-container");new xt.Setting(e).addButton(o=>o.setButtonText(g("addCustomField")).setIcon("plus").onClick(()=>{this.location.customFields||(this.location.customFields={});let l=this.location.customFields,u=new Set([...Rt("location"),"customFields","filePath","id","sections"]),c=d=>{new at(this.app,{title:"Custom field value",label:`Value for "${d}"`,defaultValue:"",onSubmit:f=>{l[d]=f}}).open()};new at(this.app,{title:"New custom field",label:"Field name",defaultValue:"",validator:d=>{let f=d.trim();return f?u.has(f)?"That name is reserved":Object.keys(l).some(v=>v.toLowerCase()===f.toLowerCase())?"A field with that name already exists":null:"Field name cannot be empty"},onSubmit:d=>c(d.trim())}).open()})),this.groupSelectorContainer=e.createDiv("storyteller-group-selector-container"),this.renderGroupSelector(this.groupSelectorContainer),this._groupRefreshInterval=window.setInterval(()=>{this.modalEl.isShown()&&this.groupSelectorContainer&&this.renderGroupSelector(this.groupSelectorContainer)},2e3);let a=new xt.Setting(e).setClass("storyteller-modal-buttons");!this.isNew&&this.onDelete&&a.addButton(o=>o.setButtonText(g("deleteLocation")).setClass("mod-warning").onClick(async()=>{if(confirm(g("confirmDeleteLocation",this.location.name))&&this.onDelete)try{await this.onDelete(this.location),new xt.Notice(g("locationDeleted",this.location.name)),this.close()}catch(l){console.error("Error deleting location:",l),new xt.Notice(g("failedToDelete",g("location")))}})),a.controlEl.createDiv({cls:"storyteller-modal-button-spacer"}),a.addButton(o=>o.setButtonText(g("cancel")).onClick(()=>{this.close()})),a.addButton(o=>o.setButtonText(this.isNew?"Create location":"Save changes").setCta().onClick(async()=>{var l;if(!((l=this.location.name)!=null&&l.trim())){new xt.Notice(g("locationNameRequired"));return}this.location.description=this.location.description||"",this.location.history=this.location.history||"";try{await this.onSubmit(this.location),this.close()}catch(u){console.error("Error saving location:",u),new xt.Notice(g("failedToSave",g("location")))}}))}renderCustomFields(e,r){e.empty(),r=r||{};let s=Object.keys(r);if(s.length===0){e.createEl("p",{text:g("noCustomFields"),cls:"storyteller-modal-list-empty"});return}let a=new Set([...Rt("location"),"customFields","filePath","id","sections"]);s.forEach(o=>{let l=o;new xt.Setting(e).addText(c=>c.setValue(l).setPlaceholder(g("fieldNamePh")).onChange(d=>{let f=d.trim(),p=!Object.keys(r).some(y=>y.toLowerCase()===f.toLowerCase()),v=a.has(f);f&&f!==l&&p&&!v?(r[f]=r[l],delete r[l],l=f):f!==l&&(c.setValue(l),new xt.Notice(g("customFieldError")))})).addText(c=>{var d;return c.setValue(((d=r[l])==null?void 0:d.toString())||"").setPlaceholder(g("fieldValuePh")).onChange(f=>{r[l]=f})}).addButton(c=>c.setIcon("trash").setTooltip(`Remove field "${l}"`).setClass("mod-warning").onClick(()=>{delete r[l],this.renderCustomFields(e,r)})).controlEl.addClass("storyteller-custom-field-row")})}renderGroupSelector(e){e.empty();let r=this.plugin.getGroups(),s=async()=>{let a=this.location.id||this.location.name,l=(await this.plugin.listLocations()).find(c=>(c.id||c.name)===a),u=new Set((l==null?void 0:l.groups)||this.location.groups||[]);return this.location.groups=Array.from(u),u};(async()=>{let a=await s();if(new xt.Setting(e).setName(g("groups")).setDesc(g("assignToGroupsDesc")).addDropdown(o=>{o.addOption("",g("selectGroupPlaceholder")),r.forEach(l=>{o.addOption(l.id,l.name)}),o.setValue(""),o.onChange(async l=>{l&&!a.has(l)&&(a.add(l),this.location.groups=Array.from(a),await this.plugin.addMemberToGroup(l,"location",this.location.id||this.location.name),this.renderGroupSelector(e))})}),a.size>0){let o=e.createDiv("selected-groups");r.filter(l=>a.has(l.id)).forEach(l=>{let c=o.createSpan({text:l.name,cls:"group-tag"}).createSpan({text:" \xD7",cls:"remove-group-btn"});c.onclick=async()=>{a.delete(l.id),this.location.groups=Array.from(a),await this.plugin.removeMemberFromGroup(l.id,"location",this.location.id||this.location.name),this.renderGroupSelector(e)}})}})()}onClose(){this.contentEl.empty(),this._groupRefreshInterval&&clearInterval(this._groupRefreshInterval)}};var Ft=require("obsidian");ze();var gd=class extends Ft.Modal{constructor(e,r,s){super(e);this.plugin=r,this.locations=s,this.modalEl.addClass("storyteller-list-modal")}onOpen(){let{contentEl:e}=this;e.empty(),e.createEl("h2",{text:g("locations")}),this.listContainer=e.createDiv("storyteller-list-container");let r=new Ft.Setting(e).setName(g("search")).addText(s=>{s.setPlaceholder(g("searchX",g("locations"))).onChange(a=>this.renderList(a.toLowerCase(),this.listContainer))});this.renderList("",this.listContainer),new Ft.Setting(e).addButton(s=>{let a=!!this.plugin.getActiveStory();s.setButtonText(g("createLocation")).setCta().onClick(()=>{if(!this.plugin.getActiveStory()){new Ft.Notice(g("selectOrCreateStoryFirst"));return}this.close(),new Ii(this.app,this.plugin,null,async o=>{await this.plugin.saveLocation(o),new Ft.Notice(g("created",g("location"),o.name)),new Ft.Notice(g("noteCreatedWithSections"))}).open()}),a||s.setDisabled(!0).setTooltip(g("selectOrCreateStoryFirst"))})}renderList(e,r){r.empty();let s=this.locations.filter(a=>a.name.toLowerCase().includes(e)||(a.description||"").toLowerCase().includes(e));if(s.length===0){r.createEl("p",{text:g("noLocationsFound")+(e?g("matchingFilter"):"")});return}s.forEach(a=>{let o=r.createDiv("storyteller-list-item"),l=o.createDiv("storyteller-list-item-info");l.createEl("strong",{text:a.name}),a.description&&l.createEl("p",{text:a.description.substring(0,100)+(a.description.length>100?"...":"")});let u=o.createDiv("storyteller-list-item-actions");new Ft.ButtonComponent(u).setIcon("pencil").setTooltip(g("edit")).onClick(()=>{this.close(),new Ii(this.app,this.plugin,a,async c=>{await this.plugin.saveLocation(c),new Ft.Notice(g("updated",g("location"),c.name))}).open()}),new Ft.ButtonComponent(u).setIcon("trash").setTooltip(g("delete")).setClass("mod-warning").onClick(async()=>{confirm(g("confirmDeleteLocation",a.name))&&(a.filePath?(await this.plugin.deleteLocation(a.filePath),this.locations=this.locations.filter(c=>c.filePath!==a.filePath),this.renderList(e,r)):new Ft.Notice(g("errorCannotDeleteWithoutFilePath",g("location"))))}),new Ft.ButtonComponent(u).setIcon("go-to-file").setTooltip(g("openNote")).onClick(()=>{if(!a.filePath){new Ft.Notice(g("errorCannotOpenNoteWithoutFilePath",g("location")));return}let c=this.app.vault.getAbstractFileByPath(a.filePath);c instanceof Ft.TFile?(this.app.workspace.getLeaf(!1).openFile(c),this.close()):new Ft.Notice(g("workspaceLeafRevealError"))})})}onClose(){this.contentEl.empty()}};yd();xy();var ls=require("obsidian");ze();var Cr=require("obsidian");ze();var Sn=class extends Cr.Modal{constructor(e,r,s,a,o){super(e);this.plugin=r,this.image={...s},this.isNew=a,this.onSaveCallback=o,this.modalEl.addClass("storyteller-image-detail-modal")}getImageSrc(e){if(/^(https?:)?\/\//i.test(e)||e.startsWith("data:"))return e;let r=this.app.vault.getAbstractFileByPath(e);return r&&"stat"in r?this.app.vault.getResourcePath(r):e}onOpen(){let{contentEl:e}=this;e.empty(),e.createEl("h2",{text:this.isNew?g("addImageDetails"):g("editImageDetails")});let r=e.createDiv("storyteller-image-detail-container"),s=r.createDiv("storyteller-image-preview"),a=s.createEl("img");a.src=this.getImageSrc(this.image.filePath),a.alt=this.image.title||this.image.filePath,s.createEl("p",{text:this.image.filePath});let o=r.createDiv("storyteller-image-form");new Cr.Setting(o).setName(g("title")).addText(l=>l.setValue(this.image.title||"").onChange(u=>{this.image.title=u||void 0})),new Cr.Setting(o).setName(g("caption")).addText(l=>l.setValue(this.image.caption||"").onChange(u=>{this.image.caption=u||void 0})),new Cr.Setting(o).setName(g("description")).addTextArea(l=>{l.setValue(this.image.description||"").onChange(u=>{this.image.description=u||void 0}),l.inputEl.rows=3}),new Cr.Setting(o).setName(g("tags")).setDesc(g("commaSeparatedTags")).addText(l=>l.setValue((this.image.tags||[]).join(", ")).onChange(u=>{this.image.tags=u.split(",").map(c=>c.trim()).filter(c=>c.length>0)})),o.createEl("h3",{text:g("links")}),new Cr.Setting(o).setName(g("characters")).setDesc(g("commaSeparatedCharacterNames")).addText(l=>l.setValue((this.image.linkedCharacters||[]).join(", ")).onChange(u=>{this.image.linkedCharacters=u.split(",").map(c=>c.trim()).filter(c=>c.length>0)})),new Cr.Setting(o).setName(g("locations")).setDesc(g("commaSeparatedLocationNames")).addText(l=>l.setValue((this.image.linkedLocations||[]).join(", ")).onChange(u=>{this.image.linkedLocations=u.split(",").map(c=>c.trim()).filter(c=>c.length>0)})),new Cr.Setting(o).setName(g("events")).setDesc(g("commaSeparatedEventNames")).addText(l=>l.setValue((this.image.linkedEvents||[]).join(", ")).onChange(u=>{this.image.linkedEvents=u.split(",").map(c=>c.trim()).filter(c=>c.length>0)})),new Cr.Setting(o).setClass("storyteller-modal-buttons").addButton(l=>l.setButtonText(g("saveDetails")).setCta().onClick(async()=>{await this.plugin.updateGalleryImage(this.image),new Cr.Notice(g("imageDetailsSaved",this.image.filePath)),this.onSaveCallback&&await this.onSaveCallback(),this.close()})).addButton(l=>l.setButtonText(g("removeFromGallery")).setClass("mod-warning").onClick(async()=>{confirm(g("confirmRemoveImageFromGallery",this.image.filePath))&&(await this.plugin.deleteGalleryImage(this.image.id),new Cr.Notice(g("imageRemovedFromGallery",this.image.filePath)),this.onSaveCallback&&await this.onSaveCallback(),this.close())}))}onClose(){this.contentEl.empty()}};var Cy=class extends ls.FuzzySuggestModal{constructor(e,r,s){super(e);this.plugin=r,this.onChoose=s,this.setPlaceholder(g("selectImageFilePh"))}async onOpen(){super.onOpen(),setTimeout(()=>{var e,r;if(this.inputEl){try{(e=this.setQuery)==null||e.call(this,"")}catch(s){}try{this.inputEl.dispatchEvent(new window.Event("input"))}catch(s){}}try{(r=this.onInputChanged)==null||r.call(this)}catch(s){}},0),setTimeout(()=>{var e,r;if(this.inputEl){try{(e=this.setQuery)==null||e.call(this,"")}catch(s){}try{this.inputEl.dispatchEvent(new window.Event("input"))}catch(s){}}try{(r=this.onInputChanged)==null||r.call(this)}catch(s){}},50)}getSuggestions(e){let r=this.getItems();if(!e)return r.map(a=>({item:a,match:{score:0,matches:[]}}));let s=(0,ls.prepareFuzzySearch)(e);return r.map(a=>{let o=s(this.getItemText(a));return o?{item:a,match:o}:null}).filter(a=>!!a)}getItems(){return this.app.vault.getFiles().filter(e=>["png","jpg","jpeg","gif","bmp","svg","webp"].includes(e.extension.toLowerCase()))}getItemText(e){return e.path}onChooseItem(e,r){this.onChoose(e)}},Zh=class extends ls.Modal{constructor(e,r){super(e);this.plugin=r,this.images=r.getGalleryImages(),this.modalEl.addClass("storyteller-gallery-modal")}getImageSrc(e){var r;return e.startsWith("http://")||e.startsWith("https://")||e.startsWith("//")?((r=this.plugin.settings.allowRemoteImages)!=null?r:!1)?e:"":this.app.vault.adapter.getResourcePath(e)}onOpen(){let{contentEl:e}=this;e.empty(),e.createEl("h2",{text:g("imageGallery")}),this.gridContainer=e.createDiv("storyteller-gallery-grid");let r=e.createDiv("storyteller-gallery-controls");new ls.Setting(r).setName(g("filter")).addText(s=>{s.setPlaceholder(g("filterImagesPh")).onChange(a=>this.renderGrid(a.toLowerCase(),this.gridContainer))}).addButton(s=>s.setButtonText(g("addImage")).setCta().onClick(()=>{new Cy(this.app,this.plugin,async a=>{let o={filePath:a.path},l=await this.plugin.addGalleryImage(o);new Sn(this.app,this.plugin,l,!1,async()=>{await this.refreshGallery()}).open()}).open()})),this.renderGrid("",this.gridContainer)}async refreshGallery(){this.images=this.plugin.getGalleryImages(),this.renderGrid("",this.gridContainer)}renderGrid(e,r){r.empty();let s=this.images.filter(a=>a.filePath.toLowerCase().includes(e)||(a.title||"").toLowerCase().includes(e)||(a.caption||"").toLowerCase().includes(e)||(a.description||"").toLowerCase().includes(e)||(a.tags||[]).join(" ").toLowerCase().includes(e)||(a.linkedCharacters||[]).join(" ").toLowerCase().includes(e)||(a.linkedLocations||[]).join(" ").toLowerCase().includes(e)||(a.linkedEvents||[]).join(" ").toLowerCase().includes(e));if(s.length===0){r.createEl("p",{text:g("noImagesFound")+(e?g("matchingFilter"):"")});return}s.forEach(a=>{let o=r.createDiv("storyteller-gallery-item"),l=o.createEl("img");l.src=this.getImageSrc(a.filePath),l.alt=a.title||a.filePath,l.title=a.title||a.filePath,o.addEventListener("click",()=>{this.close(),new Sn(this.app,this.plugin,a,!1,async()=>{await this.refreshGallery()}).open()})})}onClose(){this.contentEl.empty()}};var ce=require("obsidian");ze();yd();var qt=require("obsidian");nn();rn();ze();Ha();Ya();Wn();var Bi=class extends qt.Modal{constructor(e,r,s,a,o){super(e);this._groupRefreshInterval=null;this.groupSelectorContainer=null;this.plugin=r,this.isNew=s===null;let l=s?{...s}:{id:"",filePath:"",name:"",isPlotCritical:!1,pastOwners:[],associatedEvents:[],customFields:{}};l.pastOwners||(l.pastOwners=[]),l.associatedEvents||(l.associatedEvents=[]),l.customFields||(l.customFields={}),l.groups||(l.groups=[]),this.item=l,this.onSubmit=a,this.onDelete=o,this.modalEl.addClass("storyteller-item-modal")}onOpen(){let{contentEl:e}=this;e.empty(),e.createEl("h2",{text:this.isNew?g("createItem"):`${g("edit")} ${this.item.name}`}),new qt.Setting(e).setName(g("name")).setDesc(g("name")).addText(o=>o.setPlaceholder(g("enterItemName")).setValue(this.item.name).onChange(l=>this.item.name=l).inputEl.addClass("storyteller-modal-input-large")),new qt.Setting(e).setName(g("plotCritical")).setDesc(g("plotCritical")).addToggle(o=>o.setValue(this.item.isPlotCritical).onChange(l=>this.item.isPlotCritical=l));let r;new qt.Setting(e).setName(g("itemImage")).setDesc("").then(o=>{r=o.descEl.createEl("small",{text:g("currentValue",this.item.profileImagePath||g("none"))}),o.descEl.addClass("storyteller-modal-setting-vertical")}).addButton(o=>o.setButtonText(g("select")).setTooltip(g("selectFromGallery")).onClick(()=>{new Ot(this.app,this.plugin,l=>{let u=l?l.filePath:void 0;this.item.profileImagePath=u,r.setText(`Current: ${u||"None"}`)}).open()})).addButton(o=>o.setButtonText(g("upload")).setTooltip(g("uploadImage")).onClick(async()=>{let l=document.createElement("input");l.type="file",l.accept="image/*",l.onchange=async()=>{var c;let u=(c=l.files)==null?void 0:c[0];if(u)try{let d=this.plugin.settings.galleryUploadFolder;await this.plugin.ensureFolder(d);let f=Date.now(),p=u.name.replace(/[^\w\s.-]/g,"").replace(/\s+/g,"_"),v=`${f}_${p}`,y=`${d}/${v}`,_=await u.arrayBuffer();await this.app.vault.createBinary(y,_),this.item.profileImagePath=y,r.setText(`Current: ${y}`),new qt.Notice(g("imageUploaded",v))}catch(d){console.error("Error uploading image:",d),new qt.Notice(g("errorUploadingImage"))}},l.click()})).addButton(o=>o.setIcon("cross").setTooltip(g("clearImage")).setClass("mod-warning").onClick(()=>{this.item.profileImagePath=void 0,r.setText(`Current: ${this.item.profileImagePath||"None"}`)})),new qt.Setting(e).setName(g("description")).setClass("storyteller-modal-setting-vertical").addTextArea(o=>{o.setPlaceholder(g("itemDescriptionPh")).setValue(this.item.description||"").onChange(l=>this.item.description=l||void 0),o.inputEl.rows=4}),new qt.Setting(e).setName(g("history")).setClass("storyteller-modal-setting-vertical").addTextArea(o=>{o.setPlaceholder(g("itemHistoryPh")).setValue(this.item.history||"").onChange(l=>this.item.history=l||void 0),o.inputEl.rows=6}),e.createEl("h3",{text:g("relationships")}),new qt.Setting(e).setName(g("currentOwner")).setDesc(`${g("currentOwner")}: ${this.item.currentOwner||g("none")}`).addButton(o=>o.setButtonText(g("selectOwner")).onClick(()=>{new Kr(this.app,this.plugin,l=>{this.item.currentOwner=l.name,this.onOpen()}).open()})),e.createEl("h3",{text:g("groups")}),this.groupSelectorContainer=e.createDiv("storyteller-group-selector-container"),this.renderGroupSelector(this.groupSelectorContainer),this._groupRefreshInterval=window.setInterval(()=>{this.modalEl.isShown()&&this.groupSelectorContainer&&this.renderGroupSelector(this.groupSelectorContainer)},2e3),e.createEl("h3",{text:g("customFields")});let s=e.createDiv("storyteller-custom-fields-container");this.item.customFields||(this.item.customFields={}),new qt.Setting(e).addButton(o=>o.setButtonText(g("addCustomField")).setIcon("plus").onClick(()=>{let l=this.item.customFields,u=new Set([...Rt("item"),"customFields","filePath","id","sections"]),c=d=>{new at(this.app,{title:g("customFieldValueTitle"),label:g("valueForX",d),defaultValue:"",onSubmit:f=>{l[d]=f}}).open()};new at(this.app,{title:g("newCustomFieldTitle"),label:g("fieldName"),defaultValue:"",validator:d=>{let f=d.trim();return f?u.has(f)?g("thatNameIsReserved"):Object.keys(l).some(v=>v.toLowerCase()===f.toLowerCase())?g("fieldAlreadyExists"):null:g("fieldNameCannotBeEmpty")},onSubmit:d=>c(d.trim())}).open()})),new qt.Setting(e).setName(g("currentLocation")).setDesc(`${g("currentLocation")}: ${this.item.currentLocation||g("none")}`).addButton(o=>o.setButtonText(g("selectLocation")).onClick(()=>{new Zr(this.app,this.plugin,l=>{this.item.currentLocation=l?l.name:void 0,this.onOpen()}).open()}));let a=new qt.Setting(e).setClass("storyteller-modal-buttons");!this.isNew&&this.onDelete&&a.addButton(o=>o.setButtonText(g("deleteItem")).setClass("mod-warning").onClick(async()=>{confirm(g("confirmDeleteItem",this.item.name))&&(await this.onDelete(this.item),this.close())})),a.controlEl.createDiv({cls:"storyteller-modal-button-spacer"}),a.addButton(o=>o.setButtonText(g("cancel")).onClick(()=>this.close())),a.addButton(o=>o.setButtonText(this.isNew?g("createItem"):g("saveChanges")).setCta().onClick(async()=>{if(!this.item.name.trim()){new qt.Notice(g("itemNameRequired"));return}this.item.description=this.item.description||"",this.item.history=this.item.history||"",await this.onSubmit(this.item),this.close()}))}renderGroupSelector(e){e.empty();let r=this.plugin.getGroups(),s=async()=>{let a=this.item.id||this.item.name,l=(await this.plugin.listPlotItems()).find(c=>(c.id||c.name)===a),u=new Set((l==null?void 0:l.groups)||this.item.groups||[]);return this.item.groups=Array.from(u),u};(async()=>{let a=await s();if(new qt.Setting(e).setName(g("groups")).setDesc(g("assignItemToGroupsDesc")).addDropdown(o=>{o.addOption("",g("selectGroupPlaceholder")),r.forEach(l=>o.addOption(l.id,l.name)),o.setValue(""),o.onChange(async l=>{if(l&&!a.has(l)){a.add(l),this.item.groups=Array.from(a);let u=this.item.id||this.item.name;await this.plugin.addMemberToGroup(l,"item",u),this.renderGroupSelector(e)}})}),a.size>0){let o=e.createDiv("selected-groups");r.filter(l=>a.has(l.id)).forEach(l=>{let c=o.createSpan({text:l.name,cls:"group-tag"}).createSpan({text:" \xD7",cls:"remove-group-btn"});c.onclick=async()=>{a.delete(l.id),this.item.groups=Array.from(a);let d=this.item.id||this.item.name;await this.plugin.removeMemberFromGroup(l.id,"item",d),this.renderGroupSelector(e)}})}})()}onClose(){this.contentEl.empty(),this._groupRefreshInterval&&clearInterval(this._groupRefreshInterval)}};var Oo=require("obsidian");ze();var us=class extends Oo.Modal{constructor(e,r,s){super(e);this.name="";this.description="";this.onSubmit=s,this.existingNames=r.map(a=>a.toLowerCase())}onOpen(){let{contentEl:e}=this;e.empty(),e.createEl("h2",{text:g("createNewStory")}),new Oo.Setting(e).setName(g("storyName")).setDesc("Required. Must be unique.").addText(s=>{this.nameInput=s,s.setPlaceholder(g("enterStoryNamePh")).onChange(a=>{this.name=a.trim(),this.clearError()}),s.inputEl.addEventListener("keydown",a=>{a.key==="Enter"&&(a.preventDefault(),this.trySubmit())}),s.inputEl.focus()}),new Oo.Setting(e).setName(g("description")).setDesc("Optional").addTextArea(s=>{this.descInput=s,s.setPlaceholder(g("describeStoryPh")).onChange(a=>{this.description=a}),s.inputEl.rows=3}),this.errorEl=e.createEl("div",{cls:"storyteller-modal-error"}),this.clearError();let r=new Oo.Setting(e);r.addButton(s=>s.setButtonText(g("cancel")).onClick(()=>this.close())),r.addButton(s=>s.setButtonText(g("create")).setCta().onClick(()=>this.trySubmit()))}clearError(){this.errorEl.setText("")}showError(e){this.errorEl.setText(e),this.errorEl.style.color="var(--text-error, red)"}async trySubmit(){if(!this.name){this.showError("Story name is required."),this.nameInput.inputEl.focus();return}if(this.existingNames.includes(this.name.toLowerCase())){this.showError("A story with this name already exists."),this.nameInput.inputEl.focus();return}try{await this.onSubmit(this.name,this.description),this.close()}catch(e){this.showError("Failed to create story.")}}onClose(){this.contentEl.empty()}};var Wt=require("obsidian");ze();nn();Ha();Ya();Qh();Jh();var uc=class extends Wt.Modal{constructor(e,r,s,a,o){super(e);this.allCharacters=[];this.allLocations=[];this.allEvents=[];this.allPlotItems=[];if(this.plugin=r,this.isNew=s===null,s)this.group={...s,members:[...s.members]};else{let l=this.plugin.getActiveStory();if(!l)throw new Error("No active story selected");this.group={id:"",storyId:l.id,name:"",description:"",color:"",members:[]}}this.onSubmit=a,this.onDelete=o,this.modalEl.addClass("storyteller-group-modal")}async onOpen(){let{contentEl:e}=this;e.empty(),e.createEl("h2",{text:this.isNew?g("createNewGroup"):`${g("editGroup")}: ${this.group.name}`}),new Wt.Setting(e).setName(g("name")).addText(a=>a.setPlaceholder(g("enterGroupName")).setValue(this.group.name).onChange(o=>{this.group.name=o})),new Wt.Setting(e).setName(g("description")).addTextArea(a=>a.setPlaceholder(g("describeGroupPh")).setValue(this.group.description||"").onChange(o=>{this.group.description=o})),new Wt.Setting(e).setName(g("color")).addText(a=>a.setPlaceholder(g("colorPlaceholder")).setValue(this.group.color||"").onChange(o=>{this.group.color=o})),new Wt.Setting(e).setName(g("tags")||"Tags").setDesc(g("traitsPlaceholder")).addText(a=>a.setPlaceholder(g("tagsPh")).setValue((this.group.tags||[]).join(", ")).onChange(o=>{this.group.tags=o.split(",").map(l=>l.trim()).filter(Boolean)}));let r=null;new Wt.Setting(e).setName(g("profileImage")).then(a=>{r=a.descEl.createEl("small",{text:g("currentValue",this.group.profileImagePath||g("none"))}),a.descEl.addClass("storyteller-modal-setting-vertical")}).addButton(a=>a.setButtonText(g("select")).setTooltip(g("selectFromGallery")).onClick(()=>{new Ot(this.app,this.plugin,o=>{this.group.profileImagePath=o==null?void 0:o.filePath,r&&r.setText(`Current: ${this.group.profileImagePath||"None"}`)}).open()})).addButton(a=>a.setButtonText(g("upload")).setTooltip(g("uploadImage")).onClick(async()=>{let o=document.createElement("input");o.type="file",o.accept="image/*",o.onchange=async()=>{var u;let l=(u=o.files)==null?void 0:u[0];if(l)try{await this.plugin.ensureFolder(this.plugin.settings.galleryUploadFolder);let c=l.name.replace(/[\\/:"*?<>|#^[\]]+/g,"").replace(/\s+/g,"_"),d=`${this.plugin.settings.galleryUploadFolder}/${Date.now()}_${c}`,f=await l.arrayBuffer();await this.app.vault.createBinary(d,f),this.group.profileImagePath=d,r&&r.setText(`Current: ${d}`),new Wt.Notice(g("imageUploaded",c))}catch(c){console.error("Upload failed",c),new Wt.Notice(g("errorUploadingImage"))}},o.click()})).addButton(a=>a.setIcon("cross").setTooltip(g("clearImage")).setClass("mod-warning").onClick(()=>{this.group.profileImagePath=void 0,r&&r.setText(`Current: ${this.group.profileImagePath||"None"}`)})),e.createEl("h3",{text:g("members")}),await this.loadAllEntities(),this.renderMemberSelectors(e);let s=new Wt.Setting(e).setClass("storyteller-modal-buttons");s.addButton(a=>a.setButtonText(this.isNew?g("createGroupBtn"):g("saveChanges")).setCta().onClick(async()=>{var c,d,f,p,v,y,_,S;if(!this.group.name.trim()){new Wt.Notice(g("groupNameRequired"));return}let o=this.plugin.getGroups(),l=this.group.name.trim().toLowerCase();if(o.some(x=>x.name.trim().toLowerCase()===l&&(!this.group.id||x.id!==this.group.id))){new Wt.Notice(g("groupNameExists"));return}if(this.isNew){let x=await this.plugin.createGroup(this.group.name,this.group.description,this.group.color);this.group.id=x.id,await this.plugin.updateGroup(this.group.id,{description:this.group.description,color:this.group.color,name:this.group.name});let D=this.plugin.getGroups().find(E=>E.id===this.group.id);D&&(D.tags=this.group.tags||[],D.profileImagePath=this.group.profileImagePath,await this.plugin.saveSettings(),(d=(c=this.plugin).emitGroupsChanged)==null||d.call(c));for(let E of this.group.members)await this.plugin.addMemberToGroup(x.id,E.type,E.id);for(let E of this.group.members)await((p=(f=this.plugin).addGroupIdToEntity)==null?void 0:p.call(f,E.type,E.id,this.group.id))}else{await this.plugin.updateGroup(this.group.id,{name:this.group.name,description:this.group.description,color:this.group.color});let x=this.plugin.getGroups().find(D=>D.id===this.group.id);x&&(x.tags=this.group.tags||[],x.profileImagePath=this.group.profileImagePath,await this.plugin.saveSettings(),(y=(v=this.plugin).emitGroupsChanged)==null||y.call(v)),await this.syncMembers();for(let D of this.group.members)await((S=(_=this.plugin).addGroupIdToEntity)==null?void 0:S.call(_,D.type,D.id,this.group.id))}this.onSubmit&&await this.onSubmit(this.group),this.close()})),!this.isNew&&this.onDelete&&s.addButton(a=>a.setButtonText(g("deleteGroup")).setClass("mod-warning").onClick(async()=>{confirm(g("confirmDeleteGroup",this.group.name))&&(await this.onDelete(this.group.id),this.close())}))}async loadAllEntities(){this.allCharacters=await this.plugin.listCharacters(),this.allLocations=await this.plugin.listLocations(),this.allEvents=await this.plugin.listEvents(),this.allPlotItems=await this.plugin.listPlotItems()}renderMemberSelectors(e){let r=(p,v)=>this.group.members.some(y=>y.type===p&&y.id===v),s=new Wt.Setting(e).setName(g("characters")),a=s.controlEl.createDiv("group-tag-list");this.group.members.filter(p=>p.type==="character").forEach(p=>{let v=this.allCharacters.find(y=>(y.id||y.name)===p.id);if(v){let _=a.createSpan({text:v.name,cls:"group-tag"}).createSpan({text:" \xD7",cls:"remove-group-btn"});_.onclick=async()=>{this.group.members=this.group.members.filter(S=>!(S.type==="character"&&S.id===p.id)),await this.plugin.removeMemberFromGroup(this.group.id,"character",p.id),this.onOpen()}}}),s.addButton(p=>{p.setButtonText(g("add")).setCta().onClick(()=>{new Kr(this.app,this.plugin,v=>{v&&!r("character",v.id||v.name)&&(this.group.members.push({type:"character",id:v.id||v.name}),this.plugin.addMemberToGroup(this.group.id,"character",v.id||v.name),this.onOpen())}).open()})});let o=new Wt.Setting(e).setName(g("locations")),l=o.controlEl.createDiv("group-tag-list");this.group.members.filter(p=>p.type==="location").forEach(p=>{let v=this.allLocations.find(y=>(y.id||y.name)===p.id);if(v){let _=l.createSpan({text:v.name,cls:"group-tag"}).createSpan({text:" \xD7",cls:"remove-group-btn"});_.onclick=async()=>{this.group.members=this.group.members.filter(S=>!(S.type==="location"&&S.id===p.id)),await this.plugin.removeMemberFromGroup(this.group.id,"location",p.id),this.onOpen()}}}),o.addButton(p=>{p.setButtonText(g("add")).setCta().onClick(()=>{new Zr(this.app,this.plugin,v=>{v&&!r("location",v.id||v.name)&&(this.group.members.push({type:"location",id:v.id||v.name}),this.plugin.addMemberToGroup(this.group.id,"location",v.id||v.name),this.onOpen())}).open()})});let u=new Wt.Setting(e).setName(g("events")),c=u.controlEl.createDiv("group-tag-list");this.group.members.filter(p=>p.type==="event").forEach(p=>{let v=this.allEvents.find(y=>(y.id||y.name)===p.id);if(v){let _=c.createSpan({text:v.name,cls:"group-tag"}).createSpan({text:" \xD7",cls:"remove-group-btn"});_.onclick=async()=>{this.group.members=this.group.members.filter(S=>!(S.type==="event"&&S.id===p.id)),await this.plugin.removeMemberFromGroup(this.group.id,"event",p.id),this.onOpen()}}}),u.addButton(p=>{p.setButtonText(g("add")).setCta().onClick(()=>{new cs(this.app,this.plugin,v=>{v&&!r("event",v.id||v.name)&&(this.group.members.push({type:"event",id:v.id||v.name}),this.plugin.addMemberToGroup(this.group.id,"event",v.id||v.name),this.onOpen())}).open()})});let d=new Wt.Setting(e).setName(g("items")),f=d.controlEl.createDiv("group-tag-list");this.group.members.filter(p=>p.type==="item").forEach(p=>{let v=this.allPlotItems.find(y=>(y.id||y.name)===p.id);if(v){let _=f.createSpan({text:v.name,cls:"group-tag"}).createSpan({text:" \xD7",cls:"remove-group-btn"});_.onclick=async()=>{this.group.members=this.group.members.filter(S=>!(S.type==="item"&&S.id===p.id)),await this.plugin.removeMemberFromGroup(this.group.id,"item",p.id),this.onOpen()}}}),d.addButton(p=>{p.setButtonText(g("add")).setCta().onClick(()=>{new lc(this.app,this.plugin,v=>{let y=v.id||v.name;v&&!this.group.members.some(_=>_.type==="item"&&_.id===y)&&(this.group.members.push({type:"item",id:y}),this.plugin.addMemberToGroup(this.group.id,"item",y),this.onOpen())}).open()})})}async syncMembers(){let e=this.plugin.getGroups().find(r=>r.id===this.group.id);if(e){for(let r of e.members)this.group.members.some(s=>s.type===r.type&&s.id===r.id)||await this.plugin.removeMemberFromGroup(e.id,r.type,r.id);for(let r of this.group.members)e.members.some(s=>s.type===r.type&&s.id===r.id)||await this.plugin.addMemberToGroup(e.id,r.type,r.id)}}onClose(){this.contentEl.empty()}};var _i="storyteller-dashboard-view",lf=class extends ce.ItemView{constructor(e,r){super(e);this.currentFilter="";this.fileInput=null;this.activeTabId="characters";this.tabHeaderRibbonEl=null;this.tabsResizeObserver=null;this.currentSearchInput=null;this.debouncedSearch=null;this.isUserTyping=!1;this.typingTimer=null;this.dismissalTimer=null;this.plugin=r,this.tabs=[{id:"characters",label:g("characters"),renderFn:this.renderCharactersContent.bind(this)},{id:"locations",label:g("locations"),renderFn:this.renderLocationsContent.bind(this)},{id:"events",label:g("timeline"),renderFn:this.renderEventsContent.bind(this)},{id:"items",label:g("items"),renderFn:this.renderItemsContent.bind(this)},{id:"gallery",label:g("gallery"),renderFn:this.renderGalleryContent.bind(this)},{id:"groups",label:g("groups"),renderFn:this.renderGroupsContent.bind(this)},{id:"references",label:g("references"),renderFn:this.renderReferencesContent.bind(this)},{id:"chapters",label:g("chapters"),renderFn:this.renderChaptersContent.bind(this)},{id:"scenes",label:g("scenes"),renderFn:this.renderScenesContent.bind(this)}],this.debouncedRefreshActiveTab=(0,ce.debounce)(this.refreshActiveTab.bind(this),200,!0),this.debouncedSearch=(0,ce.debounce)(async s=>{try{await s(this.currentFilter),fe.isMobile()&&this.currentSearchInput&&document.activeElement!==this.currentSearchInput&&setTimeout(()=>{this.currentSearchInput&&this.currentSearchInput.focus()},50)}catch(a){console.error("Storyteller Suite: Error in debounced search:",a)}},fe.getSearchDebounceDelay())}markSearchInputDismissal(){this.currentSearchInput&&(this.currentSearchInput.setAttribute("data-user-dismissed","true"),this.dismissalTimer&&clearTimeout(this.dismissalTimer),this.dismissalTimer=window.setTimeout(()=>{this.currentSearchInput&&this.currentSearchInput.removeAttribute("data-user-dismissed"),this.dismissalTimer=null},500))}getImageSrc(e){var r;return e.startsWith("http://")||e.startsWith("https://")||e.startsWith("data:")||e.startsWith("app://")||e.startsWith("obsidian://")||e.startsWith("//")?(e.startsWith("http")||e.startsWith("//"))&&!((r=this.plugin.settings.allowRemoteImages)!=null?r:!1)?"":e:this.app.vault.adapter.getResourcePath(e)}getViewType(){return _i}getDisplayText(){return g("dashboardTitle")}getIcon(){return"book-open"}registerVaultEventListeners(){this.registerEvent(this.app.vault.on("create",e=>{this.isRelevantFile(e.path)&&this.debouncedRefreshActiveTab()})),this.registerEvent(this.app.vault.on("modify",e=>{this.isRelevantFile(e.path)&&this.debouncedRefreshActiveTab()})),this.registerEvent(this.app.vault.on("delete",e=>{this.isRelevantFile(e.path)&&this.debouncedRefreshActiveTab()})),this.registerEvent(this.app.vault.on("rename",(e,r)=>{(this.isRelevantFile(e.path)||this.isRelevantFile(r))&&this.debouncedRefreshActiveTab()})),this.registerEvent(this.app.metadataCache.on("changed",e=>{this.isRelevantFile(e.path)&&this.debouncedRefreshActiveTab()}))}isRelevantFile(e){try{let r=this.plugin.getEntityFolder("character"),s=this.plugin.getEntityFolder("location"),a=this.plugin.getEntityFolder("event"),o=this.plugin.getEntityFolder("item"),l=this.plugin.getEntityFolder("reference"),u=this.plugin.getEntityFolder("chapter"),c=this.plugin.getEntityFolder("scene");return e.startsWith(r+"/")||e.startsWith(s+"/")||e.startsWith(a+"/")||e.startsWith(o+"/")||e.startsWith(l+"/")||e.startsWith(u+"/")||e.startsWith(c+"/")||e.startsWith(this.plugin.settings.galleryUploadFolder+"/")}catch(r){return!1}}async refreshActiveTab(){var a;if(!this.tabContentContainer)return;if(fe.isMobile()&&this.isUserTyping){console.log("Storyteller Suite: Skipping refresh while user is typing on mobile");return}let e=((a=this.currentSearchInput)==null?void 0:a.value)||"",r=document.activeElement===this.currentSearchInput,s=this.tabs.find(o=>o.id===this.activeTabId);if(s)try{await s.renderFn(this.tabContentContainer),fe.isMobile()&&(e||r)&&setTimeout(()=>{this.currentSearchInput&&(e&&(this.currentSearchInput.value=e,this.currentFilter=e.toLowerCase()),r&&this.currentSearchInput.focus())},100)}catch(o){console.error(`Storyteller Suite: Error refreshing active tab ${this.activeTabId}:`,o)}}async onOpen(){this.containerEl.style.height="100%",this.containerEl.style.overflow="visible",this.containerEl.style.display="flex",this.containerEl.style.flexDirection="column";let e=this.containerEl.children[1];e.empty(),e.addClass("storyteller-dashboard-view-container"),e.style.display="flex",e.style.flexDirection="column",e.style.height="100%",e.style.overflow="visible",e.style.minHeight="0",e.style.isolation="isolate",e.style.position="relative",fe.getMobileCssClasses().forEach(c=>{e.addClass(c)}),fe.isMobile()&&e.addClass("mobile-dashboard");let s=e.createDiv("storyteller-dashboard-header");s.style.zIndex="var(--layer-status-bar, 15)",s.style.background=getComputedStyle(document.body).getPropertyValue("--background-primary")||"var(--background-primary)",s.style.flexShrink="0";let a=s.createDiv("storyteller-dashboard-header-top");a.createEl("h2",{cls:"storyteller-dashboard-title"}).append(g("dashboardTitle"));let l=a.createDiv("storyteller-selector-button-group");fe.isMobile()&&!fe.isTablet()?(l.style.display="flex",l.style.flexDirection="column",l.style.gap="0.75rem",l.style.width="100%"):(l.style.display="flex",l.style.alignItems="center",l.style.gap="0.5em");let u=l.createEl("select",{cls:"storyteller-story-selector"});if(u.id="storyteller-story-selector",fe.isMobile()){let c=fe.getTouchTargetSize();u.style.minHeight=`${c}px`,u.style.fontSize=`${1.1*fe.getFontScaling()}rem`,u.style.width="100%"}if(this.plugin.settings.stories.forEach(c=>{let d=u.createEl("option",{text:c.name});d.value=c.id,c.id===this.plugin.settings.activeStoryId&&(d.selected=!0)}),this.plugin.settings.enableOneStoryMode&&this.plugin.settings.stories.length===0&&this.plugin.initializeOneStoryModeIfNeeded().then(()=>this.onOpen()),u.onchange=async c=>{let d=c.target.value;await this.plugin.setActiveStory(d),this.onOpen()},!this.plugin.settings.enableOneStoryMode){let c=l.createEl("button",{text:g("newStory"),cls:"storyteller-new-story-btn"});c.onclick=()=>{new us(this.app,this.plugin.settings.stories.map(d=>d.name),async(d,f)=>{let p=await this.plugin.createStory(d,f);await this.plugin.setActiveStory(p.id),new window.Notice(`Story "${d}" created and activated.`),this.onOpen()}).open()}}this.tabHeaderContainer=e.createDiv("storyteller-dashboard-tabs"),this.tabHeaderContainer.setAttr("role","tablist"),this.tabHeaderContainer.style.zIndex="calc(var(--layer-status-bar, 15) - 1)",this.tabHeaderContainer.style.display="flex",this.tabHeaderContainer.style.alignItems="center",this.tabHeaderContainer.style.gap="0.25rem",this.tabHeaderContainer.style.width="100%",this.tabHeaderContainer.style.flexShrink="0",this.tabHeaderRibbonEl=this.tabHeaderContainer.createDiv("storyteller-tab-ribbon"),this.tabHeaderRibbonEl.style.display="flex",this.tabHeaderRibbonEl.style.gap="0.5rem",this.tabHeaderRibbonEl.style.alignItems="center",this.tabHeaderRibbonEl.style.whiteSpace="normal",this.tabHeaderRibbonEl.style.justifyContent="center",this.tabHeaderRibbonEl.style.alignContent="center",this.tabHeaderRibbonEl.style.flex="1 1 auto",this.tabHeaderRibbonEl.style.width="100%",this.tabsResizeObserver=new ResizeObserver(()=>{this.layoutTabs(),requestAnimationFrame(()=>{this.updateStickyOffsets(s)})}),this.tabsResizeObserver.observe(this.tabHeaderContainer),this.layoutTabs(),requestAnimationFrame(()=>{this.updateStickyOffsets(s)}),this.tabContentContainer=e.createDiv("storyteller-dashboard-content"),this.tabContentContainer.style.flex="1 1 auto",this.tabContentContainer.style.minHeight="0",this.tabContentContainer.style.overflowY="auto",this.tabContentContainer.style.overflowX="hidden",this.tabContentContainer.style.height="auto",this.setActiveTab(this.activeTabId||this.tabs[0].id),this.registerVaultEventListeners(),this.registerEvent(this.app.workspace.on("resize",()=>{this.debouncedRefreshActiveTab(),this.layoutTabs(),requestAnimationFrame(()=>{this.updateStickyOffsets(s)})})),fe.isMobile()&&this.registerDomEvent(document,"click",c=>{try{if(!c.target||!(c.target instanceof Node))return;this.currentSearchInput&&c.target!==this.currentSearchInput&&!this.currentSearchInput.contains(c.target)&&(this.markSearchInputDismissal(),this.currentSearchInput.blur())}catch(d){console.error("Storyteller Suite: Error in mobile keyboard dismissal handler:",d)}}),await this.renderCharactersContent(this.tabContentContainer)}updateStickyOffsets(e){try{if(!this.tabHeaderContainer||!e)return;this.tabHeaderContainer.style.display="flex"}catch(r){console.warn("Storyteller: failed to update layout",r)}}getTabDisplayMode(){var r,s;let e=(s=(r=this.tabHeaderContainer)==null?void 0:r.clientWidth)!=null?s:0;return e<320?"tiny":e<480?"compact":"normal"}layoutTabs(){if(!this.tabHeaderContainer||!this.tabHeaderRibbonEl)return;this.tabHeaderRibbonEl.style.flexWrap="wrap",this.tabHeaderRibbonEl.style.rowGap="6px",this.tabHeaderRibbonEl.empty();let r=this.getTabDisplayMode()==="normal"?"normal":"compact";for(let s of this.tabs){let a=this.createTabButtonEl(s,r,!1);this.tabHeaderRibbonEl.appendChild(a)}this.syncActiveTabStyles()}createTabButtonEl(e,r,s=!1){let a=document.createElement("button");a.className="storyteller-tab-header",a.setAttribute("role","tab"),a.dataset.tabId=e.id,a.title=r==="compact"?e.label:"",a.style.display="inline-flex",a.style.alignItems="center",a.style.justifyContent="center",a.style.gap="0.25rem",a.style.padding="6px 10px",a.style.borderRadius="6px",s||(a.style.flex="0 1 auto",a.style.minWidth="96px",a.style.maxWidth="220px");let o=document.createElement("span");return o.textContent=e.label,o.style.display="inline",a.appendChild(o),s||a.addEventListener("click",async()=>{await this.setActiveTab(e.id)}),a}async setActiveTab(e){let r=this.tabs.find(s=>s.id===e);r&&(this.activeTabId=e,this.currentFilter="",this.currentSearchInput=null,await r.renderFn(this.tabContentContainer),this.syncActiveTabStyles())}syncActiveTabStyles(){var r,s;if(!this.tabHeaderRibbonEl)return;((s=(r=this.tabHeaderContainer)==null?void 0:r.querySelectorAll(".storyteller-tab-header"))!=null?s:[]).forEach(a=>{let o=a,l=o.dataset.tabId===this.activeTabId;o.classList.toggle("active",!!l),o.setAttribute("aria-selected",l?"true":"false"),o.setAttribute("tabindex",l?"0":"-1"),o.style.background=l?"var(--background-modifier-hover)":"transparent",o.style.outline="none"})}async renderCharactersContent(e){e.empty(),this.renderHeaderControls(e,g("characters"),async r=>{this.currentFilter=r,await this.renderCharactersList(e)},()=>{new Pi(this.app,this.plugin,null,async r=>{await this.plugin.saveCharacter(r),new ce.Notice(`Character "${r.name}" created.`)}).open()}),await this.renderCharactersList(e)}async renderCharactersList(e){let r=e.querySelector(".storyteller-list-container");r&&r.remove();let s=(await this.plugin.listCharacters()).filter(o=>o.name.toLowerCase().includes(this.currentFilter)||(o.description||"").toLowerCase().includes(this.currentFilter)||(o.traits||[]).join(" ").toLowerCase().includes(this.currentFilter)),a=e.createDiv("storyteller-list-container");if(s.length===0){let o=a.createEl("p",{text:g("noCharactersFound"),cls:"storyteller-empty-state"});o.style.color="var(--text-muted)",o.style.fontStyle="italic";return}this.renderCharacterList(s,a,e)}async renderLocationsContent(e){e.empty(),this.renderHeaderControls(e,g("locations"),async r=>{this.currentFilter=r,await this.renderLocationsList(e)},()=>{new Ii(this.app,this.plugin,null,async r=>{await this.plugin.saveLocation(r),new ce.Notice(`Location "${r.name}" created.`)}).open()}),await this.renderLocationsList(e)}async renderLocationsList(e){let r=e.querySelector(".storyteller-list-container");r&&r.remove();let s=(await this.plugin.listLocations()).filter(o=>o.name.toLowerCase().includes(this.currentFilter)||(o.description||"").toLowerCase().includes(this.currentFilter)),a=e.createDiv("storyteller-list-container");if(s.length===0){a.createEl("p",{text:g("noLocationsFound")+(this.currentFilter?g("matchingFilter"):"")});return}this.renderLocationList(s,a,e)}async renderEventsContent(e){e.empty(),this.renderHeaderControls(e,g("events"),async r=>{this.currentFilter=r,await this.renderEventsList(e)},()=>{new hi(this.app,this.plugin,null,async r=>{await this.plugin.saveEvent(r),new ce.Notice(`Event "${r.name}" created.`)}).open()},g("createNew"),r=>{r.addButton(s=>s.setButtonText(g("viewTimeline")).setCta().onClick(async()=>{let a=await this.plugin.listEvents(),{TimelineModal:o}=await Promise.resolve().then(()=>(xy(),K1));new o(this.app,this.plugin,a).open()}))}),await this.renderEventsList(e)}async renderEventsList(e){let r=e.querySelector(".storyteller-list-container");r&&r.remove();let s=(await this.plugin.listEvents()).filter(o=>o.name.toLowerCase().includes(this.currentFilter)||(o.description||"").toLowerCase().includes(this.currentFilter)||(o.dateTime||"").toLowerCase().includes(this.currentFilter)||(o.location||"").toLowerCase().includes(this.currentFilter)),a=e.createDiv("storyteller-list-container storyteller-timeline-container");if(s.length===0){a.createEl("p",{text:g("noEventsFound")+(this.currentFilter?g("matchingFilter"):"")});return}this.renderEventList(s,a,e)}async renderItemsContent(e){e.empty();let r=!1,s=e.createDiv("storyteller-controls-group"),a=new ce.Setting(s).setName(g("filterItems")).addText(o=>o.setPlaceholder(g("searchX","items")).onChange(async l=>{this.currentFilter=l.toLowerCase(),await this.renderItemsList(e,r)}));new ce.Setting(s).setName(g("plotCritical")).setDesc(g("filterX","bookmarked")).addToggle(o=>{o.setValue(r).onChange(async l=>{r=l,await this.renderItemsList(e,r)})}),new ce.Setting(s).addButton(o=>{let l=!!this.plugin.getActiveStory();o.setButtonText(g("createNew")).setCta().onClick(()=>{if(!this.plugin.getActiveStory()){new ce.Notice("Select or create a story first.");return}new Bi(this.app,this.plugin,null,async u=>{await this.plugin.savePlotItem(u),new ce.Notice(`Item "${u.name}" created.`)}).open()}),l||o.setDisabled(!0).setTooltip("Select or create a story first.")}),await this.renderItemsList(e,r)}async renderItemsList(e,r){let s=e.querySelector(".storyteller-list-container");s&&s.remove();let a=await this.plugin.listPlotItems();r&&(a=a.filter(l=>l.isPlotCritical)),a=a.filter(l=>l.name.toLowerCase().includes(this.currentFilter)||(l.description||"").toLowerCase().includes(this.currentFilter));let o=e.createDiv("storyteller-list-container");if(a.length===0){o.createEl("p",{text:g("noItemsFound")});return}a.forEach(l=>{let u=o.createDiv("storyteller-list-item"),c=u.createDiv("storyteller-list-item-pfp");if(l.profileImagePath){let y=c.createEl("img");y.src=this.getImageSrc(l.profileImagePath),y.alt=l.name}else c.setText(l.isPlotCritical?"\u2605":"\u25CF");let d=u.createDiv("storyteller-list-item-info"),f=d.createEl("strong",{text:l.name});l.isPlotCritical&&(f.setText(`\u2605 ${l.name}`),f.style.color="var(--text-accent)"),l.description&&d.createEl("p",{text:l.description.substring(0,80)+"..."});let p=d.createDiv("storyteller-list-item-extra");l.currentOwner&&p.createSpan({text:`Owner: ${l.currentOwner}`}),l.currentLocation&&(l.currentOwner&&p.appendText(" \u2022 "),p.createSpan({text:`Location: ${l.currentLocation}`}));let v=u.createDiv("storyteller-list-item-actions");this.addEditButton(v,()=>{new Bi(this.app,this.plugin,l,async y=>{await this.plugin.savePlotItem(y),new ce.Notice(`Item "${y.name}" updated.`)}).open()}),this.addDeleteButton(v,async()=>{confirm(`Are you sure you want to delete "${l.name}"?`)&&l.filePath&&await this.plugin.deletePlotItem(l.filePath)}),this.addOpenFileButton(v,l.filePath)})}async renderGalleryContent(e){e.empty();let r=async a=>{this.currentFilter=a,await this.renderGalleryList(e)},s=async()=>{await this.renderGalleryContent(e)};this.renderHeaderControls(e,g("gallery"),r,()=>{this.fileInput||(this.fileInput=e.createEl("input",{type:"file",cls:"storyteller-hidden"}),this.fileInput.accept="image/*",this.fileInput.onchange=async a=>{let o=a.target.files;if(!o||o.length===0)return;let l=o[0],u=this.plugin.settings.galleryUploadFolder;try{await this.plugin.ensureFolder(u);let c=l.name,d=(0,ce.normalizePath)(`${u}/${c}`),f=0;for(;this.app.vault.getAbstractFileByPath(d);){f++;let _=l.name.split("."),S=_.pop();c=`${_.join(".")}_${f}.${S}`,d=(0,ce.normalizePath)(`${u}/${c}`)}let p=await l.arrayBuffer(),v=await this.app.vault.createBinary(d,p);new ce.Notice(`Uploaded "${c}" to vault.`);let y=await this.plugin.addGalleryImage({filePath:v.path,title:v.basename});new Sn(this.app,this.plugin,y,!0,s).open()}catch(c){console.error("Error uploading file:",c),new ce.Notice("Error uploading file. Check console for details.")}finally{this.fileInput&&(this.fileInput.value="")}}),this.fileInput.click()},g("uploadImage")),await this.renderGalleryList(e)}async renderGalleryList(e){let r=e.querySelector(".storyteller-gallery-grid");r&&r.remove();let s=this.plugin.getGalleryImages().filter(l=>l.filePath.toLowerCase().includes(this.currentFilter)||(l.title||"").toLowerCase().includes(this.currentFilter)||(l.caption||"").toLowerCase().includes(this.currentFilter)||(l.description||"").toLowerCase().includes(this.currentFilter)||(l.tags||[]).join(" ").toLowerCase().includes(this.currentFilter)||(l.linkedCharacters||[]).join(" ").toLowerCase().includes(this.currentFilter)||(l.linkedLocations||[]).join(" ").toLowerCase().includes(this.currentFilter)||(l.linkedEvents||[]).join(" ").toLowerCase().includes(this.currentFilter)),a=e.createDiv("storyteller-gallery-grid");if(s.length===0){a.createEl("p",{text:g("noImagesFound")+(this.currentFilter?g("matchingFilter"):"")});return}let o=async()=>{await this.renderGalleryContent(e)};this.renderGalleryGrid(s,a,o)}async renderGroupsContent(e){e.empty(),new ce.Setting(e).setName(g("groups")).setDesc("Manage your groups. Shared across all entity types.").addButton(a=>{let o=!!this.plugin.getActiveStory();a.setButtonText(g("createNewGroup")).setCta().onClick(()=>{if(!this.plugin.getActiveStory()){new ce.Notice("Select or create a story first.");return}new uc(this.app,this.plugin,null,async()=>{await this.renderGroupsContent(e)},async l=>{await this.plugin.deleteGroup(l),await this.renderGroupsContent(e)}).open()}),o||a.setDisabled(!0).setTooltip("Select or create a story first.")});let r=e.querySelector(".storyteller-group-filter-bar"),s=e.querySelector(".storyteller-group-list-container");r||(r=e.createDiv("storyteller-group-filter-bar"),new ce.Setting(r).setName(g("filterGroups")).setDesc("Search by group name or description.").addText(a=>{a.setPlaceholder("Search groups...").setValue(this.currentFilter).onChange(async o=>{this.currentFilter=o,this.renderGroupsList(s)}),a.inputEl.setAttribute("aria-label","Filter groups")})),s||(s=e.createDiv("storyteller-group-list-container")),await this.renderGroupsList(s)}async renderGroupsList(e){e.empty();let r=this.plugin.getGroups().filter(u=>{let c=this.currentFilter.toLowerCase();return u.name.toLowerCase().includes(c)||u.description&&u.description.toLowerCase().includes(c)});if(r.length===0){e.createEl("p",{text:g("noGroupsFound")});return}let s=await this.plugin.listCharacters(),a=await this.plugin.listLocations(),o=await this.plugin.listEvents(),l=await this.plugin.listPlotItems();r.forEach((u,c)=>{let d=!!this.currentFilter||!1,f=e.createDiv("storyteller-group-card sts-card");f.setAttr("tabindex","0");let p=f.createDiv("storyteller-group-header"),v=p.createEl("button",{cls:"storyteller-group-toggle-btn",text:d?"\u25BC":"\u25BA"});v.setAttr("aria-label",d?"Collapse group":"Expand group"),v.setAttr("aria-expanded",d?"true":"false");let y=p.createDiv("storyteller-group-info");if(u.profileImagePath){let M=y.createEl("img",{cls:"storyteller-group-pfp"});try{M.src=this.getImageSrc(u.profileImagePath)}catch(I){}}y.createEl("strong",{text:u.name}),u.description&&y.createEl("span",{text:u.description,cls:"storyteller-group-desc"}),u.tags&&u.tags.length>0&&y.createDiv("storyteller-group-tags").createSpan({text:(u.tags||[]).map(I=>`#${I}`).join(" ")});let S=p.createDiv("storyteller-group-actions").createEl("button",{text:g("edit"),cls:"mod-cta storyteller-group-edit-btn"});S.onclick=()=>{new uc(this.app,this.plugin,u,async()=>{this.renderGroupsList(e)},async M=>{await this.plugin.deleteGroup(M),this.renderGroupsList(e)}).open()};let x=f.createDiv("storyteller-group-members");d||x.addClass("collapsed");let D={character:u.members.filter(M=>M.type==="character"),location:u.members.filter(M=>M.type==="location"),event:u.members.filter(M=>M.type==="event"),item:u.members.filter(M=>M.type==="item")},E={character:"Characters",location:"Locations",event:"Events",item:"Items"},P={character:"\u{1F464}",location:"\u{1F4CD}",event:"\u{1F552}",item:"\u{1F48E}"};["character","location","event","item"].forEach(M=>{if(D[M].length>0){let I=x.createDiv("storyteller-group-section"),H=I.createDiv("storyteller-group-entity-header");H.setAttr("role","heading"),H.setAttr("aria-level","4"),H.innerHTML=`<span class="storyteller-group-entity-icon">${P[M]}</span> <span>${E[M]}</span>`;let z=I.createEl("ul",{cls:"storyteller-group-entity-list"});D[M].forEach(U=>{let N=z.createEl("li",{cls:"storyteller-group-entity-item"}),$=U.id,B;if(M==="character"){let Y=s.find(V=>(V.id||V.name)===U.id);Y&&($=Y.name,B=Y.filePath)}else if(M==="location"){let Y=a.find(V=>(V.id||V.name)===U.id);Y&&($=Y.name,B=Y.filePath)}else if(M==="event"){let Y=o.find(V=>(V.id||V.name)===U.id);Y&&($=Y.name,B=Y.filePath)}else if(M==="item"){let Y=l.find(V=>(V.id||V.name)===U.id);Y&&($=Y.name,B=Y.filePath)}N.textContent=$,B&&(N.classList.add("is-link"),N.addEventListener("click",()=>{let Y=B,V=this.app.vault.getAbstractFileByPath(Y);V instanceof ce.TFile&&this.app.workspace.getLeaf(!1).openFile(V)}))})}}),u.members.length===0&&x.createEl("em",{text:g("noMembers")});let O=d,A=()=>{O=!O,v.textContent=O?"\u25BC":"\u25BA",v.setAttr("aria-label",O?"Collapse group":"Expand group"),v.setAttr("aria-expanded",O?"true":"false"),x.toggleClass("collapsed",!O)};v.onclick=A,v.onkeydown=M=>{(M.key==="Enter"||M.key===" ")&&(M.preventDefault(),A())}})}renderHeaderControls(e,r,s,a,o=g("createNew"),l){let u=e.createDiv("storyteller-controls-group");u.style.display="flex",u.style.alignItems="center",u.style.gap="0.5em";let c=r.toLowerCase(),d=null;c.startsWith("character")?d="character":c.startsWith("location")?d="location":c.includes("event")||c.includes("timeline")?d="event":c.startsWith("item")?d="item":c.startsWith("reference")?d="reference":c.startsWith("chapter")?d="chapter":c.startsWith("scene")&&(d="scene");let f=(()=>{if(!d)return!0;try{return this.plugin.getEntityFolder(d),!0}catch(v){return!1}})(),p=new ce.Setting(u).setName(g("filterX",r.toLowerCase())).setDesc("").addText(v=>{let y=v.setPlaceholder(g("searchX",r.toLowerCase())).onChange(async _=>{this.currentFilter=_.toLowerCase(),this.debouncedSearch?this.debouncedSearch(s):await s(this.currentFilter)});if(this.currentSearchInput=y.inputEl,fe.isMobile()){y.inputEl.autocomplete="off",y.inputEl.setAttribute("autocorrect","off"),y.inputEl.setAttribute("autocapitalize","none"),y.inputEl.spellcheck=!1,y.inputEl.addClass("mobile-input"),y.inputEl.addClass("search-input"),fe.isIOS()&&(y.inputEl.style.fontSize="1.1rem");let _=()=>{this.isUserTyping=!0,y.inputEl.removeAttribute("data-user-dismissed"),this.typingTimer&&clearTimeout(this.typingTimer),this.typingTimer=window.setTimeout(()=>{this.isUserTyping=!1},2e3)};y.inputEl.addEventListener("input",_),y.inputEl.addEventListener("focus",_),y.inputEl.addEventListener("keydown",S=>{_(),S.key==="Enter"&&fe.isMobile()&&(this.markSearchInputDismissal(),y.inputEl.blur(),S.preventDefault())}),y.inputEl.addEventListener("blur",()=>{this.isUserTyping=!1,this.typingTimer&&(clearTimeout(this.typingTimer),this.typingTimer=null)}),y.inputEl.addEventListener("focus",()=>{y.inputEl.removeAttribute("data-user-dismissed"),fe.isMobile()&&y.inputEl.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}),y.inputEl.addEventListener("blur",S=>{let x=y.inputEl.hasAttribute("data-user-dismissed");fe.isMobile()&&!x&&document.activeElement!==y.inputEl&&setTimeout(()=>{let D=y.inputEl.hasAttribute("data-user-dismissed");if(this.currentSearchInput===y.inputEl&&!D&&document.activeElement!==y.inputEl&&y.inputEl.isConnected)try{y.inputEl.focus()}catch(E){}},10)})}return y});p.addButton(v=>{v.setButtonText(o).setCta().onClick(()=>{if(d)try{this.plugin.getEntityFolder(d)}catch(y){new ce.Notice("Select or create a story first.");return}a()}),f||v.setDisabled(!0).setTooltip("Select or create a story first.")}),l&&l(p)}async renderReferencesContent(e){e.empty(),this.renderHeaderControls(e,"References",async r=>{this.currentFilter=r,await this.renderReferencesList(e)},()=>{Promise.resolve().then(()=>(tf(),ef)).then(({ReferenceModal:r})=>{new r(this.app,this.plugin,null,async s=>{await this.plugin.saveReference(s),new ce.Notice(`Reference "${s.name}" created.`)}).open()})},g("createNew")),await this.renderReferencesList(e)}async renderReferencesList(e){let r=e.querySelector(".storyteller-list-container");r&&r.remove();let s=(await this.plugin.listReferences()).filter(o=>o.name.toLowerCase().includes(this.currentFilter)||(o.category||"").toLowerCase().includes(this.currentFilter)||(o.content||"").toLowerCase().includes(this.currentFilter)||(o.tags||[]).join(" ").toLowerCase().includes(this.currentFilter)),a=e.createDiv("storyteller-list-container");if(s.length===0){a.createEl("p",{text:g("noReferencesFound")+(this.currentFilter?g("matchingFilter"):"")}).addClass("storyteller-empty-state");return}s.forEach(o=>{let l=a.createDiv("storyteller-list-item"),u=l.createDiv("storyteller-list-item-pfp");if(o.profileImagePath){let p=u.createEl("img");try{p.src=this.getImageSrc(o.profileImagePath),p.alt=o.name}catch(v){u.createSpan({text:"?"})}}else u.createDiv({cls:"storyteller-pfp-placeholder",text:o.name.substring(0,1)});let c=l.createDiv("storyteller-list-item-info"),d=c.createEl("strong",{text:o.name});if(o.category&&c.createEl("span",{text:` (${o.category})`,cls:"storyteller-list-item-status"}),o.content){let p=o.content.length>120?o.content.substring(0,120)+"\u2026":o.content;c.createEl("p",{text:p})}o.tags&&o.tags.length>0&&c.createDiv("storyteller-list-item-extra").createSpan({text:o.tags.map(v=>`#${v}`).join(" ")});let f=l.createDiv("storyteller-list-item-actions");this.addEditButton(f,()=>{Promise.resolve().then(()=>(tf(),ef)).then(({ReferenceModal:p})=>{new p(this.app,this.plugin,o,async v=>{await this.plugin.saveReference(v),new ce.Notice(`Reference "${v.name}" updated.`)},async v=>{v.filePath&&await this.plugin.deleteReference(v.filePath)}).open()})}),this.addDeleteButton(f,async()=>{o.filePath&&confirm(`Delete reference "${o.name}"?`)&&await this.plugin.deleteReference(o.filePath)}),this.addOpenFileButton(f,o.filePath)})}async renderChaptersContent(e){e.empty(),this.renderHeaderControls(e,"Chapters",async r=>{this.currentFilter=r,await this.renderChaptersList(e)},()=>{Promise.resolve().then(()=>(sf(),nf)).then(({ChapterModal:r})=>{new r(this.app,this.plugin,null,async s=>{await this.plugin.saveChapter(s),new ce.Notice(`Chapter "${s.name}" created.`)}).open()})},g("createNew")),await this.renderChaptersList(e)}async renderChaptersList(e){let r=e.querySelector(".storyteller-list-container");r&&r.remove();let s=(await this.plugin.listChapters()).filter(o=>{var l;return o.name.toLowerCase().includes(this.currentFilter)||(""+((l=o.number)!=null?l:"")).toLowerCase().includes(this.currentFilter)||(o.summary||"").toLowerCase().includes(this.currentFilter)||(o.tags||[]).join(" ").toLowerCase().includes(this.currentFilter)}),a=e.createDiv("storyteller-list-container");if(s.length===0){a.createEl("p",{text:g("noChaptersFound")+(this.currentFilter?g("matchingFilter"):"")});return}s.forEach(o=>{var p;let l=a.createDiv("storyteller-list-item"),u=l.createDiv("storyteller-list-item-pfp");if(o.profileImagePath){let v=u.createEl("img");try{v.src=this.getImageSrc(o.profileImagePath),v.alt=o.name}catch(y){u.createSpan({text:"?"})}}else{let v=u.createDiv({cls:"storyteller-pfp-placeholder",text:((p=o.number)!=null?p:"?").toString()});v.title="Chapter number"}let c=l.createDiv("storyteller-list-item-info"),d=o.number!=null?`${o.number}. ${o.name}`:o.name;if(c.createEl("strong",{text:d}),o.summary){let v=o.summary.length>120?o.summary.substring(0,120)+"\u2026":o.summary;c.createEl("p",{text:v})}o.tags&&o.tags.length>0&&c.createDiv("storyteller-list-item-extra").createSpan({text:o.tags.map(y=>`#${y}`).join(" ")});let f=l.createDiv("storyteller-list-item-actions");this.addEditButton(f,()=>{Promise.resolve().then(()=>(sf(),nf)).then(({ChapterModal:v})=>{new v(this.app,this.plugin,o,async y=>{await this.plugin.saveChapter(y),new ce.Notice(`Chapter "${y.name}" updated.`)},async y=>{y.filePath&&await this.plugin.deleteChapter(y.filePath)}).open()})}),this.addDeleteButton(f,async()=>{o.filePath&&confirm(`Delete chapter "${o.name}"?`)&&await this.plugin.deleteChapter(o.filePath)}),this.addOpenFileButton(f,o.filePath)})}async renderScenesContent(e){e.empty(),this.renderHeaderControls(e,"Scenes",async r=>{this.currentFilter=r,await this.renderScenesList(e)},()=>{Promise.resolve().then(()=>(of(),af)).then(({SceneModal:r})=>{new r(this.app,this.plugin,null,async s=>{await this.plugin.saveScene(s),new ce.Notice(`Scene "${s.name}" created.`)}).open()})},g("createNew")),await this.renderScenesList(e)}async renderScenesList(e){let r=e.querySelector(".storyteller-list-container");r&&r.remove();let s=(await this.plugin.listScenes()).filter(l=>l.name.toLowerCase().includes(this.currentFilter)||(l.content||"").toLowerCase().includes(this.currentFilter)||(l.status||"").toLowerCase().includes(this.currentFilter)||(l.chapterName||"").toLowerCase().includes(this.currentFilter)||(l.tags||[]).join(" ").toLowerCase().includes(this.currentFilter)),a=await this.plugin.listChapters(),o=e.createDiv("storyteller-list-container");if(s.length===0){o.createEl("p",{text:g("noScenesFound")||"No scenes found."+(this.currentFilter?g("matchingFilter"):"")});return}s.forEach(l=>{let u=o.createDiv("storyteller-list-item"),c=u.createDiv("storyteller-list-item-pfp");if(l.profileImagePath){let _=c.createEl("img");try{_.src=this.getImageSrc(l.profileImagePath),_.alt=l.name}catch(S){c.createSpan({text:"?"})}}else c.createDiv({cls:"storyteller-pfp-placeholder",text:l.name.substring(0,1)});let d=u.createDiv("storyteller-list-item-info"),f=d.createEl("strong",{text:l.name}),p=d.createDiv("storyteller-list-item-extra");if(l.chapterName?p.createSpan({text:`Chapter: ${l.chapterName}`}):p.createSpan({text:"Unassigned"}),l.status&&p.createSpan({text:` \u2022 ${l.status}`}),l.content){let _=l.content.length>120?l.content.substring(0,120)+"\u2026":l.content;d.createEl("p",{text:_})}l.tags&&l.tags.length>0&&d.createDiv("storyteller-list-item-extra").createSpan({text:l.tags.map(S=>`#${S}`).join(" ")});let v=l.chapterId?a.find(_=>_.id===l.chapterId):l.chapterName?a.find(_=>_.name===l.chapterName):void 0;v&&new ce.ButtonComponent(u.createDiv("storyteller-scene-go-chapter")).setIcon("arrow-right").setTooltip("Go to chapter").onClick(()=>{var x;if(v.filePath){let D=this.app.vault.getAbstractFileByPath(v.filePath);if(D instanceof ce.TFile){this.app.workspace.getLeaf(!1).openFile(D);return}}let S=(x=this.tabHeaderContainer)==null?void 0:x.querySelector('[data-tab-id="chapters"]');S==null||S.click()}).buttonEl.classList.add("mod-cta");let y=u.createDiv("storyteller-list-item-actions");this.addEditButton(y,()=>{Promise.resolve().then(()=>(of(),af)).then(({SceneModal:_})=>{new _(this.app,this.plugin,l,async S=>{await this.plugin.saveScene(S),new ce.Notice(`Scene "${S.name}" updated.`)},async S=>{S.filePath&&await this.plugin.deleteScene(S.filePath)}).open()})}),this.addDeleteButton(y,async()=>{l.filePath&&confirm(`Delete scene "${l.name}"?`)&&await this.plugin.deleteScene(l.filePath)}),this.addOpenFileButton(y,l.filePath)})}renderCharacterList(e,r,s){e.forEach(a=>{let o=r.createDiv("storyteller-list-item storyteller-character-item"),l=o.createDiv("storyteller-list-item-pfp");if(a.profileImagePath){let f=l.createEl("img");try{f.src=this.getImageSrc(a.profileImagePath),f.alt=a.name}catch(p){console.error(`Error loading profile image for ${a.name}: ${a.profileImagePath}`,p),l.createSpan({text:"?",title:"Error loading image"})}}else l.createDiv({cls:"storyteller-pfp-placeholder",text:a.name.substring(0,1)});let u=o.createDiv("storyteller-list-item-info");u.createEl("strong",{text:a.name}),a.description&&u.createEl("p",{text:a.description.substring(0,80)+(a.description.length>80?"...":"")});let c=u.createDiv("storyteller-list-item-extra");a.status&&c.createSpan({cls:"storyteller-list-item-status",text:a.status}),a.affiliation&&(a.status&&c.appendText(" \u2022 "),c.createSpan({cls:"storyteller-list-item-affiliation",text:a.affiliation}));let d=o.createDiv("storyteller-list-item-actions");this.addEditButton(d,()=>{new Pi(this.app,this.plugin,a,async f=>{await this.plugin.saveCharacter(f),new ce.Notice(`Character "${f.name}" updated.`)}).open()}),this.addDeleteButton(d,async()=>{confirm(`Are you sure you want to delete "${a.name}"? This will move the file to system trash.`)&&(a.filePath?await this.plugin.deleteCharacter(a.filePath):new ce.Notice("Error: Cannot delete character without file path."))}),this.addOpenFileButton(d,a.filePath)})}renderLocationList(e,r,s){e.forEach(a=>{let o=r.createDiv("storyteller-list-item"),l=o.createDiv("storyteller-list-item-pfp");if(a.profileImagePath){let f=l.createEl("img");try{f.src=this.getImageSrc(a.profileImagePath),f.alt=a.name}catch(p){console.error(`Error loading image for ${a.name}: ${a.profileImagePath}`,p),l.createSpan({text:"?",title:"Error loading image"})}}else{let f=a.name.substring(0,1).toUpperCase();l.createDiv({cls:"storyteller-pfp-placeholder",text:f})}let u=o.createDiv("storyteller-list-item-info");u.createEl("strong",{text:a.name}),a.description&&u.createEl("p",{text:a.description.substring(0,100)+(a.description.length>100?"...":"")});let c=u.createDiv("storyteller-list-item-extra");a.locationType&&c.createSpan({cls:"storyteller-list-item-type",text:a.locationType}),a.region&&(a.locationType&&c.appendText(" \u2022 "),c.createSpan({cls:"storyteller-list-item-region",text:`(${a.region})`})),a.status&&((a.locationType||a.region)&&c.appendText(" \u2022 "),c.createSpan({cls:"storyteller-list-item-status",text:`[${a.status}]`}));let d=o.createDiv("storyteller-list-item-actions");this.addEditButton(d,()=>{new Ii(this.app,this.plugin,a,async f=>{await this.plugin.saveLocation(f),new ce.Notice(`Location "${f.name}" updated.`)}).open()}),this.addDeleteButton(d,async()=>{confirm(`Are you sure you want to delete "${a.name}"?`)&&(a.filePath?await this.plugin.deleteLocation(a.filePath):new ce.Notice("Error: Cannot delete location without file path."))}),this.addOpenFileButton(d,a.filePath)})}renderEventList(e,r,s){e.forEach(a=>{let o=r.createDiv("storyteller-list-item"),l=o.createDiv("storyteller-list-item-pfp");if(a.profileImagePath){let f=l.createEl("img");try{f.src=this.getImageSrc(a.profileImagePath),f.alt=a.name}catch(p){console.error(`Error loading image for ${a.name}: ${a.profileImagePath}`,p),l.createSpan({text:"?",title:"Error loading image"})}}else{let f=a.name.substring(0,1).toUpperCase();l.createDiv({cls:"storyteller-pfp-placeholder",text:f})}let u=o.createDiv("storyteller-list-item-info");if(u.createEl("strong",{text:a.name}),a.dateTime&&u.createEl("span",{text:` (${a.dateTime})`,cls:"storyteller-timeline-date"}),a.description&&u.createEl("p",{text:a.description.substring(0,100)+(a.description.length>100?"...":"")}),a.images&&Array.isArray(a.images)&&a.images.length>0){let f=u.createDiv("storyteller-event-images-row");a.images.forEach(p=>{try{let v=f.createEl("img",{cls:"storyteller-event-image-thumb"});v.src=this.getImageSrc(p),v.alt=a.name+" image",v.loading="lazy",v.style.maxWidth="48px",v.style.maxHeight="48px",v.style.marginRight="4px",v.style.cursor="pointer",v.addEventListener("click",()=>{new Sn(this.app,this.plugin,{id:p,filePath:p},!1,()=>Promise.resolve()).open()})}catch(v){f.createSpan({text:"?",title:"Error loading image"})}})}let c=u.createDiv("storyteller-list-item-extra");a.status&&c.createSpan({cls:"storyteller-list-item-status",text:`[${a.status}]`}),a.location&&(a.status&&c.appendText(" \u2022 "),c.createSpan({cls:"storyteller-list-item-location",text:`@ ${a.location}`}));let d=o.createDiv("storyteller-list-item-actions");this.addEditButton(d,()=>{new hi(this.app,this.plugin,a,async f=>{await this.plugin.saveEvent(f),new ce.Notice(`Event "${f.name}" updated.`)}).open()}),this.addDeleteButton(d,async()=>{confirm(`Are you sure you want to delete "${a.name}"?`)&&(a.filePath?await this.plugin.deleteEvent(a.filePath):new ce.Notice("Error: Cannot delete event without file path."))}),this.addOpenFileButton(d,a.filePath)})}renderGalleryGrid(e,r,s){r.addClass("storyteller-gallery-grid"),e.forEach(a=>{let o=r.createDiv("storyteller-gallery-item");o.setAttribute("role","button"),o.setAttribute("tabindex","0");let l=o.createEl("img",{cls:"storyteller-gallery-item-image"});l.src=this.getImageSrc(a.filePath),l.alt=a.title||a.filePath.split("/").pop()||"Gallery image",l.loading="lazy";let u=o.createDiv("storyteller-gallery-item-title"),c=a.title||a.filePath.split("/").pop()||"";u.setText(c),u.setAttribute("title",c);let d=()=>{new Sn(this.app,this.plugin,a,!1,s).open()};o.addEventListener("click",d),o.addEventListener("keydown",f=>{(f.key==="Enter"||f.key===" ")&&(f.preventDefault(),d())})})}addEditButton(e,r){new ce.ButtonComponent(e).setIcon("pencil").setTooltip("Edit").onClick(r)}addDeleteButton(e,r){new ce.ButtonComponent(e).setIcon("trash").setTooltip("Delete").setClass("mod-warning").onClick(r)}addOpenFileButton(e,r){r&&new ce.ButtonComponent(e).setIcon("go-to-file").setTooltip("Open note").onClick(()=>{let s=this.app.vault.getAbstractFileByPath(r);s instanceof ce.TFile?this.app.workspace.getLeaf(!1).openFile(s):new ce.Notice("Could not find the note file.")})}async onClose(){var e;(e=this.fileInput)==null||e.remove(),this.fileInput=null,this.typingTimer&&(clearTimeout(this.typingTimer),this.typingTimer=null),this.dismissalTimer&&(clearTimeout(this.dismissalTimer),this.dismissalTimer=null),this.isUserTyping=!1,this.currentSearchInput=null}};var Te=require("obsidian");var No=require("obsidian");ze();var uf=class extends No.Modal{constructor(e,r,s,a){super(e);this.name="";this.description="";this.story=r,this.onSubmit=a,this.existingNames=s.filter(o=>o!==r.name).map(o=>o.toLowerCase()),this.name=r.name,this.description=r.description||""}onOpen(){let{contentEl:e}=this;e.empty(),e.createEl("h2",{text:g("editStory")}),new No.Setting(e).setName(g("storyNameField")).setDesc(g("storyNameDesc")).addText(s=>{this.nameInput=s,s.setPlaceholder(g("enterStoryNamePh")).setValue(this.name).onChange(a=>{this.name=a.trim(),this.clearError()}),s.inputEl.addEventListener("keydown",a=>{a.key==="Enter"&&(a.preventDefault(),this.trySubmit())}),s.inputEl.focus()}),new No.Setting(e).setName(g("descriptionField")).setDesc(g("descriptionOptionalDesc")).addTextArea(s=>{this.descInput=s,s.setPlaceholder(g("describeStoryPh")).setValue(this.description).onChange(a=>{this.description=a}),s.inputEl.rows=3}),this.errorEl=e.createEl("div",{cls:"storyteller-modal-error"}),this.clearError();let r=new No.Setting(e);r.addButton(s=>s.setButtonText(g("cancel")).onClick(()=>this.close())),r.addButton(s=>s.setButtonText(g("saveChanges")).setCta().onClick(()=>this.trySubmit()))}clearError(){this.errorEl.textContent=""}showError(e){this.errorEl.textContent=e,this.errorEl.style.color="var(--text-error, red)"}async trySubmit(){if(!this.name){this.showError("Story name is required."),this.nameInput.inputEl.focus();return}if(this.existingNames.includes(this.name.toLowerCase())){this.showError("A story with this name already exists."),this.nameInput.inputEl.focus();return}try{await this.onSubmit(this.name,this.description),this.close()}catch(e){this.showError("Failed to update story.")}}onClose(){this.contentEl.empty()}};var cf=require("obsidian");ze();var Wr=class extends cf.SuggestModal{constructor(e,r,s){super(e);this.allFolderPaths=[];this.appRef=e,this.onChoose=r,this.onCloseCb=s,this.setPlaceholder(g("filterFoldersPh")),this.allFolderPaths=this.collectAllFolderPaths()}collectAllFolderPaths(){let e=[],r=this.appRef.vault.getRoot(),s=a=>{a.path&&!e.includes(a.path)&&e.push(a.path);for(let o of a.children)o instanceof cf.TFolder&&s(o)};return s(r),e.sort((a,o)=>a.localeCompare(o)),e}getSuggestions(e){let r=(e||"").toLowerCase();return r?this.allFolderPaths.filter(s=>s.toLowerCase().includes(r)).slice(0,200):this.allFolderPaths.slice(0,200)}renderSuggestion(e,r){r.createEl("div",{text:e})}onChooseSuggestion(e){this.onChoose(e)}onClose(){if(this.onCloseCb)try{this.onCloseCb()}catch(e){}super.onClose()}};ze();var df=class extends Te.PluginSettingTab{constructor(e,r){super(e,r);this.plugin=r}display(){let{containerEl:e}=this;e.empty(),this.plugin.settings.showTutorial&&this.addTutorialSection(e),new Te.Setting(e).setName(g("language")).setDesc(g("selectLanguage")).addDropdown(r=>{r.addOption("en",g("english")).addOption("zh",g("chinese")).setValue(this.plugin.settings.language).onChange(async s=>{this.plugin.settings.language=s,await this.plugin.saveSettings(),cd(s),new Te.Notice(g("languageChanged"))})}),new Te.Setting(e).setName(g("stories")).setHeading(),this.plugin.settings.stories.forEach(r=>{let s=this.plugin.settings.activeStoryId===r.id;new Te.Setting(e).setName(r.name).setDesc(r.description||"").addButton(a=>a.setButtonText(s?g("active"):g("setActive")).setCta().setDisabled(s).onClick(async()=>{await this.plugin.setActiveStory(r.id),this.display()})).addExtraButton(a=>a.setIcon("pencil").setTooltip(g("editStory")).onClick(async()=>{let o=this.plugin.settings.stories.map(l=>l.name);new uf(this.app,r,o,async(l,u)=>{await this.plugin.updateStory(r.id,l,u),this.display()}).open()})).addExtraButton(a=>a.setIcon("trash").setTooltip(g("delete")).onClick(async()=>{var o;confirm(g("confirmDeleteStory",r.name))&&(this.plugin.settings.stories=this.plugin.settings.stories.filter(l=>l.id!==r.id),this.plugin.settings.activeStoryId===r.id&&(this.plugin.settings.activeStoryId=((o=this.plugin.settings.stories[0])==null?void 0:o.id)||""),await this.plugin.saveSettings(),this.display())}))}),new Te.Setting(e).addButton(r=>r.setButtonText(g("createNewStory")).setCta().onClick(async()=>{let s=this.plugin.settings.stories.map(a=>a.name);new us(this.app,s,async(a,o)=>{await this.plugin.createStory(a,o),this.display()}).open()})),new Te.Setting(e).setName(g("storyDiscovery")).setDesc(g("scanVaultDesc")).addButton(r=>r.setButtonText(g("refreshDiscovery")).setTooltip(g("scanVaultDesc")).onClick(async()=>{r.setDisabled(!0);try{await this.plugin.refreshStoryDiscovery()}finally{r.setDisabled(!1),this.display()}})),new Te.Setting(e).setName(g("galleryUploadFolder")).setDesc(g("galleryFolderDesc")).addText(r=>{let s=r.setPlaceholder(g("galleryUploadFolderPh")).setValue(this.plugin.settings.galleryUploadFolder).onChange(async l=>{this.plugin.settings.galleryUploadFolder=l,await this.plugin.saveSettings()}),a=!1,o=()=>{if(a)return;new Wr(this.app,async u=>{this.plugin.settings.galleryUploadFolder=u,s.setValue(u),await this.plugin.saveSettings()},()=>{a=!0,setTimeout(()=>{a=!1},300),setTimeout(()=>s.inputEl.focus(),0)}).open()};return s.inputEl.addEventListener("keydown",l=>{(l.key==="ArrowDown"||l.ctrlKey&&l.key.toLowerCase()===" ")&&(l.preventDefault(),o())}),s.inputEl.addEventListener("focus",o),s.inputEl.addEventListener("click",o),s}),new Te.Setting(e).setName(g("timelineAndParsing")).setHeading(),new Te.Setting(e).setName(g("customFieldsSerialization")).setDesc(g("customFieldsDesc")).addDropdown(r=>r.addOption("flatten",g("flattenCustomFields")).addOption("nested",g("nestedCustomFields")).setValue(this.plugin.settings.customFieldsMode||"flatten").onChange(async s=>{this.plugin.settings.customFieldsMode=s,await this.plugin.saveSettings()})),new Te.Setting(e).setName(g("forwardDateBias")).setDesc(g("forwardDateBiasDesc")).addToggle(r=>r.setValue(!1).onChange(async s=>{await this.plugin.saveSettings()})),new Te.Setting(e).setName(g("customToday")).setDesc(g("customTodayDesc")).addText(r=>r.setPlaceholder(g("customTodayPh")).setValue(this.plugin.settings.customTodayISO||"").onChange(async s=>{let a=s.trim();this.plugin.settings.customTodayISO=a||void 0,await this.plugin.saveSettings()})).addExtraButton(r=>r.setIcon("reset").setTooltip(g("clearCustomToday")).onClick(async()=>{this.plugin.settings.customTodayISO=void 0,await this.plugin.saveSettings(),this.display()})),new Te.Setting(e).setName(g("defaultTimelineGrouping")).addDropdown(r=>r.addOptions({none:g("noGrouping"),location:g("byLocation"),group:g("byGroup")}).setValue(this.plugin.settings.defaultTimelineGroupMode||"none").onChange(async s=>{this.plugin.settings.defaultTimelineGroupMode=s,await this.plugin.saveSettings()})),new Te.Setting(e).setName(g("defaultZoomPreset")).addDropdown(r=>r.addOptions({none:g("noneOption"),fit:g("fitOption"),decade:g("decadeOption"),century:g("centuryOption")}).setValue(this.plugin.settings.defaultTimelineZoomPreset||"none").onChange(async s=>{this.plugin.settings.defaultTimelineZoomPreset=s,await this.plugin.saveSettings()})),new Te.Setting(e).setName(g("defaultStacking")).addToggle(r=>{var s;return r.setValue((s=this.plugin.settings.defaultTimelineStack)!=null?s:!0).onChange(async a=>{this.plugin.settings.defaultTimelineStack=a,await this.plugin.saveSettings()})}),new Te.Setting(e).setName(g("defaultDensity")).addSlider(r=>{var s;return r.setLimits(0,100,5).setValue((s=this.plugin.settings.defaultTimelineDensity)!=null?s:50).setDynamicTooltip().onChange(async a=>{this.plugin.settings.defaultTimelineDensity=a,await this.plugin.saveSettings()})}),new Te.Setting(e).setName(g("showLegendByDefault")).addToggle(r=>{var s;return r.setValue((s=this.plugin.settings.showTimelineLegend)!=null?s:!0).onChange(async a=>{this.plugin.settings.showTimelineLegend=a,await this.plugin.saveSettings()})}),new Te.Setting(e).setName(g("timelineDefaultHeight")).setDesc(g("timelineHeightDesc")).addText(r=>r.setPlaceholder(g("timelineHeightPh")).setValue("380px").onChange(async()=>{})),new Te.Setting(e).setName(g("useCustomEntityFolders")).setDesc(g("useCustomFoldersDesc")).addToggle(r=>r.setValue(!!this.plugin.settings.enableCustomEntityFolders).onChange(async s=>{if(this.plugin.settings.enableCustomEntityFolders=s,await this.plugin.saveSettings(),s)if(await this.plugin.autoDetectCustomEntityFolders(),((this.plugin.settings.storyRootFolderTemplate||"").match(/\{story(Name|Slug|Id)\}/i)||(this.plugin.settings.characterFolderPath||"").match(/\{story(Name|Slug|Id)\}/i)||(this.plugin.settings.locationFolderPath||"").match(/\{story(Name|Slug|Id)\}/i)||(this.plugin.settings.eventFolderPath||"").match(/\{story(Name|Slug|Id)\}/i)||(this.plugin.settings.itemFolderPath||"").match(/\{story(Name|Slug|Id)\}/i)||(this.plugin.settings.referenceFolderPath||"").match(/\{story(Name|Slug|Id)\}/i)||(this.plugin.settings.chapterFolderPath||"").match(/\{story(Name|Slug|Id)\}/i)||(this.plugin.settings.sceneFolderPath||"").match(/\{story(Name|Slug|Id)\}/i))&&!this.plugin.settings.activeStoryId){let o=e.createDiv({cls:"mod-warning"});o.style.marginTop="8px",o.setText(g("customFoldersPlaceholderWarning"))}else await this.plugin.refreshCustomFolderDiscovery();this.display()})),this.plugin.settings.enableCustomEntityFolders&&(new Te.Setting(e).setName(g("previewResolvedFolders")).setDesc(g("previewFoldersDesc")).addButton(r=>r.setButtonText(g("previewBtn")).onClick(async()=>{var u,c;let s=((c=(u=this.plugin).buildResolver)==null?void 0:c.call(u))||null;if(!s)return;let a=s.resolveAll(),o=e.createEl("pre"),l=[];for(let[d,f]of Object.entries(a)){let p=f.path||f.error||"\u2014";l.push(`${d.padEnd(10)}: ${p}`)}o.setText(l.join(`
`))})),new Te.Setting(e).setName(g("storyRootFolderOptional")).setDesc(g("storyRootDesc")).addText(r=>{let s=r.setPlaceholder(g("storyRootFolderPh")).setValue(this.plugin.settings.storyRootFolderTemplate||"").onChange(async l=>{this.plugin.settings.storyRootFolderTemplate=l,await this.plugin.saveSettings()}),a=!1,o=()=>{if(a)return;new Wr(this.app,async u=>{this.plugin.settings.storyRootFolderTemplate=u,s.setValue(u),await this.plugin.saveSettings()},()=>{a=!0,setTimeout(()=>{a=!1},300),setTimeout(()=>s.inputEl.focus(),0)}).open()};return s.inputEl.addEventListener("keydown",l=>{(l.key==="ArrowDown"||l.ctrlKey&&l.key.toLowerCase()===" ")&&(l.preventDefault(),o())}),s.inputEl.addEventListener("focus",o),s.inputEl.addEventListener("click",o),s}),new Te.Setting(e).setName(g("charactersFolder")).setDesc(g("charactersFolderDesc")).addText(r=>{let s=r.setPlaceholder(g("charactersFolderPh")).setValue(this.plugin.settings.characterFolderPath||"").onChange(async l=>{this.plugin.settings.characterFolderPath=l,await this.plugin.saveSettings()}),a=!1,o=()=>{if(a)return;new Wr(this.app,async u=>{this.plugin.settings.characterFolderPath=u,s.setValue(u),await this.plugin.saveSettings()},()=>{a=!0,setTimeout(()=>{a=!1},300),setTimeout(()=>s.inputEl.focus(),0)}).open()};return s.inputEl.addEventListener("keydown",l=>{(l.key==="ArrowDown"||l.ctrlKey&&l.key.toLowerCase()===" ")&&(l.preventDefault(),o())}),s.inputEl.addEventListener("focus",o),s.inputEl.addEventListener("click",o),s}),new Te.Setting(e).setName(g("locationsFolder")).setDesc(g("locationsFolderDesc")).addText(r=>{let s=r.setPlaceholder(g("locationsFolderPh")).setValue(this.plugin.settings.locationFolderPath||"").onChange(async l=>{this.plugin.settings.locationFolderPath=l,await this.plugin.saveSettings()}),a=!1,o=()=>{if(a)return;new Wr(this.app,async u=>{this.plugin.settings.locationFolderPath=u,s.setValue(u),await this.plugin.saveSettings()},()=>{a=!0,setTimeout(()=>{a=!1},300),setTimeout(()=>s.inputEl.focus(),0)}).open()};return s.inputEl.addEventListener("keydown",l=>{(l.key==="ArrowDown"||l.ctrlKey&&l.key.toLowerCase()===" ")&&(l.preventDefault(),o())}),s.inputEl.addEventListener("focus",o),s.inputEl.addEventListener("click",o),s}),new Te.Setting(e).setName(g("eventsFolder")).setDesc(g("eventsFolderDesc")).addText(r=>{let s=r.setPlaceholder(g("eventsFolderPh")).setValue(this.plugin.settings.eventFolderPath||"").onChange(async l=>{this.plugin.settings.eventFolderPath=l,await this.plugin.saveSettings()}),a=!1,o=()=>{if(a)return;new Wr(this.app,async u=>{this.plugin.settings.eventFolderPath=u,s.setValue(u),await this.plugin.saveSettings()},()=>{a=!0,setTimeout(()=>{a=!1},300),setTimeout(()=>s.inputEl.focus(),0)}).open()};return s.inputEl.addEventListener("keydown",l=>{(l.key==="ArrowDown"||l.ctrlKey&&l.key.toLowerCase()===" ")&&(l.preventDefault(),o())}),s.inputEl.addEventListener("focus",o),s.inputEl.addEventListener("click",o),s}),new Te.Setting(e).setName(g("itemsFolder")).setDesc(g("itemsFolderDesc")).addText(r=>{let s=r.setPlaceholder(g("itemsFolderPh")).setValue(this.plugin.settings.itemFolderPath||"").onChange(async l=>{this.plugin.settings.itemFolderPath=l,await this.plugin.saveSettings()}),a=!1,o=()=>{if(a)return;new Wr(this.app,async u=>{this.plugin.settings.itemFolderPath=u,s.setValue(u),await this.plugin.saveSettings()},()=>{a=!0,setTimeout(()=>{a=!1},300),setTimeout(()=>s.inputEl.focus(),0)}).open()};return s.inputEl.addEventListener("keydown",l=>{(l.key==="ArrowDown"||l.ctrlKey&&l.key.toLowerCase()===" ")&&(l.preventDefault(),o())}),s.inputEl.addEventListener("focus",o),s.inputEl.addEventListener("click",o),s}),new Te.Setting(e).setName(g("referencesFolder")).setDesc(g("referencesFolderDesc")).addText(r=>{let s=r.setPlaceholder(g("referencesFolderPh")).setValue(this.plugin.settings.referenceFolderPath||"").onChange(async l=>{this.plugin.settings.referenceFolderPath=l,await this.plugin.saveSettings()}),a=!1,o=()=>{if(a)return;new Wr(this.app,async u=>{this.plugin.settings.referenceFolderPath=u,s.setValue(u),await this.plugin.saveSettings()},()=>{a=!0,setTimeout(()=>{a=!1},300),setTimeout(()=>s.inputEl.focus(),0)}).open()};return s.inputEl.addEventListener("keydown",l=>{(l.key==="ArrowDown"||l.ctrlKey&&l.key.toLowerCase()===" ")&&(l.preventDefault(),o())}),s.inputEl.addEventListener("focus",o),s.inputEl.addEventListener("click",o),s}),new Te.Setting(e).setName(g("scenesFolder")).setDesc(g("scenesFolderDesc")).addText(r=>{let s=r.setPlaceholder(g("scenesFolderPh")).setValue(this.plugin.settings.sceneFolderPath||"").onChange(async l=>{this.plugin.settings.sceneFolderPath=l,await this.plugin.saveSettings()}),a=!1,o=()=>{if(a)return;new Wr(this.app,async u=>{this.plugin.settings.sceneFolderPath=u,s.setValue(u),await this.plugin.saveSettings()},()=>{a=!0,setTimeout(()=>{a=!1},300),setTimeout(()=>s.inputEl.focus(),0)}).open()};return s.inputEl.addEventListener("keydown",l=>{(l.key==="ArrowDown"||l.ctrlKey&&l.key.toLowerCase()===" ")&&(l.preventDefault(),o())}),s.inputEl.addEventListener("focus",o),s.inputEl.addEventListener("click",o),s}),new Te.Setting(e).setName(g("chaptersFolder")).setDesc(g("chaptersFolderDesc")).addText(r=>{let s=r.setPlaceholder(g("chaptersFolderPh")).setValue(this.plugin.settings.chapterFolderPath||"").onChange(async l=>{this.plugin.settings.chapterFolderPath=l,await this.plugin.saveSettings()}),a=!1,o=()=>{if(a)return;new Wr(this.app,async u=>{this.plugin.settings.chapterFolderPath=u,s.setValue(u),await this.plugin.saveSettings()},()=>{a=!0,setTimeout(()=>{a=!1},300),setTimeout(()=>s.inputEl.focus(),0)}).open()};return s.inputEl.addEventListener("keydown",l=>{(l.key==="ArrowDown"||l.ctrlKey&&l.key.toLowerCase()===" ")&&(l.preventDefault(),o())}),s.inputEl.addEventListener("focus",o),s.inputEl.addEventListener("click",o),s})),new Te.Setting(e).setName(g("oneStoryMode")).setDesc(g("oneStoryModeDesc")).addToggle(r=>r.setValue(!!this.plugin.settings.enableOneStoryMode).onChange(async s=>{this.plugin.settings.enableOneStoryMode=s,await this.plugin.saveSettings(),s&&await this.plugin.initializeOneStoryModeIfNeeded(),this.display()})),!this.plugin.settings.enableCustomEntityFolders&&this.plugin.settings.enableOneStoryMode&&new Te.Setting(e).setName(g("oneStoryBaseFolder")).setDesc(g("oneStoryBaseFolderDesc")).addText(r=>{let s=r.setPlaceholder(g("oneStoryBaseFolderPh")).setValue(this.plugin.settings.oneStoryBaseFolder||"StorytellerSuite").onChange(async l=>{let u=l&&l.trim()==="/"?"":l||"StorytellerSuite";this.plugin.settings.oneStoryBaseFolder=u,await this.plugin.saveSettings(),await this.plugin.initializeOneStoryModeIfNeeded()}),a=!1,o=()=>{if(a)return;new Wr(this.app,async u=>{let c=!u||u==="/"?"":u;this.plugin.settings.oneStoryBaseFolder=c||"StorytellerSuite",s.setValue(c),await this.plugin.saveSettings(),await this.plugin.initializeOneStoryModeIfNeeded()},()=>{a=!0,setTimeout(()=>{a=!1},300),setTimeout(()=>s.inputEl.focus(),0)}).open()};return s.inputEl.addEventListener("keydown",l=>{(l.key==="ArrowDown"||l.ctrlKey&&l.key.toLowerCase()===" ")&&(l.preventDefault(),o())}),s.inputEl.addEventListener("focus",o),s.inputEl.addEventListener("click",o),s}),new Te.Setting(e).setName(g("showTutorialSection")).setDesc(g("showTutorialDesc")).addToggle(r=>r.setValue(this.plugin.settings.showTutorial).onChange(async s=>{this.plugin.settings.showTutorial=s,await this.plugin.saveSettings(),this.display()})),new Te.Setting(e).setName(g("support")).setHeading(),new Te.Setting(e).setName(g("supportDevelopment")).setDesc(g("supportDevDesc")).addButton(r=>r.setButtonText(g("buyMeACoffee")).setTooltip("Support on Ko-fi").onClick(()=>{window.open("https://ko-fi.com/kingmaws","_blank")})),new Te.Setting(e).setName(g("about")).setHeading(),new Te.Setting(e).setName(g("pluginInformation")).setDesc(g("pluginInfoDesc")).addButton(r=>r.setButtonText(g("github")).setTooltip("View source code").onClick(()=>{window.open("https://github.com/SamW7140/obsidian-storyteller-suite","_blank")}))}addTutorialSection(e){new Te.Setting(e).setName(g("tutorialGettingStarted")).setHeading();let r=createDiv();r.innerHTML=`
            <p><strong>Welcome to Storyteller Suite!</strong> This plugin helps you organize and manage all aspects of your stories. Here's how to get started:</p>
            <p><em>Tip: Click any section below to expand detailed instructions and examples.</em></p>
        `,r.style.marginBottom="1em",r.style.padding="0.75em",r.style.backgroundColor="var(--background-modifier-form-field)",r.style.borderRadius="5px",r.style.borderLeft="3px solid var(--interactive-accent)",e.appendChild(r),this.addTutorialCollapsible(e,"Dashboard and ribbon icon",`<p><strong>Access the Dashboard:</strong></p>
            <ul>
                <li>Click the <strong>book-open icon</strong> in the left ribbon (sidebar)</li>
                <li>Use Command Palette: <kbd>Ctrl/Cmd + P</kbd> \u2192 "Storyteller: Open dashboard"</li>
                <li>The dashboard is your central hub for managing all story elements</li>
            </ul>`),this.addTutorialCollapsible(e,"Story management",`<p><strong>Creating Your First Story:</strong></p>
            <ul>
                <li>Use the <strong>"Create New Story"</strong> button below (hidden when <em>One Story Mode</em> is enabled)</li>
                <li>Or from Command Palette: "Storyteller: Create New Story"</li>
                <li>Give your story a name and description</li>
                <li>By default, the plugin creates folders at <code>StorytellerSuite/Stories/YourStoryName/</code></li>
            </ul>
            <p><strong>Managing Stories:</strong></p>
            <ul>
                <li>Switch between stories using the <strong>"Set Active"</strong> button</li>
                <li>Edit story details with the pencil icon</li>
                <li>Delete stories with the trash icon (this only removes from plugin, not your files)</li>
            </ul>
            <p><strong>Immediate activation tip:</strong> Creating a story from <em>Settings</em> updates the settings list immediately, but the dashboard's story dropdown may not refresh until you reopen the dashboard. For instant activation and UI refresh, use the dashboard/command palette action <em>"Storyteller: Create New Story"</em>, or close/reopen the dashboard via <em>"Storyteller: Open dashboard"</em>.</p>
            <p><strong>One Story Mode:</strong> When enabled in settings, the interface is simplified to a single-story layout and the <em>New story</em> button is hidden. Content is organized under a single base folder.</p>`),this.addTutorialCollapsible(e,"Character management",`<p><strong>Creating Characters:</strong></p>
            <ul>
                <li><strong>Dashboard:</strong> Click "Create Character" button</li>
                <li><strong>Command Palette:</strong> "Storyteller: Create new character"</li>
                <li>Fill in character details, backstory, relationships</li>
                <li>Add profile images from your vault</li>
            </ul>
            <p><strong>Managing Characters:</strong></p>
            <ul>
                <li><strong>View All:</strong> Dashboard \u2192 "View Characters" or Command Palette \u2192 "Storyteller: View characters"</li>
                <li><strong>Edit:</strong> Click character name in dashboard or character list</li>
                <li><strong>Delete:</strong> Use the trash icon (moves to Obsidian trash)</li>
                <li>Characters are stored as markdown files in <code>Characters/</code> folder</li>
            </ul>`),this.addTutorialCollapsible(e,"Location management",`<p><strong>Creating Locations:</strong></p>
            <ul>
                <li><strong>Dashboard:</strong> Click "Create Location" button</li>
                <li><strong>Command Palette:</strong> "Storyteller: Create new location"</li>
                <li>Add descriptions, history, region, location type</li>
                <li>Link to related characters and events</li>
            </ul>
            <p><strong>Managing Locations:</strong></p>
            <ul>
                <li><strong>View All:</strong> Dashboard \u2192 "View Locations" or Command Palette \u2192 "Storyteller: View locations"</li>
                <li>Locations are stored in <code>Locations/</code> folder as markdown files</li>
                <li>Edit by clicking location name, delete with trash icon</li>
            </ul>`),this.addTutorialCollapsible(e,"Event and timeline management",`<p><strong>Creating Events:</strong></p>
            <ul>
                <li><strong>Dashboard:</strong> Click "Create Event" button</li>
                <li><strong>Command Palette:</strong> "Storyteller: Create new event"</li>
                <li>Set date/time, add descriptions, outcomes</li>
                <li>Link to involved characters and locations</li>
            </ul>
            <p><strong>Timeline View:</strong></p>
            <ul>
                <li><strong>Dashboard:</strong> Click "View Timeline" button</li>
                <li><strong>Command Palette:</strong> "Storyteller: View timeline"</li>
                <li>See all events chronologically ordered</li>
                <li>Events stored in <code>Events/</code> folder</li>
            </ul>`),this.addTutorialCollapsible(e,"Plot items management",`<p><strong>Managing Important Objects:</strong></p>
            <ul>
                <li><strong>Create:</strong> Dashboard \u2192 "Create Plot Item" or Command Palette \u2192 "Storyteller: Create new plot item"</li>
                <li><strong>Mark Critical:</strong> Use the "Plot Critical" checkbox for key story items</li>
                <li><strong>Track Ownership:</strong> Link current owner, past owners, and location</li>
                <li><strong>View All:</strong> Dashboard \u2192 "View Plot Items" or Command Palette \u2192 "Storyteller: View plot items"</li>
                <li>Items stored in <code>Items/</code> folder</li>
            </ul>`),this.addTutorialCollapsible(e,"Gallery management",`<p><strong>Image Organization:</strong></p>
            <ul>
                <li><strong>Access:</strong> Dashboard \u2192 "Gallery" button or Command Palette \u2192 "Storyteller: Open gallery"</li>
                <li><strong>Upload:</strong> Drag & drop images directly into the gallery</li>
                <li><strong>Organize:</strong> Add tags, categories, descriptions to images</li>
                <li><strong>Link:</strong> Easily reference gallery images in character/location profiles</li>
                <li>Configure upload folder below (default: <code>StorytellerSuite/GalleryUploads</code>)</li>
            </ul>`),this.addTutorialCollapsible(e,"Groups and organization",`<p><strong>Organizing with Groups:</strong></p>
            <ul>
                <li><strong>Create Groups:</strong> Command Palette \u2192 "Storyteller: Create group"</li>
                <li><strong>Add Members:</strong> Characters, locations, events, and items can be grouped</li>
                <li><strong>Manage:</strong> Rename with "Storyteller: Rename group", delete with "Storyteller: Delete group"</li>
                <li><strong>Use Cases:</strong> Royal family, specific kingdoms, plot arcs, etc.</li>
            </ul>`),this.addTutorialCollapsible(e,"Story discovery and import",`<p><strong>Automatic Discovery:</strong></p>
            <ul>
                <li>Plugin automatically detects existing <code>StorytellerSuite/Stories/</code> folders</li>
                <li><strong>Manual Refresh:</strong> Command Palette \u2192 "Storyteller: Refresh story discovery"</li>
                <li>Import existing story folders without losing data</li>
                <li>Useful when moving stories between vaults</li>
            </ul>`),this.addTutorialCollapsible(e,"Custom folders: recommended manual workflow",`<p><strong>Simple, reliable setup for custom folders:</strong></p>
            <ol>
                <li><strong>Create your story folder and subfolders manually</strong> in your vault (e.g., <code>Creative/Writing/My_Story/Characters</code>, <code>Locations</code>, <code>Events</code>, etc.).</li>
                <li>In Settings \u2192 Storyteller Suite \u2192 enable <strong>Use custom entity folders</strong>. Optionally set a <strong>Story root folder</strong> template for convenience.</li>
                <li>Open the dashboard and use <strong>"Create new story"</strong>. After creation, <strong>refresh/activate</strong> the dashboard. The plugin will recognize your manual story folder as the active story.</li>
                <li>Use <strong>Preview resolved folders</strong> in settings to confirm the exact paths the plugin will use.</li>
            </ol>
            <p><strong>Switching stories in custom-folder mode:</strong> Use the <em>story dropdown at the top of the dashboard</em> to change the active story. Then go to <em>Settings \u2192 Storyteller Suite</em> and <strong>manually assign per\u2011entity folders</strong> for that story . Sorry I know this is a bit janky.</p>
            `),this.addTutorialCollapsible(e,"Keyboard shortcuts and commands",`<p><strong>All Available Commands (via Ctrl/Cmd + P):</strong></p>
            <ul>
                <li><strong>Storyteller: Open dashboard</strong> - Main interface</li>
                <li><strong>Storyteller: Create New Story</strong> - Start a new story project</li>
                <li><strong>Storyteller: Create new character/location/event/plot item</strong></li>
                <li><strong>Storyteller: View characters/locations/timeline/plot items</strong></li>
                <li><strong>Storyteller: Open gallery</strong> - Image management</li>
                <li><strong>Storyteller: Create/Rename/Delete group</strong> - Organization</li>
                <li><strong>Storyteller: Refresh story discovery</strong> - Import existing folders</li>
            </ul>
            <p><strong>Tip:</strong> You can assign custom hotkeys to any of these commands in Obsidian's Hotkeys settings!</p>`),this.addTutorialCollapsible(e,"File structure and integration",`<p><strong>How Your Files Are Organized:</strong></p>
            <pre><code>Default (multi-story):
StorytellerSuite/
\u251C\u2500\u2500 Stories/
\u2502   \u2514\u2500\u2500 YourStoryName/
\u2502       \u251C\u2500\u2500 Characters/     (character .md files)
\u2502       \u251C\u2500\u2500 Locations/      (location .md files)
\u2502       \u251C\u2500\u2500 Events/         (event .md files)
\u2502       \u2514\u2500\u2500 Items/          (plot item .md files)
\u2514\u2500\u2500 GalleryUploads/         (uploaded images)

One Story Mode (flattened):
[Base]/
\u251C\u2500\u2500 Characters/
\u251C\u2500\u2500 Locations/
\u251C\u2500\u2500 Events/
\u2514\u2500\u2500 Items/

Custom Folders:
Characters: [your path]
Locations:  [your path]
Events:     [your path]
Items:      [your path]
</code></pre>
            <p><strong>Obsidian Integration:</strong></p>
            <ul>
                <li>All data stored as <strong>markdown files</strong> with frontmatter</li>
                <li>Fully compatible with <strong>Dataview plugin</strong> for custom queries</li>
                <li>Use <strong>[[wiki links]]</strong> to connect characters, locations, events</li>
                <li>Files are <strong>readable and editable</strong> even without the plugin</li>
                <li><strong>Backup safe:</strong> Your data is never locked in a proprietary format</li>
            </ul>
            <p><strong>Tip:</strong> Configure these modes in Settings \u2192 Storyteller Suite under <em>Use custom entity folders</em> and <em>One Story Mode</em>. The <em>New story</em> button is hidden automatically in One Story Mode.</p>`)}addTutorialCollapsible(e,r,s){let a=new Te.Setting(e).setName(r).setClass("storyteller-tutorial-section"),o=createDiv();o.innerHTML=s,o.style.display="none",o.style.marginTop="10px",o.style.padding="15px",o.style.backgroundColor="var(--background-secondary)",o.style.borderRadius="5px",o.style.fontSize="0.9em",o.style.lineHeight="1.5",a.settingEl.style.cursor="pointer",a.settingEl.addEventListener("click",()=>{let l=o.style.display==="none";o.style.display=l?"block":"none";let u=a.nameEl,c=u.textContent||"";l?(u.textContent=c.replace("\u25B6 ","").replace("\u25BC ",""),u.textContent="\u25BC "+u.textContent):(u.textContent=c.replace("\u25B6 ","").replace("\u25BC ",""),u.textContent="\u25B6 "+u.textContent)}),a.nameEl.textContent="\u25B6 "+(a.nameEl.textContent||""),a.settingEl.appendChild(o)}};var Yt=require("obsidian");ze();var hf=class extends Yt.Modal{constructor(e,r,s){super(e);this.plugin=r,this.items=s,this.modalEl.addClass("storyteller-list-modal")}onOpen(){let{contentEl:e}=this;e.empty(),e.createEl("h2",{text:g("plotItems")}),this.listContainer=e.createDiv("storyteller-list-container"),new Yt.Setting(e).setName(g("search")).addText(r=>{r.setPlaceholder(g("searchX",g("items"))).onChange(s=>this.renderList(s.toLowerCase(),this.listContainer))}),this.renderList("",this.listContainer),new Yt.Setting(e).addButton(r=>{let s=!!this.plugin.getActiveStory();r.setButtonText(g("createItem")).setCta().onClick(()=>{if(!this.plugin.getActiveStory()){new Yt.Notice(g("selectOrCreateStoryFirst"));return}this.close(),new Bi(this.app,this.plugin,null,async a=>{await this.plugin.savePlotItem(a),new Yt.Notice(g("created",g("item"),a.name))}).open()}),s||r.setDisabled(!0).setTooltip(g("selectOrCreateStoryFirst"))})}renderList(e,r){r.empty();let s=this.items.filter(a=>a.name.toLowerCase().includes(e)||(a.description||"").toLowerCase().includes(e)||(a.currentOwner||"").toLowerCase().includes(e));if(s.length===0){r.createEl("p",{text:g("noItemsFound")+(e?g("matchingFilter"):"")});return}s.forEach(a=>{let o=r.createDiv("storyteller-list-item"),l=o.createDiv("storyteller-list-item-info"),u=l.createEl("strong",{text:a.name});if(a.isPlotCritical&&(u.setText(`\u2605 ${a.name}`),u.style.color="var(--text-accent)"),a.description){let d=a.description.substring(0,100),f=a.description.length>100?d+"...":d;l.createEl("p",{text:f})}a.currentOwner&&l.createEl("p",{text:g("ownerValue",a.currentOwner)});let c=o.createDiv("storyteller-list-item-actions");new Yt.ButtonComponent(c).setIcon("pencil").setTooltip(g("edit")).onClick(()=>{this.close(),new Bi(this.app,this.plugin,a,async d=>{await this.plugin.savePlotItem(d),new Yt.Notice(g("updated",g("item"),d.name))}).open()}),new Yt.ButtonComponent(c).setIcon("trash").setTooltip(g("delete")).setClass("mod-warning").onClick(async()=>{confirm(g("confirmDeleteItemTrash",a.name))&&(a.filePath?(await this.plugin.deletePlotItem(a.filePath),this.items=this.items.filter(d=>d.filePath!==a.filePath),this.renderList(e,r)):new Yt.Notice(g("errorCannotDeleteWithoutFilePath",g("item"))))}),new Yt.ButtonComponent(c).setIcon("go-to-file").setTooltip(g("openNote")).onClick(()=>{if(!a.filePath){new Yt.Notice(g("errorCannotOpenNoteWithoutFilePath",g("item")));return}let d=this.app.vault.getAbstractFileByPath(a.filePath);d instanceof Yt.TFile?(this.app.workspace.getLeaf(!1).openFile(d),this.close()):new Yt.Notice(g("workspaceLeafRevealError"))})})}onClose(){this.contentEl.empty()}};var Z1={character:{Description:"",Backstory:""},location:{Description:"",History:""},event:{Description:"",Outcome:""},item:{Description:"",History:""},reference:{Content:""},chapter:{Summary:""},scene:{Content:"",Beats:""}};function ds(t,n={}){let e={...Z1[t]};return Object.entries(n).forEach(([r,s])=>{typeof s=="string"&&(e[r]=s)}),Object.keys(Z1[t]).forEach(r=>{r in e||(e[r]="")}),e}var kr={stories:[],activeStoryId:"",galleryUploadFolder:"StorytellerSuite/GalleryUploads",galleryData:{images:[]},groups:[],showTutorial:!0,language:"en",enableCustomEntityFolders:!1,storyRootFolderTemplate:"",characterFolderPath:"",locationFolderPath:"",eventFolderPath:"",itemFolderPath:"",referenceFolderPath:"",chapterFolderPath:"",sceneFolderPath:"",enableOneStoryMode:!1,oneStoryBaseFolder:"StorytellerSuite",customTodayISO:void 0,defaultTimelineGroupMode:"none",defaultTimelineZoomPreset:"none",defaultTimelineStack:!0,defaultTimelineDensity:50,showTimelineLegend:!0,allowRemoteImages:!0,sanitizedSeedData:!1,customFieldsMode:"flatten"},ff=class extends F.Plugin{constructor(){super(...arguments);this.folderResolver=null}ensureActiveStoryOrGuide(){return this.getActiveStory()?!0:(new F.Notice(g("selectOrCreateStoryFirst")),!1)}buildResolver(){let e={enableCustomEntityFolders:this.settings.enableCustomEntityFolders,storyRootFolderTemplate:this.settings.storyRootFolderTemplate,characterFolderPath:this.settings.characterFolderPath,locationFolderPath:this.settings.locationFolderPath,eventFolderPath:this.settings.eventFolderPath,itemFolderPath:this.settings.itemFolderPath,referenceFolderPath:this.settings.referenceFolderPath,chapterFolderPath:this.settings.chapterFolderPath,sceneFolderPath:this.settings.sceneFolderPath,enableOneStoryMode:this.settings.enableOneStoryMode,oneStoryBaseFolder:this.settings.oneStoryBaseFolder};return new hd(e,()=>this.getActiveStory())}normalizeEntityCustomFields(e,r){var p;if(!r)return r;let s=Rt(e),a=new Set([...s,"customFields","filePath","sections","id"]),o={character:["description","backstory"],location:["description","history"],event:["description","outcome"],item:["description","history"],reference:["content"],chapter:["summary"],scene:["content"]};for(let v of o[e]||[])a.add(v);let l=(p=this.settings.customFieldsMode)!=null?p:"flatten",u=r,c={...r.customFields||{}};for(let[v,y]of Object.entries(u))a.has(v)||typeof y=="string"&&!y.includes(`
`)&&(Object.keys(c).some(S=>S.toLowerCase()===v.toLowerCase())||(c[v]=y,delete u[v]));let d={},f=new Set;for(let[v,y]of Object.entries(c)){let _=v.toLowerCase();f.has(_)||(f.add(_),d[v]=y)}return r.customFields=d,r}resolveAllEntityFoldersOrExplain(){let r=this.buildResolver().resolveAll(),s=[];for(let[a,o]of Object.entries(r))o.error&&s.push(`${a}: ${o.error}`);if(s.length>0){let a=s.some(o=>o.includes("No active story"))?"Custom folders reference {story*}, but no active story is selected. Select or create an active story, then rescan.":`Could not resolve some folders:
${s.join(`
`)}`;return{ok:!1,results:r,message:a}}return{ok:!0,results:r}}sanitizeBaseFolderPath(e){if(!e)return"";let r=e.trim();if(r==="/"||r==="\\")return"";let s=r.replace(/^[\\/]+/,"").replace(/[\\/]+$/,"");return s?(0,F.normalizePath)(s):""}getReferenceTodayDate(){let e=this.settings.customTodayISO;if(e){let r=new Date(e);if(isNaN(r.getTime()))console.warn(`Invalid custom today date: "${e}". Using system today.`);else return e.startsWith("-")&&r.getFullYear()>=0&&console.warn(`BCE date parsing issue: Input "${e}" parsed as CE year ${r.getFullYear()}`),r}return new Date}getActiveStory(){return this.settings.stories.find(e=>e.id===this.settings.activeStoryId)}getEntityFolder(e){return this.buildResolver().getEntityFolder(e)}async initializeOneStoryModeIfNeeded(){var e,r;if(this.settings.enableOneStoryMode){if(((r=(e=this.settings.stories)==null?void 0:e.length)!=null?r:0)===0){let s=await this.createStory("Single Story","Auto-created for One Story Mode");this.settings.activeStoryId=s.id,await this.saveSettings()}else if(!this.getActiveStory()){let s=this.settings.stories[0];s&&await this.setActiveStory(s.id)}try{await this.ensureFolder(this.getEntityFolder("character")),await this.ensureFolder(this.getEntityFolder("location")),await this.ensureFolder(this.getEntityFolder("event")),await this.ensureFolder(this.getEntityFolder("item")),await this.ensureFolder(this.getEntityFolder("reference")),await this.ensureFolder(this.getEntityFolder("chapter")),await this.ensureFolder(this.getEntityFolder("scene"))}catch(s){}this.refreshDashboardActiveTab()}}slugifyFolderName(e){return e?e.replace(/[\\/:"*?<>|#^[\]{}]+/g,"").trim().replace(/\s+/g," ").replace(/\s/g,"_"):""}async createStory(e,r){let s=Date.now().toString(36)+Math.random().toString(36).substr(2,6),a=new Date().toISOString(),o={id:s,name:e,created:a,description:r};return this.settings.stories.push(o),this.settings.activeStoryId=s,await this.saveSettings(),await this.ensureFolder(this.getEntityFolder("character")),await this.ensureFolder(this.getEntityFolder("location")),await this.ensureFolder(this.getEntityFolder("event")),await this.ensureFolder(this.getEntityFolder("item")),await this.ensureFolder(this.getEntityFolder("reference")),await this.ensureFolder(this.getEntityFolder("chapter")),await this.ensureFolder(this.getEntityFolder("scene")),o}async setActiveStory(e){if(this.settings.stories.find(r=>r.id===e))this.settings.activeStoryId=e,await this.saveSettings();else throw new Error("Story not found")}async updateStory(e,r,s){let a=this.settings.stories.find(l=>l.id===e);if(!a)throw new Error("Story not found");let o=a.name;if(o!==r){let l=`StorytellerSuite/Stories/${o}`,u=`StorytellerSuite/Stories/${r}`,c=this.app.vault.getAbstractFileByPath(l);if(c&&c instanceof F.TFolder)try{await this.app.fileManager.renameFile(c,u)}catch(d){throw console.error(`Error renaming story folder from ${l} to ${u}:`,d),new Error(`Failed to rename story folder: ${d}`)}}a.name=r,a.description=s,await this.saveSettings()}async onload(){await this.loadSettings(),cd(this.settings.language),this.applyMobilePlatformClasses(),this.registerView(_i,e=>new lf(e,this)),this.addRibbonIcon("book-open","Open storyteller dashboard",()=>{this.activateView()}).addClass("storyteller-suite-ribbon-class"),this.registerCommands(),this.addSettingTab(new df(this.app,this)),this.app.workspace.onLayoutReady(async()=>{await this.discoverExistingStories(),await this.initializeOneStoryModeIfNeeded()})}async performStoryDiscovery(e={}){var l,u;let{isInitialDiscovery:r=!1,logPrefix:s="Storyteller Suite"}=e,a="StorytellerSuite/Stories",o=this.app.vault.getAbstractFileByPath((0,F.normalizePath)(a));if(o instanceof F.TFolder){let c=[],d=o.children.filter(f=>f instanceof F.TFolder);for(let f of d){let p=f.name;if(!this.settings.stories.some(v=>v.name===p)){let v=Date.now().toString(36)+Math.random().toString(36).substr(2,6),y=new Date().toISOString(),_={id:v,name:p,created:y,description:"Discovered from filesystem"};c.push(_)}}return c.length>0&&(this.settings.stories.push(...c),r&&!this.settings.activeStoryId&&this.settings.stories.length>0&&(this.settings.activeStoryId=this.settings.stories[0].id),await this.saveSettings()),{newStories:c,totalStories:this.settings.stories.length}}else if(o===null){let c=`Stories folder does not exist at ${a}`}else{let c=`Path exists but is not a folder: ${a}`;return{newStories:[],totalStories:this.settings.stories.length,error:c}}try{if(this.settings.enableCustomEntityFolders&&this.settings.storyRootFolderTemplate){let c=this.settings.storyRootFolderTemplate;if(c.includes("{storyName}")||c.includes("{storySlug}")||c.includes("{storyId}")){let f=Math.min(...["{storyName}","{storySlug}","{storyId}"].map(S=>{let x=c.indexOf(S);return x===-1?Number.POSITIVE_INFINITY:x})),p=f===Number.POSITIVE_INFINITY?c:c.slice(0,f),v=p.endsWith("/")?p.slice(0,-1):p,y=(v.includes("/"),v),_=this.app.vault.getAbstractFileByPath((0,F.normalizePath)(y));if(_ instanceof F.TFolder){let S=_.children.filter(D=>D instanceof F.TFolder),x=[];for(let D of S)if(!this.settings.stories.some(E=>E.name===D.name)){let P={id:Date.now().toString(36)+Math.random().toString(36).substr(2,6),name:D.name,created:new Date().toISOString()};this.settings.stories.push(P),x.push(P)}if(x.length>0)return r&&!this.settings.activeStoryId&&(this.settings.activeStoryId=this.settings.stories[0].id),await this.saveSettings(),{newStories:x,totalStories:this.settings.stories.length}}}}}catch(c){console.warn("Storyteller Suite: Custom-folder discovery failed",c)}try{if(this.settings.enableOneStoryMode){let c=this.sanitizeBaseFolderPath(this.settings.oneStoryBaseFolder||"StorytellerSuite");if(((u=(l=this.settings.stories)==null?void 0:l.length)!=null?u:0)===0){let d=Date.now().toString(36)+Math.random().toString(36).substr(2,6),f={id:d,name:"Single Story",created:new Date().toISOString()};this.settings.stories.push(f),this.settings.activeStoryId=d,await this.saveSettings();try{await this.ensureFolder(this.getEntityFolder("character")),await this.ensureFolder(this.getEntityFolder("location")),await this.ensureFolder(this.getEntityFolder("event")),await this.ensureFolder(this.getEntityFolder("item")),await this.ensureFolder(this.getEntityFolder("reference")),await this.ensureFolder(this.getEntityFolder("chapter")),await this.ensureFolder(this.getEntityFolder("scene"))}catch(p){}return{newStories:[f],totalStories:this.settings.stories.length}}}}catch(c){console.warn("Storyteller Suite: One-story discovery failed",c)}return{newStories:[],totalStories:this.settings.stories.length}}async discoverExistingStories(){try{let e=await this.performStoryDiscovery({isInitialDiscovery:!0,logPrefix:"Storyteller Suite"});e.newStories.length>0&&new F.Notice(`Storyteller: Auto-detected and imported ${e.newStories.length} new story folder(s).`)}catch(e){console.error("Storyteller Suite: Error during story discovery:",e),new F.Notice(`Storyteller Suite: Error discovering stories: ${e.message}`)}}async refreshStoryDiscovery(){try{let e=await this.performStoryDiscovery({isInitialDiscovery:!1,logPrefix:"Storyteller Suite"});e.error?new F.Notice(`Storyteller: ${e.error}`):e.newStories.length>0?new F.Notice(`Storyteller: Found and imported ${e.newStories.length} new story folder(s).`):new F.Notice("Storyteller: No new story folders found.")}catch(e){console.error("Storyteller Suite: Error during story refresh:",e),new F.Notice(`Storyteller Suite: Error refreshing stories: ${e.message}`)}}async refreshCustomFolderDiscovery(){if(this.settings.enableCustomEntityFolders)try{let e=this.resolveAllEntityFoldersOrExplain();if(!e.ok){new F.Notice(e.message||"Unable to resolve custom folders. Select or create an active story and try again.");return}for(let o of Object.values(e.results)){let l=o.path;l&&await this.ensureFolder(l)}let r=o=>{if(!o)return 0;let l=this.app.vault.getMarkdownFiles(),u=(0,F.normalizePath)(o)+"/";return l.filter(c=>c.path.startsWith(u)).length},s=e.results,a={characters:r(s.character.path),locations:r(s.location.path),events:r(s.event.path),items:r(s.item.path),references:r(s.reference.path),chapters:r(s.chapter.path),scenes:r(s.scene.path)};this.app.metadataCache.trigger("dataview:refresh-views"),this.refreshDashboardActiveTab(),new F.Notice(`Storyteller: Custom folders scanned. Chars ${a.characters}, Locs ${a.locations}, Events ${a.events}, Items ${a.items}, Refs ${a.references}, Chaps ${a.chapters}, Scenes ${a.scenes}.`)}catch(e){console.error("Storyteller Suite: Error during custom folder refresh:",e),new F.Notice(`Storyteller Suite: Error scanning custom folders: ${e.message}`)}}async autoDetectCustomEntityFolders(){var c,d,f,p,v,y,_,S;let e=this.app.vault.getAllLoadedFiles(),r=new Map;for(let x of e)if(x instanceof F.TFolder){let D=x.parent;if(D){let E=(c=r.get(D.path))!=null?c:new Set;E.add(x.name),r.set(D.path,E)}}let s=["Characters","Locations","Events","Items","References","Chapters","Scenes"],a=null,o=0;for(let[x,D]of r.entries()){let E=0;for(let P of s)D.has(P)&&E++;E>o&&(o=E,a=x)}if(!a||o===0){new F.Notice("Storyteller: Could not auto-detect a story root. Please set folders manually.");return}let l=x=>this.app.vault.getFolderByPath(`${a}/${x}`)?`${a}/${x}`:void 0,u={};u.characterFolderPath=(d=l("Characters"))!=null?d:this.settings.characterFolderPath,u.locationFolderPath=(f=l("Locations"))!=null?f:this.settings.locationFolderPath,u.eventFolderPath=(p=l("Events"))!=null?p:this.settings.eventFolderPath,u.itemFolderPath=(v=l("Items"))!=null?v:this.settings.itemFolderPath,u.referenceFolderPath=(y=l("References"))!=null?y:this.settings.referenceFolderPath,u.chapterFolderPath=(_=l("Chapters"))!=null?_:this.settings.chapterFolderPath,u.sceneFolderPath=(S=l("Scenes"))!=null?S:this.settings.sceneFolderPath,this.settings={...this.settings,...u},await this.saveSettings(),new F.Notice(`Storyteller: Auto-detected custom folders under "${a}" (matches: ${o}).`)}refreshDashboardActiveTab(){var e;try{let s=(e=this.app.workspace.getLeavesOfType(_i)[0])==null?void 0:e.view;s&&typeof s.refreshActiveTab=="function"&&s.refreshActiveTab()}catch(r){}}onunload(){this.removeMobilePlatformClasses()}registerCommands(){this.addCommand({id:"open-dashboard-view",name:"Open dashboard",callback:()=>{this.activateView()}}),this.addCommand({id:"create-new-story",name:"Create new story",callback:()=>{new us(this.app,this.settings.stories.map(e=>e.name),async(e,r)=>{let s=await this.createStory(e,r);await this.setActiveStory(s.id),new F.Notice(`Story "${e}" created and activated.`),this.activateView()}).open()}}),this.addCommand({id:"refresh-story-discovery",name:"Refresh story discovery",callback:async()=>{await this.refreshStoryDiscovery()}}),this.addCommand({id:"create-new-character",name:"Create new character",callback:()=>{this.ensureActiveStoryOrGuide()&&new Pi(this.app,this,null,async e=>{await this.saveCharacter(e),new F.Notice(`Character "${e.name}" created.`)}).open()}}),this.addCommand({id:"view-characters",name:"View characters",callback:async()=>{let e=await this.listCharacters();new vd(this.app,this,e).open()}}),this.addCommand({id:"create-new-location",name:"Create new location",callback:()=>{this.ensureActiveStoryOrGuide()&&new Ii(this.app,this,null,async e=>{await this.saveLocation(e),new F.Notice(`Location "${e.name}" created.`)}).open()}}),this.addCommand({id:"view-locations",name:"View locations",callback:async()=>{let e=await this.listLocations();new gd(this.app,this,e).open()}}),this.addCommand({id:"create-new-event",name:"Create new event",callback:()=>{this.ensureActiveStoryOrGuide()&&new hi(this.app,this,null,async e=>{await this.saveEvent(e),new F.Notice(`Event "${e.name}" created.`)}).open()}}),this.addCommand({id:"view-timeline",name:g("viewTimeline"),callback:async()=>{let e=await this.listEvents();new oc(this.app,this,e).open()}}),this.addCommand({id:"create-new-plot-item",name:"Create new plot item",callback:()=>{this.ensureActiveStoryOrGuide()&&new Bi(this.app,this,null,async e=>{await this.savePlotItem(e),new F.Notice(`Item "${e.name}" created.`)}).open()}}),this.addCommand({id:"view-plot-items",name:"View plot items",callback:async()=>{let e=await this.listPlotItems();new hf(this.app,this,e).open()}}),this.addCommand({id:"open-gallery",name:"Open gallery",callback:()=>{new Zh(this.app,this).open()}}),this.addCommand({id:"create-new-reference",name:"Create new reference",callback:()=>{this.ensureActiveStoryOrGuide()&&Promise.resolve().then(()=>(tf(),ef)).then(({ReferenceModal:e})=>{new e(this.app,this,null,async r=>{await this.saveReference(r),new F.Notice(`Reference "${r.name}" created.`)}).open()})}}),this.addCommand({id:"view-references",name:"View references",callback:async()=>{await this.activateView(),setTimeout(()=>{var s,a;let r=(s=this.app.workspace.getLeavesOfType(_i)[0])==null?void 0:s.view;if(r&&typeof r=="object"&&"tabHeaderContainer"in r){let o=(a=r.tabHeaderContainer)==null?void 0:a.querySelector('[data-tab-id="references"]');o==null||o.click()}},50)}}),this.addCommand({id:"create-new-chapter",name:"Create new chapter",callback:()=>{this.ensureActiveStoryOrGuide()&&Promise.resolve().then(()=>(sf(),nf)).then(({ChapterModal:e})=>{new e(this.app,this,null,async r=>{await this.saveChapter(r),new F.Notice(`Chapter "${r.name}" created.`)}).open()})}}),this.addCommand({id:"view-chapters",name:"View chapters",callback:async()=>{await this.activateView(),setTimeout(()=>{var s,a;let r=(s=this.app.workspace.getLeavesOfType(_i)[0])==null?void 0:s.view;if(r&&typeof r=="object"&&"tabHeaderContainer"in r){let o=(a=r.tabHeaderContainer)==null?void 0:a.querySelector('[data-tab-id="chapters"]');o==null||o.click()}},50)}}),this.addCommand({id:"create-new-scene",name:"Create new scene",callback:()=>{this.ensureActiveStoryOrGuide()&&Promise.resolve().then(()=>(of(),af)).then(({SceneModal:e})=>{new e(this.app,this,null,async r=>{await this.saveScene(r),new F.Notice(`Scene "${r.name}" created.`)}).open()})}}),this.addCommand({id:"view-scenes",name:"View scenes",callback:async()=>{await this.activateView(),setTimeout(()=>{var s,a;let r=(s=this.app.workspace.getLeavesOfType(_i)[0])==null?void 0:s.view;if(r&&typeof r=="object"&&"tabHeaderContainer"in r){let o=(a=r.tabHeaderContainer)==null?void 0:a.querySelector('[data-tab-id="scenes"]');o==null||o.click()}},50)}}),this.addCommand({id:"create-group",name:"Create group",callback:async()=>{if(!this.ensureActiveStoryOrGuide())return;let e=prompt("Enter group name:");if(e&&e.trim()){let r=e.trim();await this.createGroup(r),new F.Notice(`Group "${r}" created.`)}}}),this.addCommand({id:"view-groups",name:"View groups",callback:async()=>{await this.activateView(),setTimeout(()=>{var s,a;let r=(s=this.app.workspace.getLeavesOfType(_i)[0])==null?void 0:s.view;if(r&&typeof r=="object"&&"tabHeaderContainer"in r){let o=(a=r.tabHeaderContainer)==null?void 0:a.querySelector('[data-tab-id="groups"]');o==null||o.click()}},50)}}),this.addCommand({id:"rename-group",name:"Rename group",callback:async()=>{let e=this.getGroups();if(e.length===0){new F.Notice("No groups to rename.");return}new at(this.app,{title:"Rename group",label:"Enter the name of the group to rename",validator:r=>r.trim()?null:"Required",onSubmit:async r=>{let s=e.find(a=>a.name===r.trim());if(!s){new F.Notice("Group not found.");return}new at(this.app,{title:"New name",label:"Enter new group name",defaultValue:s.name,validator:a=>a.trim()?null:"Required",onSubmit:async a=>{await this.updateGroup(s.id,{name:a.trim()}),new F.Notice(`Group renamed to "${a.trim()}".`)}}).open()}}).open()}}),this.addCommand({id:"delete-group",name:"Delete group",callback:async()=>{let e=this.getGroups();if(e.length===0){new F.Notice("No groups to delete.");return}new at(this.app,{title:"Delete group",label:"Enter the name of the group to delete",validator:r=>r.trim()?null:"Required",onSubmit:r=>{let s=e.find(a=>a.name===r.trim());if(!s){new F.Notice("Group not found.");return}new fd(this.app,{title:"Confirm delete",body:`Are you sure you want to delete group "${s.name}"?`,onConfirm:async()=>{await this.deleteGroup(s.id),new F.Notice(`Group "${s.name}" deleted.`)}}).open()}}).open()}})}async activateView(){let{workspace:e}=this.app,r=null,s=e.getLeavesOfType(_i);if(s.length>0)r=s[0];else if(r=e.getRightLeaf(!1),r)await r.setViewState({type:_i,active:!0});else{console.error("Storyteller Suite: Could not create workspace leaf."),new F.Notice("Error opening dashboard: Could not create workspace leaf.");return}if(!r){console.error("Storyteller Suite: Workspace leaf is null after attempting to find or create it."),new F.Notice("Error revealing dashboard: Workspace leaf not found.");return}e.revealLeaf(r)}async ensureFolder(e){let s=(0,F.normalizePath)(e).split("/").filter(Boolean),a="";for(let o of s){a=a?`${a}/${o}`:o;let l=this.app.vault.getAbstractFileByPath(a);if(!l)await this.app.vault.createFolder(a);else if(!(l instanceof F.TFolder)){let u=`Error: Path ${a} exists but is not a folder. Check Storyteller Suite settings.`;throw new F.Notice(u),console.error(u),new Error(u)}}}async parseFile(e,r,s){try{let a=this.app.metadataCache.getFileCache(e),o=a==null?void 0:a.frontmatter,l=await this.app.vault.cachedRead(e),u=(await Promise.resolve().then(()=>(rn(),dS))).parseSectionsFromMarkdown(l),c={...r,...o,filePath:e.path};if("Description"in u&&(c.description=u.Description),"Backstory"in u&&(c.backstory=u.Backstory),"History"in u&&(c.history=u.History),"Outcome"in u&&(c.outcome=u.Outcome),s==="reference")"Content"in u&&(c.content=u.Content);else if(s==="chapter")"Summary"in u&&(c.summary=u.Summary);else if(s==="scene"){if("Content"in u&&(c.content=u.Content),u["Beat Sheet"]){let f=u["Beat Sheet"].split(`
`).map(p=>p.replace(/^\-\s*/,"").trim()).filter(Boolean);f.length>0&&(c.beats=f)}}else if(s==="item")!c.history&&u["History / Lore"]&&(c.history=u["History / Lore"]);else if(s==="event"&&u["Characters Involved"]){let f=u["Characters Involved"].split(`
`).map(p=>p.trim()).filter(p=>p.startsWith("- [[")&&p.endsWith("]]")).map(p=>p.replace(/^\- \[\[(.*?)\]\]$/,"$1"));f.length>0&&(c.characters=f)}if(u.Relationships){let f=u.Relationships.split(`
`).map(p=>p.trim()).filter(p=>p.startsWith("- [[")&&p.endsWith("]]")).map(p=>p.replace(/^- \[\[(.*?)\]\]$/,"$1"));c.relationships=f}if(u.Locations){let f=u.Locations.split(`
`).map(p=>p.trim()).filter(p=>p.startsWith("- [[")&&p.endsWith("]]")).map(p=>p.replace(/^- \[\[(.*?)\]\]$/,"$1"));c.locations=f}if(u.Events){let f=u.Events.split(`
`).map(p=>p.trim()).filter(p=>p.startsWith("- [[")&&p.endsWith("]]")).map(p=>p.replace(/^- \[\[(.*?)\]\]$/,"$1"));c.events=f}return c.sections&&delete c.sections,c.name?c:(console.warn(`File ${e.path} is missing a name in frontmatter.`),null)}catch(a){return console.error(`Error parsing file ${e.path}:`,a),new F.Notice(`Error parsing file: ${e.name}`),null}}async ensureCharacterFolder(){await this.ensureFolder(this.getEntityFolder("character"))}buildFrontmatterForCharacter(e){var a;let r=new Set(Object.keys(e||{})),s=(a=this.settings.customFieldsMode)!=null?a:"flatten";return en("character",e,r,{customFieldsMode:s})}buildFrontmatterForLocation(e){var a;let r=new Set(Object.keys(e||{})),s=(a=this.settings.customFieldsMode)!=null?a:"flatten";return en("location",e,r,{customFieldsMode:s})}buildFrontmatterForEvent(e){var a;let r=new Set(Object.keys(e||{})),s=(a=this.settings.customFieldsMode)!=null?a:"flatten";return en("event",e,r,{customFieldsMode:s})}buildFrontmatterForItem(e){var a;let r=new Set(Object.keys(e||{})),s=(a=this.settings.customFieldsMode)!=null?a:"flatten";return en("item",e,r,{customFieldsMode:s})}async saveCharacter(e){await this.ensureCharacterFolder();let r=this.getEntityFolder("character"),s=`${e.name.replace(/[\\/:"*?<>|]+/g,"")}.md`,a=(0,F.normalizePath)(`${r}/${s}`),{filePath:o,backstory:l,description:u,...c}=e;c.sections&&delete c.sections;let d=this.buildFrontmatterForCharacter(c),f=Object.keys(d).length>0?(0,F.stringifyYaml)(d):"",p=a;if(o&&o!==a){let E=this.app.vault.getAbstractFileByPath(o);E&&E instanceof F.TFile&&(await this.app.fileManager.renameFile(E,a),p=a)}let v=this.app.vault.getAbstractFileByPath(p),y={};if(v&&v instanceof F.TFile)try{let E=await this.app.vault.cachedRead(v);y=tn(E)}catch(E){console.warn(`Error reading existing character file: ${E}`)}let _={Description:u!==void 0?u:"",Backstory:l!==void 0?l:""},S=ds("character",_),x;v&&v instanceof F.TFile?(x={...y,...S},Object.entries(_).forEach(([E,P])=>{x[E]=P})):x=S;let D=`---
${f}---

`;D+=Object.entries(x).map(([E,P])=>`## ${E}
${P||""}`).join(`

`),D.endsWith(`
`)||(D+=`
`),v&&v instanceof F.TFile?await this.app.vault.modify(v,D):(await this.app.vault.create(p,D),new F.Notice("Note created with standard sections for easy editing.")),e.filePath=p,this.app.metadataCache.trigger("dataview:refresh-views")}async listCharacters(){await this.ensureCharacterFolder();let e=this.getEntityFolder("character"),r=this.app.vault.getMarkdownFiles(),s=(0,F.normalizePath)(e)+"/",a=r.filter(l=>l.path.startsWith(s)&&l.extension==="md"),o=[];for(let l of a){let u=await this.parseFile(l,{name:""},"character");u&&(u=this.normalizeEntityCustomFields("character",u));let c=u;c&&o.push(c)}return o.sort((l,u)=>l.name.localeCompare(u.name))}async deleteCharacter(e){let r=this.app.vault.getAbstractFileByPath((0,F.normalizePath)(e));r instanceof F.TFile?(await this.app.vault.trash(r,!0),new F.Notice(`Character file "${r.basename}" moved to trash.`),this.app.metadataCache.trigger("dataview:refresh-views")):new F.Notice(`Error: Could not find character file to delete at ${e}`)}async ensureLocationFolder(){await this.ensureFolder(this.getEntityFolder("location"))}async saveLocation(e){await this.ensureLocationFolder();let r=this.getEntityFolder("location"),s=`${e.name.replace(/[\\/:"*?<>|]+/g,"")}.md`,a=(0,F.normalizePath)(`${r}/${s}`),{filePath:o,history:l,description:u,...c}=e;c.sections&&delete c.sections;let d=this.buildFrontmatterForLocation(c),f=Object.keys(d).length>0?(0,F.stringifyYaml)(d):"",p=a;if(o&&o!==a){let E=this.app.vault.getAbstractFileByPath(o);E&&E instanceof F.TFile&&(await this.app.fileManager.renameFile(E,a),p=a)}let v=this.app.vault.getAbstractFileByPath(p),y={};if(v&&v instanceof F.TFile)try{let E=await this.app.vault.cachedRead(v);y=tn(E)}catch(E){console.warn(`Error reading existing location file: ${E}`)}let S=ds("location",{Description:u||"",History:l||""}),x=v&&v instanceof F.TFile?{...S,...y}:S,D=`---
${f}---

`;D+=Object.entries(x).map(([E,P])=>`## ${E}
${P||""}`).join(`

`),D.endsWith(`
`)||(D+=`
`),v&&v instanceof F.TFile?await this.app.vault.modify(v,D):(await this.app.vault.create(p,D),new F.Notice("Note created with standard sections for easy editing.")),e.filePath=p,this.app.metadataCache.trigger("dataview:refresh-views")}async listLocations(){await this.ensureLocationFolder();let e=this.getEntityFolder("location"),r=this.app.vault.getMarkdownFiles(),s=(0,F.normalizePath)(e)+"/",a=r.filter(l=>l.path.startsWith(s)&&l.extension==="md"),o=[];for(let l of a){let u=await this.parseFile(l,{name:""},"location");u&&(u=this.normalizeEntityCustomFields("location",u)),u&&o.push(u)}return o.sort((l,u)=>l.name.localeCompare(u.name))}async deleteLocation(e){let r=this.app.vault.getAbstractFileByPath((0,F.normalizePath)(e));r instanceof F.TFile?(await this.app.vault.trash(r,!0),new F.Notice(`Location file "${r.basename}" moved to trash.`),this.app.metadataCache.trigger("dataview:refresh-views")):new F.Notice(`Error: Could not find location file to delete at ${e}`)}async ensureEventFolder(){await this.ensureFolder(this.getEntityFolder("event"))}async saveEvent(e){var O;await this.ensureEventFolder();let r=this.getEntityFolder("event"),a=`${((O=e.name)==null?void 0:O.replace(/[\\/:"*?<>|#^[\]]+/g,""))||"Unnamed Event"}.md`,o=(0,F.normalizePath)(`${r}/${a}`),{filePath:l,description:u,outcome:c,images:d,...f}=e;f.sections&&delete f.sections;let p=this.buildFrontmatterForEvent(f),v=Object.keys(p).length>0?(0,F.stringifyYaml)(p):"",y=o;if(l&&l!==o){let A=this.app.vault.getAbstractFileByPath(l);A&&A instanceof F.TFile&&(await this.app.fileManager.renameFile(A,o),y=o)}let _=this.app.vault.getAbstractFileByPath(y),S={};if(_&&_ instanceof F.TFile)try{let A=await this.app.vault.cachedRead(_);S=tn(A)}catch(A){console.warn(`Error reading existing event file: ${A}`)}let D=ds("event",{Description:u||"",Outcome:c||""}),E=_&&_ instanceof F.TFile?{...D,...S}:D,P=`---
${v}---

`;P+=Object.entries(E).map(([A,M])=>`## ${A}
${M||""}`).join(`

`),P.endsWith(`
`)||(P+=`
`),_&&_ instanceof F.TFile?await this.app.vault.modify(_,P):(await this.app.vault.create(y,P),new F.Notice("Note created with standard sections for easy editing.")),this.app.metadataCache.trigger("dataview:refresh-views")}async listEvents(){await this.ensureEventFolder();let e=this.getEntityFolder("event"),r=this.app.vault.getMarkdownFiles(),s=(0,F.normalizePath)(e)+"/",a=r.filter(u=>u.path.startsWith(s)&&u.extension==="md"),o=[];for(let u of a){let c=await this.parseFile(u,{name:""},"event");c&&(c=this.normalizeEntityCustomFields("event",c)),c&&o.push(c)}let l=this.getReferenceTodayDate();return o.sort((u,c)=>{let d=u.dateTime?Aa(u.dateTime,{referenceDate:l}):{error:"empty"},f=c.dateTime?Aa(c.dateTime,{referenceDate:l}):{error:"empty"},p=La(d.start),v=La(f.start);return p!=null&&v!=null?p-v:p!=null?-1:v!=null?1:u.name.localeCompare(c.name)})}async deleteEvent(e){let r=this.app.vault.getAbstractFileByPath((0,F.normalizePath)(e));r instanceof F.TFile?(await this.app.vault.trash(r,!0),new F.Notice(`Event file "${r.basename}" moved to trash.`),this.app.metadataCache.trigger("dataview:refresh-views")):new F.Notice(`Error: Could not find event file to delete at ${e}`)}async ensureItemFolder(){await this.ensureFolder(this.getEntityFolder("item"))}async ensureReferenceFolder(){await this.ensureFolder(this.getEntityFolder("reference"))}async savePlotItem(e){await this.ensureItemFolder();let r=this.getEntityFolder("item"),s=`${e.name.replace(/[\\/:"*?<>|]+/g,"")}.md`,a=(0,F.normalizePath)(`${r}/${s}`),{filePath:o,description:l,history:u,...c}=e;c.sections&&delete c.sections;let d=this.buildFrontmatterForItem(c),f=Object.keys(d).length>0?(0,F.stringifyYaml)(d):"",p=a;if(o&&o!==a){let E=this.app.vault.getAbstractFileByPath(o);E instanceof F.TFile&&(await this.app.fileManager.renameFile(E,a),p=a)}let v=this.app.vault.getAbstractFileByPath(p),y={};if(v&&v instanceof F.TFile)try{let E=await this.app.vault.cachedRead(v);y=tn(E)}catch(E){console.warn(`Error reading existing item file: ${E}`)}let S=ds("item",{Description:l||"",History:u||""}),x=v&&v instanceof F.TFile?{...S,...y}:S,D=`---
${f}---

`;D+=Object.entries(x).map(([E,P])=>`## ${E}
${P||""}`).join(`

`),D.endsWith(`
`)||(D+=`
`),v&&v instanceof F.TFile?await this.app.vault.modify(v,D):(await this.app.vault.create(p,D),new F.Notice("Note created with standard sections for easy editing.")),e.filePath=p,this.app.metadataCache.trigger("dataview:refresh-views")}async listPlotItems(){await this.ensureItemFolder();let e=this.getEntityFolder("item"),r=this.app.vault.getMarkdownFiles(),s=(0,F.normalizePath)(e)+"/",a=r.filter(l=>l.path.startsWith(s)&&l.extension==="md"),o=[];for(let l of a){let u=await this.parseFile(l,{name:"",isPlotCritical:!1},"item");u&&(u=this.normalizeEntityCustomFields("item",u)),u&&o.push(u)}return o.sort((l,u)=>l.name.localeCompare(u.name))}async deletePlotItem(e){let r=this.app.vault.getAbstractFileByPath((0,F.normalizePath)(e));r instanceof F.TFile?(await this.app.vault.trash(r,!0),new F.Notice(`Item file "${r.basename}" moved to trash.`),this.app.metadataCache.trigger("dataview:refresh-views")):new F.Notice(`Error: Could not find item file to delete at ${e}`)}async saveReference(e){var P;await this.ensureReferenceFolder();let r=this.getEntityFolder("reference"),s=`${(e.name||"Untitled").replace(/[\\/:"*?<>|]+/g,"")}.md`,a=(0,F.normalizePath)(`${r}/${s}`),{filePath:o,content:l,...u}=e;u.sections&&delete u.sections;let c=new Set(Object.keys(u||{})),d=(P=this.settings.customFieldsMode)!=null?P:"flatten",f=en("reference",u,c,{customFieldsMode:d}),p=Object.keys(f).length>0?(0,F.stringifyYaml)(f):"",v=a;if(o&&o!==a){let O=this.app.vault.getAbstractFileByPath(o);O&&O instanceof F.TFile&&(await this.app.fileManager.renameFile(O,a),v=a)}let y=this.app.vault.getAbstractFileByPath(v),_={};if(y&&y instanceof F.TFile)try{let O=await this.app.vault.cachedRead(y);_=tn(O)}catch(O){console.warn("Error reading existing reference file",O)}let x=ds("reference",{Content:l||""}),D=y&&y instanceof F.TFile?{...x,..._}:x,E=`---
${p}---

`;E+=Object.entries(D).map(([O,A])=>`## ${O}
${A||""}`).join(`

`),E.endsWith(`
`)||(E+=`
`),y&&y instanceof F.TFile?await this.app.vault.modify(y,E):(await this.app.vault.create(v,E),new F.Notice("Note created with standard sections for easy editing.")),e.filePath=v,this.app.metadataCache.trigger("dataview:refresh-views")}async listReferences(){await this.ensureReferenceFolder();let e=this.getEntityFolder("reference"),r=this.app.vault.getMarkdownFiles(),s=(0,F.normalizePath)(e)+"/",a=r.filter(l=>l.path.startsWith(s)&&l.extension==="md"),o=[];for(let l of a){let u=await this.parseFile(l,{name:""},"reference");u&&o.push(u)}return o.sort((l,u)=>l.name.localeCompare(u.name))}async deleteReference(e){let r=this.app.vault.getAbstractFileByPath((0,F.normalizePath)(e));r instanceof F.TFile?(await this.app.vault.trash(r,!0),new F.Notice(`Reference file "${r.basename}" moved to trash.`),this.app.metadataCache.trigger("dataview:refresh-views")):new F.Notice(`Error: Could not find reference file to delete at ${e}`)}async ensureChapterFolder(){await this.ensureFolder(this.getEntityFolder("chapter"))}async saveChapter(e){var U;await this.ensureChapterFolder();let r=this.getEntityFolder("chapter"),a=`${(e.name||"Untitled").replace(/[\\/:"*?<>|]+/g,"")}.md`,o=(0,F.normalizePath)(`${r}/${a}`);e.id||(e.id=Date.now().toString(36)+Math.random().toString(36).substr(2,6));let{filePath:l,summary:u,linkedCharacters:c,linkedLocations:d,linkedEvents:f,linkedItems:p,linkedGroups:v,...y}=e;y.sections&&delete y.sections;let _={...y,linkedCharacters:c,linkedLocations:d,linkedEvents:f,linkedItems:p,linkedGroups:v},S=new Set(Object.keys(_)),x=(U=this.settings.customFieldsMode)!=null?U:"flatten",D=en("chapter",_,S,{customFieldsMode:x}),E=Object.keys(D).length>0?(0,F.stringifyYaml)(D):"",P=o;if(l&&l!==o){let N=this.app.vault.getAbstractFileByPath(l);N&&N instanceof F.TFile&&(await this.app.fileManager.renameFile(N,o),P=o)}let O=this.app.vault.getAbstractFileByPath(P),A={};if(O&&O instanceof F.TFile)try{let N=await this.app.vault.cachedRead(O);A=tn(N)}catch(N){console.warn("Error reading existing chapter file",N)}let I=ds("chapter",{Summary:u||""}),H=O&&O instanceof F.TFile?{...I,...A}:I,z=`---
${E}---

`;z+=Object.entries(H).map(([N,$])=>`## ${N}
${$||""}`).join(`

`),z.endsWith(`
`)||(z+=`
`),O&&O instanceof F.TFile?await this.app.vault.modify(O,z):(await this.app.vault.create(P,z),new F.Notice("Note created with standard sections for easy editing.")),e.filePath=P,this.app.metadataCache.trigger("dataview:refresh-views")}async listChapters(){await this.ensureChapterFolder();let e=this.getEntityFolder("chapter"),r=this.app.vault.getMarkdownFiles(),s=(0,F.normalizePath)(e)+"/",a=r.filter(l=>l.path.startsWith(s)&&l.extension==="md"),o=[];for(let l of a){let u=await this.parseFile(l,{name:""},"chapter");u&&o.push(u)}return o.sort((l,u)=>{var f,p;let c=(f=l.number)!=null?f:Number.MAX_SAFE_INTEGER,d=(p=u.number)!=null?p:Number.MAX_SAFE_INTEGER;return c!==d?c-d:l.name.localeCompare(u.name)})}async deleteChapter(e){let r=this.app.vault.getAbstractFileByPath((0,F.normalizePath)(e));r instanceof F.TFile?(await this.app.vault.trash(r,!0),new F.Notice(`Chapter file "${r.basename}" moved to trash.`),this.app.metadataCache.trigger("dataview:refresh-views")):new F.Notice(`Error: Could not find chapter file to delete at ${e}`)}async ensureSceneFolder(){await this.ensureFolder(this.getEntityFolder("scene"))}async saveScene(e){var N;if(e.chapterId&&!e.chapterName){let B=(await this.listChapters()).find(Y=>Y.id===e.chapterId);B&&(e.chapterName=B.name)}await this.ensureSceneFolder();let r=this.getEntityFolder("scene"),s=`${(e.name||"Untitled").replace(/[\\/:"*?<>|]+/g,"")}.md`,a=(0,F.normalizePath)(`${r}/${s}`),{filePath:o,content:l,beats:u,linkedCharacters:c,linkedLocations:d,linkedEvents:f,linkedItems:p,linkedGroups:v,...y}=e;y.sections&&delete y.sections;let _={...y,linkedCharacters:c,linkedLocations:d,linkedEvents:f,linkedItems:p,linkedGroups:v},S=new Set(Object.keys(_)),x=(N=this.settings.customFieldsMode)!=null?N:"flatten",D=en("scene",_,S,{customFieldsMode:x}),E=Object.keys(D).length>0?(0,F.stringifyYaml)(D):"",P=a;if(o&&o!==a){let $=this.app.vault.getAbstractFileByPath(o);$&&$ instanceof F.TFile&&(await this.app.fileManager.renameFile($,a),P=a)}let O=this.app.vault.getAbstractFileByPath(P),A={};if(O&&O instanceof F.TFile)try{let $=await this.app.vault.cachedRead(O);A=tn($)}catch($){console.warn("Error reading existing scene file",$)}let M=u&&Array.isArray(u)?u:void 0,I={Content:l||"",Beats:M&&M.length>0?M.join(`
`):""},H=ds("scene",I),z=O&&O instanceof F.TFile?{...H,...A}:H,U=`---
${E}---

`;if(U+=Object.entries(z).map(([$,B])=>`## ${$}
${B||""}`).join(`

`),U.endsWith(`
`)||(U+=`
`),O&&O instanceof F.TFile?await this.app.vault.modify(O,U):(await this.app.vault.create(P,U),new F.Notice("Note created with standard sections for easy editing.")),e.filePath=P,e.chapterId&&!e.chapterName){let B=(await this.listChapters()).find(Y=>Y.id===e.chapterId);B&&(e.chapterName=B.name)}this.app.metadataCache.trigger("dataview:refresh-views")}async listScenes(){await this.ensureSceneFolder();let e=this.getEntityFolder("scene"),s=this.app.vault.getMarkdownFiles().filter(o=>o.path.startsWith(e+"/")&&o.extension==="md"),a=[];for(let o of s){let l=await this.parseFile(o,{name:""},"scene");l&&a.push(l)}return a.sort((o,l)=>{var p,v;let u=o.chapterId?0:1,c=l.chapterId?0:1;if(u!==c)return u-c;let d=(p=o.priority)!=null?p:Number.MAX_SAFE_INTEGER,f=(v=l.priority)!=null?v:Number.MAX_SAFE_INTEGER;return d!==f?d-f:o.name.localeCompare(l.name)})}async deleteScene(e){let r=this.app.vault.getAbstractFileByPath((0,F.normalizePath)(e));r instanceof F.TFile?(await this.app.vault.trash(r,!0),new F.Notice(`Scene file "${r.basename}" moved to trash.`),this.app.metadataCache.trigger("dataview:refresh-views")):new F.Notice(`Error: Could not find scene file to delete at ${e}`)}getGalleryImages(){return this.settings.galleryData.images||[]}async addGalleryImage(e){let r=Date.now().toString()+Math.random().toString(36).substr(2,9),s={...e,id:r};return this.settings.galleryData.images.push(s),await this.saveSettings(),s}async updateGalleryImage(e){let r=this.settings.galleryData.images,s=r.findIndex(a=>a.id===e.id);s!==-1?(r[s]=e,await this.saveSettings()):(console.error(`Gallery image with id ${e.id} not found for update`),new F.Notice("Error: Gallery image not found for update"))}async deleteGalleryImage(e){let r=this.settings.galleryData.images,s=r.length;this.settings.galleryData.images=r.filter(a=>a.id!==e),this.settings.galleryData.images.length<s?(await this.saveSettings(),new F.Notice("Image removed from gallery")):(console.error(`Gallery image with id ${e} not found for deletion`),new F.Notice("Error: Gallery image not found"))}async createGroup(e,r,s){let a=this.getActiveStory();if(!a)throw new Error("No active story selected");let l={id:Date.now().toString(36)+Math.random().toString(36).substr(2,6),storyId:a.id,name:e,description:r,color:s,members:[]};return this.settings.groups.push(l),await this.saveSettings(),this.emitGroupsChanged(),l}async updateGroup(e,r){let s=this.getActiveStory();if(!s)throw new Error("No active story selected");let a=this.settings.groups.find(o=>o.id===e&&o.storyId===s.id);if(!a)throw new Error("Group not found");r.name!==void 0&&(a.name=r.name),r.description!==void 0&&(a.description=r.description),r.color!==void 0&&(a.color=r.color),await this.saveSettings(),this.emitGroupsChanged()}async deleteGroup(e){let r=this.getActiveStory();if(!r)throw new Error("No active story selected");if(!this.settings.groups.find(a=>a.id===e&&a.storyId===r.id))throw new Error("Group not found");this.settings.groups=this.settings.groups.filter(a=>a.id!==e),await this.removeGroupIdFromAllEntities(e),await this.saveSettings(),this.emitGroupsChanged()}getGroups(){let e=this.getActiveStory();return e?this.settings.groups.filter(r=>r.storyId===e.id):[]}async addMemberToGroup(e,r,s){let a=this.getActiveStory();if(!a)throw new Error("No active story selected");let o=this.settings.groups.find(l=>l.id===e&&l.storyId===a.id);if(!o)throw new Error("Group not found");o.members.some(l=>l.type===r&&l.id===s)||o.members.push({type:r,id:s}),await this.addGroupIdToEntity(r,s,e),await this.saveSettings(),this.emitGroupsChanged()}async removeMemberFromGroup(e,r,s){let a=this.getActiveStory();if(!a)throw new Error("No active story selected");let o=this.settings.groups.find(l=>l.id===e&&l.storyId===a.id);if(!o)throw new Error("Group not found");o.members=o.members.filter(l=>!(l.type===r&&l.id===s)),await this.removeGroupIdFromEntity(r,s,e),await this.saveSettings(),this.emitGroupsChanged()}async removeGroupIdFromAllEntities(e){let r=await this.listCharacters();for(let l of r)l.groups&&l.groups.includes(e)&&(l.groups=l.groups.filter(u=>u!==e),await this.saveCharacter(l));let s=await this.listLocations();for(let l of s)l.groups&&l.groups.includes(e)&&(l.groups=l.groups.filter(u=>u!==e),await this.saveLocation(l));let a=await this.listEvents();for(let l of a)l.groups&&l.groups.includes(e)&&(l.groups=l.groups.filter(u=>u!==e),await this.saveEvent(l));let o=await this.listPlotItems();for(let l of o)l.groups&&l.groups.includes(e)&&(l.groups=l.groups.filter(u=>u!==e),await this.savePlotItem(l))}async addGroupIdToEntity(e,r,s){if(e==="character"){let o=(await this.listCharacters()).find(l=>(l.id||l.name)===r);o&&(o.groups||(o.groups=[]),o.groups.includes(s)||(o.groups.push(s),await this.saveCharacter(o)))}else if(e==="location"){let o=(await this.listLocations()).find(l=>(l.id||l.name)===r);o&&(o.groups||(o.groups=[]),o.groups.includes(s)||(o.groups.push(s),await this.saveLocation(o)))}else if(e==="event"){let o=(await this.listEvents()).find(l=>(l.id||l.name)===r);o&&(o.groups||(o.groups=[]),o.groups.includes(s)||(o.groups.push(s),await this.saveEvent(o)))}else if(e==="item"){let o=(await this.listPlotItems()).find(l=>(l.id||l.name)===r);o&&(o.groups||(o.groups=[]),o.groups.includes(s)||(o.groups.push(s),await this.savePlotItem(o)))}}async removeGroupIdFromEntity(e,r,s){if(e==="character"){let o=(await this.listCharacters()).find(l=>(l.id||l.name)===r);o&&o.groups&&o.groups.includes(s)&&(o.groups=o.groups.filter(l=>l!==s),await this.saveCharacter(o))}else if(e==="location"){let o=(await this.listLocations()).find(l=>(l.id||l.name)===r);o&&o.groups&&o.groups.includes(s)&&(o.groups=o.groups.filter(l=>l!==s),await this.saveLocation(o))}else if(e==="event"){let o=(await this.listEvents()).find(l=>(l.id||l.name)===r);o&&o.groups&&o.groups.includes(s)&&(o.groups=o.groups.filter(l=>l!==s),await this.saveEvent(o))}else if(e==="item"){let o=(await this.listPlotItems()).find(l=>(l.id||l.name)===r);o&&o.groups&&o.groups.includes(s)&&(o.groups=o.groups.filter(l=>l!==s),await this.savePlotItem(o))}}isRelevantFile(e){try{let r=this.getEntityFolder("character"),s=this.getEntityFolder("location"),a=this.getEntityFolder("event"),o=this.getEntityFolder("item"),l=this.getEntityFolder("reference"),u=this.getEntityFolder("chapter"),c=this.getEntityFolder("scene");return e.startsWith(r+"/")||e.startsWith(s+"/")||e.startsWith(a+"/")||e.startsWith(o+"/")||e.startsWith(l+"/")||e.startsWith(u+"/")||e.startsWith(c+"/")||e.startsWith(this.settings.galleryUploadFolder+"/")}catch(r){return!1}}async loadSettings(){var s;let e=await this.loadData();this.settings=Object.assign({},kr,e);let r=!1;try{if(!this.settings.sanitizedSeedData){let o=(this.settings.stories||[]).map(l=>(l.name||"").toLowerCase()).some(l=>l.includes("test")||/\bmy\s*story\s*1\b/i.test(l));if((((s=this.settings.stories)==null?void 0:s.length)||0)>0&&o){let l=this.app.vault.getMarkdownFiles(),u=this.buildResolver().resolveAll(),c=Object.values(u).map(f=>f.path).filter(f=>!!f).map(f=>(0,F.normalizePath)(f)+"/");l.some(f=>c.some(p=>f.path.startsWith(p)))?(this.settings.sanitizedSeedData=!0,r=!0):(this.settings.stories=[],this.settings.activeStoryId="",this.settings.sanitizedSeedData=!0,r=!0)}else this.settings.sanitizedSeedData||(this.settings.sanitizedSeedData=!0,r=!0)}}catch(a){console.warn("Storyteller Suite: Seed data sanitization skipped due to error",a)}if(!this.settings.stories||this.settings.stories.length===0){let a=this.app.vault,o=(e==null?void 0:e.characterFolder)||"StorytellerSuite/Characters",l=(e==null?void 0:e.locationFolder)||"StorytellerSuite/Locations",u=(e==null?void 0:e.eventFolder)||"StorytellerSuite/Events";if(a.getMarkdownFiles().some(d=>d.path.startsWith(o+"/")||d.path.startsWith(l+"/")||d.path.startsWith(u+"/"))){let d="My First Story",f=await this.createStory(d,"Migrated from previous version"),p=async(v,y)=>{let _=a.getMarkdownFiles().filter(S=>S.path.startsWith(v+"/"));for(let S of _){let x=this.getEntityFolder(y),D=`${x}/${S.name}`;await this.ensureFolder(x),await this.app.fileManager.renameFile(S,D)}};await p(o,"character"),await p(l,"location"),await p(u,"event"),this.settings.activeStoryId=f.id,r=!0}}if(this.settings.groups&&this.settings.groups.length>0){let a=this.settings.groups.filter(o=>!("storyId"in o));if(a.length>0){let o=this.settings.activeStoryId||(this.settings.stories.length>0?this.settings.stories[0].id:null);if(o){for(let l of a)l.storyId=o;r=!0}}}if(this.settings.galleryUploadFolder||(this.settings.galleryUploadFolder=kr.galleryUploadFolder,r=!0),this.settings.galleryData||(this.settings.galleryData=kr.galleryData,r=!0),this.settings.enableCustomEntityFolders===void 0&&(this.settings.enableCustomEntityFolders=kr.enableCustomEntityFolders,r=!0),this.settings.enableOneStoryMode===void 0&&(this.settings.enableOneStoryMode=kr.enableOneStoryMode,r=!0),(!("oneStoryBaseFolder"in this.settings)||!this.settings.oneStoryBaseFolder)&&(this.settings.oneStoryBaseFolder=kr.oneStoryBaseFolder,r=!0),"characterFolderPath"in this.settings||(this.settings.characterFolderPath=kr.characterFolderPath,r=!0),"locationFolderPath"in this.settings||(this.settings.locationFolderPath=kr.locationFolderPath,r=!0),"eventFolderPath"in this.settings||(this.settings.eventFolderPath=kr.eventFolderPath,r=!0),"itemFolderPath"in this.settings||(this.settings.itemFolderPath=kr.itemFolderPath,r=!0),"referenceFolderPath"in this.settings||(this.settings.referenceFolderPath=kr.referenceFolderPath,r=!0),"chapterFolderPath"in this.settings||(this.settings.chapterFolderPath=kr.chapterFolderPath,r=!0),"sceneFolderPath"in this.settings||(this.settings.sceneFolderPath=kr.sceneFolderPath,r=!0),this.settings.groups||(this.settings.groups=[],r=!0),this.settings.language||(this.settings.language=kr.language,r=!0),this.settings.groups.length>0)for(let a of this.settings.groups)"tags"in a||(a.tags=[]);r&&await this.saveSettings()}emitGroupsChanged(){var e;try{let s=(e=this.app.workspace.getLeavesOfType(_i)[0])==null?void 0:e.view;s&&s.activeTabId==="groups"&&typeof s.refreshActiveTab=="function"&&s.refreshActiveTab()}catch(r){}}async saveSettings(){await this.saveData(this.settings)}applyMobilePlatformClasses(){let e=document.body;if(!e){console.warn("Storyteller Suite: document.body is null, cannot apply mobile platform classes");return}let r=fe.getMobileCssClasses();e.classList.remove("is-mobile","is-ios","is-android","is-desktop"),r.forEach(s=>{e.classList.add(s)}),fe.isMobile()&&e.classList.add("storyteller-mobile-enabled")}removeMobilePlatformClasses(){let e=document.body;if(!e){console.warn("Storyteller Suite: document.body is null, cannot remove mobile platform classes");return}e.classList.remove("is-mobile","is-ios","is-android","is-desktop","storyteller-mobile-enabled")}};
/*! Bundled license information:

vis-timeline/standalone/esm/vis-timeline-graph2d.js:
  (*! moment.js *)
  (**
   * vis-timeline and vis-graph2d
   * https://visjs.github.io/vis-timeline/
   *
   * Create a fully customizable, interactive timeline with items and ranges.
   *
   * @version 7.7.0
   * @date    2022-07-10T21:34:08.601Z
   *
   * @copyright (c) 2011-2017 Almende B.V, http://almende.com
   * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
   *
   * @license
   * vis.js is dual licensed under both
   *
   *   1. The Apache 2.0 License
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   *   and
   *
   *   2. The MIT License
   *      http://opensource.org/licenses/MIT
   *
   * vis.js may be distributed under either license.
   *)
  (*! Hammer.JS - v2.0.17-rc - 2019-12-16
   * http://naver.github.io/egjs
   *
   * Forked By Naver egjs
   * Copyright (c) hammerjs
   * Licensed under the MIT license *)
  (*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE *)
*/

/* nosourcemap */